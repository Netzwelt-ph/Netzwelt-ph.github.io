(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const Ig=!1;var Go=Array.isArray,lh=Array.from,yg=Object.defineProperty,xr=Object.getOwnPropertyDescriptor,td=Object.getOwnPropertyDescriptors,Ng=Object.prototype,vg=Array.prototype,oo=Object.getPrototypeOf;function bg(r){return r()}function ea(r){for(var e=0;e<r.length;e++)r[e]()}const Si=2,id=4,ts=8,ah=16,Kt=32,is=64,ur=128,lo=256,ut=512,Ui=1024,$r=2048,mi=4096,Qr=8192,Ag=16384,hh=32768,wg=65536,xg=1<<18,rd=1<<19,kr=Symbol("$state");function nd(r){return r===this.v}function kg(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ch(r){return!kg(r,this.v)}function Rg(r){throw new Error("effect_in_teardown")}function Lg(){throw new Error("effect_in_unowned_derived")}function Cg(r){throw new Error("effect_orphan")}function Dg(){throw new Error("effect_update_depth_exceeded")}function Vg(r){throw new Error("props_invalid_value")}function Ug(){throw new Error("state_descriptors_fixed")}function Mg(){throw new Error("state_prototype_fixed")}function Pg(){throw new Error("state_unsafe_local_read")}function _g(){throw new Error("state_unsafe_mutation")}function Ct(r){return{f:0,v:r,reactions:null,equals:nd,version:0}}function fh(r,e=!1){var i;const t=Ct(r);return e||(t.equals=ch),be!==null&&be.l!==null&&((i=be.l).s??(i.s=[])).push(t),t}function at(r,e=!1){return Bg(fh(r,e))}function Bg(r){return ye!==null&&ye.f&Si&&(si===null?s1([r]):si.push(r)),r}function Dn(r,e){return se(r,Pi(()=>V(r))),e}function se(r,e){return ye!==null&&yh()&&ye.f&(Si|ah)&&(si===null||!si.includes(r))&&_g(),ta(r,e)}function ta(r,e){return r.equals(e)||(r.v=e,r.version=Id(),sd(r,Ui),yh()&&de!==null&&de.f&ut&&!(de.f&Kt)&&(it!==null&&it.includes(r)?($t(de,Ui),Qo(de)):Ci===null?o1([r]):Ci.push(r))),e}function sd(r,e){var t=r.reactions;if(t!==null)for(var i=yh(),n=t.length,s=0;s<n;s++){var o=t[s],l=o.f;l&Ui||!i&&o===de||($t(o,e),l&(ut|ur)&&(l&Si?sd(o,$r):Qo(o)))}}const uh=1,dh=2,od=4,Fg=8,Hg=16,qg=1,zg=2,Wg=4,Gg=8,jg=16,Kg=1,$g=2,Nt=Symbol();let ld=!1;function Ir(r,e=null,t){if(typeof r!="object"||r===null||kr in r)return r;const i=oo(r);if(i!==Ng&&i!==vg)return r;var n=new Map,s=Go(r),o=Ct(0);s&&n.set("length",Ct(r.length));var l;return new Proxy(r,{defineProperty(a,h,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ug();var u=n.get(h);return u===void 0?(u=Ct(c.value),n.set(h,u)):se(u,Ir(c.value,l)),!0},deleteProperty(a,h){var c=n.get(h);if(c===void 0)h in a&&n.set(h,Ct(Nt));else{if(s&&typeof h=="string"){var u=n.get("length"),p=Number(h);Number.isInteger(p)&&p<u.v&&se(u,p)}se(c,Nt),Wc(o)}return!0},get(a,h,c){var S;if(h===kr)return r;var u=n.get(h),p=h in a;if(u===void 0&&(!p||(S=xr(a,h))!=null&&S.writable)&&(u=Ct(Ir(p?a[h]:Nt,l)),n.set(h,u)),u!==void 0){var g=V(u);return g===Nt?void 0:g}return Reflect.get(a,h,c)},getOwnPropertyDescriptor(a,h){var c=Reflect.getOwnPropertyDescriptor(a,h);if(c&&"value"in c){var u=n.get(h);u&&(c.value=V(u))}else if(c===void 0){var p=n.get(h),g=p==null?void 0:p.v;if(p!==void 0&&g!==Nt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(a,h){var g;if(h===kr)return!0;var c=n.get(h),u=c!==void 0&&c.v!==Nt||Reflect.has(a,h);if(c!==void 0||de!==null&&(!u||(g=xr(a,h))!=null&&g.writable)){c===void 0&&(c=Ct(u?Ir(a[h],l):Nt),n.set(h,c));var p=V(c);if(p===Nt)return!1}return u},set(a,h,c,u){var v;var p=n.get(h),g=h in a;if(s&&h==="length")for(var S=c;S<p.v;S+=1){var T=n.get(S+"");T!==void 0?se(T,Nt):S in a&&(T=Ct(Nt),n.set(S+"",T))}p===void 0?(!g||(v=xr(a,h))!=null&&v.writable)&&(p=Ct(void 0),se(p,Ir(c,l)),n.set(h,p)):(g=p.v!==Nt,se(p,Ir(c,l)));var I=Reflect.getOwnPropertyDescriptor(a,h);if(I!=null&&I.set&&I.set.call(u,c),!g){if(s&&typeof h=="string"){var y=n.get("length"),A=Number(h);Number.isInteger(A)&&A>=y.v&&se(y,A+1)}Wc(o)}return!0},ownKeys(a){V(o);var h=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==Nt});for(var[c,u]of n)u.v!==Nt&&!(c in a)&&h.push(c);return h},setPrototypeOf(){Mg()}})}function Wc(r,e=1){se(r,r.v+e)}var ia,ad,hd;function Qg(){if(ia===void 0){ia=window;var r=Element.prototype,e=Node.prototype;ad=xr(e,"firstChild").get,hd=xr(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function jo(r=""){return document.createTextNode(r)}function ao(r){return ad.call(r)}function Ko(r){return hd.call(r)}function te(r,e){return ao(r)}function Vn(r,e){{var t=ao(r);return t instanceof Comment&&t.data===""?Ko(t):t}}function Le(r,e=1,t=!1){let i=r;for(;e--;)i=Ko(i);return i}function Xg(r){r.textContent=""}function ho(r){var e=Si|Ui;de===null?e|=ur:de.f|=rd;const t={children:null,ctx:be,deps:null,equals:nd,f:e,fn:r,reactions:null,v:null,version:0,parent:de};if(ye!==null&&ye.f&Si){var i=ye;(i.children??(i.children=[])).push(t)}return t}function ph(r){const e=ho(r);return e.equals=ch,e}function cd(r){var e=r.children;if(e!==null){r.children=null;for(var t=0;t<e.length;t+=1){var i=e[t];i.f&Si?mh(i):dr(i)}}}function fd(r){var e,t=de;li(r.parent);try{cd(r),e=yd(r)}finally{li(t)}return e}function ud(r){var e=fd(r),t=(vr||r.f&ur)&&r.deps!==null?$r:ut;$t(r,t),r.equals(e)||(r.v=e,r.version=Id())}function mh(r){cd(r),Mn(r,0),$t(r,Qr),r.v=r.children=r.deps=r.ctx=r.reactions=null}function dd(r){de===null&&ye===null&&Cg(),ye!==null&&ye.f&ur&&Lg(),Ih&&Rg()}function Jg(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Xr(r,e,t,i=!0){var n=(r&is)!==0,s=de,o={ctx:be,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|Ui,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(t){var l=Rr;try{Gc(!0),rs(o),o.f|=Ag}catch(c){throw dr(o),c}finally{Gc(l)}}else e!==null&&Qo(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&rd)===0;if(!a&&!n&&i&&(s!==null&&Jg(o,s),ye!==null&&ye.f&Si)){var h=ye;(h.children??(h.children=[])).push(o)}return o}function Yg(r){const e=Xr(ts,null,!1);return $t(e,ut),e.teardown=r,e}function co(r){dd();var e=de!==null&&(de.f&Kt)!==0&&be!==null&&!be.m;if(e){var t=be;(t.e??(t.e=[])).push({fn:r,effect:de,reaction:ye})}else{var i=gh(r);return i}}function Zg(r){return dd(),$o(r)}function e1(r){const e=Xr(is,r,!0);return()=>{dr(e)}}function gh(r){return Xr(id,r,!1)}function t1(r,e){var t=be,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=$o(()=>{r(),!i.ran&&(i.ran=!0,se(t.l.r2,!0),Pi(e))})}function i1(){var r=be;$o(()=>{if(V(r.l.r2)){for(var e of r.l.r1){var t=e.effect;t.f&ut&&$t(t,$r),Jr(t)&&rs(t),e.ran=!1}r.l.r2.v=!1}})}function $o(r){return Xr(ts,r,!0)}function nt(r){return Sh(r)}function Sh(r,e=0){return Xr(ts|ah|e,r,!0)}function Un(r,e=!0){return Xr(ts|Kt,r,!0,e)}function pd(r){var e=r.teardown;if(e!==null){const t=Ih,i=ye;jc(!0),Mi(null);try{e.call(null)}finally{jc(t),Mi(i)}}}function md(r){var e=r.deriveds;if(e!==null){r.deriveds=null;for(var t=0;t<e.length;t+=1)mh(e[t])}}function gd(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var i=t.next;dr(t,e),t=i}}function r1(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Kt||dr(e),e=t}}function dr(r,e=!0){var t=!1;if((e||r.f&xg)&&r.nodes_start!==null){for(var i=r.nodes_start,n=r.nodes_end;i!==null;){var s=i===n?null:Ko(i);i.remove(),i=s}t=!0}md(r),gd(r,e&&!t),Mn(r,0),$t(r,Qr);var o=r.transitions;if(o!==null)for(const a of o)a.stop();pd(r);var l=r.parent;l!==null&&l.first!==null&&Sd(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.parent=r.fn=r.nodes_start=r.nodes_end=null}function Sd(r){var e=r.parent,t=r.prev,i=r.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===r&&(e.first=i),e.last===r&&(e.last=t))}function ra(r,e){var t=[];Eh(r,t,!0),Ed(t,()=>{dr(r),e&&e()})}function Ed(r,e){var t=r.length;if(t>0){var i=()=>--t||e();for(var n of r)n.out(i)}else e()}function Eh(r,e,t){if(!(r.f&mi)){if(r.f^=mi,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var i=r.first;i!==null;){var n=i.next,s=(i.f&hh)!==0||(i.f&Kt)!==0;Eh(i,e,s?t:!1),i=n}}}function fo(r){Td(r,!0)}function Td(r,e){if(r.f&mi){r.f^=mi,Jr(r)&&rs(r);for(var t=r.first;t!==null;){var i=t.next,n=(t.f&hh)!==0||(t.f&Kt)!==0;Td(t,n?e:!1),t=i}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let na=!1,sa=[];function n1(){na=!1;const r=sa.slice();sa=[],ea(r)}function Th(r){na||(na=!0,queueMicrotask(n1)),sa.push(r)}function Oh(r){throw new Error("lifecycle_outside_component")}let uo=!1,Rr=!1,Ih=!1;function Gc(r){Rr=r}function jc(r){Ih=r}let oa=[],An=0;let ye=null;function Mi(r){ye=r}let de=null;function li(r){de=r}let si=null;function s1(r){si=r}let it=null,At=0,Ci=null;function o1(r){Ci=r}let Od=0,vr=!1,be=null;function Id(){return++Od}function yh(){return be!==null&&be.l===null}function Jr(r){var o,l;var e=r.f;if(e&Ui)return!0;if(e&$r){var t=r.deps,i=(e&ur)!==0;if(t!==null){var n;if(e&lo){for(n=0;n<t.length;n++)((o=t[n]).reactions??(o.reactions=[])).push(r);r.f^=lo}for(n=0;n<t.length;n++){var s=t[n];if(Jr(s)&&ud(s),i&&de!==null&&!vr&&!((l=s==null?void 0:s.reactions)!=null&&l.includes(r))&&(s.reactions??(s.reactions=[])).push(r),s.version>r.version)return!0}}i||$t(r,ut)}return!1}function l1(r,e,t){throw r}function yd(r){var p;var e=it,t=At,i=Ci,n=ye,s=vr,o=si,l=be,a=r.f;it=null,At=0,Ci=null,ye=a&(Kt|is)?null:r,vr=!Rr&&(a&ur)!==0,si=null,be=r.ctx;try{var h=(0,r.fn)(),c=r.deps;if(it!==null){var u;if(Mn(r,At),c!==null&&At>0)for(c.length=At+it.length,u=0;u<it.length;u++)c[At+u]=it[u];else r.deps=c=it;if(!vr)for(u=At;u<c.length;u++)((p=c[u]).reactions??(p.reactions=[])).push(r)}else c!==null&&At<c.length&&(Mn(r,At),c.length=At);return h}finally{it=e,At=t,Ci=i,ye=n,vr=s,si=o,be=l}}function a1(r,e){let t=e.reactions;if(t!==null){var i=t.indexOf(r);if(i!==-1){var n=t.length-1;n===0?t=e.reactions=null:(t[i]=t[n],t.pop())}}t===null&&e.f&Si&&(it===null||!it.includes(e))&&($t(e,$r),e.f&(ur|lo)||(e.f^=lo),Mn(e,0))}function Mn(r,e){var t=r.deps;if(t!==null)for(var i=e;i<t.length;i++)a1(r,t[i])}function rs(r){var e=r.f;if(!(e&Qr)){$t(r,ut);var t=de;de=r;try{md(r),e&ah?r1(r):gd(r),pd(r);var i=yd(r);r.teardown=typeof i=="function"?i:null,r.version=Od}catch(n){l1(n)}finally{de=t}}}function h1(){An>1e3&&(An=0,Dg()),An++}function c1(r){var e=r.length;if(e!==0){h1();var t=Rr;Rr=!0;try{for(var i=0;i<e;i++){var n=r[i];n.f&ut||(n.f^=ut);var s=[];Nd(n,s),f1(s)}}finally{Rr=t}}}function f1(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var i=r[t];!(i.f&(Qr|mi))&&Jr(i)&&(rs(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Sd(i):i.fn=null))}}function u1(){if(uo=!1,An>1001)return;const r=oa;oa=[],c1(r),uo||(An=0)}function Qo(r){uo||(uo=!0,queueMicrotask(u1));for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(is|Kt)){if(!(t&ut))return;e.f^=ut}}oa.push(e)}function Nd(r,e){var t=r.first,i=[];e:for(;t!==null;){var n=t.f,s=(n&Kt)!==0,o=s&&(n&ut)!==0;if(!o&&!(n&mi))if(n&ts){s?t.f^=ut:Jr(t)&&rs(t);var l=t.first;if(l!==null){t=l;continue}}else n&id&&i.push(t);var a=t.next;if(a===null){let u=t.parent;for(;u!==null;){if(r===u)break e;var h=u.next;if(h!==null){t=h;continue e}u=u.parent}}t=a}for(var c=0;c<i.length;c++)l=i[c],e.push(l),Nd(l,e)}function V(r){var l;var e=r.f,t=(e&Si)!==0;if(t&&e&Qr){var i=fd(r);return mh(r),i}if(ye!==null){si!==null&&si.includes(r)&&Pg();var n=ye.deps;it===null&&n!==null&&n[At]===r?At++:it===null?it=[r]:it.push(r),Ci!==null&&de!==null&&de.f&ut&&!(de.f&Kt)&&Ci.includes(r)&&($t(de,Ui),Qo(de))}else if(t&&r.deps===null){var s=r,o=s.parent;o!==null&&!((l=o.deriveds)!=null&&l.includes(s))&&(o.deriveds??(o.deriveds=[])).push(s)}return t&&(s=r,Jr(s)&&ud(s)),r.v}function Pi(r){const e=ye;try{return ye=null,r()}finally{ye=e}}const d1=~(Ui|$r|ut);function $t(r,e){r.f=r.f&d1|e}function Yr(r,e=!1,t){be={p:be,c:null,e:null,m:!1,s:r,x:null,l:null},e||(be.l={s:null,u:null,r1:[],r2:Ct(!1)})}function Zr(r){const e=be;if(e!==null){const o=e.e;if(o!==null){var t=de,i=ye;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];li(s.effect),Mi(s.reaction),gh(s.fn)}}finally{li(t),Mi(i)}}be=e.p,e.m=!0}return{}}function En(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(kr in r)la(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&kr in t&&la(t)}}}function la(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let i in r)try{la(r[i],e)}catch{}const t=oo(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=td(t);for(let n in i){const s=i[n].get;if(s)try{s.call(r)}catch{}}}}}const p1=new Set,Kc=new Set;function m1(r,e,t,i){function n(s){if(i.capture||Tn.call(e,s),!s.cancelBubble){var o=ye,l=de;Mi(null),li(null);try{return t.call(this,s)}finally{Mi(o),li(l)}}}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Th(()=>{e.addEventListener(r,n,i)}):e.addEventListener(r,n,i),n}function Vt(r,e,t,i,n){var s={capture:i,passive:n},o=m1(r,e,t,s);(e===document.body||e===window||e===document)&&Yg(()=>{e.removeEventListener(r,o,s)})}function Tn(r){var A;var e=this,t=e.ownerDocument,i=r.type,n=((A=r.composedPath)==null?void 0:A.call(r))||[],s=n[0]||r.target,o=0,l=r.__root;if(l){var a=n.indexOf(l);if(a!==-1&&(e===document||e===window)){r.__root=e;return}var h=n.indexOf(e);if(h===-1)return;a<=h&&(o=a)}if(s=n[o]||r.target,s!==e){yg(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=ye,u=de;Mi(null),li(null);try{for(var p,g=[];s!==null;){var S=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+i];if(T!==void 0&&!s.disabled)if(Go(T)){var[I,...y]=T;I.apply(s,[r,...y])}else T.call(s,r)}catch(v){p?g.push(v):p=v}if(r.cancelBubble||S===e||S===null)break;s=S}if(p){for(let v of g)queueMicrotask(()=>{throw v});throw p}}finally{r.__root=e,delete r.currentTarget,Mi(c),li(u)}}}function g1(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function po(r,e){var t=de;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function De(r,e){var t=(e&Kg)!==0,i=(e&$g)!==0,n,s=!r.startsWith("<!>");return()=>{n===void 0&&(n=g1(s?r:"<!>"+r),t||(n=ao(n)));var o=i?document.importNode(n,!0):n.cloneNode(!0);if(t){var l=ao(o),a=o.lastChild;po(l,a)}else po(o,o);return o}}function S1(r=""){{var e=jo(r+"");return po(e,e),e}}function mo(){var r=document.createDocumentFragment(),e=document.createComment(""),t=jo();return r.append(e,t),po(e,t),r}function Ee(r,e){r!==null&&r.before(e)}const E1=["touchstart","touchmove"];function T1(r){return E1.includes(r)}function kt(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function O1(r,e){return I1(r,e)}const Er=new Map;function I1(r,{target:e,anchor:t,props:i={},events:n,context:s,intro:o=!0}){Qg();var l=new Set,a=u=>{for(var p=0;p<u.length;p++){var g=u[p];if(!l.has(g)){l.add(g);var S=T1(g);e.addEventListener(g,Tn,{passive:S});var T=Er.get(g);T===void 0?(document.addEventListener(g,Tn,{passive:S}),Er.set(g,1)):Er.set(g,T+1)}}};a(lh(p1)),Kc.add(a);var h=void 0,c=e1(()=>{var u=t??e.appendChild(jo());return Un(()=>{if(s){Yr({});var p=be;p.c=s}n&&(i.$$events=n),h=r(u,i)||{},s&&Zr()}),()=>{var S;for(var p of l){e.removeEventListener(p,Tn);var g=Er.get(p);--g===0?(document.removeEventListener(p,Tn),Er.delete(p)):Er.set(p,g)}Kc.delete(a),$c.delete(h),u!==t&&((S=u.parentNode)==null||S.removeChild(u))}});return $c.set(h,c),h}let $c=new WeakMap;function Mt(r,e,t,i=null,n=!1){var s=r,o=null,l=null,a=null,h=n?hh:0;Sh(()=>{a!==(a=!!e())&&(a?(o?fo(o):o=Un(()=>t(s)),l&&ra(l,()=>{l=null})):(l?fo(l):i&&(l=Un(()=>i(s))),o&&ra(o,()=>{o=null})))},h)}let bl=null;function Lr(r,e){return e}function y1(r,e,t,i){for(var n=[],s=e.length,o=0;o<s;o++)Eh(e[o].e,n,!0);var l=s>0&&n.length===0&&t!==null;if(l){var a=t.parentNode;Xg(a),a.append(t),i.clear(),Ni(r,e[0].prev,e[s-1].next)}Ed(n,()=>{for(var h=0;h<s;h++){var c=e[h];l||(i.delete(c.k),Ni(r,c.prev,c.next)),dr(c.e,!l)}})}function Cr(r,e,t,i,n,s=null){var o=r,l={flags:e,items:new Map,first:null},a=(e&od)!==0;if(a){var h=r;o=h.appendChild(jo())}var c=null,u=!1;Sh(()=>{var p=t(),g=Go(p)?p:p==null?[]:lh(p),S=g.length;u&&S===0||(u=S===0,N1(g,l,o,n,e,i),s!==null&&(S===0?c?fo(c):c=Un(()=>s(o)):c!==null&&ra(c,()=>{c=null})),t())})}function N1(r,e,t,i,n,s){var z,$,K,he;var o=(n&Fg)!==0,l=(n&(uh|dh))!==0,a=r.length,h=e.items,c=e.first,u=c,p,g=null,S,T=[],I=[],y,A,v,R;if(o)for(R=0;R<a;R+=1)y=r[R],A=s(y,R),v=h.get(A),v!==void 0&&((z=v.a)==null||z.measure(),(S??(S=new Set)).add(v));for(R=0;R<a;R+=1){if(y=r[R],A=s(y,R),v=h.get(A),v===void 0){var k=u?u.e.nodes_start:t;g=b1(k,e,g,g===null?e.first:g.next,y,A,R,i,n),h.set(A,g),T=[],I=[],u=g.next;continue}if(l&&v1(v,y,R,n),v.e.f&mi&&(fo(v.e),o&&(($=v.a)==null||$.unfix(),(S??(S=new Set)).delete(v))),v!==u){if(p!==void 0&&p.has(v)){if(T.length<I.length){var w=I[0],x;g=w.prev;var q=T[0],H=T[T.length-1];for(x=0;x<T.length;x+=1)Qc(T[x],w,t);for(x=0;x<I.length;x+=1)p.delete(I[x]);Ni(e,q.prev,H.next),Ni(e,g,q),Ni(e,H,w),u=w,g=H,R-=1,T=[],I=[]}else p.delete(v),Qc(v,u,t),Ni(e,v.prev,v.next),Ni(e,v,g===null?e.first:g.next),Ni(e,g,v),g=v;continue}for(T=[],I=[];u!==null&&u.k!==A;)u.e.f&mi||(p??(p=new Set)).add(u),I.push(u),u=u.next;if(u===null)continue;v=u}T.push(v),g=v,u=v.next}if(u!==null||p!==void 0){for(var U=p===void 0?[]:lh(p);u!==null;)u.e.f&mi||U.push(u),u=u.next;var _=U.length;if(_>0){var D=n&od&&a===0?t:null;if(o){for(R=0;R<_;R+=1)(K=U[R].a)==null||K.measure();for(R=0;R<_;R+=1)(he=U[R].a)==null||he.fix()}y1(e,U,D,h)}}o&&Th(()=>{var re;if(S!==void 0)for(v of S)(re=v.a)==null||re.apply()}),de.first=e.first&&e.first.e,de.last=g&&g.e}function v1(r,e,t,i){i&uh&&ta(r.v,e),i&dh?ta(r.i,t):r.i=t}function b1(r,e,t,i,n,s,o,l,a){var h=bl;try{var c=(a&uh)!==0,u=(a&Hg)===0,p=c?u?fh(n):Ct(n):n,g=a&dh?Ct(o):o,S={i:g,v:p,k:s,a:null,e:null,prev:t,next:i};return bl=S,S.e=Un(()=>l(r,p,g),ld),S.e.prev=t&&t.e,S.e.next=i&&i.e,t===null?e.first=S:(t.next=S,t.e.next=S.e),i!==null&&(i.prev=S,i.e.prev=S.e),S}finally{bl=h}}function Qc(r,e,t){for(var i=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==i;){var o=Ko(s);n.before(s),s=o}}function Ni(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Pn(r,e,t,i){var n=r.__attributes??(r.__attributes={});n[e]!==(n[e]=t)&&("__styles"in r&&(r.__styles={}),t==null?r.removeAttribute(e):typeof t!="string"&&A1(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var Xc=new Map;function A1(r){var e=Xc.get(r.nodeName);if(e)return e;Xc.set(r.nodeName,e=[]);for(var t,i=oo(r),n=Element.prototype;n!==i;){t=td(i);for(var s in t)t[s].set&&e.push(s);i=oo(i)}return e}function w1(r,e){var t=r.__className,i=x1(e);(t!==i||ld)&&(e==null?r.removeAttribute("class"):r.className=i,r.__className=i)}function x1(r){return r??""}function Fr(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}function Jc(r,e){return r===e||(r==null?void 0:r[kr])===e}function k1(r={},e,t,i){return gh(()=>{var n,s;return $o(()=>{n=s,s=[],Pi(()=>{r!==t(...s)&&(e(r,...s),n&&Jc(t(...n),r)&&e(null,...n))})}),()=>{Th(()=>{s&&Jc(t(...s),r)&&e(null,...s)})}}),r}function vd(r){return function(...e){var t=e[0];return t.preventDefault(),r==null?void 0:r.apply(this,e)}}function Xo(r=!1){const e=be,t=e.l.u;if(!t)return;let i=()=>En(e.s);if(r){let n=0,s={};const o=ho(()=>{let l=!1;const a=e.s;for(const h in a)a[h]!==s[h]&&(s[h]=a[h],l=!0);return l&&n++,n});i=()=>V(o)}t.b.length&&Zg(()=>{Yc(e,i),ea(t.b)}),co(()=>{const n=Pi(()=>t.m.map(bg));return()=>{for(const s of n)typeof s=="function"&&s()}}),t.a.length&&co(()=>{Yc(e,i),ea(t.a)})}function Yc(r,e){if(r.l.s)for(const t of r.l.s)V(t);e()}let As=!1;function R1(r){var e=As;try{return As=!1,[r(),As]}finally{As=e}}function Zc(r){for(var e=de,t=de;e!==null&&!(e.f&(Kt|is));)e=e.parent;try{return li(e),r()}finally{li(t)}}function pt(r,e,t,i){var w;var n=(t&qg)!==0,s=(t&zg)!==0,o=(t&Gg)!==0,l=(t&jg)!==0,a=!1,h;o?[h,a]=R1(()=>r[e]):h=r[e];var c=(w=xr(r,e))==null?void 0:w.set,u=i,p=!0,g=!1,S=()=>(g=!0,p&&(p=!1,l?u=Pi(i):u=i),u);h===void 0&&i!==void 0&&(c&&s&&Vg(),h=S(),c&&c(h));var T;if(s)T=()=>{var x=r[e];return x===void 0?S():(p=!0,g=!1,x)};else{var I=Zc(()=>(n?ho:ph)(()=>r[e]));I.f|=wg,T=()=>{var x=V(I);return x!==void 0&&(u=void 0),x===void 0?u:x}}if(!(t&Wg))return T;if(c){var y=r.$$legacy;return function(x,q){return arguments.length>0?((!s||!q||y||a)&&c(q?T():x),x):T()}}var A=!1,v=!1,R=fh(h),k=Zc(()=>ho(()=>{var x=T(),q=V(R),H=ye;return A||x===void 0&&H.f&Qr?(A=!1,v=!0,q):(v=!1,R.v=x)}));return n||(k.equals=ch),function(x,q){if(arguments.length>0){const H=q?V(k):s&&o?Ir(x):x;return k.equals(H)||(A=!0,se(R,H),g&&u!==void 0&&(u=H),Pi(()=>V(k))),x}return V(k)}}function Nh(r){be===null&&Oh(),be.l!==null?V1(be).m.push(r):co(()=>{const e=Pi(r);if(typeof e=="function")return e})}function L1(r){be===null&&Oh(),Nh(()=>()=>Pi(r))}function C1(r,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:i})}function D1(){const r=be;return r===null&&Oh(),(e,t,i)=>{var s;const n=(s=r.s.$$events)==null?void 0:s[e];if(n){const o=Go(n)?n.slice():[n],l=C1(e,t,i);for(const a of o)a.call(r.x,l);return!l.defaultPrevented}return!0}}function V1(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const U1="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(U1);function M1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function P1(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var bd={exports:{}};const _1={},B1=Object.freeze(Object.defineProperty({__proto__:null,default:_1},Symbol.toStringTag,{value:"Module"})),Al=P1(B1);(function(r,e){var t=void 0,i=function(n){return t||(t=new Promise(function(s,o){var l=typeof n<"u"?n:{},a=l.onAbort;l.onAbort=function(f){o(new Error(f)),a&&a(f)},l.postRun=l.postRun||[],l.postRun.push(function(){s(l)}),r=void 0;var h;h||(h=typeof l<"u"?l:{});var c=typeof window=="object",u=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";h.onRuntimeInitialized=function(){function f(N,M){switch(typeof M){case"boolean":Tg(N,M?1:0);break;case"number":gg(N,M);break;case"string":Sg(N,M,-1,-1);break;case"object":if(M===null)Hc(N);else if(M.length!=null){var Q=Is(M,Os);Eg(N,Q,M.length,-1),Ns(Q)}else bs(N,"Wrong API use : tried to return a value of an unknown type ("+M+").",-1);break;default:Hc(N)}}function d(N,M){for(var Q=[],ee=0;ee<N;ee+=1){var le=Ot(M+4*ee,"i32"),we=fg(le);if(we===1||we===2)le=mg(le);else if(we===3)le=dg(le);else if(we===4){we=le,le=ug(we),we=pg(we);for(var qt=new Uint8Array(le),Lt=0;Lt<le;Lt+=1)qt[Lt]=H[we+Lt];le=qt}else le=null;Q.push(le)}return Q}function m(N,M){this.Ka=N,this.db=M,this.Ia=1,this.eb=[]}function E(N,M){if(this.db=M,M=sn(N)+1,this.Xa=Nl(M),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");ui(N,U,this.Xa,M),this.cb=this.Xa,this.Ta=this.hb=null}function O(N){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),N!=null){var M=this.filename,Q="/",ee=M;if(Q&&(Q=typeof Q=="string"?Q:ds(Q),ee=M?$i(Q+"/"+M):Q),M=dc(!0,!0),ee=ps(ee,(M!==void 0?M:438)&4095|32768,0),N){if(typeof N=="string"){Q=Array(N.length);for(var le=0,we=N.length;le<we;++le)Q[le]=N.charCodeAt(le);N=Q}gs(ee,M|146),Q=gr(ee,577),Rc(Q,N,0,N.length,0),Sl(Q),gs(ee,M)}}this.handleError(Z(this.filename,b)),this.db=Ot(b,"i32"),zc(this.db),this.Ya={},this.Ma={}}var b=yi(4),L=h.cwrap,Z=L("sqlite3_open","number",["string","number"]),Oe=L("sqlite3_close_v2","number",["number"]),ne=L("sqlite3_exec","number",["number","string","number","number","number"]),Be=L("sqlite3_changes","number",["number"]),je=L("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Mc=L("sqlite3_sql","string",["number"]),$0=L("sqlite3_normalized_sql","string",["number"]),Pc=L("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Q0=L("sqlite3_bind_text","number",["number","number","number","number","number"]),_c=L("sqlite3_bind_blob","number",["number","number","number","number","number"]),X0=L("sqlite3_bind_double","number",["number","number","number"]),J0=L("sqlite3_bind_int","number",["number","number","number"]),Y0=L("sqlite3_bind_parameter_index","number",["number","string"]),Z0=L("sqlite3_step","number",["number"]),eg=L("sqlite3_errmsg","string",["number"]),tg=L("sqlite3_column_count","number",["number"]),ig=L("sqlite3_data_count","number",["number"]),rg=L("sqlite3_column_double","number",["number","number"]),Bc=L("sqlite3_column_text","string",["number","number"]),ng=L("sqlite3_column_blob","number",["number","number"]),sg=L("sqlite3_column_bytes","number",["number","number"]),og=L("sqlite3_column_type","number",["number","number"]),lg=L("sqlite3_column_name","string",["number","number"]),ag=L("sqlite3_reset","number",["number"]),hg=L("sqlite3_clear_bindings","number",["number"]),cg=L("sqlite3_finalize","number",["number"]),Fc=L("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),fg=L("sqlite3_value_type","number",["number"]),ug=L("sqlite3_value_bytes","number",["number"]),dg=L("sqlite3_value_text","string",["number"]),pg=L("sqlite3_value_blob","number",["number"]),mg=L("sqlite3_value_double","number",["number"]),gg=L("sqlite3_result_double","",["number","number"]),Hc=L("sqlite3_result_null","",["number"]),Sg=L("sqlite3_result_text","",["number","string","number","number"]),Eg=L("sqlite3_result_blob","",["number","number","number","number"]),Tg=L("sqlite3_result_int","",["number","number"]),bs=L("sqlite3_result_error","",["number","string","number"]),qc=L("sqlite3_aggregate_context","number",["number","number"]),zc=L("RegisterExtensionFunctions","number",["number"]);m.prototype.bind=function(N){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(N)?this.vb(N):N!=null&&typeof N=="object"?this.wb(N):!0},m.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var N=Z0(this.Ka);switch(N){case 100:return!0;case 101:return!1;default:throw this.db.handleError(N)}},m.prototype.qb=function(N){return N==null&&(N=this.Ia,this.Ia+=1),rg(this.Ka,N)},m.prototype.zb=function(N){if(N==null&&(N=this.Ia,this.Ia+=1),N=Bc(this.Ka,N),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(N)},m.prototype.Ab=function(N){return N==null&&(N=this.Ia,this.Ia+=1),Bc(this.Ka,N)},m.prototype.getBlob=function(N){N==null&&(N=this.Ia,this.Ia+=1);var M=sg(this.Ka,N);N=ng(this.Ka,N);for(var Q=new Uint8Array(M),ee=0;ee<M;ee+=1)Q[ee]=H[N+ee];return Q},m.prototype.get=function(N,M){M=M||{},N!=null&&this.bind(N)&&this.step(),N=[];for(var Q=ig(this.Ka),ee=0;ee<Q;ee+=1)switch(og(this.Ka,ee)){case 1:var le=M.useBigInt?this.zb(ee):this.qb(ee);N.push(le);break;case 2:N.push(this.qb(ee));break;case 3:N.push(this.Ab(ee));break;case 4:N.push(this.getBlob(ee));break;default:N.push(null)}return N},m.prototype.getColumnNames=function(){for(var N=[],M=tg(this.Ka),Q=0;Q<M;Q+=1)N.push(lg(this.Ka,Q));return N},m.prototype.getAsObject=function(N,M){N=this.get(N,M),M=this.getColumnNames();for(var Q={},ee=0;ee<M.length;ee+=1)Q[M[ee]]=N[ee];return Q},m.prototype.getSQL=function(){return Mc(this.Ka)},m.prototype.getNormalizedSQL=function(){return $0(this.Ka)},m.prototype.run=function(N){return N!=null&&this.bind(N),this.step(),this.reset()},m.prototype.mb=function(N,M){M==null&&(M=this.Ia,this.Ia+=1),N=hc(N);var Q=Is(N,Os);this.eb.push(Q),this.db.handleError(Q0(this.Ka,M,Q,N.length-1,0))},m.prototype.ub=function(N,M){M==null&&(M=this.Ia,this.Ia+=1);var Q=Is(N,Os);this.eb.push(Q),this.db.handleError(_c(this.Ka,M,Q,N.length,0))},m.prototype.lb=function(N,M){M==null&&(M=this.Ia,this.Ia+=1),this.db.handleError((N===(N|0)?J0:X0)(this.Ka,M,N))},m.prototype.xb=function(N){N==null&&(N=this.Ia,this.Ia+=1),_c(this.Ka,N,0,0,0)},m.prototype.nb=function(N,M){switch(M==null&&(M=this.Ia,this.Ia+=1),typeof N){case"string":this.mb(N,M);return;case"number":this.lb(N,M);return;case"bigint":this.mb(N.toString(),M);return;case"boolean":this.lb(N+0,M);return;case"object":if(N===null){this.xb(M);return}if(N.length!=null){this.ub(N,M);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+N+")."},m.prototype.wb=function(N){var M=this;return Object.keys(N).forEach(function(Q){var ee=Y0(M.Ka,Q);ee!==0&&M.nb(N[Q],ee)}),!0},m.prototype.vb=function(N){for(var M=0;M<N.length;M+=1)this.nb(N[M],M+1);return!0},m.prototype.reset=function(){return this.freemem(),hg(this.Ka)===0&&ag(this.Ka)===0},m.prototype.freemem=function(){for(var N;(N=this.eb.pop())!==void 0;)Ns(N)},m.prototype.free=function(){this.freemem();var N=cg(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,N},E.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var N=fn(),M=yi(4);nn(b),nn(M);try{this.db.handleError(Pc(this.db.db,this.cb,-1,b,M)),this.cb=Ot(M,"i32");var Q=Ot(b,"i32");return Q===0?(this.fb(),{done:!0}):(this.Ta=new m(Q,this.db),this.db.Ya[Q]=this.Ta,{value:this.Ta,done:!1})}catch(ee){throw this.hb=cl(this.cb),this.fb(),ee}finally{cn(N)}},E.prototype.fb=function(){Ns(this.Xa),this.Xa=null},E.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:cl(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(E.prototype[Symbol.iterator]=function(){return this}),O.prototype.run=function(N,M){if(!this.db)throw"Database closed";if(M){N=this.prepare(N,M);try{N.step()}finally{N.free()}}else this.handleError(ne(this.db,N,0,0,b));return this},O.prototype.exec=function(N,M,Q){if(!this.db)throw"Database closed";var ee=fn(),le=null;try{var we=Il(N),qt=yi(4);for(N=[];Ot(we,"i8")!==0;){nn(b),nn(qt),this.handleError(Pc(this.db,we,-1,b,qt));var Lt=Ot(b,"i32");if(we=Ot(qt,"i32"),Lt!==0){var yt=null;for(le=new m(Lt,this),M!=null&&le.bind(M);le.step();)yt===null&&(yt={columns:le.getColumnNames(),values:[]},N.push(yt)),yt.values.push(le.get(null,Q));le.free()}}return N}catch(zt){throw le&&le.free(),zt}finally{cn(ee)}},O.prototype.each=function(N,M,Q,ee,le){typeof M=="function"&&(ee=Q,Q=M,M=void 0),N=this.prepare(N,M);try{for(;N.step();)Q(N.getAsObject(null,le))}finally{N.free()}if(typeof ee=="function")return ee()},O.prototype.prepare=function(N,M){if(nn(b),this.handleError(je(this.db,N,-1,b,0)),N=Ot(b,"i32"),N===0)throw"Nothing to prepare";var Q=new m(N,this);return M!=null&&Q.bind(M),this.Ya[N]=Q},O.prototype.iterateStatements=function(N){return new E(N,this)},O.prototype.export=function(){Object.values(this.Ya).forEach(function(M){M.free()}),Object.values(this.Ma).forEach(Sr),this.Ma={},this.handleError(Oe(this.db));var N=z0(this.filename);return this.handleError(Z(this.filename,b)),this.db=Ot(b,"i32"),zc(this.db),N},O.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(N){N.free()}),Object.values(this.Ma).forEach(Sr),this.Ma={},this.handleError(Oe(this.db)),vc("/"+this.filename),this.db=null)},O.prototype.handleError=function(N){if(N===0)return null;throw N=eg(this.db),Error(N)},O.prototype.getRowsModified=function(){return Be(this.db)},O.prototype.create_function=function(N,M){Object.prototype.hasOwnProperty.call(this.Ma,N)&&(Sr(this.Ma[N]),delete this.Ma[N]);var Q=ys(function(ee,le,we){le=d(le,we);try{var qt=M.apply(null,le)}catch(Lt){bs(ee,Lt,-1);return}f(ee,qt)},"viii");return this.Ma[N]=Q,this.handleError(Fc(this.db,N,M.length,1,0,Q,0,0,0)),this},O.prototype.create_aggregate=function(N,M){var Q=M.init||function(){return null},ee=M.finalize||function(yt){return yt},le=M.step;if(!le)throw"An aggregate function must have a step function in "+N;var we={};Object.hasOwnProperty.call(this.Ma,N)&&(Sr(this.Ma[N]),delete this.Ma[N]),M=N+"__finalize",Object.hasOwnProperty.call(this.Ma,M)&&(Sr(this.Ma[M]),delete this.Ma[M]);var qt=ys(function(yt,zt,vl){var Yi=qc(yt,1);Object.hasOwnProperty.call(we,Yi)||(we[Yi]=Q()),zt=d(zt,vl),zt=[we[Yi]].concat(zt);try{we[Yi]=le.apply(null,zt)}catch(Og){delete we[Yi],bs(yt,Og,-1)}},"viii"),Lt=ys(function(yt){var zt=qc(yt,1);try{var vl=ee(we[zt])}catch(Yi){delete we[zt],bs(yt,Yi,-1);return}f(yt,vl),delete we[zt]},"vi");return this.Ma[N]=qt,this.Ma[M]=Lt,this.handleError(Fc(this.db,N,le.length-1,1,0,0,qt,Lt,0)),this},h.Database=O};var g=Object.assign({},h),S="./this.program",T="",I,y;if(p){var A=Al,v=Al;T=__dirname+"/",y=f=>(f=ze(f)?new URL(f):v.normalize(f),A.readFileSync(f)),I=f=>(f=ze(f)?new URL(f):v.normalize(f),new Promise((d,m)=>{A.readFile(f,void 0,(E,O)=>{E?m(E):d(O.buffer)})})),!h.thisProgram&&1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.exports=h}else(c||u)&&(u?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),T=T.startsWith("blob:")?"":T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(y=f=>{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),I=f=>ze(f)?new Promise((d,m)=>{var E=new XMLHttpRequest;E.open("GET",f,!0),E.responseType="arraybuffer",E.onload=()=>{(E.status==200||E.status==0&&E.response)&&m(E.response),d(E.status)},E.onerror=d,E.send(null)}):fetch(f,{credentials:"same-origin"}).then(d=>d.ok?d.arrayBuffer():Promise.reject(Error(d.status+" : "+d.url))));var R=h.print||console.log.bind(console),k=h.printErr||console.error.bind(console);Object.assign(h,g),g=null,h.thisProgram&&(S=h.thisProgram);var w;h.wasmBinary&&(w=h.wasmBinary);var x,q=!1,H,U,_,D,z,$,K;function he(){var f=x.buffer;h.HEAP8=H=new Int8Array(f),h.HEAP16=_=new Int16Array(f),h.HEAPU8=U=new Uint8Array(f),h.HEAPU16=new Uint16Array(f),h.HEAP32=D=new Int32Array(f),h.HEAPU32=z=new Uint32Array(f),h.HEAPF32=$=new Float32Array(f),h.HEAPF64=K=new Float64Array(f)}var re=[],Ie=[],ce=[];function ue(){var f=h.preRun.shift();re.unshift(f)}var fe=0,Se=null;function pe(f){var d;throw(d=h.onAbort)==null||d.call(h,f),f="Aborted("+f+")",k(f),q=!0,new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info.")}var Ue=f=>f.startsWith("data:application/octet-stream;base64,"),ze=f=>f.startsWith("file://"),Me;function tt(f){if(f==Me&&w)return new Uint8Array(w);if(y)return y(f);throw"both async and sync fetching of the wasm failed"}function fi(f){return w?Promise.resolve().then(()=>tt(f)):I(f).then(d=>new Uint8Array(d),()=>tt(f))}function ji(f,d,m){return fi(f).then(E=>WebAssembly.instantiate(E,d)).then(m,E=>{k(`failed to asynchronously prepare wasm: ${E}`),pe(E)})}function cs(f,d){var m=Me;w||typeof WebAssembly.instantiateStreaming!="function"||Ue(m)||ze(m)||p||typeof fetch!="function"?ji(m,f,d):fetch(m,{credentials:"same-origin"}).then(E=>WebAssembly.instantiateStreaming(E,f).then(d,function(O){return k(`wasm streaming compile failed: ${O}`),k("falling back to ArrayBuffer instantiation"),ji(m,f,d)}))}var Y,Ae,Ki=f=>{for(;0<f.length;)f.shift()(h)};function Ot(f,d="i8"){switch(d.endsWith("*")&&(d="*"),d){case"i1":return H[f];case"i8":return H[f];case"i16":return _[f>>1];case"i32":return D[f>>2];case"i64":pe("to do getValue(i64) use WASM_BIGINT");case"float":return $[f>>2];case"double":return K[f>>3];case"*":return z[f>>2];default:pe(`invalid type for getValue: ${d}`)}}function nn(f){var d="i32";switch(d.endsWith("*")&&(d="*"),d){case"i1":H[f]=0;break;case"i8":H[f]=0;break;case"i16":_[f>>1]=0;break;case"i32":D[f>>2]=0;break;case"i64":pe("to do setValue(i64) use WASM_BIGINT");case"float":$[f>>2]=0;break;case"double":K[f>>3]=0;break;case"*":z[f>>2]=0;break;default:pe(`invalid type for setValue: ${d}`)}}var oc=typeof TextDecoder<"u"?new TextDecoder:void 0,_e=(f,d,m)=>{var E=d+m;for(m=d;f[m]&&!(m>=E);)++m;if(16<m-d&&f.buffer&&oc)return oc.decode(f.subarray(d,m));for(E="";d<m;){var O=f[d++];if(O&128){var b=f[d++]&63;if((O&224)==192)E+=String.fromCharCode((O&31)<<6|b);else{var L=f[d++]&63;O=(O&240)==224?(O&15)<<12|b<<6|L:(O&7)<<18|b<<12|L<<6|f[d++]&63,65536>O?E+=String.fromCharCode(O):(O-=65536,E+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else E+=String.fromCharCode(O)}return E},cl=(f,d)=>f?_e(U,f,d):"",lc=(f,d)=>{for(var m=0,E=f.length-1;0<=E;E--){var O=f[E];O==="."?f.splice(E,1):O===".."?(f.splice(E,1),m++):m&&(f.splice(E,1),m--)}if(d)for(;m;m--)f.unshift("..");return f},$i=f=>{var d=f.charAt(0)==="/",m=f.substr(-1)==="/";return(f=lc(f.split("/").filter(E=>!!E),!d).join("/"))||d||(f="."),f&&m&&(f+="/"),(d?"/":"")+f},D0=f=>{var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(f).slice(1);return f=d[0],d=d[1],!f&&!d?".":(d&&(d=d.substr(0,d.length-1)),f+d)},fs=f=>{if(f==="/")return"/";f=$i(f),f=f.replace(/\/$/,"");var d=f.lastIndexOf("/");return d===-1?f:f.substr(d+1)},V0=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return m=>crypto.getRandomValues(m);if(p)try{var f=Al;if(f.randomFillSync)return m=>f.randomFillSync(m);var d=f.randomBytes;return m=>(m.set(d(m.byteLength)),m)}catch{}pe("initRandomDevice")},ac=f=>(ac=V0())(f),us=(...f)=>{for(var d="",m=!1,E=f.length-1;-1<=E&&!m;E--){if(m=0<=E?f[E]:"/",typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!m)return"";d=m+"/"+d,m=m.charAt(0)==="/"}return d=lc(d.split("/").filter(O=>!!O),!m).join("/"),(m?"/":"")+d||"."},fl=[],sn=f=>{for(var d=0,m=0;m<f.length;++m){var E=f.charCodeAt(m);127>=E?d++:2047>=E?d+=2:55296<=E&&57343>=E?(d+=4,++m):d+=3}return d},ui=(f,d,m,E)=>{if(!(0<E))return 0;var O=m;E=m+E-1;for(var b=0;b<f.length;++b){var L=f.charCodeAt(b);if(55296<=L&&57343>=L){var Z=f.charCodeAt(++b);L=65536+((L&1023)<<10)|Z&1023}if(127>=L){if(m>=E)break;d[m++]=L}else{if(2047>=L){if(m+1>=E)break;d[m++]=192|L>>6}else{if(65535>=L){if(m+2>=E)break;d[m++]=224|L>>12}else{if(m+3>=E)break;d[m++]=240|L>>18,d[m++]=128|L>>12&63}d[m++]=128|L>>6&63}d[m++]=128|L&63}}return d[m]=0,m-O};function hc(f,d){var m=Array(sn(f)+1);return f=ui(f,m,0,m.length),d&&(m.length=f),m}var cc=[];function fc(f,d){cc[f]={input:[],output:[],Wa:d},ml(f,U0)}var U0={open(f){var d=cc[f.node.rdev];if(!d)throw new B(43);f.tty=d,f.seekable=!1},close(f){f.tty.Wa.fsync(f.tty)},fsync(f){f.tty.Wa.fsync(f.tty)},read(f,d,m,E){if(!f.tty||!f.tty.Wa.rb)throw new B(60);for(var O=0,b=0;b<E;b++){try{var L=f.tty.Wa.rb(f.tty)}catch{throw new B(29)}if(L===void 0&&O===0)throw new B(6);if(L==null)break;O++,d[m+b]=L}return O&&(f.node.timestamp=Date.now()),O},write(f,d,m,E){if(!f.tty||!f.tty.Wa.ib)throw new B(60);try{for(var O=0;O<E;O++)f.tty.Wa.ib(f.tty,d[m+O])}catch{throw new B(29)}return E&&(f.node.timestamp=Date.now()),O}},M0={rb(){e:{if(!fl.length){var f=null;if(p){var d=Buffer.alloc(256),m=0,E=process.stdin.fd;try{m=A.readSync(E,d,0,256)}catch(O){if(O.toString().includes("EOF"))m=0;else throw O}0<m&&(f=d.slice(0,m).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(f=window.prompt("Input: "),f!==null&&(f+=`
`));if(!f){f=null;break e}fl=hc(f,!0)}f=fl.shift()}return f},ib(f,d){d===null||d===10?(R(_e(f.output,0)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){f.output&&0<f.output.length&&(R(_e(f.output,0)),f.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},P0={ib(f,d){d===null||d===10?(k(_e(f.output,0)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){f.output&&0<f.output.length&&(k(_e(f.output,0)),f.output=[])}};function uc(f,d){var m=f.Ha?f.Ha.length:0;m>=d||(d=Math.max(d,m*(1048576>m?2:1.125)>>>0),m!=0&&(d=Math.max(d,256)),m=f.Ha,f.Ha=new Uint8Array(d),0<f.La&&f.Ha.set(m.subarray(0,f.La),0))}var oe={Pa:null,Qa(){return oe.createNode(null,"/",16895,0)},createNode(f,d,m,E){if((m&61440)===24576||(m&61440)===4096)throw new B(63);return oe.Pa||(oe.Pa={dir:{node:{Oa:oe.Fa.Oa,Na:oe.Fa.Na,lookup:oe.Fa.lookup,$a:oe.Fa.$a,rename:oe.Fa.rename,unlink:oe.Fa.unlink,rmdir:oe.Fa.rmdir,readdir:oe.Fa.readdir,symlink:oe.Fa.symlink},stream:{Sa:oe.Ga.Sa}},file:{node:{Oa:oe.Fa.Oa,Na:oe.Fa.Na},stream:{Sa:oe.Ga.Sa,read:oe.Ga.read,write:oe.Ga.write,kb:oe.Ga.kb,ab:oe.Ga.ab,bb:oe.Ga.bb}},link:{node:{Oa:oe.Fa.Oa,Na:oe.Fa.Na,readlink:oe.Fa.readlink},stream:{}},ob:{node:{Oa:oe.Fa.Oa,Na:oe.Fa.Na},stream:q0}}),m=Sc(f,d,m,E),It(m.mode)?(m.Fa=oe.Pa.dir.node,m.Ga=oe.Pa.dir.stream,m.Ha={}):(m.mode&61440)===32768?(m.Fa=oe.Pa.file.node,m.Ga=oe.Pa.file.stream,m.La=0,m.Ha=null):(m.mode&61440)===40960?(m.Fa=oe.Pa.link.node,m.Ga=oe.Pa.link.stream):(m.mode&61440)===8192&&(m.Fa=oe.Pa.ob.node,m.Ga=oe.Pa.ob.stream),m.timestamp=Date.now(),f&&(f.Ha[d]=m,f.timestamp=m.timestamp),m},Kb(f){return f.Ha?f.Ha.subarray?f.Ha.subarray(0,f.La):new Uint8Array(f.Ha):new Uint8Array(0)},Fa:{Oa(f){var d={};return d.dev=(f.mode&61440)===8192?f.id:1,d.ino=f.id,d.mode=f.mode,d.nlink=1,d.uid=0,d.gid=0,d.rdev=f.rdev,It(f.mode)?d.size=4096:(f.mode&61440)===32768?d.size=f.La:(f.mode&61440)===40960?d.size=f.link.length:d.size=0,d.atime=new Date(f.timestamp),d.mtime=new Date(f.timestamp),d.ctime=new Date(f.timestamp),d.yb=4096,d.blocks=Math.ceil(d.size/d.yb),d},Na(f,d){if(d.mode!==void 0&&(f.mode=d.mode),d.timestamp!==void 0&&(f.timestamp=d.timestamp),d.size!==void 0&&(d=d.size,f.La!=d))if(d==0)f.Ha=null,f.La=0;else{var m=f.Ha;f.Ha=new Uint8Array(d),m&&f.Ha.set(m.subarray(0,Math.min(d,f.La))),f.La=d}},lookup(){throw dl[44]},$a(f,d,m,E){return oe.createNode(f,d,m,E)},rename(f,d,m){if(It(f.mode)){try{var E=Qi(d,m)}catch{}if(E)for(var O in E.Ha)throw new B(55)}delete f.parent.Ha[f.name],f.parent.timestamp=Date.now(),f.name=m,d.Ha[m]=f,d.timestamp=f.parent.timestamp},unlink(f,d){delete f.Ha[d],f.timestamp=Date.now()},rmdir(f,d){var m=Qi(f,d),E;for(E in m.Ha)throw new B(55);delete f.Ha[d],f.timestamp=Date.now()},readdir(f){var d=[".",".."],m;for(m of Object.keys(f.Ha))d.push(m);return d},symlink(f,d,m){return f=oe.createNode(f,d,41471,0),f.link=m,f},readlink(f){if((f.mode&61440)!==40960)throw new B(28);return f.link}},Ga:{read(f,d,m,E,O){var b=f.node.Ha;if(O>=f.node.La)return 0;if(f=Math.min(f.node.La-O,E),8<f&&b.subarray)d.set(b.subarray(O,O+f),m);else for(E=0;E<f;E++)d[m+E]=b[O+E];return f},write(f,d,m,E,O,b){if(d.buffer===H.buffer&&(b=!1),!E)return 0;if(f=f.node,f.timestamp=Date.now(),d.subarray&&(!f.Ha||f.Ha.subarray)){if(b)return f.Ha=d.subarray(m,m+E),f.La=E;if(f.La===0&&O===0)return f.Ha=d.slice(m,m+E),f.La=E;if(O+E<=f.La)return f.Ha.set(d.subarray(m,m+E),O),E}if(uc(f,O+E),f.Ha.subarray&&d.subarray)f.Ha.set(d.subarray(m,m+E),O);else for(b=0;b<E;b++)f.Ha[O+b]=d[m+b];return f.La=Math.max(f.La,O+E),E},Sa(f,d,m){if(m===1?d+=f.position:m===2&&(f.node.mode&61440)===32768&&(d+=f.node.La),0>d)throw new B(28);return d},kb(f,d,m){uc(f.node,d+m),f.node.La=Math.max(f.node.La,d+m)},ab(f,d,m,E,O){if((f.node.mode&61440)!==32768)throw new B(43);if(f=f.node.Ha,O&2||f.buffer!==H.buffer){if((0<m||m+d<f.length)&&(f.subarray?f=f.subarray(m,m+d):f=Array.prototype.slice.call(f,m,m+d)),m=!0,d=65536*Math.ceil(d/65536),(O=Vc(65536,d))?(U.fill(0,O,O+d),d=O):d=0,!d)throw new B(48);H.set(f,d)}else m=!1,d=f.byteOffset;return{Cb:d,tb:m}},bb(f,d,m,E){return oe.Ga.write(f,d,0,E,m,!1),0}}},dc=(f,d)=>{var m=0;return f&&(m|=365),d&&(m|=146),m},ul=null,pc={},on=[],_0=1,Ii=null,mc=!0,B=class{constructor(f){this.name="ErrnoError",this.Ja=f}},dl={},B0=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(f){this.Za.flags=f}get position(){return this.Za.position}set position(f){this.Za.position=f}},F0=class{constructor(f,d,m,E){f||(f=this),this.parent=f,this.Qa=f.Qa,this.Ua=null,this.id=_0++,this.name=d,this.mode=m,this.Fa={},this.Ga={},this.rdev=E}get read(){return(this.mode&365)===365}set read(f){f?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(f){f?this.mode|=146:this.mode&=-147}};function dt(f,d={}){if(f=us(f),!f)return{path:"",node:null};if(d=Object.assign({pb:!0,jb:0},d),8<d.jb)throw new B(32);f=f.split("/").filter(L=>!!L);for(var m=ul,E="/",O=0;O<f.length;O++){var b=O===f.length-1;if(b&&d.parent)break;if(m=Qi(m,f[O]),E=$i(E+"/"+f[O]),m.Ua&&(!b||b&&d.pb)&&(m=m.Ua.root),!b||d.Ra){for(b=0;(m.mode&61440)===40960;)if(m=bc(E),E=us(D0(E),m),m=dt(E,{jb:d.jb+1}).node,40<b++)throw new B(32)}}return{path:E,node:m}}function ds(f){for(var d;;){if(f===f.parent)return f=f.Qa.sb,d?f[f.length-1]!=="/"?`${f}/${d}`:f+d:f;d=d?`${f.name}/${d}`:f.name,f=f.parent}}function pl(f,d){for(var m=0,E=0;E<d.length;E++)m=(m<<5)-m+d.charCodeAt(E)|0;return(f+m>>>0)%Ii.length}function gc(f){var d=pl(f.parent.id,f.name);if(Ii[d]===f)Ii[d]=f.Va;else for(d=Ii[d];d;){if(d.Va===f){d.Va=f.Va;break}d=d.Va}}function Qi(f,d){var m=It(f.mode)?(m=mr(f,"x"))?m:f.Fa.lookup?0:2:54;if(m)throw new B(m);for(m=Ii[pl(f.id,d)];m;m=m.Va){var E=m.name;if(m.parent.id===f.id&&E===d)return m}return f.Fa.lookup(f,d)}function Sc(f,d,m,E){return f=new F0(f,d,m,E),d=pl(f.parent.id,f.name),f.Va=Ii[d],Ii[d]=f}function It(f){return(f&61440)===16384}function Ec(f){var d=["r","w","rw"][f&3];return f&512&&(d+="w"),d}function mr(f,d){if(mc)return 0;if(!d.includes("r")||f.mode&292){if(d.includes("w")&&!(f.mode&146)||d.includes("x")&&!(f.mode&73))return 2}else return 2;return 0}function Tc(f,d){try{return Qi(f,d),20}catch{}return mr(f,"wx")}function Oc(f,d,m){try{var E=Qi(f,d)}catch(O){return O.Ja}if(f=mr(f,"wx"))return f;if(m){if(!It(E.mode))return 54;if(E===E.parent||ds(E)==="/")return 10}else if(It(E.mode))return 31;return 0}function lt(f){if(f=on[f],!f)throw new B(8);return f}function Ic(f,d=-1){if(f=Object.assign(new B0,f),d==-1)e:{for(d=0;4096>=d;d++)if(!on[d])break e;throw new B(33)}return f.fd=d,on[d]=f}function H0(f,d=-1){var m,E;return f=Ic(f,d),(E=(m=f.Ga)==null?void 0:m.Jb)==null||E.call(m,f),f}var q0={open(f){var d,m;f.Ga=pc[f.node.rdev].Ga,(m=(d=f.Ga).open)==null||m.call(d,f)},Sa(){throw new B(70)}};function ml(f,d){pc[f]={Ga:d}}function yc(f,d){var m=d==="/";if(m&&ul)throw new B(10);if(!m&&d){var E=dt(d,{pb:!1});if(d=E.path,E=E.node,E.Ua)throw new B(10);if(!It(E.mode))throw new B(54)}d={type:f,Ob:{},sb:d,Bb:[]},f=f.Qa(d),f.Qa=d,d.root=f,m?ul=f:E&&(E.Ua=d,E.Qa&&E.Qa.Bb.push(d))}function ps(f,d,m){var E=dt(f,{parent:!0}).node;if(f=fs(f),!f||f==="."||f==="..")throw new B(28);var O=Tc(E,f);if(O)throw new B(O);if(!E.Fa.$a)throw new B(63);return E.Fa.$a(E,f,d,m)}function Xt(f,d){return ps(f,(d!==void 0?d:511)&1023|16384,0)}function ms(f,d,m){typeof m>"u"&&(m=d,d=438),ps(f,d|8192,m)}function gl(f,d){if(!us(f))throw new B(44);var m=dt(d,{parent:!0}).node;if(!m)throw new B(44);d=fs(d);var E=Tc(m,d);if(E)throw new B(E);if(!m.Fa.symlink)throw new B(63);m.Fa.symlink(m,d,f)}function Nc(f){var d=dt(f,{parent:!0}).node;f=fs(f);var m=Qi(d,f),E=Oc(d,f,!0);if(E)throw new B(E);if(!d.Fa.rmdir)throw new B(63);if(m.Ua)throw new B(10);d.Fa.rmdir(d,f),gc(m)}function vc(f){var d=dt(f,{parent:!0}).node;if(!d)throw new B(44);f=fs(f);var m=Qi(d,f),E=Oc(d,f,!1);if(E)throw new B(E);if(!d.Fa.unlink)throw new B(63);if(m.Ua)throw new B(10);d.Fa.unlink(d,f),gc(m)}function bc(f){if(f=dt(f).node,!f)throw new B(44);if(!f.Fa.readlink)throw new B(28);return us(ds(f.parent),f.Fa.readlink(f))}function ln(f,d){if(f=dt(f,{Ra:!d}).node,!f)throw new B(44);if(!f.Fa.Oa)throw new B(63);return f.Fa.Oa(f)}function Ac(f){return ln(f,!0)}function gs(f,d){if(f=typeof f=="string"?dt(f,{Ra:!0}).node:f,!f.Fa.Na)throw new B(63);f.Fa.Na(f,{mode:d&4095|f.mode&-4096,timestamp:Date.now()})}function wc(f,d){if(0>d)throw new B(28);if(f=typeof f=="string"?dt(f,{Ra:!0}).node:f,!f.Fa.Na)throw new B(63);if(It(f.mode))throw new B(31);if((f.mode&61440)!==32768)throw new B(28);var m=mr(f,"w");if(m)throw new B(m);f.Fa.Na(f,{size:d,timestamp:Date.now()})}function gr(f,d,m){if(f==="")throw new B(44);if(typeof d=="string"){var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[d];if(typeof E>"u")throw Error(`Unknown file open mode: ${d}`);d=E}if(m=d&64?(typeof m>"u"?438:m)&4095|32768:0,typeof f=="object")var O=f;else{f=$i(f);try{O=dt(f,{Ra:!(d&131072)}).node}catch{}}if(E=!1,d&64)if(O){if(d&128)throw new B(20)}else O=ps(f,m,0),E=!0;if(!O)throw new B(44);if((O.mode&61440)===8192&&(d&=-513),d&65536&&!It(O.mode))throw new B(54);if(!E&&(m=O?(O.mode&61440)===40960?32:It(O.mode)&&(Ec(d)!=="r"||d&512)?31:mr(O,Ec(d)):44))throw new B(m);return d&512&&!E&&wc(O,0),d&=-131713,O=Ic({node:O,path:ds(O),flags:d,seekable:!0,position:0,Ga:O.Ga,Db:[],error:!1}),O.Ga.open&&O.Ga.open(O),!h.logReadFiles||d&1||(El||(El={}),f in El||(El[f]=1)),O}function Sl(f){if(f.fd===null)throw new B(8);f.gb&&(f.gb=null);try{f.Ga.close&&f.Ga.close(f)}catch(d){throw d}finally{on[f.fd]=null}f.fd=null}function xc(f,d,m){if(f.fd===null)throw new B(8);if(!f.seekable||!f.Ga.Sa)throw new B(70);if(m!=0&&m!=1&&m!=2)throw new B(28);f.position=f.Ga.Sa(f,d,m),f.Db=[]}function kc(f,d,m,E,O){if(0>E||0>O)throw new B(28);if(f.fd===null)throw new B(8);if((f.flags&2097155)===1)throw new B(8);if(It(f.node.mode))throw new B(31);if(!f.Ga.read)throw new B(28);var b=typeof O<"u";if(!b)O=f.position;else if(!f.seekable)throw new B(70);return d=f.Ga.read(f,d,m,E,O),b||(f.position+=d),d}function Rc(f,d,m,E,O){if(0>E||0>O)throw new B(28);if(f.fd===null)throw new B(8);if(!(f.flags&2097155))throw new B(8);if(It(f.node.mode))throw new B(31);if(!f.Ga.write)throw new B(28);f.seekable&&f.flags&1024&&xc(f,0,2);var b=typeof O<"u";if(!b)O=f.position;else if(!f.seekable)throw new B(70);return d=f.Ga.write(f,d,m,E,O,void 0),b||(f.position+=d),d}function z0(f){var d,m=gr(f,m||0);f=ln(f).size;var E=new Uint8Array(f);return kc(m,E,0,f,0),d=E,Sl(m),d}var Lc;function an(f,d,m){f=$i("/dev/"+f);var E=dc(!!d,!!m);Cc||(Cc=64);var O=Cc++<<8|0;ml(O,{open(b){b.seekable=!1},close(){var b;(b=m==null?void 0:m.buffer)!=null&&b.length&&m(10)},read(b,L,Z,Oe){for(var ne=0,Be=0;Be<Oe;Be++){try{var je=d()}catch{throw new B(29)}if(je===void 0&&ne===0)throw new B(6);if(je==null)break;ne++,L[Z+Be]=je}return ne&&(b.node.timestamp=Date.now()),ne},write(b,L,Z,Oe){for(var ne=0;ne<Oe;ne++)try{m(L[Z+ne])}catch{throw new B(29)}return Oe&&(b.node.timestamp=Date.now()),ne}}),ms(f,E,O)}var Cc,ke={},El;function Xi(f,d,m){if(d.charAt(0)==="/")return d;if(f=f===-100?"/":lt(f).path,d.length==0){if(!m)throw new B(44);return f}return $i(f+"/"+d)}function Ss(f,d,m){f=f(d),D[m>>2]=f.dev,D[m+4>>2]=f.mode,z[m+8>>2]=f.nlink,D[m+12>>2]=f.uid,D[m+16>>2]=f.gid,D[m+20>>2]=f.rdev,Ae=[f.size>>>0,(Y=f.size,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[m+24>>2]=Ae[0],D[m+28>>2]=Ae[1],D[m+32>>2]=4096,D[m+36>>2]=f.blocks,d=f.atime.getTime();var E=f.mtime.getTime(),O=f.ctime.getTime();return Ae=[Math.floor(d/1e3)>>>0,(Y=Math.floor(d/1e3),1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[m+40>>2]=Ae[0],D[m+44>>2]=Ae[1],z[m+48>>2]=d%1e3*1e3,Ae=[Math.floor(E/1e3)>>>0,(Y=Math.floor(E/1e3),1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[m+56>>2]=Ae[0],D[m+60>>2]=Ae[1],z[m+64>>2]=E%1e3*1e3,Ae=[Math.floor(O/1e3)>>>0,(Y=Math.floor(O/1e3),1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[m+72>>2]=Ae[0],D[m+76>>2]=Ae[1],z[m+80>>2]=O%1e3*1e3,Ae=[f.ino>>>0,(Y=f.ino,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[m+88>>2]=Ae[0],D[m+92>>2]=Ae[1],0}var Es=void 0;function Ts(){var f=D[+Es>>2];return Es+=4,f}var hn=(f,d)=>d+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*d:NaN,W0=[0,31,60,91,121,152,182,213,244,274,305,335],G0=[0,31,59,90,120,151,181,212,243,273,304,334],Tl={},Dc=()=>{if(!Ol){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},d;for(d in Tl)Tl[d]===void 0?delete f[d]:f[d]=Tl[d];var m=[];for(d in f)m.push(`${d}=${f[d]}`);Ol=m}return Ol},Ol,Il=f=>{var d=sn(f)+1,m=yi(d);return ui(f,U,m,d),m},j0=(f,d,m,E)=>{var O={string:ne=>{var Be=0;return ne!=null&&ne!==0&&(Be=Il(ne)),Be},array:ne=>{var Be=yi(ne.length);return H.set(ne,Be),Be}};f=h["_"+f];var b=[],L=0;if(E)for(var Z=0;Z<E.length;Z++){var Oe=O[m[Z]];Oe?(L===0&&(L=fn()),b[Z]=Oe(E[Z])):b[Z]=E[Z]}return m=f(...b),m=function(ne){return L!==0&&cn(L),d==="string"?ne?_e(U,ne):"":d==="boolean"?!!ne:ne}(m)},Os=0,Is=(f,d)=>(d=d==1?yi(f.length):Nl(f.length),f.subarray||f.slice||(f=new Uint8Array(f)),U.set(f,d),d),Ji,yl=[],di,Sr=f=>{Ji.delete(di.get(f)),di.set(f,null),yl.push(f)},ys=(f,d)=>{if(!Ji){Ji=new WeakMap;var m=di.length;if(Ji)for(var E=0;E<0+m;E++){var O=di.get(E);O&&Ji.set(O,E)}}if(m=Ji.get(f)||0)return m;if(yl.length)m=yl.pop();else{try{di.grow(1)}catch(Z){throw Z instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Z}m=di.length-1}try{di.set(m,f)}catch(Z){if(!(Z instanceof TypeError))throw Z;if(typeof WebAssembly.Function=="function"){E=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:d[0]=="v"?[]:[O[d[0]]]},L=1;L<d.length;++L)b.parameters.push(O[d[L]]);d=new E(b,f)}else{for(E=[1],O=d.slice(0,1),d=d.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},E.push(96),L=d.length,128>L?E.push(L):E.push(L%128|128,L>>7),L=0;L<d.length;++L)E.push(b[d[L]]);O=="v"?E.push(0):E.push(1,b[O]),d=[0,97,115,109,1,0,0,0,1],O=E.length,128>O?d.push(O):d.push(O%128|128,O>>7),d.push(...E),d.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),d=new WebAssembly.Module(new Uint8Array(d)),d=new WebAssembly.Instance(d,{e:{f}}).exports.f}di.set(m,d)}return Ji.set(f,m),m};[44].forEach(f=>{dl[f]=new B(f),dl[f].stack="<generic error, no stack>"}),Ii=Array(4096),yc(oe,"/"),Xt("/tmp"),Xt("/home"),Xt("/home/web_user"),function(){Xt("/dev"),ml(259,{read:()=>0,write:(E,O,b,L)=>L}),ms("/dev/null",259),fc(1280,M0),fc(1536,P0),ms("/dev/tty",1280),ms("/dev/tty1",1536);var f=new Uint8Array(1024),d=0,m=()=>(d===0&&(d=ac(f).byteLength),f[--d]);an("random",m),an("urandom",m),Xt("/dev/shm"),Xt("/dev/shm/tmp")}(),function(){Xt("/proc");var f=Xt("/proc/self");Xt("/proc/self/fd"),yc({Qa(){var d=Sc(f,"fd",16895,73);return d.Fa={lookup(m,E){var O=lt(+E);return m={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>O.path}},m.parent=m}},d}},"/proc/self/fd")}();var K0={a:(f,d,m,E)=>{pe(`Assertion failed: ${f?_e(U,f):""}, at: `+[d?d?_e(U,d):"":"unknown filename",m,E?E?_e(U,E):"":"unknown function"])},h:function(f,d){try{return f=f?_e(U,f):"",gs(f,d),0}catch(m){if(typeof ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},H:function(f,d,m){try{if(d=d?_e(U,d):"",d=Xi(f,d),m&-8)return-28;var E=dt(d,{Ra:!0}).node;return E?(f="",m&4&&(f+="r"),m&2&&(f+="w"),m&1&&(f+="x"),f&&mr(E,f)?-2:0):-44}catch(O){if(typeof ke>"u"||O.name!=="ErrnoError")throw O;return-O.Ja}},i:function(f,d){try{var m=lt(f);return gs(m.node,d),0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},g:function(f){try{var d=lt(f).node,m=typeof d=="string"?dt(d,{Ra:!0}).node:d;if(!m.Fa.Na)throw new B(63);return m.Fa.Na(m,{timestamp:Date.now()}),0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},b:function(f,d,m){Es=m;try{var E=lt(f);switch(d){case 0:var O=Ts();if(0>O)break;for(;on[O];)O++;return H0(E,O).fd;case 1:case 2:return 0;case 3:return E.flags;case 4:return O=Ts(),E.flags|=O,0;case 12:return O=Ts(),_[O+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(b){if(typeof ke>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},f:function(f,d){try{var m=lt(f);return Ss(ln,m.path,d)}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},n:function(f,d,m){d=hn(d,m);try{if(isNaN(d))return 61;var E=lt(f);if(!(E.flags&2097155))throw new B(28);return wc(E.node,d),0}catch(O){if(typeof ke>"u"||O.name!=="ErrnoError")throw O;return-O.Ja}},C:function(f,d){try{if(d===0)return-28;var m=sn("/")+1;return d<m?-68:(ui("/",U,f,d),m)}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},F:function(f,d){try{return f=f?_e(U,f):"",Ss(Ac,f,d)}catch(m){if(typeof ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},z:function(f,d,m){try{return d=d?_e(U,d):"",d=Xi(f,d),d=$i(d),d[d.length-1]==="/"&&(d=d.substr(0,d.length-1)),Xt(d,m),0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},E:function(f,d,m,E){try{d=d?_e(U,d):"";var O=E&256;return d=Xi(f,d,E&4096),Ss(O?Ac:ln,d,m)}catch(b){if(typeof ke>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},x:function(f,d,m,E){Es=E;try{d=d?_e(U,d):"",d=Xi(f,d);var O=E?Ts():0;return gr(d,m,O).fd}catch(b){if(typeof ke>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},v:function(f,d,m,E){try{if(d=d?_e(U,d):"",d=Xi(f,d),0>=E)return-28;var O=bc(d),b=Math.min(E,sn(O)),L=H[m+b];return ui(O,U,m,E+1),H[m+b]=L,b}catch(Z){if(typeof ke>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ja}},u:function(f){try{return f=f?_e(U,f):"",Nc(f),0}catch(d){if(typeof ke>"u"||d.name!=="ErrnoError")throw d;return-d.Ja}},G:function(f,d){try{return f=f?_e(U,f):"",Ss(ln,f,d)}catch(m){if(typeof ke>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},r:function(f,d,m){try{return d=d?_e(U,d):"",d=Xi(f,d),m===0?vc(d):m===512?Nc(d):pe("Invalid flags passed to unlinkat"),0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return-E.Ja}},q:function(f,d,m){try{if(d=d?_e(U,d):"",d=Xi(f,d,!0),m){var E=z[m>>2]+4294967296*D[m+4>>2],O=D[m+8>>2];b=1e3*E+O/1e6,m+=16,E=z[m>>2]+4294967296*D[m+4>>2],O=D[m+8>>2],L=1e3*E+O/1e6}else var b=Date.now(),L=b;f=b;var Z=dt(d,{Ra:!0}).node;return Z.Fa.Na(Z,{timestamp:Math.max(f,L)}),0}catch(Oe){if(typeof ke>"u"||Oe.name!=="ErrnoError")throw Oe;return-Oe.Ja}},l:function(f,d,m){f=new Date(1e3*hn(f,d)),D[m>>2]=f.getSeconds(),D[m+4>>2]=f.getMinutes(),D[m+8>>2]=f.getHours(),D[m+12>>2]=f.getDate(),D[m+16>>2]=f.getMonth(),D[m+20>>2]=f.getFullYear()-1900,D[m+24>>2]=f.getDay(),d=f.getFullYear(),D[m+28>>2]=(d%4!==0||d%100===0&&d%400!==0?G0:W0)[f.getMonth()]+f.getDate()-1|0,D[m+36>>2]=-(60*f.getTimezoneOffset()),d=new Date(f.getFullYear(),6,1).getTimezoneOffset();var E=new Date(f.getFullYear(),0,1).getTimezoneOffset();D[m+32>>2]=(d!=E&&f.getTimezoneOffset()==Math.min(E,d))|0},j:function(f,d,m,E,O,b,L,Z){O=hn(O,b);try{if(isNaN(O))return 61;var Oe=lt(E);if(d&2&&!(m&2)&&(Oe.flags&2097155)!==2)throw new B(2);if((Oe.flags&2097155)===1)throw new B(2);if(!Oe.Ga.ab)throw new B(43);var ne=Oe.Ga.ab(Oe,f,O,d,m),Be=ne.Cb;return D[L>>2]=ne.tb,z[Z>>2]=Be,0}catch(je){if(typeof ke>"u"||je.name!=="ErrnoError")throw je;return-je.Ja}},k:function(f,d,m,E,O,b,L){b=hn(b,L);try{var Z=lt(O);if(m&2){if((Z.node.mode&61440)!==32768)throw new B(43);if(!(E&2)){var Oe=U.slice(f,f+d);Z.Ga.bb&&Z.Ga.bb(Z,Oe,b,d,E)}}}catch(ne){if(typeof ke>"u"||ne.name!=="ErrnoError")throw ne;return-ne.Ja}},y:(f,d,m,E)=>{var O=new Date().getFullYear(),b=new Date(O,0,1).getTimezoneOffset();O=new Date(O,6,1).getTimezoneOffset(),z[f>>2]=60*Math.max(b,O),D[d>>2]=+(b!=O),d=L=>{var Z=Math.abs(L);return`UTC${0<=L?"-":"+"}${String(Math.floor(Z/60)).padStart(2,"0")}${String(Z%60).padStart(2,"0")}`},f=d(b),d=d(O),O<b?(ui(f,U,m,17),ui(d,U,E,17)):(ui(f,U,E,17),ui(d,U,m,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:f=>{var d=U.length;if(f>>>=0,2147483648<f)return!1;for(var m=1;4>=m;m*=2){var E=d*(1+.2/m);E=Math.min(E,f+100663296);var O=Math;E=Math.max(f,E);e:{O=(O.min.call(O,2147483648,E+(65536-E%65536)%65536)-x.buffer.byteLength+65535)/65536;try{x.grow(O),he();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(f,d)=>{var m=0;return Dc().forEach((E,O)=>{var b=d+m;for(O=z[f+4*O>>2]=b,b=0;b<E.length;++b)H[O++]=E.charCodeAt(b);H[O]=0,m+=E.length+1}),0},B:(f,d)=>{var m=Dc();z[f>>2]=m.length;var E=0;return m.forEach(O=>E+=O.length+1),z[d>>2]=E,0},e:function(f){try{var d=lt(f);return Sl(d),0}catch(m){if(typeof ke>"u"||m.name!=="ErrnoError")throw m;return m.Ja}},p:function(f,d){try{var m=lt(f);return H[d]=m.tty?2:It(m.mode)?3:(m.mode&61440)===40960?7:4,_[d+2>>1]=0,Ae=[0,(Y=0,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[d+8>>2]=Ae[0],D[d+12>>2]=Ae[1],Ae=[0,(Y=0,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[d+16>>2]=Ae[0],D[d+20>>2]=Ae[1],0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return E.Ja}},w:function(f,d,m,E){try{e:{var O=lt(f);f=d;for(var b,L=d=0;L<m;L++){var Z=z[f>>2],Oe=z[f+4>>2];f+=8;var ne=kc(O,H,Z,Oe,b);if(0>ne){var Be=-1;break e}if(d+=ne,ne<Oe)break;typeof b<"u"&&(b+=ne)}Be=d}return z[E>>2]=Be,0}catch(je){if(typeof ke>"u"||je.name!=="ErrnoError")throw je;return je.Ja}},m:function(f,d,m,E,O){d=hn(d,m);try{if(isNaN(d))return 61;var b=lt(f);return xc(b,d,E),Ae=[b.position>>>0,(Y=b.position,1<=+Math.abs(Y)?0<Y?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],D[O>>2]=Ae[0],D[O+4>>2]=Ae[1],b.gb&&d===0&&E===0&&(b.gb=null),0}catch(L){if(typeof ke>"u"||L.name!=="ErrnoError")throw L;return L.Ja}},D:function(f){var m;try{var d=lt(f);return(m=d.Ga)!=null&&m.fsync?d.Ga.fsync(d):0}catch(E){if(typeof ke>"u"||E.name!=="ErrnoError")throw E;return E.Ja}},t:function(f,d,m,E){try{e:{var O=lt(f);f=d;for(var b,L=d=0;L<m;L++){var Z=z[f>>2],Oe=z[f+4>>2];f+=8;var ne=Rc(O,H,Z,Oe,b);if(0>ne){var Be=-1;break e}d+=ne,typeof b<"u"&&(b+=ne)}Be=d}return z[E>>2]=Be,0}catch(je){if(typeof ke>"u"||je.name!=="ErrnoError")throw je;return je.Ja}}},X=function(){var m;function f(E){var O;return X=E.exports,x=X.I,he(),di=X.K,Ie.unshift(X.J),fe--,(O=h.monitorRunDependencies)==null||O.call(h,fe),fe==0&&Se&&(E=Se,Se=null,E()),X}var d={a:K0};if(fe++,(m=h.monitorRunDependencies)==null||m.call(h,fe),h.instantiateWasm)try{return h.instantiateWasm(d,f)}catch(E){return k(`Module.instantiateWasm callback failed with error: ${E}`),!1}return Me||(Me=Ue("sql-wasm.wasm")?"sql-wasm.wasm":h.locateFile?h.locateFile("sql-wasm.wasm",T):T+"sql-wasm.wasm"),cs(d,function(E){f(E.instance)}),{}}();h._sqlite3_free=f=>(h._sqlite3_free=X.L)(f),h._sqlite3_value_text=f=>(h._sqlite3_value_text=X.M)(f),h._sqlite3_prepare_v2=(f,d,m,E,O)=>(h._sqlite3_prepare_v2=X.N)(f,d,m,E,O),h._sqlite3_step=f=>(h._sqlite3_step=X.O)(f),h._sqlite3_reset=f=>(h._sqlite3_reset=X.P)(f),h._sqlite3_exec=(f,d,m,E,O)=>(h._sqlite3_exec=X.Q)(f,d,m,E,O),h._sqlite3_finalize=f=>(h._sqlite3_finalize=X.R)(f),h._sqlite3_column_name=(f,d)=>(h._sqlite3_column_name=X.S)(f,d),h._sqlite3_column_text=(f,d)=>(h._sqlite3_column_text=X.T)(f,d),h._sqlite3_column_type=(f,d)=>(h._sqlite3_column_type=X.U)(f,d),h._sqlite3_errmsg=f=>(h._sqlite3_errmsg=X.V)(f),h._sqlite3_clear_bindings=f=>(h._sqlite3_clear_bindings=X.W)(f),h._sqlite3_value_blob=f=>(h._sqlite3_value_blob=X.X)(f),h._sqlite3_value_bytes=f=>(h._sqlite3_value_bytes=X.Y)(f),h._sqlite3_value_double=f=>(h._sqlite3_value_double=X.Z)(f),h._sqlite3_value_int=f=>(h._sqlite3_value_int=X._)(f),h._sqlite3_value_type=f=>(h._sqlite3_value_type=X.$)(f),h._sqlite3_result_blob=(f,d,m,E)=>(h._sqlite3_result_blob=X.aa)(f,d,m,E),h._sqlite3_result_double=(f,d)=>(h._sqlite3_result_double=X.ba)(f,d),h._sqlite3_result_error=(f,d,m)=>(h._sqlite3_result_error=X.ca)(f,d,m),h._sqlite3_result_int=(f,d)=>(h._sqlite3_result_int=X.da)(f,d),h._sqlite3_result_int64=(f,d,m)=>(h._sqlite3_result_int64=X.ea)(f,d,m),h._sqlite3_result_null=f=>(h._sqlite3_result_null=X.fa)(f),h._sqlite3_result_text=(f,d,m,E)=>(h._sqlite3_result_text=X.ga)(f,d,m,E),h._sqlite3_aggregate_context=(f,d)=>(h._sqlite3_aggregate_context=X.ha)(f,d),h._sqlite3_column_count=f=>(h._sqlite3_column_count=X.ia)(f),h._sqlite3_data_count=f=>(h._sqlite3_data_count=X.ja)(f),h._sqlite3_column_blob=(f,d)=>(h._sqlite3_column_blob=X.ka)(f,d),h._sqlite3_column_bytes=(f,d)=>(h._sqlite3_column_bytes=X.la)(f,d),h._sqlite3_column_double=(f,d)=>(h._sqlite3_column_double=X.ma)(f,d),h._sqlite3_bind_blob=(f,d,m,E,O)=>(h._sqlite3_bind_blob=X.na)(f,d,m,E,O),h._sqlite3_bind_double=(f,d,m)=>(h._sqlite3_bind_double=X.oa)(f,d,m),h._sqlite3_bind_int=(f,d,m)=>(h._sqlite3_bind_int=X.pa)(f,d,m),h._sqlite3_bind_text=(f,d,m,E,O)=>(h._sqlite3_bind_text=X.qa)(f,d,m,E,O),h._sqlite3_bind_parameter_index=(f,d)=>(h._sqlite3_bind_parameter_index=X.ra)(f,d),h._sqlite3_sql=f=>(h._sqlite3_sql=X.sa)(f),h._sqlite3_normalized_sql=f=>(h._sqlite3_normalized_sql=X.ta)(f),h._sqlite3_changes=f=>(h._sqlite3_changes=X.ua)(f),h._sqlite3_close_v2=f=>(h._sqlite3_close_v2=X.va)(f),h._sqlite3_create_function_v2=(f,d,m,E,O,b,L,Z,Oe)=>(h._sqlite3_create_function_v2=X.wa)(f,d,m,E,O,b,L,Z,Oe),h._sqlite3_open=(f,d)=>(h._sqlite3_open=X.xa)(f,d);var Nl=h._malloc=f=>(Nl=h._malloc=X.ya)(f),Ns=h._free=f=>(Ns=h._free=X.za)(f);h._RegisterExtensionFunctions=f=>(h._RegisterExtensionFunctions=X.Aa)(f);var Vc=(f,d)=>(Vc=X.Ba)(f,d),cn=f=>(cn=X.Ca)(f),yi=f=>(yi=X.Da)(f),fn=()=>(fn=X.Ea)();h.stackSave=()=>fn(),h.stackRestore=f=>cn(f),h.stackAlloc=f=>yi(f),h.cwrap=(f,d,m,E)=>{var O=!m||m.every(b=>b==="number"||b==="boolean");return d!=="string"&&O&&!E?h["_"+f]:(...b)=>j0(f,d,m,b)},h.addFunction=ys,h.removeFunction=Sr,h.UTF8ToString=cl,h.ALLOC_NORMAL=Os,h.allocate=Is,h.allocateUTF8OnStack=Il;var vs;Se=function f(){vs||Uc(),vs||(Se=f)};function Uc(){function f(){var m;if(!vs&&(vs=!0,h.calledRun=!0,!q)){if(h.noFSInit||Lc||(Lc=!0,h.stdin=h.stdin,h.stdout=h.stdout,h.stderr=h.stderr,h.stdin?an("stdin",h.stdin):gl("/dev/tty","/dev/stdin"),h.stdout?an("stdout",null,h.stdout):gl("/dev/tty","/dev/stdout"),h.stderr?an("stderr",null,h.stderr):gl("/dev/tty1","/dev/stderr"),gr("/dev/stdin",0),gr("/dev/stdout",1),gr("/dev/stderr",1)),mc=!1,Ki(Ie),(m=h.onRuntimeInitialized)==null||m.call(h),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var d=h.postRun.shift();ce.unshift(d)}Ki(ce)}}if(!(0<fe)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)ue();Ki(re),0<fe||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),f()},1)):f())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return Uc(),l}),t)};r.exports=i,r.exports.default=i})(bd);var F1=bd.exports;const H1=M1(F1),q1=`
DROP TABLE IF EXISTS OrderDetails;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS Products;
DROP TABLE IF EXISTS Categories;
DROP TABLE IF EXISTS Customers;
DROP TABLE IF EXISTS Employees;
DROP TABLE IF EXISTS Shippers;
DROP TABLE IF EXISTS Suppliers;

CREATE TABLE Categories
(      
    CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,
    CategoryName TEXT,
    Description TEXT
);

CREATE TABLE Customers
(      
    CustomerID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT
);

CREATE TABLE Employees
(
    EmployeeID INTEGER PRIMARY KEY AUTOINCREMENT,
    LastName TEXT,
    FirstName TEXT,
    BirthDate DATE,
    Photo TEXT,
    Notes TEXT
);

CREATE TABLE Shippers(
    ShipperID INTEGER PRIMARY KEY AUTOINCREMENT,
    ShipperName TEXT,
    Phone TEXT
);

CREATE TABLE Suppliers(
    SupplierID INTEGER PRIMARY KEY AUTOINCREMENT,
    SupplierName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT,
    Phone TEXT
);

CREATE TABLE Products(
    ProductID INTEGER PRIMARY KEY AUTOINCREMENT,
    ProductName TEXT,
    SupplierID INTEGER,
    CategoryID INTEGER,
    Unit TEXT,
    Price NUMERIC DEFAULT 0,
	FOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID),
	FOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID)
);

CREATE TABLE Orders(
    OrderID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerID INTEGER,
    EmployeeID INTEGER,
    OrderDate DATETIME,
    ShipperID INTEGER,
    FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID),
    FOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID),
    FOREIGN KEY (ShipperID) REFERENCES Shippers (ShipperID)
);

CREATE TABLE OrderDetails(
    OrderDetailID INTEGER PRIMARY KEY AUTOINCREMENT,
    OrderID INTEGER,
    ProductID INTEGER,
    Quantity INTEGER,
	FOREIGN KEY (OrderID) REFERENCES Orders (OrderID),
	FOREIGN KEY (ProductID) REFERENCES Products (ProductID)
);

INSERT INTO Categories VALUES(1,'Beverages','Soft drinks, coffees, teas, beers, and ales');
INSERT INTO Categories VALUES(2,'Condiments','Sweet and savory sauces, relishes, spreads, and seasonings');
INSERT INTO Categories VALUES(3,'Confections','Desserts, candies, and sweet breads');
INSERT INTO Categories VALUES(4,'Dairy Products','Cheeses');
INSERT INTO Categories VALUES(5,'Grains/Cereals','Breads, crackers, pasta, and cereal');
INSERT INTO Categories VALUES(6,'Meat/Poultry','Prepared meats');
INSERT INTO Categories VALUES(7,'Produce','Dried fruit and bean curd');
INSERT INTO Categories VALUES(8,'Seafood','Seaweed and fish');

INSERT INTO Customers VALUES(1,'Alfreds Futterkiste','Maria Anders','Obere Str. 57','Berlin','12209','Germany');
INSERT INTO Customers VALUES(2,'Ana Trujillo Emparedados y helados','Ana Trujillo','Avda. de la Constitucin 2222','Mxico D.F.','5021','Mexico');
INSERT INTO Customers VALUES(3,'Antonio Moreno Taquera','Antonio Moreno','Mataderos 2312','Mxico D.F.','5023','Mexico');
INSERT INTO Customers VALUES(4,'Around the Horn','Thomas Hardy','120 Hanover Sq.','London','WA1 1DP','UK');
INSERT INTO Customers VALUES(5,'Berglunds snabbkp','Christina Berglund','Berguvsvgen 8','Lule','S-958 22','Sweden');
INSERT INTO Customers VALUES(6,'Blauer See Delikatessen','Hanna Moos','Forsterstr. 57','Mannheim','68306','Germany');
INSERT INTO Customers VALUES(7,'Blondel pre et fils','Frdrique Citeaux','24, place Klber','Strasbourg','67000','France');
INSERT INTO Customers VALUES(8,'Blido Comidas preparadas','Martn Sommer','C/ Araquil, 67','Madrid','28023','Spain');
INSERT INTO Customers VALUES(9,'Bon app''''','Laurence Lebihans','12, rue des Bouchers','Marseille','13008','France');
INSERT INTO Customers VALUES(10,'Bottom-Dollar Marketse','Elizabeth Lincoln','23 Tsawassen Blvd.','Tsawassen','T2F 8M4','Canada');
INSERT INTO Customers VALUES(11,'B''''s Beverages','Victoria Ashworth','Fauntleroy Circus','London','EC2 5NT','UK');
INSERT INTO Customers VALUES(12,'Cactus Comidas para llevar','Patricio Simpson','Cerrito 333','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(13,'Centro comercial Moctezuma','Francisco Chang','Sierras de Granada 9993','Mxico D.F.','5022','Mexico');
INSERT INTO Customers VALUES(14,'Chop-suey Chinese','Yang Wang','Hauptstr. 29','Bern','3012','Switzerland');
INSERT INTO Customers VALUES(15,'Comrcio Mineiro','Pedro Afonso','Av. dos Lusadas, 23','So Paulo','05432-043','Brazil');
INSERT INTO Customers VALUES(16,'Consolidated Holdings','Elizabeth Brown','Berkeley Gardens 12 Brewery','London','WX1 6LT','UK');
INSERT INTO Customers VALUES(17,'Drachenblut Delikatessend','Sven Ottlieb','Walserweg 21','Aachen','52066','Germany');
INSERT INTO Customers VALUES(18,'Du monde entier','Janine Labrune','67, rue des Cinquante Otages','Nantes','44000','France');
INSERT INTO Customers VALUES(19,'Eastern Connection','Ann Devon','35 King George','London','WX3 6FW','UK');
INSERT INTO Customers VALUES(20,'Ernst Handel','Roland Mendel','Kirchgasse 6','Graz','8010','Austria');
INSERT INTO Customers VALUES(21,'Familia Arquibaldo','Aria Cruz','Rua Ors, 92','So Paulo','05442-030','Brazil');
INSERT INTO Customers VALUES(22,'FISSA Fabrica Inter. Salchichas S.A.','Diego Roel','C/ Moralzarzal, 86','Madrid','28034','Spain');
INSERT INTO Customers VALUES(23,'Folies gourmandes','Martine Ranc','184, chausse de Tournai','Lille','59000','France');
INSERT INTO Customers VALUES(24,'Folk och f HB','Maria Larsson','kergatan 24','Brcke','S-844 67','Sweden');
INSERT INTO Customers VALUES(25,'Frankenversand','Peter Franken','Berliner Platz 43','Mnchen','80805','Germany');
INSERT INTO Customers VALUES(26,'France restauration','Carine Schmitt','54, rue Royale','Nantes','44000','France');
INSERT INTO Customers VALUES(27,'Franchi S.p.A.','Paolo Accorti','Via Monte Bianco 34','Torino','10100','Italy');
INSERT INTO Customers VALUES(28,'Furia Bacalhau e Frutos do Mar','Lino Rodriguez','Jardim das rosas n. 32','Lisboa','1675','Portugal');
INSERT INTO Customers VALUES(29,'Galera del gastrnomo','Eduardo Saavedra','Rambla de Catalua, 23','Barcelona','8022','Spain');
INSERT INTO Customers VALUES(30,'Godos Cocina Tpica','Jos Pedro Freyre','C/ Romero, 33','Sevilla','41101','Spain');
INSERT INTO Customers VALUES(31,'Gourmet Lanchonetes','Andr Fonseca','Av. Brasil, 442','Campinas','04876-786','Brazil');
INSERT INTO Customers VALUES(32,'Great Lakes Food Market','Howard Snyder','2732 Baker Blvd.','Eugene','97403','USA');
INSERT INTO Customers VALUES(33,'GROSELLA-Restaurante','Manuel Pereira','5 Ave. Los Palos Grandes','Caracas','1081','Venezuela');
INSERT INTO Customers VALUES(34,'Hanari Carnes','Mario Pontes','Rua do Pao, 67','Rio de Janeiro','05454-876','Brazil');
INSERT INTO Customers VALUES(35,'HILARIN-Abastos','Carlos Hernndez','Carrera 22 con Ave. Carlos Soublette #8-35','San Cristbal','5022','Venezuela');
INSERT INTO Customers VALUES(36,'Hungry Coyote Import Store','Yoshi Latimer','City Center Plaza 516 Main St.','Elgin','97827','USA');
INSERT INTO Customers VALUES(37,'Hungry Owl All-Night Grocers','Patricia McKenna','8 Johnstown Road','Cork','','Ireland');
INSERT INTO Customers VALUES(38,'Island Trading','Helen Bennett','Garden House Crowther Way','Cowes','PO31 7PJ','UK');
INSERT INTO Customers VALUES(39,'Kniglich Essen','Philip Cramer','Maubelstr. 90','Brandenburg','14776','Germany');
INSERT INTO Customers VALUES(40,'La corne d''''abondance','Daniel Tonini','67, avenue de l''''Europe','Versailles','78000','France');
INSERT INTO Customers VALUES(41,'La maison d''''Asie','Annette Roulet','1 rue Alsace-Lorraine','Toulouse','31000','France');
INSERT INTO Customers VALUES(42,'Laughing Bacchus Wine Cellars','Yoshi Tannamuri','1900 Oak St.','Vancouver','V3F 2K1','Canada');
INSERT INTO Customers VALUES(43,'Lazy K Kountry Store','John Steel','12 Orchestra Terrace','Walla Walla','99362','USA');
INSERT INTO Customers VALUES(44,'Lehmanns Marktstand','Renate Messner','Magazinweg 7','Frankfurt a.M.','60528','Germany');
INSERT INTO Customers VALUES(45,'Let''''s Stop N Shop','Jaime Yorres','87 Polk St. Suite 5','San Francisco','94117','USA');
INSERT INTO Customers VALUES(46,'LILA-Supermercado','Carlos Gonzlez','Carrera 52 con Ave. Bolvar #65-98 Llano Largo','Barquisimeto','3508','Venezuela');
INSERT INTO Customers VALUES(47,'LINO-Delicateses','Felipe Izquierdo','Ave. 5 de Mayo Porlamar','I. de Margarita','4980','Venezuela');
INSERT INTO Customers VALUES(48,'Lonesome Pine Restaurant','Fran Wilson','89 Chiaroscuro Rd.','Portland','97219','USA');
INSERT INTO Customers VALUES(49,'Magazzini Alimentari Riuniti','Giovanni Rovelli','Via Ludovico il Moro 22','Bergamo','24100','Italy');
INSERT INTO Customers VALUES(50,'Maison Dewey','Catherine Dewey','Rue Joseph-Bens 532','Bruxelles','B-1180','Belgium');
INSERT INTO Customers VALUES(51,'Mre Paillarde','Jean Fresnire','43 rue St. Laurent','Montral','H1J 1C3','Canada');
INSERT INTO Customers VALUES(52,'Morgenstern Gesundkost','Alexander Feuer','Heerstr. 22','Leipzig','4179','Germany');
INSERT INTO Customers VALUES(53,'North/South','Simon Crowther','South House 300 Queensbridge','London','SW7 1RZ','UK');
INSERT INTO Customers VALUES(54,'Ocano Atlntico Ltda.','Yvonne Moncada','Ing. Gustavo Moncada 8585 Piso 20-A','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(55,'Old World Delicatessen','Rene Phillips','2743 Bering St.','Anchorage','99508','USA');
INSERT INTO Customers VALUES(56,'Ottilies Kseladen','Henriette Pfalzheim','Mehrheimerstr. 369','Kln','50739','Germany');
INSERT INTO Customers VALUES(57,'Paris spcialits','Marie Bertrand','265, boulevard Charonne','Paris','75012','France');
INSERT INTO Customers VALUES(58,'Pericles Comidas clsicas','Guillermo Fernndez','Calle Dr. Jorge Cash 321','Mxico D.F.','5033','Mexico');
INSERT INTO Customers VALUES(59,'Piccolo und mehr','Georg Pipps','Geislweg 14','Salzburg','5020','Austria');
INSERT INTO Customers VALUES(60,'Princesa Isabel Vinhoss','Isabel de Castro','Estrada da sade n. 58','Lisboa','1756','Portugal');
INSERT INTO Customers VALUES(61,'Que Delcia','Bernardo Batista','Rua da Panificadora, 12','Rio de Janeiro','02389-673','Brazil');
INSERT INTO Customers VALUES(62,'Queen Cozinha','Lcia Carvalho','Alameda dos Canrios, 891','So Paulo','05487-020','Brazil');
INSERT INTO Customers VALUES(63,'QUICK-Stop','Horst Kloss','Taucherstrae 10','Cunewalde','1307','Germany');
INSERT INTO Customers VALUES(64,'Rancho grande','Sergio Gutirrez','Av. del Libertador 900','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(65,'Rattlesnake Canyon Grocery','Paula Wilson','2817 Milton Dr.','Albuquerque','87110','USA');
INSERT INTO Customers VALUES(66,'Reggiani Caseifici','Maurizio Moroni','Strada Provinciale 124','Reggio Emilia','42100','Italy');
INSERT INTO Customers VALUES(67,'Ricardo Adocicados','Janete Limeira','Av. Copacabana, 267','Rio de Janeiro','02389-890','Brazil');
INSERT INTO Customers VALUES(68,'Richter Supermarkt','Michael Holz','Grenzacherweg 237','Genve','1203','Switzerland');
INSERT INTO Customers VALUES(69,'Romero y tomillo','Alejandra Camino','Gran Va, 1','Madrid','28001','Spain');
INSERT INTO Customers VALUES(70,'Sant Gourmet','Jonas Bergulfsen','Erling Skakkes gate 78','Stavern','4110','Norway');
INSERT INTO Customers VALUES(71,'Save-a-lot Markets','Jose Pavarotti','187 Suffolk Ln.','Boise','83720','USA');
INSERT INTO Customers VALUES(72,'Seven Seas Imports','Hari Kumar','90 Wadhurst Rd.','London','OX15 4NB','UK');
INSERT INTO Customers VALUES(73,'Simons bistro','Jytte Petersen','Vinbltet 34','Kbenhavn','1734','Denmark');
INSERT INTO Customers VALUES(74,'Spcialits du monde','Dominique Perrier','25, rue Lauriston','Paris','75016','France');
INSERT INTO Customers VALUES(75,'Split Rail Beer & Ale','Art Braunschweiger','P.O. Box 555','Lander','82520','USA');
INSERT INTO Customers VALUES(76,'Suprmes dlices','Pascale Cartrain','Boulevard Tirou, 255','Charleroi','B-6000','Belgium');
INSERT INTO Customers VALUES(77,'The Big Cheese','Liz Nixon','89 Jefferson Way Suite 2','Portland','97201','USA');
INSERT INTO Customers VALUES(78,'The Cracker Box','Liu Wong','55 Grizzly Peak Rd.','Butte','59801','USA');
INSERT INTO Customers VALUES(79,'Toms Spezialitten','Karin Josephs','Luisenstr. 48','Mnster','44087','Germany');
INSERT INTO Customers VALUES(80,'Tortuga Restaurante','Miguel Angel Paolino','Avda. Azteca 123','Mxico D.F.','5033','Mexico');
INSERT INTO Customers VALUES(81,'Tradio Hipermercados','Anabela Domingues','Av. Ins de Castro, 414','So Paulo','05634-030','Brazil');
INSERT INTO Customers VALUES(82,'Trail''''s Head Gourmet Provisioners','Helvetius Nagy','722 DaVinci Blvd.','Kirkland','98034','USA');
INSERT INTO Customers VALUES(83,'Vaffeljernet','Palle Ibsen','Smagslget 45','rhus','8200','Denmark');
INSERT INTO Customers VALUES(84,'Victuailles en stock','Mary Saveley','2, rue du Commerce','Lyon','69004','France');
INSERT INTO Customers VALUES(85,'Vins et alcools Chevalier','Paul Henriot','59 rue de l''''Abbaye','Reims','51100','France');
INSERT INTO Customers VALUES(86,'Die Wandernde Kuh','Rita Mller','Adenauerallee 900','Stuttgart','70563','Germany');
INSERT INTO Customers VALUES(87,'Wartian Herkku','Pirkko Koskitalo','Torikatu 38','Oulu','90110','Finland');
INSERT INTO Customers VALUES(88,'Wellington Importadora','Paula Parente','Rua do Mercado, 12','Resende','08737-363','Brazil');
INSERT INTO Customers VALUES(89,'White Clover Markets','Karl Jablonski','305 - 14th Ave. S. Suite 3B','Seattle','98128','USA');
INSERT INTO Customers VALUES(90,'Wilman Kala','Matti Karttunen','Keskuskatu 45','Helsinki','21240','Finland');
INSERT INTO Customers VALUES(91,'Wolski','Zbyszek','ul. Filtrowa 68','Walla','01-012','Poland');

INSERT INTO Employees VALUES(1,'Davolio','Nancy','1968-12-08','EmpID1.pic','Education includes a BA in psychology from Colorado State University. She also completed (The Art of the Cold Call). Nancy is a member of ''Toastmasters International''.');
INSERT INTO Employees VALUES(2,'Fuller','Andrew','1952-02-19','EmpID2.pic','Andrew received his BTS commercial and a Ph.D. in international marketing from the University of Dallas. He is fluent in French and Italian and reads German. He joined the company as a sales representative, was promoted to sales manager and was then named vice president of sales. Andrew is a member of the Sales Management Roundtable, the Seattle Chamber of Commerce, and the Pacific Rim Importers Association.');
INSERT INTO Employees VALUES(3,'Leverling','Janet','1963-08-30','EmpID3.pic','Janet has a BS degree in chemistry from Boston College). She has also completed a certificate program in food retailing management. Janet was hired as a sales associate and was promoted to sales representative.');
INSERT INTO Employees VALUES(4,'Peacock','Margaret','1958-09-19','EmpID4.pic','Margaret holds a BA in English literature from Concordia College and an MA from the American Institute of Culinary Arts. She was temporarily assigned to the London office before returning to her permanent post in Seattle.');
INSERT INTO Employees VALUES(5,'Buchanan','Steven','1955-03-04','EmpID5.pic','Steven Buchanan graduated from St. Andrews University, Scotland, with a BSC degree. Upon joining the company as a sales representative, he spent 6 months in an orientation program at the Seattle office and then returned to his permanent post in London, where he was promoted to sales manager. Mr. Buchanan has completed the courses ''Successful Telemarketing'' and ''International Sales Management''. He is fluent in French.');
INSERT INTO Employees VALUES(6,'Suyama','Michael','1963-07-02','EmpID6.pic','Michael is a graduate of Sussex University (MA, economics) and the University of California at Los Angeles (MBA, marketing). He has also taken the courses ''Multi-Cultural Selling'' and ''Time Management for the Sales Professional''. He is fluent in Japanese and can read and write French, Portuguese, and Spanish.');
INSERT INTO Employees VALUES(7,'King','Robert','1960-05-29','EmpID7.pic','Robert King served in the Peace Corps and traveled extensively before completing his degree in English at the University of Michigan and then joining the company. After completing a course entitled ''Selling in Europe'', he was transferred to the London office.');
INSERT INTO Employees VALUES(8,'Callahan','Laura','1958-01-09','EmpID8.pic','Laura received a BA in psychology from the University of Washington. She has also completed a course in business French. She reads and writes French.');
INSERT INTO Employees VALUES(9,'Dodsworth','Anne','1969-07-02','EmpID9.pic','Anne has a BA degree in English from St. Lawrence College. She is fluent in French and German.');
INSERT INTO Employees VALUES(10,'West','Adam','1928-09-19','EmpID10.pic','An old chum.');

INSERT INTO Shippers VALUES(1, 'Speedy Express', '(503) 555-9831');
INSERT INTO Shippers VALUES(2, 'United Package', '(503) 555-3199');
INSERT INTO Shippers VALUES(3, 'Federal Shipping', '(503) 555-9931');

INSERT INTO Suppliers VALUES(1,'Exotic Liquid','Charlotte Cooper','49 Gilbert St.','Londona','EC1 4SD','UK','(171) 555-2222');
INSERT INTO Suppliers VALUES(2,'New Orleans Cajun Delights','Shelley Burke','P.O. Box 78934','New Orleans','70117','USA','(100) 555-4822');
INSERT INTO Suppliers VALUES(3,'Grandma Kelly''s Homestead','Regina Murphy','707 Oxford Rd.','Ann Arbor','48104','USA','(313) 555-5735');
INSERT INTO Suppliers VALUES(4,'Tokyo Traders','Yoshi Nagase','9-8 Sekimai Musashino-shi','Tokyo','100','Japan','(03) 3555-5011');
INSERT INTO Suppliers VALUES(5,'Cooperativa de Quesos ''Las Cabras''','Antonio del Valle Saavedra','Calle del Rosal 4','Oviedo','33007','Spain','(98) 598 76 54');
INSERT INTO Suppliers VALUES(6,'Mayumi''s','Mayumi Ohno','92 Setsuko Chuo-ku','Osaka','545','Japan','(06) 431-7877');
INSERT INTO Suppliers VALUES(7,'Pavlova, Ltd.','Ian Devling','74 Rose St. Moonie Ponds','Melbourne','3058','Australia','(03) 444-2343');
INSERT INTO Suppliers VALUES(8,'Specialty Biscuits, Ltd.','Peter Wilson','29 King''s Way','Manchester','M14 GSD','UK','(161) 555-4448');
INSERT INTO Suppliers VALUES(9,'PB Knckebrd AB','Lars Peterson','Kaloadagatan 13','Gteborg','S-345 67','Sweden','031-987 65 43');
INSERT INTO Suppliers VALUES(10,'Refrescos Americanas LTDA','Carlos Diaz','Av. das Americanas 12.890','So Paulo','5442','Brazil','(11) 555 4640');
INSERT INTO Suppliers VALUES(11,'Heli Swaren GmbH & Co. KG','Petra Winkler','Tiergartenstrae 5','Berlin','10785','Germany','(010) 9984510');
INSERT INTO Suppliers VALUES(12,'Plutzer Lebensmittelgromrkte AG','Martin Bein','Bogenallee 51','Frankfurt','60439','Germany','(069) 992755');
INSERT INTO Suppliers VALUES(13,'Nord-Ost-Fisch Handelsgesellschaft mbH','Sven Petersen','Frahmredder 112a','Cuxhaven','27478','Germany','(04721) 8713');
INSERT INTO Suppliers VALUES(14,'Formaggi Fortini s.r.l.','Elio Rossi','Viale Dante, 75','Ravenna','48100','Italy','(0544) 60323');
INSERT INTO Suppliers VALUES(15,'Norske Meierier','Beate Vileid','Hatlevegen 5','Sandvika','1320','Norway','(0)2-953010');
INSERT INTO Suppliers VALUES(16,'Bigfoot Breweries','Cheryl Saylor','3400 - 8th Avenue Suite 210','Bend','97101','USA','(503) 555-9931');
INSERT INTO Suppliers VALUES(17,'Svensk Sjfda AB','Michael Bjrn','Brovallavgen 231','Stockholm','S-123 45','Sweden','08-123 45 67');
INSERT INTO Suppliers VALUES(18,'Aux joyeux ecclsiastiques','Guylne Nodier','203, Rue des Francs-Bourgeois','Paris','75004','France','(1) 03.83.00.68');
INSERT INTO Suppliers VALUES(19,'New England Seafood Cannery','Robb Merchant','Order Processing Dept. 2100 Paul Revere Blvd.','Boston','2134','USA','(617) 555-3267');
INSERT INTO Suppliers VALUES(20,'Leka Trading','Chandra Leka','471 Serangoon Loop, Suite #402','Singapore','512','Singapore','555-8787');
INSERT INTO Suppliers VALUES(21,'Lyngbysild','Niels Petersen','Lyngbysild Fiskebakken 10','Lyngby','2800','Denmark','43844108');
INSERT INTO Suppliers VALUES(22,'Zaanse Snoepfabriek','Dirk Luchte','Verkoop Rijnweg 22','Zaandam','9999 ZZ','Netherlands','(12345) 1212');
INSERT INTO Suppliers VALUES(23,'Karkki Oy','Anne Heikkonen','Valtakatu 12','Lappeenranta','53120','Finland','(953) 10956');
INSERT INTO Suppliers VALUES(24,'G''day, Mate','Wendy Mackenzie','170 Prince Edward Parade Hunter''s Hill','Sydney','2042','Australia','(02) 555-5914');
INSERT INTO Suppliers VALUES(25,'Ma Maison','Jean-Guy Lauzon','2960 Rue St. Laurent','Montral','H1J 1C3','Canada','(514) 555-9022');
INSERT INTO Suppliers VALUES(26,'Pasta Buttini s.r.l.','Giovanni Giudici','Via dei Gelsomini, 153','Salerno','84100','Italy','(089) 6547665');
INSERT INTO Suppliers VALUES(27,'Escargots Nouveaux','Marie Delamare','22, rue H. Voiron','Montceau','71300','France','85.57.00.07');
INSERT INTO Suppliers VALUES(28,'Gai pturage','Eliane Noz','Bat. B 3, rue des Alpes','Annecy','74000','France','38.76.98.06');
INSERT INTO Suppliers VALUES(29,'Forts d''rables','Chantal Goulet','148 rue Chasseur','Ste-Hyacinthe','J2S 7S8','Canada','(514) 555-2955');

INSERT INTO Products VALUES(1,'Chais',1,1,'10 boxes x 20 bags',18.00);
INSERT INTO Products VALUES(2,'Chang',1,1,'24 - 12 oz bottles',19.00);
INSERT INTO Products VALUES(3,'Aniseed Syrup',1,2,'12 - 550 ml bottles',10.00);
INSERT INTO Products VALUES(4,'Chef Anton''s Cajun Seasoning',2,2,'48 - 6 oz jars',22.00);
INSERT INTO Products VALUES(5,'Chef Anton''s Gumbo Mix',2,2,'36 boxes',21.35);
INSERT INTO Products VALUES(6,'Grandma''s Boysenberry Spread',3,2,'12 - 8 oz jars',25.00);
INSERT INTO Products VALUES(7,'Uncle Bob''s Organic Dried Pears',3,7,'12 - 1 lb pkgs.',30.00);
INSERT INTO Products VALUES(8,'Northwoods Cranberry Sauce',3,2,'12 - 12 oz jars',40.00);
INSERT INTO Products VALUES(9,'Mishi Kobe Niku',4,6,'18 - 500 g pkgs.',97.00);
INSERT INTO Products VALUES(10,'Ikura',4,8,'12 - 200 ml jars',31.00);
INSERT INTO Products VALUES(11,'Queso Cabrales',5,4,'1 kg pkg.',21.00);
INSERT INTO Products VALUES(12,'Queso Manchego La Pastora',5,4,'10 - 500 g pkgs.',38.00);
INSERT INTO Products VALUES(13,'Konbu',6,8,'2 kg box',6.00);
INSERT INTO Products VALUES(14,'Tofu',6,7,'40 - 100 g pkgs.',23.25);
INSERT INTO Products VALUES(15,'Genen Shouyu',6,2,'24 - 250 ml bottles',15.50);
INSERT INTO Products VALUES(16,'Pavlova',7,3,'32 - 500 g boxes',17.45);
INSERT INTO Products VALUES(17,'Alice Mutton',7,6,'20 - 1 kg tins',39);
INSERT INTO Products VALUES(18,'Carnarvon Tigers',7,8,'16 kg pkg.',62.50);
INSERT INTO Products VALUES(19,'Teatime Chocolate Biscuits',8,3,'10 boxes x 12 pieces',9.20);
INSERT INTO Products VALUES(20,'Sir Rodney''s Marmalade',8,3,'30 gift boxes',81.00);
INSERT INTO Products VALUES(21,'Sir Rodney''s Scones',8,3,'24 pkgs. x 4 pieces',10.00);
INSERT INTO Products VALUES(22,'Gustaf''s Knckebrd',9,5,'24 - 500 g pkgs.',21.00);
INSERT INTO Products VALUES(23,'Tunnbrd',9,5,'12 - 250 g pkgs.',9.00);
INSERT INTO Products VALUES(24,'Guaran Fantstica',10,1,'12 - 355 ml cans',4.50);
INSERT INTO Products VALUES(25,'NuNuCa Nu-Nougat-Creme',11,3,'20 - 450 g glasses',14.00);
INSERT INTO Products VALUES(26,'Gumbr Gummibrchen',11,3,'100 - 250 g bags',31.23);
INSERT INTO Products VALUES(27,'Schoggi Schokolade',11,3,'100 - 100 g pieces',43.90);
INSERT INTO Products VALUES(28,'Rssle Sauerkraut',12,7,'25 - 825 g cans',45.60);
INSERT INTO Products VALUES(29,'Thringer Rostbratwurst',12,6,'50 bags x 30 sausgs.',123.79);
INSERT INTO Products VALUES(30,'Nord-Ost Matjeshering',13,8,'10 - 200 g glasses',25.89);
INSERT INTO Products VALUES(31,'Gorgonzola Telino',14,4,'12 - 100 g pkgs',12.50);
INSERT INTO Products VALUES(32,'Mascarpone Fabioli',14,4,'24 - 200 g pkgs.',32.00);
INSERT INTO Products VALUES(33,'Geitost',15,4,'500 g',2.50);
INSERT INTO Products VALUES(34,'Sasquatch Ale',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(35,'Steeleye Stout',16,1,'24 - 12 oz bottles',18.00);
INSERT INTO Products VALUES(36,'Inlagd Sill',17,8,'24 - 250 g jars',19.00);
INSERT INTO Products VALUES(37,'Gravad lax',17,8,'12 - 500 g pkgs.',26.00);
INSERT INTO Products VALUES(38,'Cte de Blaye',18,1,'12 - 75 cl bottles',263.50);
INSERT INTO Products VALUES(39,'Chartreuse verte',18,1,'750 cc per bottle',18.00);
INSERT INTO Products VALUES(40,'Boston Crab Meat',19,8,'24 - 4 oz tins',18.40);
INSERT INTO Products VALUES(41,'Jack''s New England Clam Chowder',19,8,'12 - 12 oz cans',9.65);
INSERT INTO Products VALUES(42,'Singaporean Hokkien Fried Mee',20,5,'32 - 1 kg pkgs.',14.00);
INSERT INTO Products VALUES(43,'Ipoh Coffee',20,1,'16 - 500 g tins',46.00);
INSERT INTO Products VALUES(44,'Gula Malacca',20,2,'20 - 2 kg bags',19.45);
INSERT INTO Products VALUES(45,'Rgede sild',21,8,'1k pkg.',9.50);
INSERT INTO Products VALUES(46,'Spegesild',21,8,'4 - 450 g glasses',12.00);
INSERT INTO Products VALUES(47,'Zaanse koeken',22,3,'10 - 4 oz boxes',9.50);
INSERT INTO Products VALUES(48,'Chocolade',22,3,'10 pkgs.',12.75);
INSERT INTO Products VALUES(49,'Maxilaku',23,3,'24 - 50 g pkgs.',20.00);
INSERT INTO Products VALUES(50,'Valkoinen suklaa',23,3,'12 - 100 g bars',16.25);
INSERT INTO Products VALUES(51,'Manjimup Dried Apples',24,7,'50 - 300 g pkgs.',53.00);
INSERT INTO Products VALUES(52,'Filo Mix',24,5,'16 - 2 kg boxes',7.00);
INSERT INTO Products VALUES(53,'Perth Pasties',24,6,'48 pieces',32.80);
INSERT INTO Products VALUES(54,'Tourtire',25,6,'16 pies',7.45);
INSERT INTO Products VALUES(55,'Pt chinois',25,6,'24 boxes x 2 pies',24.00);
INSERT INTO Products VALUES(56,'Gnocchi di nonna Alice',26,5,'24 - 250 g pkgs.',38.00);
INSERT INTO Products VALUES(57,'Ravioli Angelo',26,5,'24 - 250 g pkgs.',19.50);
INSERT INTO Products VALUES(58,'Escargots de Bourgogne',27,8,'24 pieces',13.25);
INSERT INTO Products VALUES(59,'Raclette Courdavault',28,4,'5 kg pkg.',55.00);
INSERT INTO Products VALUES(60,'Camembert Pierrot',28,4,'15 - 300 g rounds',34.00);
INSERT INTO Products VALUES(61,'Sirop d''rable',29,2,'24 - 500 ml bottles',28.50);
INSERT INTO Products VALUES(62,'Tarte au sucre',29,3,'48 pies',49.30);
INSERT INTO Products VALUES(63,'Vegie-spread',7,2,'15 - 625 g jars',43.90);
INSERT INTO Products VALUES(64,'Wimmers gute Semmelkndel',12,5,'20 bags x 4 pieces',33.25);
INSERT INTO Products VALUES(65,'Louisiana Fiery Hot Pepper Sauce',2,2,'32 - 8 oz bottles',21.05);
INSERT INTO Products VALUES(66,'Louisiana Hot Spiced Okra',2,2,'24 - 8 oz jars',17.00);
INSERT INTO Products VALUES(67,'Laughing Lumberjack Lager',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(68,'Scottish Longbreads',8,3,'10 boxes x 8 pieces',12.50);
INSERT INTO Products VALUES(69,'Gudbrandsdalsost',15,4,'10 kg pkg.',36.00);
INSERT INTO Products VALUES(70,'Outback Lager',7,1,'24 - 355 ml bottles',15.00);
INSERT INTO Products VALUES(71,'Fltemysost',15,4,'10 - 500 g pkgs.',21.50);
INSERT INTO Products VALUES(72,'Mozzarella di Giovanni',14,4,'24 - 200 g pkgs.',34.80);
INSERT INTO Products VALUES(73,'Rd Kaviar',17,8,'24 - 150 g jars',15.00);
INSERT INTO Products VALUES(74,'Longlife Tofu',4,7,'5 kg pkg.',10.00);
INSERT INTO Products VALUES(75,'Rhnbru Klosterbier',12,1,'24 - 0.5 l bottles',7.75);
INSERT INTO Products VALUES(76,'Lakkalikri',23,1,'500 ml',18.00);
INSERT INTO Products VALUES(77,'Original Frankfurter grne Soe',12,2,'12 boxes',13.00);

INSERT INTO Orders VALUES(10248,90,5,'1996-07-04',3);
INSERT INTO Orders VALUES(10249,81,6,'1996-07-05',1);
INSERT INTO Orders VALUES(10250,34,4,'1996-07-08',2);
INSERT INTO Orders VALUES(10251,84,3,'1996-07-08',1);
INSERT INTO Orders VALUES(10252,76,4,'1996-07-09',2);
INSERT INTO Orders VALUES(10253,34,3,'1996-07-10',2);
INSERT INTO Orders VALUES(10254,14,5,'1996-07-11',2);
INSERT INTO Orders VALUES(10255,68,9,'1996-07-12',3);
INSERT INTO Orders VALUES(10256,88,3,'1996-07-15',2);
INSERT INTO Orders VALUES(10257,35,4,'1996-07-16',3);
INSERT INTO Orders VALUES(10258,20,1,'1996-07-17',1);
INSERT INTO Orders VALUES(10259,13,4,'1996-07-18',3);
INSERT INTO Orders VALUES(10260,55,4,'1996-07-19',1);
INSERT INTO Orders VALUES(10261,61,4,'1996-07-19',2);
INSERT INTO Orders VALUES(10262,65,8,'1996-07-22',3);
INSERT INTO Orders VALUES(10263,20,9,'1996-07-23',3);
INSERT INTO Orders VALUES(10264,24,6,'1996-07-24',3);
INSERT INTO Orders VALUES(10265,7,2,'1996-07-25',1);
INSERT INTO Orders VALUES(10266,87,3,'1996-07-26',3);
INSERT INTO Orders VALUES(10267,25,4,'1996-07-29',1);
INSERT INTO Orders VALUES(10268,33,8,'1996-07-30',3);
INSERT INTO Orders VALUES(10269,89,5,'1996-07-31',1);
INSERT INTO Orders VALUES(10270,87,1,'1996-08-01',1);
INSERT INTO Orders VALUES(10271,75,6,'1996-08-01',2);
INSERT INTO Orders VALUES(10272,65,6,'1996-08-02',2);
INSERT INTO Orders VALUES(10273,63,3,'1996-08-05',3);
INSERT INTO Orders VALUES(10274,85,6,'1996-08-06',1);
INSERT INTO Orders VALUES(10275,49,1,'1996-08-07',1);
INSERT INTO Orders VALUES(10276,80,8,'1996-08-08',3);
INSERT INTO Orders VALUES(10277,52,2,'1996-08-09',3);
INSERT INTO Orders VALUES(10278,5,8,'1996-08-12',2);
INSERT INTO Orders VALUES(10279,44,8,'1996-08-13',2);
INSERT INTO Orders VALUES(10280,5,2,'1996-08-14',1);
INSERT INTO Orders VALUES(10281,69,4,'1996-08-14',1);
INSERT INTO Orders VALUES(10282,69,4,'1996-08-15',1);
INSERT INTO Orders VALUES(10283,46,3,'1996-08-16',3);
INSERT INTO Orders VALUES(10284,44,4,'1996-08-19',1);
INSERT INTO Orders VALUES(10285,63,1,'1996-08-20',2);
INSERT INTO Orders VALUES(10286,63,8,'1996-08-21',3);
INSERT INTO Orders VALUES(10287,67,8,'1996-08-22',3);
INSERT INTO Orders VALUES(10288,66,4,'1996-08-23',1);
INSERT INTO Orders VALUES(10289,11,7,'1996-08-26',3);
INSERT INTO Orders VALUES(10290,15,8,'1996-08-27',1);
INSERT INTO Orders VALUES(10291,61,6,'1996-08-27',2);
INSERT INTO Orders VALUES(10292,81,1,'1996-08-28',2);
INSERT INTO Orders VALUES(10293,80,1,'1996-08-29',3);
INSERT INTO Orders VALUES(10294,65,4,'1996-08-30',2);
INSERT INTO Orders VALUES(10295,85,2,'1996-09-02',2);
INSERT INTO Orders VALUES(10296,46,6,'1996-09-03',1);
INSERT INTO Orders VALUES(10297,7,5,'1996-09-04',2);
INSERT INTO Orders VALUES(10298,37,6,'1996-09-05',2);
INSERT INTO Orders VALUES(10299,67,4,'1996-09-06',2);
INSERT INTO Orders VALUES(10300,49,2,'1996-09-09',2);
INSERT INTO Orders VALUES(10301,86,8,'1996-09-09',2);
INSERT INTO Orders VALUES(10302,76,4,'1996-09-10',2);
INSERT INTO Orders VALUES(10303,30,7,'1996-09-11',2);
INSERT INTO Orders VALUES(10304,80,1,'1996-09-12',2);
INSERT INTO Orders VALUES(10305,55,8,'1996-09-13',3);
INSERT INTO Orders VALUES(10306,69,1,'1996-09-16',3);
INSERT INTO Orders VALUES(10307,48,2,'1996-09-17',2);
INSERT INTO Orders VALUES(10308,2,7,'1996-09-18',3);
INSERT INTO Orders VALUES(10309,37,3,'1996-09-19',1);
INSERT INTO Orders VALUES(10310,77,8,'1996-09-20',2);
INSERT INTO Orders VALUES(10311,18,1,'1996-09-20',3);
INSERT INTO Orders VALUES(10312,86,2,'1996-09-23',2);
INSERT INTO Orders VALUES(10313,63,2,'1996-09-24',2);
INSERT INTO Orders VALUES(10314,65,1,'1996-09-25',2);
INSERT INTO Orders VALUES(10315,38,4,'1996-09-26',2);
INSERT INTO Orders VALUES(10316,65,1,'1996-09-27',3);
INSERT INTO Orders VALUES(10317,48,6,'1996-09-30',1);
INSERT INTO Orders VALUES(10318,38,8,'1996-10-01',2);
INSERT INTO Orders VALUES(10319,80,7,'1996-10-02',3);
INSERT INTO Orders VALUES(10320,87,5,'1996-10-03',3);
INSERT INTO Orders VALUES(10321,38,3,'1996-10-03',2);
INSERT INTO Orders VALUES(10322,58,7,'1996-10-04',3);
INSERT INTO Orders VALUES(10323,39,4,'1996-10-07',1);
INSERT INTO Orders VALUES(10324,71,9,'1996-10-08',1);
INSERT INTO Orders VALUES(10325,39,1,'1996-10-09',3);
INSERT INTO Orders VALUES(10326,8,4,'1996-10-10',2);
INSERT INTO Orders VALUES(10327,24,2,'1996-10-11',1);
INSERT INTO Orders VALUES(10328,28,4,'1996-10-14',3);
INSERT INTO Orders VALUES(10329,75,4,'1996-10-15',2);
INSERT INTO Orders VALUES(10330,46,3,'1996-10-16',1);
INSERT INTO Orders VALUES(10331,9,9,'1996-10-16',1);
INSERT INTO Orders VALUES(10332,51,3,'1996-10-17',2);
INSERT INTO Orders VALUES(10333,87,5,'1996-10-18',3);
INSERT INTO Orders VALUES(10334,84,8,'1996-10-21',2);
INSERT INTO Orders VALUES(10335,37,7,'1996-10-22',2);
INSERT INTO Orders VALUES(10336,60,7,'1996-10-23',2);
INSERT INTO Orders VALUES(10337,25,4,'1996-10-24',3);
INSERT INTO Orders VALUES(10338,55,4,'1996-10-25',3);
INSERT INTO Orders VALUES(10339,51,2,'1996-10-28',2);
INSERT INTO Orders VALUES(10340,9,1,'1996-10-29',3);
INSERT INTO Orders VALUES(10341,73,7,'1996-10-29',3);
INSERT INTO Orders VALUES(10342,25,4,'1996-10-30',2);
INSERT INTO Orders VALUES(10343,44,4,'1996-10-31',1);
INSERT INTO Orders VALUES(10344,89,4,'1996-11-01',2);
INSERT INTO Orders VALUES(10345,63,2,'1996-11-04',2);
INSERT INTO Orders VALUES(10346,65,3,'1996-11-05',3);
INSERT INTO Orders VALUES(10347,21,4,'1996-11-06',3);
INSERT INTO Orders VALUES(10348,86,4,'1996-11-07',2);
INSERT INTO Orders VALUES(10349,75,7,'1996-11-08',1);
INSERT INTO Orders VALUES(10350,41,6,'1996-11-11',2);
INSERT INTO Orders VALUES(10351,20,1,'1996-11-11',1);
INSERT INTO Orders VALUES(10352,28,3,'1996-11-12',3);
INSERT INTO Orders VALUES(10353,59,7,'1996-11-13',3);
INSERT INTO Orders VALUES(10354,58,8,'1996-11-14',3);
INSERT INTO Orders VALUES(10355,4,6,'1996-11-15',1);
INSERT INTO Orders VALUES(10356,86,6,'1996-11-18',2);
INSERT INTO Orders VALUES(10357,46,1,'1996-11-19',3);
INSERT INTO Orders VALUES(10358,41,5,'1996-11-20',1);
INSERT INTO Orders VALUES(10359,72,5,'1996-11-21',3);
INSERT INTO Orders VALUES(10360,7,4,'1996-11-22',3);
INSERT INTO Orders VALUES(10361,63,1,'1996-11-22',2);
INSERT INTO Orders VALUES(10362,9,3,'1996-11-25',1);
INSERT INTO Orders VALUES(10363,17,4,'1996-11-26',3);
INSERT INTO Orders VALUES(10364,19,1,'1996-11-26',1);
INSERT INTO Orders VALUES(10365,3,3,'1996-11-27',2);
INSERT INTO Orders VALUES(10366,29,8,'1996-11-28',2);
INSERT INTO Orders VALUES(10367,83,7,'1996-11-28',3);
INSERT INTO Orders VALUES(10368,20,2,'1996-11-29',2);
INSERT INTO Orders VALUES(10369,75,8,'1996-12-02',2);
INSERT INTO Orders VALUES(10370,14,6,'1996-12-03',2);
INSERT INTO Orders VALUES(10371,41,1,'1996-12-03',1);
INSERT INTO Orders VALUES(10372,62,5,'1996-12-04',2);
INSERT INTO Orders VALUES(10373,37,4,'1996-12-05',3);
INSERT INTO Orders VALUES(10374,91,1,'1996-12-05',3);
INSERT INTO Orders VALUES(10375,36,3,'1996-12-06',2);
INSERT INTO Orders VALUES(10376,51,1,'1996-12-09',2);
INSERT INTO Orders VALUES(10377,72,1,'1996-12-09',3);
INSERT INTO Orders VALUES(10378,24,5,'1996-12-10',3);
INSERT INTO Orders VALUES(10379,61,2,'1996-12-11',1);
INSERT INTO Orders VALUES(10380,37,8,'1996-12-12',3);
INSERT INTO Orders VALUES(10381,46,3,'1996-12-12',3);
INSERT INTO Orders VALUES(10382,20,4,'1996-12-13',1);
INSERT INTO Orders VALUES(10383,4,8,'1996-12-16',3);
INSERT INTO Orders VALUES(10384,5,3,'1996-12-16',3);
INSERT INTO Orders VALUES(10385,75,1,'1996-12-17',2);
INSERT INTO Orders VALUES(10386,21,9,'1996-12-18',3);
INSERT INTO Orders VALUES(10387,70,1,'1996-12-18',2);
INSERT INTO Orders VALUES(10388,72,2,'1996-12-19',1);
INSERT INTO Orders VALUES(10389,10,4,'1996-12-20',2);
INSERT INTO Orders VALUES(10390,20,6,'1996-12-23',1);
INSERT INTO Orders VALUES(10391,17,3,'1996-12-23',3);
INSERT INTO Orders VALUES(10392,59,2,'1996-12-24',3);
INSERT INTO Orders VALUES(10393,71,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10394,36,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10395,35,6,'1996-12-26',1);
INSERT INTO Orders VALUES(10396,25,1,'1996-12-27',3);
INSERT INTO Orders VALUES(10397,60,5,'1996-12-27',1);
INSERT INTO Orders VALUES(10398,71,2,'1996-12-30',3);
INSERT INTO Orders VALUES(10399,83,8,'1996-12-31',3);
INSERT INTO Orders VALUES(10400,19,1,'1997-01-01',3);
INSERT INTO Orders VALUES(10401,65,1,'1997-01-01',1);
INSERT INTO Orders VALUES(10402,20,8,'1997-01-02',2);
INSERT INTO Orders VALUES(10403,20,4,'1997-01-03',3);
INSERT INTO Orders VALUES(10404,49,2,'1997-01-03',1);
INSERT INTO Orders VALUES(10405,47,1,'1997-01-06',1);
INSERT INTO Orders VALUES(10406,62,7,'1997-01-07',1);
INSERT INTO Orders VALUES(10407,56,2,'1997-01-07',2);
INSERT INTO Orders VALUES(10408,23,8,'1997-01-08',1);
INSERT INTO Orders VALUES(10409,54,3,'1997-01-09',1);
INSERT INTO Orders VALUES(10410,10,3,'1997-01-10',3);
INSERT INTO Orders VALUES(10411,10,9,'1997-01-10',3);
INSERT INTO Orders VALUES(10412,87,8,'1997-01-13',2);
INSERT INTO Orders VALUES(10413,41,3,'1997-01-14',2);
INSERT INTO Orders VALUES(10414,21,2,'1997-01-14',3);
INSERT INTO Orders VALUES(10415,36,3,'1997-01-15',1);
INSERT INTO Orders VALUES(10416,87,8,'1997-01-16',3);
INSERT INTO Orders VALUES(10417,73,4,'1997-01-16',3);
INSERT INTO Orders VALUES(10418,63,4,'1997-01-17',1);
INSERT INTO Orders VALUES(10419,68,4,'1997-01-20',2);
INSERT INTO Orders VALUES(10420,88,3,'1997-01-21',1);
INSERT INTO Orders VALUES(10421,61,8,'1997-01-21',1);
INSERT INTO Orders VALUES(10422,27,2,'1997-01-22',1);
INSERT INTO Orders VALUES(10423,31,6,'1997-01-23',3);
INSERT INTO Orders VALUES(10424,51,7,'1997-01-23',2);
INSERT INTO Orders VALUES(10425,41,6,'1997-01-24',2);
INSERT INTO Orders VALUES(10426,29,4,'1997-01-27',1);
INSERT INTO Orders VALUES(10427,59,4,'1997-01-27',2);
INSERT INTO Orders VALUES(10428,66,7,'1997-01-28',1);
INSERT INTO Orders VALUES(10429,37,3,'1997-01-29',2);
INSERT INTO Orders VALUES(10430,20,4,'1997-01-30',1);
INSERT INTO Orders VALUES(10431,10,4,'1997-01-30',2);
INSERT INTO Orders VALUES(10432,75,3,'1997-01-31',2);
INSERT INTO Orders VALUES(10433,60,3,'1997-02-03',3);
INSERT INTO Orders VALUES(10434,24,3,'1997-02-03',2);
INSERT INTO Orders VALUES(10435,16,8,'1997-02-04',2);
INSERT INTO Orders VALUES(10436,7,3,'1997-02-05',2);
INSERT INTO Orders VALUES(10437,87,8,'1997-02-05',1);
INSERT INTO Orders VALUES(10438,79,3,'1997-02-06',2);
INSERT INTO Orders VALUES(10439,51,6,'1997-02-07',3);
INSERT INTO Orders VALUES(10440,71,4,'1997-02-10',2);
INSERT INTO Orders VALUES(10441,55,3,'1997-02-10',2);
INSERT INTO Orders VALUES(10442,20,3,'1997-02-11',2);
INSERT INTO Orders VALUES(10443,66,8,'1997-02-12',1);

INSERT INTO OrderDetails VALUES(1,10248,11,12);
INSERT INTO OrderDetails VALUES(2,10248,42,10);
INSERT INTO OrderDetails VALUES(3,10248,72,5);
INSERT INTO OrderDetails VALUES(4,10249,14,9);
INSERT INTO OrderDetails VALUES(5,10249,51,40);
INSERT INTO OrderDetails VALUES(6,10250,41,10);
INSERT INTO OrderDetails VALUES(7,10250,51,35);
INSERT INTO OrderDetails VALUES(8,10250,65,15);
INSERT INTO OrderDetails VALUES(9,10251,22,6);
INSERT INTO OrderDetails VALUES(10,10251,57,15);
INSERT INTO OrderDetails VALUES(11,10251,65,20);
INSERT INTO OrderDetails VALUES(12,10252,20,40);
INSERT INTO OrderDetails VALUES(13,10252,33,25);
INSERT INTO OrderDetails VALUES(14,10252,60,40);
INSERT INTO OrderDetails VALUES(15,10253,31,20);
INSERT INTO OrderDetails VALUES(16,10253,39,42);
INSERT INTO OrderDetails VALUES(17,10253,49,40);
INSERT INTO OrderDetails VALUES(18,10254,24,15);
INSERT INTO OrderDetails VALUES(19,10254,55,21);
INSERT INTO OrderDetails VALUES(20,10254,74,21);
INSERT INTO OrderDetails VALUES(21,10255,2,20);
INSERT INTO OrderDetails VALUES(22,10255,16,35);
INSERT INTO OrderDetails VALUES(23,10255,36,25);
INSERT INTO OrderDetails VALUES(24,10255,59,30);
INSERT INTO OrderDetails VALUES(25,10256,53,15);
INSERT INTO OrderDetails VALUES(26,10256,77,12);
INSERT INTO OrderDetails VALUES(27,10257,27,25);
INSERT INTO OrderDetails VALUES(28,10257,39,6);
INSERT INTO OrderDetails VALUES(29,10257,77,15);
INSERT INTO OrderDetails VALUES(30,10258,2,50);
INSERT INTO OrderDetails VALUES(31,10258,5,65);
INSERT INTO OrderDetails VALUES(32,10258,32,6);
INSERT INTO OrderDetails VALUES(33,10259,21,10);
INSERT INTO OrderDetails VALUES(34,10259,37,1);
INSERT INTO OrderDetails VALUES(35,10260,41,16);
INSERT INTO OrderDetails VALUES(36,10260,57,50);
INSERT INTO OrderDetails VALUES(37,10260,62,15);
INSERT INTO OrderDetails VALUES(38,10260,70,21);
INSERT INTO OrderDetails VALUES(39,10261,21,20);
INSERT INTO OrderDetails VALUES(40,10261,35,20);
INSERT INTO OrderDetails VALUES(41,10262,5,12);
INSERT INTO OrderDetails VALUES(42,10262,7,15);
INSERT INTO OrderDetails VALUES(43,10262,56,2);
INSERT INTO OrderDetails VALUES(44,10263,16,60);
INSERT INTO OrderDetails VALUES(45,10263,24,28);
INSERT INTO OrderDetails VALUES(46,10263,30,60);
INSERT INTO OrderDetails VALUES(47,10263,74,36);
INSERT INTO OrderDetails VALUES(48,10264,2,35);
INSERT INTO OrderDetails VALUES(49,10264,41,25);
INSERT INTO OrderDetails VALUES(50,10265,17,30);
INSERT INTO OrderDetails VALUES(51,10265,70,20);
INSERT INTO OrderDetails VALUES(52,10266,12,12);
INSERT INTO OrderDetails VALUES(53,10267,40,50);
INSERT INTO OrderDetails VALUES(54,10267,59,70);
INSERT INTO OrderDetails VALUES(55,10267,76,15);
INSERT INTO OrderDetails VALUES(56,10268,29,10);
INSERT INTO OrderDetails VALUES(57,10268,72,4);
INSERT INTO OrderDetails VALUES(58,10269,33,60);
INSERT INTO OrderDetails VALUES(59,10269,72,20);
INSERT INTO OrderDetails VALUES(60,10270,36,30);
INSERT INTO OrderDetails VALUES(61,10270,43,25);
INSERT INTO OrderDetails VALUES(62,10271,33,24);
INSERT INTO OrderDetails VALUES(63,10272,20,6);
INSERT INTO OrderDetails VALUES(64,10272,31,40);
INSERT INTO OrderDetails VALUES(65,10272,72,24);
INSERT INTO OrderDetails VALUES(66,10273,10,24);
INSERT INTO OrderDetails VALUES(67,10273,31,15);
INSERT INTO OrderDetails VALUES(68,10273,33,20);
INSERT INTO OrderDetails VALUES(69,10273,40,60);
INSERT INTO OrderDetails VALUES(70,10273,76,33);
INSERT INTO OrderDetails VALUES(71,10274,71,20);
INSERT INTO OrderDetails VALUES(72,10274,72,7);
INSERT INTO OrderDetails VALUES(73,10275,24,12);
INSERT INTO OrderDetails VALUES(74,10275,59,6);
INSERT INTO OrderDetails VALUES(75,10276,10,15);
INSERT INTO OrderDetails VALUES(76,10276,13,10);
INSERT INTO OrderDetails VALUES(77,10277,28,20);
INSERT INTO OrderDetails VALUES(78,10277,62,12);
INSERT INTO OrderDetails VALUES(79,10278,44,16);
INSERT INTO OrderDetails VALUES(80,10278,59,15);
INSERT INTO OrderDetails VALUES(81,10278,63,8);
INSERT INTO OrderDetails VALUES(82,10278,73,25);
INSERT INTO OrderDetails VALUES(83,10279,17,15);
INSERT INTO OrderDetails VALUES(84,10280,24,12);
INSERT INTO OrderDetails VALUES(85,10280,55,20);
INSERT INTO OrderDetails VALUES(86,10280,75,30);
INSERT INTO OrderDetails VALUES(87,10281,19,1);
INSERT INTO OrderDetails VALUES(88,10281,24,6);
INSERT INTO OrderDetails VALUES(89,10281,35,4);
INSERT INTO OrderDetails VALUES(90,10282,30,6);
INSERT INTO OrderDetails VALUES(91,10282,57,2);
INSERT INTO OrderDetails VALUES(92,10283,15,20);
INSERT INTO OrderDetails VALUES(93,10283,19,18);
INSERT INTO OrderDetails VALUES(94,10283,60,35);
INSERT INTO OrderDetails VALUES(95,10283,72,3);
INSERT INTO OrderDetails VALUES(96,10284,27,15);
INSERT INTO OrderDetails VALUES(97,10284,44,21);
INSERT INTO OrderDetails VALUES(98,10284,60,20);
INSERT INTO OrderDetails VALUES(99,10284,67,5);
INSERT INTO OrderDetails VALUES(100,10285,1,45);
INSERT INTO OrderDetails VALUES(101,10285,40,40);
INSERT INTO OrderDetails VALUES(102,10285,53,36);
INSERT INTO OrderDetails VALUES(103,10286,35,100);
INSERT INTO OrderDetails VALUES(104,10286,62,40);
INSERT INTO OrderDetails VALUES(105,10287,16,40);
INSERT INTO OrderDetails VALUES(106,10287,34,20);
INSERT INTO OrderDetails VALUES(107,10287,46,15);
INSERT INTO OrderDetails VALUES(108,10288,54,10);
INSERT INTO OrderDetails VALUES(109,10288,68,3);
INSERT INTO OrderDetails VALUES(110,10289,3,30);
INSERT INTO OrderDetails VALUES(111,10289,64,9);
INSERT INTO OrderDetails VALUES(112,10290,5,20);
INSERT INTO OrderDetails VALUES(113,10290,29,15);
INSERT INTO OrderDetails VALUES(114,10290,49,15);
INSERT INTO OrderDetails VALUES(115,10290,77,10);
INSERT INTO OrderDetails VALUES(116,10291,13,20);
INSERT INTO OrderDetails VALUES(117,10291,44,24);
INSERT INTO OrderDetails VALUES(118,10291,51,2);
INSERT INTO OrderDetails VALUES(119,10292,20,20);
INSERT INTO OrderDetails VALUES(120,10293,18,12);
INSERT INTO OrderDetails VALUES(121,10293,24,10);
INSERT INTO OrderDetails VALUES(122,10293,63,5);
INSERT INTO OrderDetails VALUES(123,10293,75,6);
INSERT INTO OrderDetails VALUES(124,10294,1,18);
INSERT INTO OrderDetails VALUES(125,10294,17,15);
INSERT INTO OrderDetails VALUES(126,10294,43,15);
INSERT INTO OrderDetails VALUES(127,10294,60,21);
INSERT INTO OrderDetails VALUES(128,10294,75,6);
INSERT INTO OrderDetails VALUES(129,10295,56,4);
INSERT INTO OrderDetails VALUES(130,10296,11,12);
INSERT INTO OrderDetails VALUES(131,10296,16,30);
INSERT INTO OrderDetails VALUES(132,10296,69,15);
INSERT INTO OrderDetails VALUES(133,10297,39,60);
INSERT INTO OrderDetails VALUES(134,10297,72,20);
INSERT INTO OrderDetails VALUES(135,10298,2,40);
INSERT INTO OrderDetails VALUES(136,10298,36,40);
INSERT INTO OrderDetails VALUES(137,10298,59,30);
INSERT INTO OrderDetails VALUES(138,10298,62,15);
INSERT INTO OrderDetails VALUES(139,10299,19,15);
INSERT INTO OrderDetails VALUES(140,10299,70,20);
INSERT INTO OrderDetails VALUES(141,10300,66,30);
INSERT INTO OrderDetails VALUES(142,10300,68,20);
INSERT INTO OrderDetails VALUES(143,10301,40,10);
INSERT INTO OrderDetails VALUES(144,10301,56,20);
INSERT INTO OrderDetails VALUES(145,10302,17,40);
INSERT INTO OrderDetails VALUES(146,10302,28,28);
INSERT INTO OrderDetails VALUES(147,10302,43,12);
INSERT INTO OrderDetails VALUES(148,10303,40,40);
INSERT INTO OrderDetails VALUES(149,10303,65,30);
INSERT INTO OrderDetails VALUES(150,10303,68,15);
INSERT INTO OrderDetails VALUES(151,10304,49,30);
INSERT INTO OrderDetails VALUES(152,10304,59,10);
INSERT INTO OrderDetails VALUES(153,10304,71,2);
INSERT INTO OrderDetails VALUES(154,10305,18,25);
INSERT INTO OrderDetails VALUES(155,10305,29,25);
INSERT INTO OrderDetails VALUES(156,10305,39,30);
INSERT INTO OrderDetails VALUES(157,10306,30,10);
INSERT INTO OrderDetails VALUES(158,10306,53,10);
INSERT INTO OrderDetails VALUES(159,10306,54,5);
INSERT INTO OrderDetails VALUES(160,10307,62,10);
INSERT INTO OrderDetails VALUES(161,10307,68,3);
INSERT INTO OrderDetails VALUES(162,10308,69,1);
INSERT INTO OrderDetails VALUES(163,10308,70,5);
INSERT INTO OrderDetails VALUES(164,10309,4,20);
INSERT INTO OrderDetails VALUES(165,10309,6,30);
INSERT INTO OrderDetails VALUES(166,10309,42,2);
INSERT INTO OrderDetails VALUES(167,10309,43,20);
INSERT INTO OrderDetails VALUES(168,10309,71,3);
INSERT INTO OrderDetails VALUES(169,10310,16,10);
INSERT INTO OrderDetails VALUES(170,10310,62,5);
INSERT INTO OrderDetails VALUES(171,10311,42,6);
INSERT INTO OrderDetails VALUES(172,10311,69,7);
INSERT INTO OrderDetails VALUES(173,10312,28,4);
INSERT INTO OrderDetails VALUES(174,10312,43,24);
INSERT INTO OrderDetails VALUES(175,10312,53,20);
INSERT INTO OrderDetails VALUES(176,10312,75,10);
INSERT INTO OrderDetails VALUES(177,10313,36,12);
INSERT INTO OrderDetails VALUES(178,10314,32,40);
INSERT INTO OrderDetails VALUES(179,10314,58,30);
INSERT INTO OrderDetails VALUES(180,10314,62,25);
INSERT INTO OrderDetails VALUES(181,10315,34,14);
INSERT INTO OrderDetails VALUES(182,10315,70,30);
INSERT INTO OrderDetails VALUES(183,10316,41,10);
INSERT INTO OrderDetails VALUES(184,10316,62,70);
INSERT INTO OrderDetails VALUES(185,10317,1,20);
INSERT INTO OrderDetails VALUES(186,10318,41,20);
INSERT INTO OrderDetails VALUES(187,10318,76,6);
INSERT INTO OrderDetails VALUES(188,10319,17,8);
INSERT INTO OrderDetails VALUES(189,10319,28,14);
INSERT INTO OrderDetails VALUES(190,10319,76,30);
INSERT INTO OrderDetails VALUES(191,10320,71,30);
INSERT INTO OrderDetails VALUES(192,10321,35,10);
INSERT INTO OrderDetails VALUES(193,10322,52,20);
INSERT INTO OrderDetails VALUES(194,10323,15,5);
INSERT INTO OrderDetails VALUES(195,10323,25,4);
INSERT INTO OrderDetails VALUES(196,10323,39,4);
INSERT INTO OrderDetails VALUES(197,10324,16,21);
INSERT INTO OrderDetails VALUES(198,10324,35,70);
INSERT INTO OrderDetails VALUES(199,10324,46,30);
INSERT INTO OrderDetails VALUES(200,10324,59,40);
INSERT INTO OrderDetails VALUES(201,10324,63,80);
INSERT INTO OrderDetails VALUES(202,10325,6,6);
INSERT INTO OrderDetails VALUES(203,10325,13,12);
INSERT INTO OrderDetails VALUES(204,10325,14,9);
INSERT INTO OrderDetails VALUES(205,10325,31,4);
INSERT INTO OrderDetails VALUES(206,10325,72,40);
INSERT INTO OrderDetails VALUES(207,10326,4,24);
INSERT INTO OrderDetails VALUES(208,10326,57,16);
INSERT INTO OrderDetails VALUES(209,10326,75,50);
INSERT INTO OrderDetails VALUES(210,10327,2,25);
INSERT INTO OrderDetails VALUES(211,10327,11,50);
INSERT INTO OrderDetails VALUES(212,10327,30,35);
INSERT INTO OrderDetails VALUES(213,10327,58,30);
INSERT INTO OrderDetails VALUES(214,10328,59,9);
INSERT INTO OrderDetails VALUES(215,10328,65,40);
INSERT INTO OrderDetails VALUES(216,10328,68,10);
INSERT INTO OrderDetails VALUES(217,10329,19,10);
INSERT INTO OrderDetails VALUES(218,10329,30,8);
INSERT INTO OrderDetails VALUES(219,10329,38,20);
INSERT INTO OrderDetails VALUES(220,10329,56,12);
INSERT INTO OrderDetails VALUES(221,10330,26,50);
INSERT INTO OrderDetails VALUES(222,10330,72,25);
INSERT INTO OrderDetails VALUES(223,10331,54,15);
INSERT INTO OrderDetails VALUES(224,10332,18,40);
INSERT INTO OrderDetails VALUES(225,10332,42,10);
INSERT INTO OrderDetails VALUES(226,10332,47,16);
INSERT INTO OrderDetails VALUES(227,10333,14,10);
INSERT INTO OrderDetails VALUES(228,10333,21,10);
INSERT INTO OrderDetails VALUES(229,10333,71,40);
INSERT INTO OrderDetails VALUES(230,10334,52,8);
INSERT INTO OrderDetails VALUES(231,10334,68,10);
INSERT INTO OrderDetails VALUES(232,10335,2,7);
INSERT INTO OrderDetails VALUES(233,10335,31,25);
INSERT INTO OrderDetails VALUES(234,10335,32,6);
INSERT INTO OrderDetails VALUES(235,10335,51,48);
INSERT INTO OrderDetails VALUES(236,10336,4,18);
INSERT INTO OrderDetails VALUES(237,10337,23,40);
INSERT INTO OrderDetails VALUES(238,10337,26,24);
INSERT INTO OrderDetails VALUES(239,10337,36,20);
INSERT INTO OrderDetails VALUES(240,10337,37,28);
INSERT INTO OrderDetails VALUES(241,10337,72,25);
INSERT INTO OrderDetails VALUES(242,10338,17,20);
INSERT INTO OrderDetails VALUES(243,10338,30,15);
INSERT INTO OrderDetails VALUES(244,10339,4,10);
INSERT INTO OrderDetails VALUES(245,10339,17,70);
INSERT INTO OrderDetails VALUES(246,10339,62,28);
INSERT INTO OrderDetails VALUES(247,10340,18,20);
INSERT INTO OrderDetails VALUES(248,10340,41,12);
INSERT INTO OrderDetails VALUES(249,10340,43,40);
INSERT INTO OrderDetails VALUES(250,10341,33,8);
INSERT INTO OrderDetails VALUES(251,10341,59,9);
INSERT INTO OrderDetails VALUES(252,10342,2,24);
INSERT INTO OrderDetails VALUES(253,10342,31,56);
INSERT INTO OrderDetails VALUES(254,10342,36,40);
INSERT INTO OrderDetails VALUES(255,10342,55,40);
INSERT INTO OrderDetails VALUES(256,10343,64,50);
INSERT INTO OrderDetails VALUES(257,10343,68,4);
INSERT INTO OrderDetails VALUES(258,10343,76,15);
INSERT INTO OrderDetails VALUES(259,10344,4,35);
INSERT INTO OrderDetails VALUES(260,10344,8,70);
INSERT INTO OrderDetails VALUES(261,10345,8,70);
INSERT INTO OrderDetails VALUES(262,10345,19,80);
INSERT INTO OrderDetails VALUES(263,10345,42,9);
INSERT INTO OrderDetails VALUES(264,10346,17,36);
INSERT INTO OrderDetails VALUES(265,10346,56,20);
INSERT INTO OrderDetails VALUES(266,10347,25,10);
INSERT INTO OrderDetails VALUES(267,10347,39,50);
INSERT INTO OrderDetails VALUES(268,10347,40,4);
INSERT INTO OrderDetails VALUES(269,10347,75,6);
INSERT INTO OrderDetails VALUES(270,10348,1,15);
INSERT INTO OrderDetails VALUES(271,10348,23,25);
INSERT INTO OrderDetails VALUES(272,10349,54,24);
INSERT INTO OrderDetails VALUES(273,10350,50,15);
INSERT INTO OrderDetails VALUES(274,10350,69,18);
INSERT INTO OrderDetails VALUES(275,10351,38,20);
INSERT INTO OrderDetails VALUES(276,10351,41,13);
INSERT INTO OrderDetails VALUES(277,10351,44,77);
INSERT INTO OrderDetails VALUES(278,10351,65,10);
INSERT INTO OrderDetails VALUES(279,10352,24,10);
INSERT INTO OrderDetails VALUES(280,10352,54,20);
INSERT INTO OrderDetails VALUES(281,10353,11,12);
INSERT INTO OrderDetails VALUES(282,10353,38,50);
INSERT INTO OrderDetails VALUES(283,10354,1,12);
INSERT INTO OrderDetails VALUES(284,10354,29,4);
INSERT INTO OrderDetails VALUES(285,10355,24,25);
INSERT INTO OrderDetails VALUES(286,10355,57,25);
INSERT INTO OrderDetails VALUES(287,10356,31,30);
INSERT INTO OrderDetails VALUES(288,10356,55,12);
INSERT INTO OrderDetails VALUES(289,10356,69,20);
INSERT INTO OrderDetails VALUES(290,10357,10,30);
INSERT INTO OrderDetails VALUES(291,10357,26,16);
INSERT INTO OrderDetails VALUES(292,10357,60,8);
INSERT INTO OrderDetails VALUES(293,10358,24,10);
INSERT INTO OrderDetails VALUES(294,10358,34,10);
INSERT INTO OrderDetails VALUES(295,10358,36,20);
INSERT INTO OrderDetails VALUES(296,10359,16,56);
INSERT INTO OrderDetails VALUES(297,10359,31,70);
INSERT INTO OrderDetails VALUES(298,10359,60,80);
INSERT INTO OrderDetails VALUES(299,10360,28,30);
INSERT INTO OrderDetails VALUES(300,10360,29,35);
INSERT INTO OrderDetails VALUES(301,10360,38,10);
INSERT INTO OrderDetails VALUES(302,10360,49,35);
INSERT INTO OrderDetails VALUES(303,10360,54,28);
INSERT INTO OrderDetails VALUES(304,10361,39,54);
INSERT INTO OrderDetails VALUES(305,10361,60,55);
INSERT INTO OrderDetails VALUES(306,10362,25,50);
INSERT INTO OrderDetails VALUES(307,10362,51,20);
INSERT INTO OrderDetails VALUES(308,10362,54,24);
INSERT INTO OrderDetails VALUES(309,10363,31,20);
INSERT INTO OrderDetails VALUES(310,10363,75,12);
INSERT INTO OrderDetails VALUES(311,10363,76,12);
INSERT INTO OrderDetails VALUES(312,10364,69,30);
INSERT INTO OrderDetails VALUES(313,10364,71,5);
INSERT INTO OrderDetails VALUES(314,10365,11,24);
INSERT INTO OrderDetails VALUES(315,10366,65,5);
INSERT INTO OrderDetails VALUES(316,10366,77,5);
INSERT INTO OrderDetails VALUES(317,10367,34,36);
INSERT INTO OrderDetails VALUES(318,10367,54,18);
INSERT INTO OrderDetails VALUES(319,10367,65,15);
INSERT INTO OrderDetails VALUES(320,10367,77,7);
INSERT INTO OrderDetails VALUES(321,10368,21,5);
INSERT INTO OrderDetails VALUES(322,10368,28,13);
INSERT INTO OrderDetails VALUES(323,10368,57,25);
INSERT INTO OrderDetails VALUES(324,10368,64,35);
INSERT INTO OrderDetails VALUES(325,10369,29,20);
INSERT INTO OrderDetails VALUES(326,10369,56,18);
INSERT INTO OrderDetails VALUES(327,10370,1,15);
INSERT INTO OrderDetails VALUES(328,10370,64,30);
INSERT INTO OrderDetails VALUES(329,10370,74,20);
INSERT INTO OrderDetails VALUES(330,10371,36,6);
INSERT INTO OrderDetails VALUES(331,10372,20,12);
INSERT INTO OrderDetails VALUES(332,10372,38,40);
INSERT INTO OrderDetails VALUES(333,10372,60,70);
INSERT INTO OrderDetails VALUES(334,10372,72,42);
INSERT INTO OrderDetails VALUES(335,10373,58,80);
INSERT INTO OrderDetails VALUES(336,10373,71,50);
INSERT INTO OrderDetails VALUES(337,10374,31,30);
INSERT INTO OrderDetails VALUES(338,10374,58,15);
INSERT INTO OrderDetails VALUES(339,10375,14,15);
INSERT INTO OrderDetails VALUES(340,10375,54,10);
INSERT INTO OrderDetails VALUES(341,10376,31,42);
INSERT INTO OrderDetails VALUES(342,10377,28,20);
INSERT INTO OrderDetails VALUES(343,10377,39,20);
INSERT INTO OrderDetails VALUES(344,10378,71,6);
INSERT INTO OrderDetails VALUES(345,10379,41,8);
INSERT INTO OrderDetails VALUES(346,10379,63,16);
INSERT INTO OrderDetails VALUES(347,10379,65,20);
INSERT INTO OrderDetails VALUES(348,10380,30,18);
INSERT INTO OrderDetails VALUES(349,10380,53,20);
INSERT INTO OrderDetails VALUES(350,10380,60,6);
INSERT INTO OrderDetails VALUES(351,10380,70,30);
INSERT INTO OrderDetails VALUES(352,10381,74,14);
INSERT INTO OrderDetails VALUES(353,10382,5,32);
INSERT INTO OrderDetails VALUES(354,10382,18,9);
INSERT INTO OrderDetails VALUES(355,10382,29,14);
INSERT INTO OrderDetails VALUES(356,10382,33,60);
INSERT INTO OrderDetails VALUES(357,10382,74,50);
INSERT INTO OrderDetails VALUES(358,10383,13,20);
INSERT INTO OrderDetails VALUES(359,10383,50,15);
INSERT INTO OrderDetails VALUES(360,10383,56,20);
INSERT INTO OrderDetails VALUES(361,10384,20,28);
INSERT INTO OrderDetails VALUES(362,10384,60,15);
INSERT INTO OrderDetails VALUES(363,10385,7,10);
INSERT INTO OrderDetails VALUES(364,10385,60,20);
INSERT INTO OrderDetails VALUES(365,10385,68,8);
INSERT INTO OrderDetails VALUES(366,10386,24,15);
INSERT INTO OrderDetails VALUES(367,10386,34,10);
INSERT INTO OrderDetails VALUES(368,10387,24,15);
INSERT INTO OrderDetails VALUES(369,10387,28,6);
INSERT INTO OrderDetails VALUES(370,10387,59,12);
INSERT INTO OrderDetails VALUES(371,10387,71,15);
INSERT INTO OrderDetails VALUES(372,10388,45,15);
INSERT INTO OrderDetails VALUES(373,10388,52,20);
INSERT INTO OrderDetails VALUES(374,10388,53,40);
INSERT INTO OrderDetails VALUES(375,10389,10,16);
INSERT INTO OrderDetails VALUES(376,10389,55,15);
INSERT INTO OrderDetails VALUES(377,10389,62,20);
INSERT INTO OrderDetails VALUES(378,10389,70,30);
INSERT INTO OrderDetails VALUES(379,10390,31,60);
INSERT INTO OrderDetails VALUES(380,10390,35,40);
INSERT INTO OrderDetails VALUES(381,10390,46,45);
INSERT INTO OrderDetails VALUES(382,10390,72,24);
INSERT INTO OrderDetails VALUES(383,10391,13,18);
INSERT INTO OrderDetails VALUES(384,10392,69,50);
INSERT INTO OrderDetails VALUES(385,10393,2,25);
INSERT INTO OrderDetails VALUES(386,10393,14,42);
INSERT INTO OrderDetails VALUES(387,10393,25,7);
INSERT INTO OrderDetails VALUES(388,10393,26,70);
INSERT INTO OrderDetails VALUES(389,10393,31,32);
INSERT INTO OrderDetails VALUES(390,10394,13,10);
INSERT INTO OrderDetails VALUES(391,10394,62,10);
INSERT INTO OrderDetails VALUES(392,10395,46,28);
INSERT INTO OrderDetails VALUES(393,10395,53,70);
INSERT INTO OrderDetails VALUES(394,10395,69,8);
INSERT INTO OrderDetails VALUES(395,10396,23,40);
INSERT INTO OrderDetails VALUES(396,10396,71,60);
INSERT INTO OrderDetails VALUES(397,10396,72,21);
INSERT INTO OrderDetails VALUES(398,10397,21,10);
INSERT INTO OrderDetails VALUES(399,10397,51,18);
INSERT INTO OrderDetails VALUES(400,10398,35,30);
INSERT INTO OrderDetails VALUES(401,10398,55,120);
INSERT INTO OrderDetails VALUES(402,10399,68,60);
INSERT INTO OrderDetails VALUES(403,10399,71,30);
INSERT INTO OrderDetails VALUES(404,10399,76,35);
INSERT INTO OrderDetails VALUES(405,10399,77,14);
INSERT INTO OrderDetails VALUES(406,10400,29,21);
INSERT INTO OrderDetails VALUES(407,10400,35,35);
INSERT INTO OrderDetails VALUES(408,10400,49,30);
INSERT INTO OrderDetails VALUES(409,10401,30,18);
INSERT INTO OrderDetails VALUES(410,10401,56,70);
INSERT INTO OrderDetails VALUES(411,10401,65,20);
INSERT INTO OrderDetails VALUES(412,10401,71,60);
INSERT INTO OrderDetails VALUES(413,10402,23,60);
INSERT INTO OrderDetails VALUES(414,10402,63,65);
INSERT INTO OrderDetails VALUES(415,10403,16,21);
INSERT INTO OrderDetails VALUES(416,10403,48,70);
INSERT INTO OrderDetails VALUES(417,10404,26,30);
INSERT INTO OrderDetails VALUES(418,10404,42,40);
INSERT INTO OrderDetails VALUES(419,10404,49,30);
INSERT INTO OrderDetails VALUES(420,10405,3,50);
INSERT INTO OrderDetails VALUES(421,10406,1,10);
INSERT INTO OrderDetails VALUES(422,10406,21,30);
INSERT INTO OrderDetails VALUES(423,10406,28,42);
INSERT INTO OrderDetails VALUES(424,10406,36,5);
INSERT INTO OrderDetails VALUES(425,10406,40,2);
INSERT INTO OrderDetails VALUES(426,10407,11,30);
INSERT INTO OrderDetails VALUES(427,10407,69,15);
INSERT INTO OrderDetails VALUES(428,10407,71,15);
INSERT INTO OrderDetails VALUES(429,10408,37,10);
INSERT INTO OrderDetails VALUES(430,10408,54,6);
INSERT INTO OrderDetails VALUES(431,10408,62,35);
INSERT INTO OrderDetails VALUES(432,10409,14,12);
INSERT INTO OrderDetails VALUES(433,10409,21,12);
INSERT INTO OrderDetails VALUES(434,10410,33,49);
INSERT INTO OrderDetails VALUES(435,10410,59,16);
INSERT INTO OrderDetails VALUES(436,10411,41,25);
INSERT INTO OrderDetails VALUES(437,10411,44,40);
INSERT INTO OrderDetails VALUES(438,10411,59,9);
INSERT INTO OrderDetails VALUES(439,10412,14,20);
INSERT INTO OrderDetails VALUES(440,10413,1,24);
INSERT INTO OrderDetails VALUES(441,10413,62,40);
INSERT INTO OrderDetails VALUES(442,10413,76,14);
INSERT INTO OrderDetails VALUES(443,10414,19,18);
INSERT INTO OrderDetails VALUES(444,10414,33,50);
INSERT INTO OrderDetails VALUES(445,10415,17,2);
INSERT INTO OrderDetails VALUES(446,10415,33,20);
INSERT INTO OrderDetails VALUES(447,10416,19,20);
INSERT INTO OrderDetails VALUES(448,10416,53,10);
INSERT INTO OrderDetails VALUES(449,10416,57,20);
INSERT INTO OrderDetails VALUES(450,10417,38,50);
INSERT INTO OrderDetails VALUES(451,10417,46,2);
INSERT INTO OrderDetails VALUES(452,10417,68,36);
INSERT INTO OrderDetails VALUES(453,10417,77,35);
INSERT INTO OrderDetails VALUES(454,10418,2,60);
INSERT INTO OrderDetails VALUES(455,10418,47,55);
INSERT INTO OrderDetails VALUES(456,10418,61,16);
INSERT INTO OrderDetails VALUES(457,10418,74,15);
INSERT INTO OrderDetails VALUES(458,10419,60,60);
INSERT INTO OrderDetails VALUES(459,10419,69,20);
INSERT INTO OrderDetails VALUES(460,10420,9,20);
INSERT INTO OrderDetails VALUES(461,10420,13,2);
INSERT INTO OrderDetails VALUES(462,10420,70,8);
INSERT INTO OrderDetails VALUES(463,10420,73,20);
INSERT INTO OrderDetails VALUES(464,10421,19,4);
INSERT INTO OrderDetails VALUES(465,10421,26,30);
INSERT INTO OrderDetails VALUES(466,10421,53,15);
INSERT INTO OrderDetails VALUES(467,10421,77,10);
INSERT INTO OrderDetails VALUES(468,10422,26,2);
INSERT INTO OrderDetails VALUES(469,10423,31,14);
INSERT INTO OrderDetails VALUES(470,10423,59,20);
INSERT INTO OrderDetails VALUES(471,10424,35,60);
INSERT INTO OrderDetails VALUES(472,10424,38,49);
INSERT INTO OrderDetails VALUES(473,10424,68,30);
INSERT INTO OrderDetails VALUES(474,10425,55,10);
INSERT INTO OrderDetails VALUES(475,10425,76,20);
INSERT INTO OrderDetails VALUES(476,10426,56,5);
INSERT INTO OrderDetails VALUES(477,10426,64,7);
INSERT INTO OrderDetails VALUES(478,10427,14,35);
INSERT INTO OrderDetails VALUES(479,10428,46,20);
INSERT INTO OrderDetails VALUES(480,10429,50,40);
INSERT INTO OrderDetails VALUES(481,10429,63,35);
INSERT INTO OrderDetails VALUES(482,10430,17,45);
INSERT INTO OrderDetails VALUES(483,10430,21,50);
INSERT INTO OrderDetails VALUES(484,10430,56,30);
INSERT INTO OrderDetails VALUES(485,10430,59,70);
INSERT INTO OrderDetails VALUES(486,10431,17,50);
INSERT INTO OrderDetails VALUES(487,10431,40,50);
INSERT INTO OrderDetails VALUES(488,10431,47,30);
INSERT INTO OrderDetails VALUES(489,10432,26,10);
INSERT INTO OrderDetails VALUES(490,10432,54,40);
INSERT INTO OrderDetails VALUES(491,10433,56,28);
INSERT INTO OrderDetails VALUES(492,10434,11,6);
INSERT INTO OrderDetails VALUES(493,10434,76,18);
INSERT INTO OrderDetails VALUES(494,10435,2,10);
INSERT INTO OrderDetails VALUES(495,10435,22,12);
INSERT INTO OrderDetails VALUES(496,10435,72,10);
INSERT INTO OrderDetails VALUES(497,10436,46,5);
INSERT INTO OrderDetails VALUES(498,10436,56,40);
INSERT INTO OrderDetails VALUES(499,10436,64,30);
INSERT INTO OrderDetails VALUES(500,10436,75,24);
INSERT INTO OrderDetails VALUES(501,10437,53,15);
INSERT INTO OrderDetails VALUES(502,10438,19,15);
INSERT INTO OrderDetails VALUES(503,10438,34,20);
INSERT INTO OrderDetails VALUES(504,10438,57,15);
INSERT INTO OrderDetails VALUES(505,10439,12,15);
INSERT INTO OrderDetails VALUES(506,10439,16,16);
INSERT INTO OrderDetails VALUES(507,10439,64,6);
INSERT INTO OrderDetails VALUES(508,10439,74,30);
INSERT INTO OrderDetails VALUES(509,10440,2,45);
INSERT INTO OrderDetails VALUES(510,10440,16,49);
INSERT INTO OrderDetails VALUES(511,10440,29,24);
INSERT INTO OrderDetails VALUES(512,10440,61,90);
INSERT INTO OrderDetails VALUES(513,10441,27,50);
INSERT INTO OrderDetails VALUES(514,10442,11,30);
INSERT INTO OrderDetails VALUES(515,10442,54,80);
INSERT INTO OrderDetails VALUES(516,10442,66,60);
INSERT INTO OrderDetails VALUES(517,10443,11,6);
INSERT INTO OrderDetails VALUES(518,10443,28,12);
`,On={sqlJsLoaded:!1,databaseInitialized:!1,error:null};let wn=null;async function z1(){try{const r=await H1({locateFile:e=>`https://sql.js.org/dist/${e}`});On.sqlJsLoaded=!0,wn=new r.Database;try{const e=q1.split(";").map(t=>t.trim()).filter(t=>t.length>0);for(const t of e)wn.run(t+";");return On.databaseInitialized=!0,wn}catch(e){throw On.error=`Schema initialization failed: ${e.message}`,e}}catch(r){throw On.error=`SQL.js initialization failed: ${r.message}`,r}}function W1(){return{...On}}function Ad(){if(!wn)throw new Error("Database not initialized");return wn}async function wd(){try{await z1(),console.log("Database initialized successfully")}catch(r){throw console.error("Failed to initialize database:",r),r}}function xd(){const r=Ad();return{name:"Northwind",tables:r.exec(`
    SELECT name 
    FROM sqlite_master 
    WHERE type='table' 
    AND name NOT LIKE 'sqlite_%'
    ORDER BY name
  `)[0].values.map(t=>t[0]).map(t=>{const n=r.exec(`PRAGMA table_info([${t}])`)[0].values.map((s,o)=>({name:s[1],type:s[2],notnull:s[3],pk:s[5]}));return{name:t,columns:n}})}}function G1(r,e){const t=[/near "([^"]+)": syntax error/,/no such table: ([^\s]+)/,/no such column: ([^\s]+)/];for(const i of t){const n=e.match(i);if(n){const s=n[1],o=r.split(`
`);for(let l=0;l<o.length;l++)if(o[l].includes(s))return l+1}}return null}function j1(r){try{const e=Ad();if(r.trim().toLowerCase().startsWith("select")){const i=e.exec(r)[0];return i?{results:i.values.map(s=>{const o={};return i.columns.forEach((l,a)=>{o[l]=s[a]}),o}),columns:i.columns,error:null,isModificationQuery:!1}:{results:[],columns:[],error:null,isModificationQuery:!1}}else return e.run(r),{results:[],columns:[],error:null,isModificationQuery:!0,affectedRows:e.getRowsModified()}}catch(e){const t=e.message,i=G1(r,t);return{results:[],columns:[],error:t,errorLine:i,isModificationQuery:!1}}}var K1=De('<i class="fas fa-key icon key-icon svelte-1s3cwiu"></i>'),$1=De('<i class="fas fa-columns icon column-icon svelte-1s3cwiu"></i>'),Q1=De('<div class="tree-node column svelte-1s3cwiu"><!> <span class="label svelte-1s3cwiu"> <span class="metadata svelte-1s3cwiu"> </span></span></div>'),X1=De('<div class="tree-children svelte-1s3cwiu"></div>'),J1=De('<div class="tree-item svelte-1s3cwiu"><button class="tree-node svelte-1s3cwiu"><i></i> <i class="fas fa-table icon table-icon svelte-1s3cwiu"></i> <span class="label svelte-1s3cwiu"> </span> <span class="count svelte-1s3cwiu"> </span></button> <!></div>'),Y1=De('<div class="tree-view svelte-1s3cwiu"></div>'),Z1=De('<div class="loading svelte-1s3cwiu">Loading schema...</div>'),eS=De('<div class="context-menu svelte-1s3cwiu"><button class="menu-item svelte-1s3cwiu"><i class="fas fa-table svelte-1s3cwiu"></i> Show Data</button></div>'),tS=De('<div class="sidebar svelte-1s3cwiu"><div class="title svelte-1s3cwiu"><i class="fas fa-database"></i> Northwind</div> <div class="content svelte-1s3cwiu"><!></div> <div class="resize-handle svelte-1s3cwiu"></div></div> <!>',1);function iS(r,e){Yr(e,!1);const t=D1();let i=at(300),n=at(!1),s,o,l=at(null),a=at(new Set),h=at({visible:!1,x:0,y:0,tableName:""});async function c(){try{await wd(),se(l,xd())}catch(U){console.error("Failed to initialize database:",U)}}c();function u(U){V(a).has(U)?V(a).delete(U):V(a).add(U),se(a,new Set(V(a)))}function p(U){const _=[];return U.notnull&&_.push("NOT NULL"),`(${U.type}${_.length?", "+_.join(", "):""})`}function g(U,_){U.preventDefault(),se(h,{visible:!0,x:U.pageX,y:U.pageY,tableName:_})}function S(){Dn(h,V(h).visible=!1)}function T(){t("showTableData",{tableName:V(h).tableName}),S()}function I(U){V(h).visible&&!U.target.closest(".context-menu")&&S()}function y(U){se(n,!0),s=U.pageX,o=V(i),U.preventDefault(),window.addEventListener("mousemove",A),window.addEventListener("mouseup",v),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}function A(U){if(!V(n))return;const _=U.pageX-s;se(i,Math.max(200,Math.min(600,o+_)))}function v(){se(n,!1),window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",v),document.body.style.cursor="",document.body.style.userSelect=""}Xo();var R=tS();Vt("click",ia,I);var k=Vn(R),w=Le(te(k),2),x=te(w);Mt(x,()=>V(l),U=>{var _=Y1();Cr(_,5,()=>V(l).tables,Lr,(D,z)=>{var $=J1(),K=te($),he=te(K);const re=ph(()=>`fas fa-chevron-${(V(a).has(V(z).name)?"down":"right")??""} chevron svelte-1s3cwiu`);var Ie=Le(he,4),ce=te(Ie),ue=Le(Ie,2),fe=te(ue),Se=Le(K,2);Mt(Se,()=>V(a).has(V(z).name),pe=>{var Ue=X1();Cr(Ue,5,()=>V(z).columns,Lr,(ze,Me)=>{var tt=Q1(),fi=te(tt);Mt(fi,()=>V(Me).pk,Ki=>{var Ot=K1();Ee(Ki,Ot)},Ki=>{var Ot=$1();Ee(Ki,Ot)});var ji=Le(fi,2),cs=te(ji),Y=Le(cs),Ae=te(Y);nt(()=>kt(Ae,p(V(Me)))),nt(()=>{Fr(ji,"required",V(Me).notnull),kt(cs,`${V(Me).name??""} `)}),Ee(ze,tt)}),Ee(pe,Ue)}),nt(()=>{w1(he,V(re)),kt(ce,V(z).name),kt(fe,V(z).columns.length)}),Vt("click",K,()=>u(V(z).name)),Vt("contextmenu",K,vd(pe=>g(pe,V(z).name))),Ee(D,$)}),Ee(U,_)},U=>{var _=Z1();Ee(U,_)});var q=Le(w,2),H=Le(k,2);Mt(H,()=>V(h).visible,U=>{var _=eS(),D=te(_);nt(()=>Pn(_,"style",`left: ${V(h).x??""}px; top: ${V(h).y??""}px`)),Vt("click",D,T),Ee(U,_)}),nt(()=>{Pn(k,"style",`width: ${V(i)??""}px`),Fr(q,"resizing",V(n))}),Vt("mousedown",q,y),Ee(r,R),Zr()}var rS=De('<div class="tab svelte-1k0t1jg"><span> </span> <button class="close-btn svelte-1k0t1jg"></button></div>');function nS(r,e){Yr(e,!1),pt(e,"query",8,"");let t=pt(e,"active",8,!1),i=pt(e,"onClose",8),n=pt(e,"onClick",8),s=pt(e,"index",8);function o(u){u.target.closest(".close-btn")||n()()}Xo();var l=rS(),a=te(l),h=te(a),c=Le(a,2);nt(()=>{Fr(l,"active",t()),kt(h,`Query ${s()+1}`)}),Vt("click",c,function(...u){var p;(p=i())==null||p.apply(this,u)}),Vt("click",l,o),Ee(r,l),Zr()}let Te=class kd{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Hr(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),ti.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Hr(this,e,t);let i=[];return this.decompose(e,t,i,0),ti.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new xn(this),s=new xn(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new xn(this,e)}iterRange(e,t=this.length){return new Rd(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ld(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?kd.empty:e.length<=32?new Pe(e):ti.from(Pe.split(e,[]))}};class Pe extends Te{constructor(e,t=sS(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new oS(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Pe(ef(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=Xs(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Pe(l,o.length+s.length));else{let a=l.length>>1;i.push(new Pe(l.slice(0,a)),new Pe(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Pe))return super.replace(e,t,i);[e,t]=Hr(this,e,t);let n=Xs(this.text,Xs(i.text,ef(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Pe(n,s):ti.from(Pe.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=Hr(this,e,t);let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Pe(i,n)),i=[],n=-1);return n>-1&&t.push(new Pe(i,n)),t}}class ti extends Te{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if([e,t]=Hr(this,e,t),i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[n]=a,new ti(c,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Hr(this,e,t);let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ti))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let g of e)i+=g.lines;if(i<32){let g=[];for(let S of e)S.flatten(g);return new Pe(g,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,c=[];function u(g){let S;if(g.lines>s&&g instanceof ti)for(let T of g.children)u(T);else g.lines>o&&(a>o||!a)?(p(),l.push(g)):g instanceof Pe&&a&&(S=c[c.length-1])instanceof Pe&&g.lines+S.lines<=32?(a+=g.lines,h+=g.length+1,c[c.length-1]=new Pe(S.text.concat(g.text),S.length+1+g.length)):(a+g.lines>n&&p(),a+=g.lines,h+=g.length+1,c.push(g))}function p(){a!=0&&(l.push(c.length==1?c[0]:ti.from(c,h)),h=-1,a=c.length=0)}for(let g of e)u(g);return p(),l.length==1?l[0]:new ti(l,t)}}Te.empty=new Pe([""],0);function sS(r){let e=-1;for(let t of r)e+=t.length+1;return e}function Xs(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function ef(r,e,t){return Xs(r,[""],e,t)}class xn{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Pe?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Pe?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Pe){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Pe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Rd{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new xn(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Ld{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Te.prototype[Symbol.iterator]=function(){return this.iter()},xn.prototype[Symbol.iterator]=Rd.prototype[Symbol.iterator]=Ld.prototype[Symbol.iterator]=function(){return this});class oS{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function Hr(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let Dr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Dr.length;r++)Dr[r]+=Dr[r-1];function lS(r){for(let e=1;e<Dr.length;e+=2)if(Dr[e]>r)return Dr[e-1]<=r;return!1}function tf(r){return r>=127462&&r<=127487}const rf=8205;function Ze(r,e,t=!0,i=!0){return(t?Cd:aS)(r,e,i)}function Cd(r,e,t){if(e==r.length)return e;e&&Dd(r.charCodeAt(e))&&Vd(r.charCodeAt(e-1))&&e--;let i=Xe(r,e);for(e+=Ut(i);e<r.length;){let n=Xe(r,e);if(i==rf||n==rf||t&&lS(n))e+=Ut(n),i=n;else if(tf(n)){let s=0,o=e-2;for(;o>=0&&tf(Xe(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function aS(r,e,t){for(;e>0;){let i=Cd(r,e-2,t);if(i<e)return i;e--}return 0}function Dd(r){return r>=56320&&r<57344}function Vd(r){return r>=55296&&r<56320}function Xe(r,e){let t=r.charCodeAt(e);if(!Vd(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return Dd(i)?(t-55296<<10)+(i-56320)+65536:t}function vh(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Ut(r){return r<65536?1:2}const aa=/\r\n?|\n/;var ht=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(ht||(ht={}));class oi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){ha(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new oi(e)}composeDesc(e){return this.empty?e:e.empty?this:Ud(this,e)}mapDesc(e,t=!1){return e.empty?this:ca(this,e,t)}mapPos(e,t=-1,i=ht.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=ht.Simple&&h>=e&&(i==ht.TrackDel&&n<e&&h>e||i==ht.TrackBefore&&n<e||i==ht.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new oi(e)}static create(e){return new oi(e)}}class We extends oi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ha(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return ca(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Te.empty);i.push(o?e.slice(s,s+o):Te.empty)}s+=o}return new We(t,i)}compose(e){return this.empty?e:e.empty?this:Ud(this,e,!0)}map(e,t=!1){return e.empty?this:ca(this,e,t,!0)}iterChanges(e,t=!1){ha(this,e,t)}get desc(){return oi.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new _n(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);rt(n,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;rt(t,c,u),u>0&&xi(i,t,s.text),s.forward(c),l+=c}let h=e[o++];for(;l<h;){if(s.done)break e;let c=Math.min(s.len,h-l);rt(t,c,-1),rt(n,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new We(t,i),filtered:oi.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&rt(n,t-o,-1);let u=new We(n,s);l=l?l.compose(u.map(l)):u,n=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof We){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:p=u,insert:g}=c;if(u>p||u<0||p>t)throw new RangeError(`Invalid change range ${u} to ${p} (in doc of length ${t})`);let S=g?typeof g=="string"?Te.of(g.split(i||aa)):g:Te.empty,T=S.length;if(u==p&&T==0)return;u<o&&a(),u>o&&rt(n,u-o,-1),rt(n,p-u,T),xi(s,n,S),o=p}}return h(e),a(!l),l}static empty(e){return new We(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Te.empty);i[n]=Te.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new We(t,i)}static createSet(e,t){return new We(e,t)}}function rt(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function xi(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Te.empty);r.push(t)}}function ha(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,c=s,u=Te.empty;for(;h+=l,c+=a,a&&i&&(u=u.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,c,u),n=h,s=c}}}function ca(r,e,t,i=!1){let n=[],s=i?[]:null,o=new _n(r),l=new _n(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);rt(n,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(rt(n,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&(rt(n,0,o.ins),s&&xi(s,n,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;rt(n,h,a<o.i?o.ins:0),s&&a<o.i&&xi(s,n,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?We.createSet(n,s):oi.create(n);throw new Error("Mismatched change set lengths")}}function Ud(r,e,t=!1){let i=[],n=t?[]:null,s=new _n(r),o=new _n(e);for(let l=!1;;){if(s.done&&o.done)return n?We.createSet(i,n):oi.create(i);if(s.ins==0)rt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)rt(i,0,o.ins,l),n&&xi(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;rt(i,a,c,l),n&&c&&xi(n,i,o.text)}else o.ins==-1?(rt(i,s.off?0:s.len,a,l),n&&xi(n,i,s.textBit(a))):(rt(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&xi(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class _n{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Te.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Te.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class nr{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new nr(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return C.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return C.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return C.range(e.anchor,e.head)}static create(e,t,i){return new nr(e,t,i)}}class C{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:C.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new C([this.main],0)}addRange(e,t=!0){return C.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,C.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new C(e.ranges.map(t=>nr.fromJSON(t)),e.main)}static single(e,t=e){return new C([C.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return C.normalized(e.slice(),t);i=s.to}return new C(e,t)}static cursor(e,t=0,i,n){return nr.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let s=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?nr.create(t,e,48|s):nr.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?C.range(a,l):C.range(l,a))}}return new C(e,t)}}function Md(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let bh=0;class G{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=bh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new G(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Ah),!!e.static,e.enables)}of(e){return new Js([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Js(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Ah(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class Js{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=bh++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,p){if(a&&p.docChanged||h&&(p.docChanged||p.selection)||fa(u,c)){let g=i(u);if(l?!nf(g,u.values[o],n):!n(g,u.values[o]))return u.values[o]=g,1}return 0},reconfigure:(u,p)=>{let g,S=p.config.address[s];if(S!=null){let T=So(p,S);if(this.dependencies.every(I=>I instanceof G?p.facet(I)===u.facet(I):I instanceof et?p.field(I,!1)==u.field(I,!1):!0)||(l?nf(g=i(u),T,n):n(g=i(u),T)))return u.values[o]=T,0}else g=i(u);return u.values[o]=g,1}}}}function nf(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function fa(r,e){let t=!1;for(let i of e)kn(r,i)&1&&(t=!0);return t}function hS(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let c=0;c<i.length;c++){let u=So(a,i[c]);if(n[c]==2)for(let p of u)h.push(p);else h.push(u)}return e.combine(h)}return{create(a){for(let h of i)kn(a,h);return a.values[o]=l(a),1},update(a,h){if(!fa(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=fa(a,i),u=h.config.facets[e.id],p=h.facet(e);if(u&&!c&&Ah(t,u))return a.values[o]=p,0;let g=l(a);return e.compare(g,p)?(a.values[o]=p,0):(a.values[o]=g,1)}}}const sf=G.define({static:!0});class et{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new et(bh++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(sf).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,sf.of({field:this,create:e})]}get extension(){return this}}const ir={lowest:4,low:3,default:2,high:1,highest:0};function un(r){return e=>new Pd(e,r)}const pr={highest:un(ir.highest),high:un(ir.high),default:un(ir.default),low:un(ir.low),lowest:un(ir.lowest)};class Pd{constructor(e,t){this.inner=e,this.prec=t}}class Jo{of(e){return new ua(this,e)}reconfigure(e){return Jo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ua{constructor(e,t){this.compartment=e,this.inner=t}}class go{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let p of cS(e,t,o))p instanceof et?n.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let l=Object.create(null),a=[],h=[];for(let p of n)l[p.id]=h.length<<1,h.push(g=>p.slot(g));let c=i==null?void 0:i.config.facets;for(let p in s){let g=s[p],S=g[0].facet,T=c&&c[p]||[];if(g.every(I=>I.type==0))if(l[S.id]=a.length<<1|1,Ah(T,g))a.push(i.facet(S));else{let I=S.combine(g.map(y=>y.value));a.push(i&&S.compare(I,i.facet(S))?i.facet(S):I)}else{for(let I of g)I.type==0?(l[I.id]=a.length<<1|1,a.push(I.value)):(l[I.id]=h.length<<1,h.push(y=>I.dynamicSlot(y)));l[S.id]=h.length<<1,h.push(I=>hS(I,S,g))}}let u=h.map(p=>p(l));return new go(e,o,u,l,a,s)}}function cS(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof ua&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof ua){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof Pd)s(o.inner,o.prec);else if(o instanceof et)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Js)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,ir.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,ir.default),i.reduce((o,l)=>o.concat(l))}function kn(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function So(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const _d=G.define(),da=G.define({combine:r=>r.some(e=>e),static:!0}),Bd=G.define({combine:r=>r.length?r[0]:void 0,static:!0}),Fd=G.define(),Hd=G.define(),qd=G.define(),zd=G.define({combine:r=>r.length?r[0]:!1});class Oi{constructor(e,t){this.type=e,this.value=t}static define(){return new fS}}class fS{of(e){return new Oi(this,e)}}class uS{constructor(e){this.map=e}of(e){return new ie(this,e)}}class ie{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ie(this.type,t)}is(e){return this.type==e}static define(e={}){return new uS(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}ie.reconfigure=ie.define();ie.appendConfig=ie.define();class Ge{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Md(i,t.newLength),s.some(l=>l.type==Ge.time)||(this.annotations=s.concat(Ge.time.of(Date.now())))}static create(e,t,i,n,s,o){return new Ge(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ge.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ge.time=Oi.define();Ge.userEvent=Oi.define();Ge.addToHistory=Oi.define();Ge.remote=Oi.define();function dS(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Wd(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=We.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:ie.mapEffects(r.effects,n).concat(ie.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function pa(r,e,t){let i=e.selection,n=Vr(e.annotations);return e.userEvent&&(n=n.concat(Ge.userEvent.of(e.userEvent))),{changes:e.changes instanceof We?e.changes:We.of(e.changes||[],t,r.facet(Bd)),selection:i&&(i instanceof C?i:C.single(i.anchor,i.head)),effects:Vr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Gd(r,e,t){let i=pa(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=Wd(i,pa(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=Ge.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return mS(t?pS(n):n)}function pS(r){let e=r.startState,t=!0;for(let n of e.facet(Fd)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:dS(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=We.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}r=Ge.create(e,n,r.selection&&r.selection.map(s),ie.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(Hd);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof Ge?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ge?r=s[0]:r=Gd(e,Vr(s),!1)}return r}function mS(r){let e=r.startState,t=e.facet(qd),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=Wd(i,pa(e,s,r.changes.newLength),!0))}return i==r?r:Ge.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const gS=[];function Vr(r){return r==null?gS:Array.isArray(r)?r:[r]}var Ve=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Ve||(Ve={}));const SS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ma;try{ma=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ES(r){if(ma)return ma.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||SS.test(t)))return!0}return!1}function TS(r){return e=>{if(!/\S/.test(e))return Ve.Space;if(ES(e))return Ve.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Ve.Word;return Ve.Other}}class ge{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)kn(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return kn(this,i),So(this,i)}update(...e){return Gd(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(Jo.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,h)=>n.set(h,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(ie.reconfigure)?(t=null,i=l.value):l.is(ie.appendConfig)&&(t=null,i=Vr(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=go.resolve(i,n,this),s=new ge(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=e.startState.facet(da)?e.newSelection:e.newSelection.asSingle();new ge(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:C.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Vr(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(n);for(let p=0;p<l;p++)s[p]=s[p].map(c);let u=n.mapDesc(h,!0);s.push(a.range.map(u)),n=n.compose(c),o=ie.mapEffects(o,c).concat(ie.mapEffects(Vr(a.effects),u))}return{changes:n,selection:C.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof We?e:We.of(e,this.doc.length,this.facet(ge.lineSeparator))}toText(e){return Te.of(e.split(this.facet(ge.lineSeparator)||aa))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(kn(this,t),So(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof et&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ge.create({doc:e.doc,selection:C.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=go.resolve(e.extensions||[],new Map),i=e.doc instanceof Te?e.doc:Te.of((e.doc||"").split(t.staticFacet(ge.lineSeparator)||aa)),n=e.selection?e.selection instanceof C?e.selection:C.single(e.selection.anchor,e.selection.head):C.single(0);return Md(n,i.length),t.staticFacet(da)||(n=n.asSingle()),new ge(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ge.tabSize)}get lineBreak(){return this.facet(ge.lineSeparator)||`
`}get readOnly(){return this.facet(zd)}phrase(e,...t){for(let i of this.facet(ge.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(_d))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return TS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=Ze(t,o,!1);if(s(t.slice(a,o))!=Ve.Word)break;o=a}for(;l<n;){let a=Ze(t,l);if(s(t.slice(l,a))!=Ve.Word)break;l=a}return o==l?null:C.range(o+i,l+i)}}ge.allowMultipleSelections=da;ge.tabSize=G.define({combine:r=>r.length?r[0]:4});ge.lineSeparator=Bd;ge.readOnly=zd;ge.phrases=G.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});ge.languageData=_d;ge.changeFilter=Fd;ge.transactionFilter=Hd;ge.transactionExtender=qd;Jo.reconfigure=ie.define();function hi(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class lr{eq(e){return this==e}range(e,t=e){return ga.create(e,t,this)}}lr.prototype.startSide=lr.prototype.endSide=0;lr.prototype.point=!1;lr.prototype.mapMode=ht.TrackDel;let ga=class jd{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new jd(e,t,i)}};function Sa(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class wh{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,p,g;if(c==u){let S=t.mapPos(c,h.startSide,h.mapMode);if(S==null||(p=g=S,h.startSide!=h.endSide&&(g=t.mapPos(c,h.endSide),g<p)))continue}else if(p=t.mapPos(c,h.startSide),g=t.mapPos(u,h.endSide),p>g||p==g&&h.startSide>0&&h.endSide<=0)continue;(g-p||h.endSide-h.startSide)<0||(o<0&&(o=p),h.point&&(l=Math.max(l,g-p)),i.push(h),n.push(p-o),s.push(g-o))}return{mapped:i.length?new wh(n,s,i,l):null,pos:o}}}class me{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new me(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Sa)),this.isEmpty)return t.length?me.of(t):this;let l=new Kd(this,null,-1).goto(0),a=0,h=[],c=new _i;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(ga.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?me.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new me(i,t,s||me.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Bn.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Bn.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=of(o,l,i),h=new dn(o,a,s),c=new dn(l,a,s);i.iterGaps((u,p,g)=>lf(h,u,c,p,g,n)),i.empty&&i.length==0&&lf(h,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=of(s,o),a=new dn(s,l,0).goto(i),h=new dn(o,l,0).goto(i);for(;;){if(a.to!=h.to||!Ea(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new dn(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);n.point(l,h,o.point,c,u,o.pointRank),a=Math.min(o.openEnd(h),c.length)}else h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new _i;for(let n of e instanceof ga?[e]:t?OS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return me.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=me.empty;n=n.nextLayer)t=new me(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}me.empty=new me([],[],null,-1);function OS(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(Sa(e,i)>0)return r.slice().sort(Sa);e=i}return r}me.empty.nextLayer=me.empty;class _i{finishChunk(e){this.chunks.push(new wh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new _i)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(me.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=me.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function of(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class Kd{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bn{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new Kd(o,t,i,s));return n.length==1?n[0]:new Bn(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)wl(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)wl(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),wl(this.heap,0)}}}function wl(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class dn{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bn.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ws(this.active,e),ws(this.activeTo,e),ws(this.activeRank,e),this.minActive=af(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||n-this.activeTo[t])>0;)t++;xs(this.active,t,i),xs(this.activeTo,t,n),xs(this.activeRank,t,s),e&&xs(e,t,this.cursor.from),this.minActive=af(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&ws(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function lf(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,c=h<0?r.to+a:t.to,u=Math.min(c,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Ea(r.activeForPoint(r.to),t.activeForPoint(t.to))||s.comparePoint(l,u,r.point,t.point):u>l&&!Ea(r.active,t.active)&&s.compareRange(l,u,r.active,t.active),c>o)break;l=c,h<=0&&r.next(),h>=0&&t.next()}}function Ea(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function ws(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function xs(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function af(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function en(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=Ze(r,n));return i}function Ta(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=Ze(r,n)}return i===!0?-1:r.length}const Oa="",hf=typeof Symbol>"u"?"__"+Oa:Symbol.for(Oa),Ia=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Bi{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),p=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let g in l){let S=l[g];if(/&/.test(g))s(g.split(/,\s*/).map(T=>o.map(I=>T.replace(/&/,I))).reduce((T,I)=>T.concat(I)),S,a);else if(S&&typeof S=="object"){if(!u)throw new RangeError("The value of a property ("+g+") should be a primitive value.");s(n(g),S,c,p)}else S!=null&&c.push(g.replace(/_.*/,"").replace(/[A-Z]/g,T=>"-"+T.toLowerCase())+": "+S+";")}(c.length||p)&&a.push((i&&!u&&!h?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=cf[hf]||1;return cf[hf]=e+1,Oa+e.toString(36)}static mount(e,t,i){let n=e[Ia],s=i&&i.nonce;n?s&&n.setNonce(s):n=new IS(e,s),n.mount(Array.isArray(t)?t:[t],e)}}let ff=new Map;class IS{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=ff.get(i);if(s)return e[Ia]=s;this.sheet=new n.CSSStyleSheet,ff.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ia]=this}mount(e,t){let i=this.sheet,n=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],n++)}else{for(;s<a;)n+=this.modules[s++].rules.length;n+=l.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Fi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Fn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yS=typeof navigator<"u"&&/Mac/.test(navigator.platform),NS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)Fi[48+Je]=Fi[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)Fi[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)Fi[Je]=String.fromCharCode(Je+32),Fn[Je]=String.fromCharCode(Je);for(var xl in Fi)Fn.hasOwnProperty(xl)||(Fn[xl]=Fi[xl]);function vS(r){var e=yS&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||NS&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Fn:Fi)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Hn(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function ya(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function Ys(r,e){if(!e.anchorNode)return!1;try{return ya(r,e.anchorNode)}catch{return!1}}function qn(r){return r.nodeType==3?hr(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Rn(r,e,t,i){return t?uf(r,e,t,i,-1)||uf(r,e,t,i,1):!1}function ar(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Eo(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function uf(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:ai(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=ar(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?ai(r):0}else return!1}}function ai(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Yo(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function bS(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function $d(r,e){let t=e.width/r.offsetWidth,i=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-r.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function AS(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView||window;for(let c=r,u=!1;c&&!u;)if(c.nodeType==1){let p,g=c==a.body,S=1,T=1;if(g)p=bS(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let A=c.getBoundingClientRect();({scaleX:S,scaleY:T}=$d(c,A)),p={left:A.left,right:A.left+c.clientWidth*S,top:A.top,bottom:A.top+c.clientHeight*T}}let I=0,y=0;if(n=="nearest")e.top<p.top?(y=-(p.top-e.top+o),t>0&&e.bottom>p.bottom+y&&(y=e.bottom-p.bottom+y+o)):e.bottom>p.bottom&&(y=e.bottom-p.bottom+o,t<0&&e.top-y<p.top&&(y=-(p.top+y-e.top+o)));else{let A=e.bottom-e.top,v=p.bottom-p.top;y=(n=="center"&&A<=v?e.top+A/2-v/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-v+o)-p.top}if(i=="nearest"?e.left<p.left?(I=-(p.left-e.left+s),t>0&&e.right>p.right+I&&(I=e.right-p.right+I+s)):e.right>p.right&&(I=e.right-p.right+s,t<0&&e.left<p.left+I&&(I=-(p.left+I-e.left+s))):I=(i=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:i=="start"==l?e.left-s:e.right-(p.right-p.left)+s)-p.left,I||y)if(g)h.scrollBy(I,y);else{let A=0,v=0;if(y){let R=c.scrollTop;c.scrollTop+=y/T,v=(c.scrollTop-R)*T}if(I){let R=c.scrollLeft;c.scrollLeft+=I/S,A=(c.scrollLeft-R)*S}e={left:e.left-A,top:e.top-v,right:e.right-A,bottom:e.bottom-v},A&&Math.abs(A-I)<1&&(i="nearest"),v&&Math.abs(v-y)<1&&(n="nearest")}if(g)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function wS(r){let e=r.ownerDocument,t,i;for(let n=r.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class xS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?ai(t):0),i,Math.min(e.focusOffset,i?ai(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Tr=null;function Qd(r){if(r.setActive)return r.setActive();if(Tr)return r.focus(Tr);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Tr==null?{get preventScroll(){return Tr={preventScroll:!0},!0}}:void 0),!Tr){Tr=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let df;function hr(r,e,t=e){let i=df||(df=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function Ur(r,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,r.dispatchEvent(s);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,r.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function kS(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function Xd(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function RS(r,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,ai(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=ai(t))}else{if(t==r)return!0;i=ar(t),t=t.parentNode}}function Jd(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function Yd(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=ai(t)}else if(t.parentNode&&!Eo(t))i=ar(t),t=t.parentNode;else return null}}function Zd(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Eo(t))i=ar(t)+1,t=t.parentNode;else return null}}class st{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new st(e.parentNode,ar(e),t)}static after(e,t){return new st(e.parentNode,ar(e)+1,t)}}const xh=[];class ve{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=n?n.nextSibling:i.firstChild)){let l=ve.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=pf(s);else i.insertBefore(o.dom,s);n=o.dom}for(s=n?n.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=pf(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=ai(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!ve.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,c=i;a<this.children.length;a++){let u=this.children[a],p=h+u.length;if(h<e&&p>t)return u.domBoundsAround(e,t,h);if(p>=e&&n==-1&&(n=a,s=h),h>t&&u.dom.parentNode==this.dom){o=a,l=c;break}c=p,h=p+u.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=xh){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ep(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ve.prototype.breakAfter=0;function pf(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class ep{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function tp(r,e,t,i,n,s,o,l,a){let{children:h}=r,c=h.length?h[e]:null,u=s.length?s[s.length-1]:null,p=u?u.breakAfter:o;if(!(e==i&&c&&!o&&!p&&s.length<2&&c.merge(t,n,s.length?u:null,t==0,l,a))){if(i<h.length){let g=h[i];g&&(n<g.length||g.breakAfter&&(u!=null&&u.breakAfter))?(e==i&&(g=g.split(n),n=0),!p&&u&&g.merge(0,n,u,!0,0,a)?s[s.length-1]=g:((n||g.children.length&&!g.children[0].length)&&g.merge(0,n,null,!1,0,a),s.push(g))):g!=null&&g.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function ip(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),u=e-t;for(let p of i)u+=p.length;r.length+=u,tp(r,h,c,l,a,i,0,n,s)}let mt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Na=typeof document<"u"?document:{documentElement:{style:{}}};const va=/Edge\/(\d+)/.exec(mt.userAgent),rp=/MSIE \d/.test(mt.userAgent),ba=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mt.userAgent),Zo=!!(rp||ba||va),mf=!Zo&&/gecko\/(\d+)/i.test(mt.userAgent),kl=!Zo&&/Chrome\/(\d+)/.exec(mt.userAgent),gf="webkitFontSmoothing"in Na.documentElement.style,np=!Zo&&/Apple Computer/.test(mt.vendor),Sf=np&&(/Mobile\/\w+/.test(mt.userAgent)||mt.maxTouchPoints>2);var j={mac:Sf||/Mac/.test(mt.platform),windows:/Win/.test(mt.platform),linux:/Linux|X11/.test(mt.platform),ie:Zo,ie_version:rp?Na.documentMode||6:ba?+ba[1]:va?+va[1]:0,gecko:mf,gecko_version:mf?+(/Firefox\/(\d+)/.exec(mt.userAgent)||[0,0])[1]:0,chrome:!!kl,chrome_version:kl?+kl[1]:0,ios:Sf,android:/Android\b/.test(mt.userAgent),webkit:gf,safari:np,webkit_version:gf?+(/\bAppleWebKit\/(\d+)/.exec(mt.userAgent)||[0,0])[1]:0,tabSize:Na.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const LS=256;class Gt extends ve{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Gt)||this.length-(t-e)+i.length>LS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Gt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new st(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return CS(this.dom,e,t)}}class Ei extends ve{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(Xd(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,s,o){return i&&(!(i instanceof Ei&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(ip(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Ei(this.mark,t,o)}domAtPos(e){return sp(this,e)}coordsAt(e,t){return lp(this,e,t)}}function CS(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?j.chrome||j.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=hr(r,n,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return j.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?Yo(a,o<0):a||null}class ki extends ve{static create(e,t,i){return new ki(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=ki.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof ki)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof ki&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Te.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Te.empty}domAtPos(e){return(this.length?e==0:this.side>0)?st.before(this.dom):st.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),s=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;s=n[l],!(e>0?l==0:l==n.length-1||s.top<s.bottom);l+=o?-1:1);return Yo(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class qr extends ve{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof qr&&e.side==this.side}split(){return new qr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?st.before(this.dom):st.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Te.empty}get isHidden(){return!0}}Gt.prototype.children=ki.prototype.children=qr.prototype.children=xh;function sp(r,e){let t=r.dom,{children:i}=r,n=0;for(let s=0;n<i.length;n++){let o=i[n],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=n;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=n;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new st(t,0)}function op(r,e,t){let i,{children:n}=r;t>0&&e instanceof Ei&&n.length&&(i=n[n.length-1])instanceof Ei&&i.mark.eq(e.mark)?op(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function lp(r,e,t){let i=null,n=-1,s=null,o=-1;function l(h,c){for(let u=0,p=0;u<h.children.length&&p<=c;u++){let g=h.children[u],S=p+g.length;S>=c&&(g.children.length?l(g,c-p):(!s||s.isHidden&&t>0)&&(S>c||p==S&&g.getSide()>0)?(s=g,o=c-p):(p<c||p==S&&g.getSide()<0&&!g.isHidden)&&(i=g,n=c-p)),p=S}}l(r,e);let a=(t<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?n:o),t):DS(r)}function DS(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=qn(e);return t[t.length-1]||null}function Aa(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const Ef=Object.create(null);function To(r,e,t){if(r==e)return!0;r||(r=Ef),e||(e=Ef);let i=Object.keys(r),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(n.indexOf(s)==-1||r[s]!==e[s]))return!1;return!0}function wa(r,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?r.style.cssText="":r.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?r.style.cssText=t[n]:r.setAttribute(n,t[n]));return i}function VS(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let i=r.attributes[t];e[i.name]=i.value}return e}class Wi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ct=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(ct||(ct={}));class J extends lr{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ns(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Hi(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=ap(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Hi(e,i,n,t,e.widget||null,!0)}static line(e){return new ss(e)}static set(e,t=!1){return me.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}J.none=me.empty;class ns extends J{constructor(e){let{start:t,end:i}=ap(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ns&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&To(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ns.prototype.point=!1;class ss extends J{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ss&&this.spec.class==e.spec.class&&To(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ss.prototype.mapMode=ht.TrackBefore;ss.prototype.point=!0;class Hi extends J{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?ht.TrackBefore:ht.TrackAfter:ht.TrackDel}get type(){return this.startSide!=this.endSide?ct.WidgetRange:this.startSide<=0?ct.WidgetBefore:ct.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Hi&&US(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Hi.prototype.point=!0;function ap(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t??e,end:i??e}}function US(r,e){return r==e||!!(r&&e&&r.compare(e))}function xa(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class Fe extends ve{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof Fe))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),ip(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new Fe;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){To(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){op(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Aa(t,this.attrs||{})),i&&(this.attrs=Aa({class:i},this.attrs||{}))}domAtPos(e){return sp(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(Xd(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(wa(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&ve.get(n)instanceof Ei;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=ve.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!j.ios||!this.children.some(s=>s instanceof Gt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Gt)||/[^ -~]/.test(i.text))return null;let n=qn(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=lp(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-n.lineHeight)<2&&n.textHeight<s){let o=(s-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Fe&&this.children.length==0&&e.children.length==0&&To(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof Fe)return s;if(o>t)break}n=o+s.breakAfter}return null}}class gi extends ve{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof gi)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?st.before(this.dom):st.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new gi(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return xh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Te.empty}domBoundsAround(){return null}become(e){return e instanceof gi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof ka?null:Yo(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class ka extends Wi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ln{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Fe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ks(new qr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof gi)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(ks(new Gt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Hi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Hi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gi(i.widget||zr.block,l,i));else{let a=ki.create(i.widget||zr.inline,l,l?0:i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),c=!a.isEditable&&(e<t||s>n.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(u.append(ks(new qr(1),n),s),s=n.length+Math.max(0,s-n.length)),u.append(ks(a,n),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new Ln(e,t,i,s);return o.openEnd=me.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ks(r,e){for(let t of e)r=new Ei(t,[r],r.length);return r}class zr extends Wi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}zr.inline=new zr("span");zr.block=new zr("div");var Ce=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Ce||(Ce={}));const cr=Ce.LTR,kh=Ce.RTL;function hp(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const MS=hp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),PS=hp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ra=Object.create(null),Jt=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Ra[e]=t,Ra[t]=-e}function cp(r){return r<=247?MS[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?PS[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const _S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ri{get dir(){return this.level%2?kh:cr}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function fp(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let i=r[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!fp(i.inner,n.inner))return!1}return!0}const Ne=[];function BS(r,e,t,i,n){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:t,a=s?256:n;for(let h=o,c=a,u=a;h<l;h++){let p=cp(r.charCodeAt(h));p==512?p=c:p==8&&u==4&&(p=16),Ne[h]=p==4?2:p,p&7&&(u=p),c=p}for(let h=o,c=a,u=a;h<l;h++){let p=Ne[h];if(p==128)h<l-1&&c==Ne[h+1]&&c&24?p=Ne[h]=c:Ne[h]=256;else if(p==64){let g=h+1;for(;g<l&&Ne[g]==64;)g++;let S=h&&c==8||g<t&&Ne[g]==8?u==1?1:8:256;for(let T=h;T<g;T++)Ne[T]=S;h=g-1}else p==8&&u==1&&(Ne[h]=1);c=p,p&7&&(u=p)}}}function FS(r,e,t,i,n){let s=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let h=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let u=h,p,g,S;u<c;u++)if(g=Ra[p=r.charCodeAt(u)])if(g<0){for(let T=l-3;T>=0;T-=3)if(Jt[T+1]==-g){let I=Jt[T+2],y=I&2?n:I&4?I&1?s:n:0;y&&(Ne[u]=Ne[Jt[T]]=y),l=T;break}}else{if(Jt.length==189)break;Jt[l++]=u,Jt[l++]=p,Jt[l++]=a}else if((S=Ne[u])==2||S==1){let T=S==n;a=T?0:1;for(let I=l-3;I>=0;I-=3){let y=Jt[I+2];if(y&2)break;if(T)Jt[I+2]|=2;else{if(y&4)break;Jt[I+2]|=4}}}}}function HS(r,e,t,i){for(let n=0,s=i;n<=t.length;n++){let o=n?t[n-1].to:r,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let h=Ne[a];if(h==256){let c=a+1;for(;;)if(c==l){if(n==t.length)break;c=t[n++].to,l=n<t.length?t[n].from:e}else if(Ne[c]==256)c++;else break;let u=s==1,p=(c<e?Ne[c]:i)==1,g=u==p?u?1:2:i;for(let S=c,T=n,I=T?t[T-1].to:r;S>a;)S==I&&(S=t[--T].from,I=T?t[T-1].to:r),Ne[--S]=g;a=c}else s=h,a++}}}function La(r,e,t,i,n,s,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,h=0;a<t;){let c=!0,u=!1;if(h==s.length||a<s[h].from){let T=Ne[a];T!=l&&(c=!1,u=T==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,S=a;e:for(;;)if(h<s.length&&S==s[h].from){if(u)break e;let T=s[h];if(!c)for(let I=T.to,y=h+1;;){if(I==t)break e;if(y<s.length&&s[y].from==I)I=s[y++].to;else{if(Ne[I]==l)break e;break}}if(h++,p)p.push(T);else{T.from>a&&o.push(new Ri(a,T.from,g));let I=T.direction==cr!=!(g%2);Ca(r,I?i+1:i,n,T.inner,T.from,T.to,o),a=T.to}S=T.to}else{if(S==t||(c?Ne[S]!=l:Ne[S]==l))break;S++}p?La(r,a,S,i+1,n,p,o):a<S&&o.push(new Ri(a,S,g)),a=S}else for(let a=t,h=s.length;a>e;){let c=!0,u=!1;if(!h||a>s[h-1].to){let T=Ne[a-1];T!=l&&(c=!1,u=T==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,S=a;e:for(;;)if(h&&S==s[h-1].to){if(u)break e;let T=s[--h];if(!c)for(let I=T.from,y=h;;){if(I==e)break e;if(y&&s[y-1].to==I)I=s[--y].from;else{if(Ne[I-1]==l)break e;break}}if(p)p.push(T);else{T.to<a&&o.push(new Ri(T.to,a,g));let I=T.direction==cr!=!(g%2);Ca(r,I?i+1:i,n,T.inner,T.from,T.to,o),a=T.from}S=T.from}else{if(S==e||(c?Ne[S-1]!=l:Ne[S-1]==l))break;S--}p?La(r,S,a,i+1,n,p,o):S<a&&o.push(new Ri(S,a,g)),a=S}}function Ca(r,e,t,i,n,s,o){let l=e%2?2:1;BS(r,n,s,i,l),FS(r,n,s,i,l),HS(n,s,i,l),La(r,n,s,e,t,i,o)}function qS(r,e,t){if(!r)return[new Ri(0,0,e==kh?1:0)];if(e==cr&&!t.length&&!_S.test(r))return up(r.length);if(t.length)for(;r.length>Ne.length;)Ne[Ne.length]=256;let i=[],n=e==cr?0:1;return Ca(r,n,n,t,0,r.length,i),i}function up(r){return[new Ri(0,r,0)]}let dp="";function zS(r,e,t,i,n){var s;let o=i.head-r.from,l=Ri.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],h=a.side(n,t);if(o==h){let p=l+=n?1:-1;if(p<0||p>=e.length)return null;a=e[l=p],o=a.side(!n,t),h=a.side(n,t)}let c=Ze(r.text,o,a.forward(n,t));(c<a.from||c>a.to)&&(c=h),dp=r.text.slice(Math.min(o,c),Math.max(o,c));let u=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return u&&c==h&&u.level+(n?0:1)<a.level?C.cursor(u.side(!n,t)+r.from,u.forward(n,t)?1:-1,u.level):C.cursor(c+r.from,a.forward(n,t)?-1:1,a.level)}function WS(r,e,t){for(let i=e;i<t;i++){let n=cp(r.charCodeAt(i));if(n==1)return cr;if(n==2||n==4)return kh}return cr}const pp=G.define(),mp=G.define(),gp=G.define(),Sp=G.define(),Da=G.define(),Ep=G.define(),Tp=G.define(),Rh=G.define(),Lh=G.define(),Op=G.define({combine:r=>r.some(e=>e)}),Ip=G.define({combine:r=>r.some(e=>e)}),yp=G.define();class Mr{constructor(e,t="nearest",i="nearest",n=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Mr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Mr(C.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Rs=ie.define({map:(r,e)=>r.map(e)}),Np=ie.define();function St(r,e,t){let i=r.facet(Sp);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ai=G.define({combine:r=>r.length?r[0]:!0});let GS=0;const In=G.define();class qe{constructor(e,t,i,n,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:s,decorations:o}=t||{};return new qe(GS++,e,i,n,l=>{let a=[In.of(l)];return o&&a.push(zn.of(h=>{let c=h.plugin(l);return c?o(c):J.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return qe.define(i=>new e(i),t)}}class Rl{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(St(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){St(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){St(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vp=G.define(),Ch=G.define(),zn=G.define(),bp=G.define(),Dh=G.define(),Ap=G.define();function Tf(r,e){let t=r.state.facet(Ap);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(r):s),n=[];return me.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let h=s-e.from,c=o-e.from,u=n;for(let p=l.length-1;p>=0;p--,a--){let g=l[p].spec.bidiIsolate,S;if(g==null&&(g=WS(e.text,h,c)),a>0&&u.length&&(S=u[u.length-1]).to==h&&S.direction==g)S.to=c,u=S.inner;else{let T={from:h,to:c,direction:g,inner:[]};u.push(T),u=T.inner}}}}),n}const wp=G.define();function xp(r){let e=0,t=0,i=0,n=0;for(let s of r.state.facet(wp)){let o=s(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const yn=G.define();class _t{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new _t(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,c=a?a.fromB:1e9;for(;s<t.length&&t[s]<c;){let u=t[s],p=t[s+1],g=Math.max(l,u),S=Math.min(c,p);if(g<=S&&new _t(g+h,S+h,g,S).addToSet(i),p>c)break;s+=2}if(!a)return i;new _t(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Oo{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=We.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,o,l,a)=>n.push(new _t(s,o,l,a))),this.changedRanges=n}static create(e,t,i){return new Oo(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Of extends ve{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=J.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Fe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new _t(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!YS(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let s=n>-1?KS(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:c}=this.hasComposition;i=new _t(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(j.ie||j.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=XS(o,l,e.changes);return i=_t.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=j.chrome||j.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof gi&&o.widget instanceof ka&&s.push(o.dom);n.updateGaps(s)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:h,fromB:c,toB:u}=l,p,g,S,T;if(i&&i.range.fromB<u&&i.range.toB>c){let R=Ln.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),k=Ln.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);g=R.breakAtStart,S=R.openStart,T=k.openEnd;let w=this.compositionView(i);k.breakAtStart?w.breakAfter=1:k.content.length&&w.merge(w.length,w.length,k.content[0],!1,k.openStart,0)&&(w.breakAfter=k.content[0].breakAfter,k.content.shift()),R.content.length&&w.merge(0,0,R.content[R.content.length-1],!0,0,R.openEnd)&&R.content.pop(),p=R.content.concat(w).concat(k.content)}else({content:p,breakAtStart:g,openStart:S,openEnd:T}=Ln.build(this.view.state.doc,c,u,this.decorations,this.dynamicDecorationMap));let{i:I,off:y}=s.findPos(h,1),{i:A,off:v}=s.findPos(a,-1);tp(this,A,v,I,y,p,g,S,T)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Np)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Gt(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new Ei(n,[t],t.length);let i=new Fe;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=ve.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let s=e.marks.length-1;s>=-1;s--)i=n.childPos(i.off,1),n=n.children[i.i],t(s>=0?e.marks[s].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,s=!n&&Ys(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(j.gecko&&l.empty&&!this.hasComposition&&jS(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=h=new st(u,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Rn(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Rn(h.node,h.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{j.android&&j.chrome&&this.dom.contains(c.focusNode)&&JS(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Hn(this.view.root);if(u)if(l.empty){if(j.gecko){let p=$S(a.node,a.offset);if(p&&p!=3){let g=(p==1?Yd:Zd)(a.node,a.offset);g&&(a=new st(g.node,g.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(h.node,h.offset)}catch{}}else{let p=document.createRange();l.anchor>l.head&&([a,h]=[h,a]),p.setEnd(h.node,h.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,h)),this.impreciseAnchor=a.precise?null:new st(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new st(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Rn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Hn(e.root),{anchorNode:n,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Fe.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(n,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let s=ve.get(t.childNodes[n]);s instanceof Fe&&(i=s.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let s=ve.get(t.childNodes[n]);s instanceof Fe&&(i=s.domAtPos(s.length))}return i?new st(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=ve.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof Fe)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,h=a-l.length;if(a<e)break;if(h<=e&&(h<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Fe&&!(i instanceof Fe&&t>=0)))i=l,n=h;else if(i&&h==e&&a==e&&l instanceof gi&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=h}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof Fe))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Gt))return null;let s=Ze(n.text,i);if(s==i)return null;let o=hr(n.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ce.LTR;for(let h=0,c=0;c<this.children.length;c++){let u=this.children[c],p=h+u.length;if(p>n)break;if(h>=i){let g=u.dom.getBoundingClientRect();if(t.push(g.height),o){let S=u.dom.lastChild,T=S?qn(S):[];if(T.length){let I=T[T.length-1],y=a?I.right-g.left:g.right-I.left;y>l&&(l=y,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=p)}}}h=p+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ce.RTL:Ce.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Fe){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=qn(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,n=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ep(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(J.replace({widget:new ka(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return J.set(e)}updateDeco(){let e=1,t=this.view.state.facet(zn).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,n=this.view.state.facet(bp).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(me.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(yp))try{if(h(this.view,e.range,e))return!0}catch(c){St(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=xp(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;AS(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ce.LTR)}}function jS(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function kp(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let i=Yd(t.focusNode,t.focusOffset),n=Zd(t.focusNode,t.focusOffset),s=i||n;if(n&&i&&n.node!=i.node){let l=ve.get(n.node);if(!l||l instanceof Gt&&l.text!=n.node.nodeValue)s=n;else if(r.docView.lastCompositionAfterCursor){let a=ve.get(i.node);!a||a instanceof Gt&&a.text!=i.node.nodeValue||(s=n)}}if(r.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function KS(r,e,t){let i=kp(r,t);if(!i)return null;let{node:n,from:s,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||r.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,h=new _t(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let u=n.parentNode;;u=u.parentNode){let p=ve.get(u);if(p instanceof Ei)c.push({node:u,deco:p.mark});else{if(p instanceof Fe||u.nodeName=="DIV"&&u.parentNode==r.contentDOM)return{range:h,text:n,marks:c,line:u};if(u!=r.contentDOM)c.push({node:u,deco:new ns({inclusive:!0,attributes:VS(u),tagName:u.tagName.toLowerCase()})});else return null}}}function $S(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let QS=class{constructor(){this.changes=[]}compareRange(e,t){xa(e,t,this.changes)}comparePoint(e,t){xa(e,t,this.changes)}};function XS(r,e,t){let i=new QS;return me.compare(r,e,t,i),i.changes}function JS(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function YS(r,e){let t=!1;return e&&r.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function ZS(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return C.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=Ze(n.text,s,!1):l=Ze(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=Ze(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=Ze(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return C.range(o+n.from,l+n.from)}function eE(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function tE(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function Ll(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function If(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function yf(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Va(r,e,t){let i,n,s,o,l=!1,a,h,c,u;for(let S=r.firstChild;S;S=S.nextSibling){let T=qn(S);for(let I=0;I<T.length;I++){let y=T[I];n&&Ll(n,y)&&(y=If(yf(y,n.bottom),n.top));let A=eE(e,y),v=tE(t,y);if(A==0&&v==0)return S.nodeType==3?Nf(S,e,t):Va(S,e,t);if(!i||o>v||o==v&&s>A){i=S,n=y,s=A,o=v;let R=v?t<y.top?-1:1:A?e<y.left?-1:1:0;l=!R||(R>0?I<T.length-1:I>0)}A==0?t>y.bottom&&(!c||c.bottom<y.bottom)?(a=S,c=y):t<y.top&&(!u||u.top>y.top)&&(h=S,u=y):c&&Ll(c,y)?c=yf(c,y.bottom):u&&Ll(u,y)&&(u=If(u,y.top))}}if(c&&c.bottom>=t?(i=a,n=c):u&&u.top<=t&&(i=h,n=u),!i)return{node:r,offset:0};let p=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Nf(i,p,t);if(l&&i.contentEditable!="false")return Va(i,p,t);let g=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:g}}function Nf(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=hr(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<s){let p=e>=(c.left+c.right)/2,g=p;if((j.chrome||j.gecko)&&hr(r,l).getBoundingClientRect().left==c.right&&(g=!p),u<=0)return{node:r,offset:l+(g?1:0)};n=l+(g?1:0),s=u}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function Rp(r,e,t,i=-1){var n,s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,{x:c,y:u}=e,p=u-l;if(p<0)return 0;if(p>h)return r.state.doc.length;for(let R=r.viewState.heightOracle.textHeight/2,k=!1;a=r.elementAtHeight(p),a.type!=ct.Text;)for(;p=i>0?a.bottom+R:a.top-R,!(p>=0&&p<=h);){if(k)return t?null:0;k=!0,i=-i}u=l+p;let g=a.from;if(g<r.viewport.from)return r.viewport.from==0?0:t?null:vf(r,o,a,c,u);if(g>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:vf(r,o,a,c,u);let S=r.dom.ownerDocument,T=r.root.elementFromPoint?r.root:S,I=T.elementFromPoint(c,u);I&&!r.contentDOM.contains(I)&&(I=null),I||(c=Math.max(o.left+1,Math.min(o.right-1,c)),I=T.elementFromPoint(c,u),I&&!r.contentDOM.contains(I)&&(I=null));let y,A=-1;if(I&&((n=r.docView.nearest(I))===null||n===void 0?void 0:n.isEditable)!=!1){if(S.caretPositionFromPoint){let R=S.caretPositionFromPoint(c,u);R&&({offsetNode:y,offset:A}=R)}else if(S.caretRangeFromPoint){let R=S.caretRangeFromPoint(c,u);R&&({startContainer:y,startOffset:A}=R,(!r.contentDOM.contains(y)||j.safari&&iE(y,A,c)||j.chrome&&rE(y,A,c))&&(y=void 0))}y&&(A=Math.min(ai(y),A))}if(!y||!r.docView.dom.contains(y)){let R=Fe.find(r.docView,g);if(!R)return p>a.top+a.height/2?a.to:a.from;({node:y,offset:A}=Va(R.dom,c,u))}let v=r.docView.nearest(y);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let R=v.dom.getBoundingClientRect();return e.y<R.top||e.y<=R.bottom&&e.x<=(R.left+R.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(y,A)+v.posAtStart}function vf(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let l=r.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(r.defaultLineHeight-l)*.5)/l);s+=a*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+Ta(o,s,r.state.tabSize)}function iE(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return hr(r,i-1,i).getBoundingClientRect().left>t}function rE(r,e,t){if(e!=0)return!1;for(let n=r;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let i=r.nodeType==1?r.getBoundingClientRect():hr(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Ua(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==ct.Text))return i}return t}function nE(r,e,t,i){let n=Ua(r,e.head),s=!i||n.type!=ct.Text||!(r.lineWrapping||n.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=r.dom.getBoundingClientRect(),l=r.textDirectionAt(n.from),a=r.posAtCoords({x:t==(l==Ce.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return C.cursor(a,t?-1:1)}return C.cursor(t?n.to:n.from,t?-1:1)}function bf(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=zS(n,s,o,l,t),c=dp;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;c=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=r.visualLineSide(n,!t)}if(a){if(!a(c))return l}else{if(!i)return h;a=i(c)}l=h}}function sE(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==Ve.Space&&(n=o),n==o}}function oE(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return C.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n,e.assoc||-1),c=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let g=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-g.from))),l=(s<0?g.top:g.bottom)+c}let u=a.left+o,p=i??r.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let S=l+(p+g)*s,T=Rp(r,{x:u,y:S},!1,s);if(S<a.top||S>a.bottom||(s<0?T<n:T>n)){let I=r.docView.coordsForChar(T),y=!I||S<I.top?-1:1;return C.cursor(T,y,void 0,o)}}}function Zs(r,e,t){for(;;){let i=0;for(let n of r)n.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||t||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Cl(r,e,t){let i=Zs(r.state.facet(Dh).map(n=>n(r)),t.from,e.head>t.from?-1:1);return i==t.from?t:C.cursor(i,i<t.from?1:-1)}const Nn="";class lE{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ge.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Nn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let s=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=ve.get(n),a=ve.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Eo(n))||Eo(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>s)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=ve.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(aE(e,i.node,i.offset)?t:0))}}function aE(r,e,t){for(;;){if(!e||t<ai(e))return!1;if(e==r)return!0;t=ar(e)+1,e=e.parentNode}}class Af{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class hE{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:uE(e),a=new lE(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=dE(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!ya(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!ya(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((j.ios||j.chrome)&&e.state.selection.main.empty&&a!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(a,h),p=Math.max(a,h),g=c.from-u,S=c.to-p;(g==0||g==1||u==0)&&(S==0||S==-1||p==e.state.doc.length)&&(a=0,h=e.state.doc.length)}this.newSel=C.single(h,a)}}}function Lp(r,e){let t,{newSel:i}=e,n=r.state.selection.main,s=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,h=null;(s===8||j.android&&e.text.length<l-o)&&(a=n.to,h="end");let c=fE(r.state.doc.sliceString(o,l,Nn),e.text,a-o,h);c&&(j.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Nn+Nn&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Te.of(e.text.slice(c.from,c.toB).split(Nn))})}else i&&(!r.hasFocus&&r.state.facet(Ai)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,n.to))}:(j.mac||j.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=C.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Te.of([" "])}):j.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=C.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Te.of([" "])}),t)return Vh(r,t,i,s);if(i&&!i.main.eq(n)){let o=!1,l="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),l=r.inputState.lastSelectionOrigin),r.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Vh(r,e,t,i=-1){if(j.ios&&r.inputState.flushIOSKey(e))return!0;let n=r.state.selection.main;if(j.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&r.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ur(r.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&Ur(r.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&Ur(r.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,l=()=>o||(o=cE(r,e,t));return r.state.facet(Ep).some(a=>a(r,e.from,e.to,s,l))||r.dispatch(l()),!0}function cE(r,e,t){let i,n=r.state,s=n.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=s.from<e.from?n.sliceDoc(s.from,e.from):"",a=s.to>e.to?n.sliceDoc(e.to,s.to):"";i=n.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+a))}else{let l=n.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(n.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=r.state.sliceDoc(e.from,e.to),c,u=t&&kp(r,t.main.head);if(u){let S=e.insert.length-(e.to-e.from);c={from:u.from,to:u.to-S}}else c=r.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;i=n.changeByRange(S=>{if(S.from==s.from&&S.to==s.to)return{changes:l,range:a||S.map(l)};let T=S.to-p,I=T-h.length;if(S.to-S.from!=g||r.state.sliceDoc(I,T)!=h||S.to>=c.from&&S.from<=c.to)return{range:S};let y=n.changes({from:I,to:T,insert:e.insert}),A=S.to-s.to;return{changes:y,range:a?C.range(Math.max(0,a.anchor+A),Math.max(0,a.head+A)):S.map(y)}})}else i={changes:l,selection:a&&n.selection.replaceRange(a)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function fE(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&r.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function uE(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new Af(t,i)),(n!=t||s!=i)&&e.push(new Af(n,s))),e}function dE(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?C.single(t+e,i+e):null}class pE{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,j.safari&&e.contentDOM.addEventListener("input",()=>null),j.gecko&&RE(e.contentDOM.ownerDocument)}handleEvent(e){!yE(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=mE(e),i=this.handlers,n=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(n.removeEventListener(s,this.handleEvent),l=null),l||n.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&n.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Dp.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),j.android&&j.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return j.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Cp.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||gE.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ur(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:j.safari&&!j.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function wf(r,e){return(t,i)=>{try{return e.call(r,i,t)}catch(n){St(t.state,n)}}}function mE(r){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of r){let n=i.spec;if(n&&n.domEventHandlers)for(let s in n.domEventHandlers){let o=n.domEventHandlers[s];o&&t(s).handlers.push(wf(i.value,o))}if(n&&n.domEventObservers)for(let s in n.domEventObservers){let o=n.domEventObservers[s];o&&t(s).observers.push(wf(i.value,o))}}for(let i in jt)t(i).handlers.push(jt[i]);for(let i in Ft)t(i).observers.push(Ft[i]);return e}const Cp=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gE="dthko",Dp=[16,17,18,20,91,92,224,225],Ls=6;function Cs(r){return Math.max(0,r)*.7+8}function SE(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class EE{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=wS(e.contentDOM),this.atoms=e.state.facet(Dh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ge.allowMultipleSelections)&&TE(e,t),this.dragging=IE(e,t)&&Mp(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&SE(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=xp(this.view);e.clientX-a.left<=n+Ls?t=-Cs(n-e.clientX):e.clientX+a.right>=o-Ls&&(t=Cs(e.clientX-o)),e.clientY-a.top<=s+Ls?i=-Cs(s-e.clientY):e.clientY+a.bottom>=l-Ls&&(i=Cs(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],s=null;if(n.empty){let o=Zs(this.atoms,n.from,0);o!=n.from&&(s=C.cursor(o,-1))}else{let o=Zs(this.atoms,n.from,-1),l=Zs(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(s=C.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?C.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function TE(r,e){let t=r.state.facet(pp);return t.length?t[0](e):j.mac?e.metaKey:e.ctrlKey}function OE(r,e){let t=r.state.facet(mp);return t.length?t[0](e):j.mac?!e.altKey:!e.ctrlKey}function IE(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=Hn(r.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function yE(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=ve.get(t))&&i.ignoreEvent(e))return!1;return!0}const jt=Object.create(null),Ft=Object.create(null),Vp=j.ie&&j.ie_version<15||j.ios&&j.webkit_version<604;function NE(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),Up(r,t.value)},50)}function el(r,e,t){for(let i of r.facet(e))t=i(t,r);return t}function Up(r,e){e=el(r.state,Rh,e);let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Ma!=null&&t.selection.ranges.every(a=>a.empty)&&Ma==s.toString()){let a=-1;i=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:C.cursor(h.from+u.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:C.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Ft.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};jt.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);Ft.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};Ft.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};jt.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of r.state.facet(gp))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=AE(r,e)),t){let i=!r.hasFocus;r.inputState.startMouseSelection(new EE(r,e,t,i)),i&&r.observer.ignore(()=>{Qd(r.contentDOM);let s=r.root.activeElement;s&&!s.contains(r.contentDOM)&&s.blur()});let n=r.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function xf(r,e,t,i){if(i==1)return C.cursor(e,t);if(i==2)return ZS(r.state,e,t);{let n=Fe.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,C.range(o,l)}}let kf=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function vE(r,e,t,i){let n=Fe.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&kf(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&kf(t,i,l)?1:o&&o.bottom>=i?-1:1}function Rf(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:vE(r,t,e.clientX,e.clientY)}}const bE=j.ie&&j.ie_version<=11;let Lf=null,Cf=0,Df=0;function Mp(r){if(!bE)return r.detail;let e=Lf,t=Df;return Lf=r,Df=Date.now(),Cf=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(Cf+1)%3:1}function AE(r,e){let t=Rf(r,e),i=Mp(e),n=r.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),n=n.map(s.changes))},get(s,o,l){let a=Rf(r,s),h,c=xf(r,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let u=xf(r,t.pos,t.bias,i),p=Math.min(u.from,c.from),g=Math.max(u.to,c.to);c=p<c.from?C.range(p,g):C.range(g,p)}return o?n.replaceRange(n.main.extend(c.from,c.to)):l&&i==1&&n.ranges.length>1&&(h=wE(n,a.pos))?h:l?n.addRange(c):C.create([c])}}}function wE(r,e){for(let t=0;t<r.ranges.length;t++){let{from:i,to:n}=r.ranges[t];if(i<=e&&n>=e)return C.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}jt.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let n=r.docView.nearest(e.target);if(n&&n.isWidget){let s=n.posAtStart,o=s+n.length;(s>=t.to||o<=t.from)&&(t=C.range(s,o))}}let{inputState:i}=r;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",el(r.state,Lh,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};jt.dragend=r=>(r.inputState.draggedContent=null,!1);function Vf(r,e,t,i){if(t=el(r.state,Rh,t),!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=r.inputState,o=i&&s&&OE(r,e)?{from:s.from,to:s.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}jt.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,s=()=>{++n==t.length&&Vf(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Vf(r,e,i,!0),!0}return!1};jt.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=Vp?null:e.clipboardData;return t?(Up(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(NE(r),!1)};function xE(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function kE(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:el(r,Lh,e.join(r.lineBreak)),ranges:t,linewise:i}}let Ma=null;jt.copy=jt.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=kE(r.state);if(!t&&!n)return!1;Ma=n?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Vp?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(xE(r,t),!1)};const Pp=Oi.define();function _p(r,e){let t=[];for(let i of r.facet(Tp)){let n=i(r,e);n&&t.push(n)}return t?r.update({effects:t,annotations:Pp.of(!0)}):null}function Bp(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=_p(r.state,e);t?r.dispatch(t):r.update([])}},10)}Ft.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),Bp(r)};Ft.blur=r=>{r.observer.clearSelectionRange(),Bp(r)};Ft.compositionstart=Ft.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};Ft.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,j.chrome&&j.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};Ft.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};jt.beforeinput=(r,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=r.posAtDOM(l.startContainer,l.startOffset),h=r.posAtDOM(l.endContainer,l.endOffset);return Vh(r,{from:a,to:h,insert:r.state.toText(s)},null),!0}}let n;if(j.chrome&&j.android&&(n=Cp.find(s=>s.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return j.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),j.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>Ft.compositionend(r,e),20),!1};const Uf=new Set;function RE(r){Uf.has(r)||(Uf.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const Mf=["pre-wrap","normal","pre-line","break-spaces"];let Wr=!1;function Pf(){Wr=!1}class LE{constructor(e){this.lineWrapping=e,this.doc=Te.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Mf.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s,o){let l=Mf.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=s,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class CE{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ii{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this._content=s}get type(){return typeof this._content=="number"?ct.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ii(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Re=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(Re||(Re={}));const eo=.001;class ft{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>eo&&(Wr=!0),this.height=e)}replace(e,t,i){return ft.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=n[l],p=s.lineAt(a,Re.ByPosNoHeight,i.setDoc(t),0,0),g=p.to>=h?p:s.lineAt(h,Re.ByPosNoHeight,i,0,0);for(u+=g.to-h,h=g.to;l>0&&p.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<p.from&&(p=s.lineAt(a,Re.ByPosNoHeight,i,0,0));c+=p.from-a,a=p.from;let S=Uh.build(i.setDoc(o),e,c,u);s=Io(s,s.replace(a,h,S))}return s.updateHeight(i,0)}static empty(){return new wt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new DE(ft.of(e.slice(0,t)),o,ft.of(e.slice(i)))}}function Io(r,e){return r==e?r:(r.constructor!=e.constructor&&(Wr=!0),e)}ft.prototype.size=1;class Fp extends ft{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new ii(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class wt extends Fp{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new ii(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof wt||n instanceof Qe&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Qe?n=new wt(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):ft.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Qe extends ft{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,s=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let h=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(h),u=l+c.length*a,p=Math.max(i,e-u/2);return new ii(c.from,c.length,p,u,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:u}=t.doc.line(s+h);return new ii(c,u,i+l*h,l,0)}}lineAt(e,t,i,n,s){if(t==Re.ByHeight)return this.blockAt(e,i,n,s);if(t==Re.ByPosNoHeight){let{from:g,to:S}=i.doc.lineAt(e);return new ii(g,S-g,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),h=i.doc.lineAt(e),c=l+h.length*a,u=h.number-o,p=n+l*u+a*(h.from-s-u);return new ii(h.from,h.length,Math.max(n,Math.min(p,n+this.height-c)),c,0)}forEachLine(e,t,i,n,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(i,s);for(let c=e,u=n;c<=t;){let p=i.doc.lineAt(c);if(c==e){let S=p.number-l;u+=a*S+h*(e-s-S)}let g=a+h*p.length;o(new ii(p.from,p.length,u,g,0)),u+=g,c=p.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof Qe?i[i.length-1]=new Qe(s.length+n):i.push(null,new Qe(n-1))}if(e>0){let s=i[0];s instanceof Qe?i[0]=new Qe(e+s.length):i.unshift(new Qe(e-1),null)}return ft.of(i)}decomposeLeft(e,t){t.push(new Qe(e-1),null)}decomposeRight(e,t){t.push(null,new Qe(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new Qe(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let u=n.heights[n.index++];a==-1?a=u:Math.abs(u-a)>=eo&&(a=-2);let p=new wt(c,u);p.outdated=!1,o.push(p),l+=c+1}l<=s&&o.push(null,new Qe(s-l).updateHeight(e,l));let h=ft.of(o);return(a<0||Math.abs(h.height-this.height)>=eo||Math.abs(a-this.heightMetrics(e,t).perLine)>=eo)&&(Wr=!0),Io(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class DE extends ft{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==Re.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==Re.ByPosNoHeight?Re.ByPosNoHeight:Re.ByPos;return a?h.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,Re.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&_f(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),_f(s,l)}return ft.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ft.of(this.break?[e,null,t]:[e,t]):(this.left=Io(this.left,e),this.right=Io(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function _f(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof Qe&&(i=r[e+1])instanceof Qe&&r.splice(e-1,3,new Qe(t.length+1+i.length))}const VE=5;class Uh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof wt?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new wt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Fp(o,n,i)):(o||s||n>=VE)&&this.addLineDeco(n,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new wt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Qe(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof wt)return e;let t=new wt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof wt)&&!this.isCovered?this.nodes.push(new wt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof wt&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new Uh(i,e);return me.spans(t,i,n,s,0),s.finish(i)}}function UE(r,e,t){let i=new ME;return me.compare(r,e,t,i,0),i.changes}class ME{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&xa(e,t,this.changes,5)}}function PE(r,e){let t=r.getBoundingClientRect(),i=r.ownerDocument,n=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let h=r.parentNode;h&&h!=i.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let p=c.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),l=Math.max(l,p.top),a=Math.min(h==r.parentNode?n.innerHeight:a,p.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function _E(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Dl{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e,t){return J.replace({widget:new BE(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class BE extends Wi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Bf{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Ff,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ce.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Ch).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new LE(t),this.stateDeco=e.facet(zn).filter(i=>typeof i!="function"),this.heightMap=ft.empty().applyChanges(this.stateDeco,Te.empty,this.heightOracle.setDoc(e.doc),[new _t(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=J.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Ds(s,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Ff:new Mh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(vn(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zn).filter(c=>typeof c!="function");let n=e.changedRanges,s=_t.extendWithRanges(n,UE(i,this.stateDeco,e?e.changes:We.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Pf(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Wr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ip)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ce.RTL:Ce.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:R,scaleY:k}=$d(t,l);(R>.005&&Math.abs(this.scaleX-R)>.005||k>.005&&Math.abs(this.scaleY-k)>.005)&&(this.scaleX=R,this.scaleY=k,h|=8,o=a=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,p=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=p)&&(this.paddingTop=u,this.paddingBottom=p,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=Jd(e.scrollDOM);let S=(this.printing?_E:PE)(t,this.paddingTop),T=S.top-this.pixelViewport.top,I=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let A=l.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),a){let R=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(R)&&(o=!0),o||n.lineWrapping&&Math.abs(A-this.contentDOMWidth)>n.charWidth){let{lineHeight:k,charWidth:w,textHeight:x}=e.docView.measureTextSize();o=k>0&&n.refresh(s,k,w,x,A/w,R),o&&(e.docView.minWidth=0,h|=8)}T>0&&I>0?c=Math.max(T,I):T<0&&I<0&&(c=Math.min(T,I)),Pf();for(let k of this.viewports){let w=k.from==this.viewport.from?R:e.docView.measureVisibleLineHeights(k);this.heightMap=(o?ft.empty().applyChanges(this.stateDeco,Te.empty,this.heightOracle,[new _t(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new CE(k.from,w))}Wr&&(h|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ds(n.lineAt(o-i*1e3,Re.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,Re.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(h,Re.ByPos,s,0,0),p;t.y=="center"?p=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?p=u.top:p=u.bottom-c,a=new Ds(n.lineAt(p-1e3/2,Re.ByHeight,s,0,0).from,n.lineAt(p+c+1e3/2,Re.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ds(this.heightMap.lineAt(i,Re.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Re.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Re.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Re.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Dl(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=Ce.LTR&&!i)return[];let l=[],a=(c,u,p,g)=>{if(u-c<s)return;let S=this.state.selection.main,T=[S.from];S.empty||T.push(S.to);for(let y of T)if(y>c&&y<u){a(c,y-10,p,g),a(y+10,u,p,g);return}let I=HE(e,y=>y.from>=p.from&&y.to<=p.to&&Math.abs(y.from-c)<s&&Math.abs(y.to-u)<s&&!T.some(A=>y.from<A&&y.to>A));if(!I){if(u<p.to&&t&&i&&t.visibleRanges.some(v=>v.from<=u&&v.to>=u)){let v=t.moveToLineBoundary(C.cursor(u),!1,!0).head;v>c&&(u=v)}let y=this.gapSize(p,c,u,g),A=i||y<2e6?y:2e6;I=new Dl(c,u,y,A)}l.push(I)},h=c=>{if(c.length<o||c.type!=ct.Text)return;let u=FE(c.from,c.to,this.stateDeco);if(u.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,g,S;if(i){let T=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,I,y;if(p!=null){let A=Us(u,p),v=((this.visibleBottom-this.visibleTop)/2+T)/c.height;I=A-v,y=A+v}else I=(this.visibleTop-c.top-T)/c.height,y=(this.visibleBottom-c.top+T)/c.height;g=Vs(u,I),S=Vs(u,y)}else{let T=u.total*this.heightOracle.charWidth,I=n*this.heightOracle.charWidth,y=0;if(T>2e6)for(let w of e)w.from>=c.from&&w.from<c.to&&w.size!=w.displaySize&&w.from*this.heightOracle.charWidth+y<this.pixelViewport.left&&(y=w.size-w.displaySize);let A=this.pixelViewport.left+y,v=this.pixelViewport.right+y,R,k;if(p!=null){let w=Us(u,p),x=((v-A)/2+I)/T;R=w-x,k=w+x}else R=(A-I)/T,k=(v+I)/T;g=Vs(u,R),S=Vs(u,k)}g>c.from&&a(c.from,g,c,u),S<c.to&&a(S,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return l}gapSize(e,t,i,n){let s=Us(n,i)-Us(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){Dl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=J.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];me.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||vn(this.heightMap.lineAt(e,Re.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||vn(this.heightMap.lineAt(this.scaler.fromDOM(e),Re.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return vn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ds{constructor(e,t){this.from=e,this.to=t}}function FE(r,e,t){let i=[],n=r,s=0;return me.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Vs({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function Us(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function HE(r,e){for(let t of r)if(e(t))return t}const Ff={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class Mh{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,Re.ByPos,e,0,0).top,c=t.lineAt(a,Re.ByPos,e,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}eq(e){return e instanceof Mh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function vn(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ii(r.from,r.length,t,i-t,Array.isArray(r._content)?r._content.map(n=>vn(n,e)):r._content)}const Ms=G.define({combine:r=>r.join(" ")}),Pa=G.define({combine:r=>r.indexOf(!0)>-1}),_a=Bi.newName(),Hp=Bi.newName(),qp=Bi.newName(),zp={"&light":"."+Hp,"&dark":"."+qp};function Ba(r,e,t){return new Bi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const qE=Ba("."+_a,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zp),zE={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vl=j.ie&&j.ie_version<=11;class WE{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new xS,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(j.ie&&j.ie_version<=11||j.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(j.chrome&&j.chrome_version<126)&&(this.editContext=new jE(e),e.state.facet(Ai)&&(e.contentDOM.editContext=this.editContext.editContext)),Vl&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ai)?i.root.activeElement!=this.dom:!Ys(this.dom,n))return;let s=n.anchorNode&&i.docView.nearest(n.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(j.ie&&j.ie_version<=11||j.android&&j.chrome)&&!i.state.selection.main.empty&&n.focusNode&&Rn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Hn(e.root);if(!t)return!1;let i=j.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&GE(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=Ys(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&RS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,zE),Vl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ur(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&Ys(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new hE(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=Lp(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Hf(t,e.previousSibling||e.target.previousSibling,-1),n=Hf(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ai)!=e.state.facet(Ai)&&(e.view.contentDOM.editContext=e.state.facet(Ai)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Hf(r,e,t){for(;e;){let i=ve.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function qf(r,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,s=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return Rn(o.node,o.offset,n,s)&&([t,i,n,s]=[n,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}}function GE(r,e){if(e.getComposedRanges){let n=e.getComposedRanges(r.root)[0];if(n)return qf(r,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",i,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",i,!0),t?qf(r,t):null}class jE{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:n}=e.state.selection.main,s={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Te.of(i.text.split(`
`))};s.from==this.from&&n<this.from?s.from=n:s.to==this.to&&n>this.to&&(s.to=n),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||Vh(e,s,C.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let n=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,n.push(s)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;n.push(J.mark({attributes:{style:a}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:Np.of(J.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=Hn(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,h)=>{if(i)return;let c=h.length-(o-s);if(n&&o>=n.to)if(n.from==s&&n.to==o&&n.insert.eq(h)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}else n=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class W{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(s=>i(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||kS(e.parent)||document,this.viewState=new Bf(e.state||ge.create(e)),e.scrollTo&&e.scrollTo.is(Rs)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(In).map(n=>new Rl(n));for(let n of this.plugins)n.update(this);this.observer=new WE(this),this.inputState=new pE(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Of(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ge?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(p=>p.annotation(Pp))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=_p(s,o),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ge.phrases)!=this.state.facet(ge.phrases))return this.setState(s);n=Oo.create(this,s,e),n.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(u&&(u=u.map(p.changes)),p.scrollIntoView){let{main:g}=p.state.selection;u=new Mr(g.empty?g:C.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of p.effects)g.is(Rs)&&(u=g.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=yo.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(yn)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Ms)!=n.state.facet(Ms)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let p of this.state.facet(Da))try{p(n)}catch(g){St(this.state,g,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Lp(this,c)&&h.force&&Ur(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Bf(e),this.plugins=e.facet(In).map(i=>new Rl(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new Of(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(In),i=e.state.facet(In);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new Rl(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){St(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(Jd(i))s=-1,o=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(n);s=g.from,o=g.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(g=>{try{return g.read(this)}catch(S){return St(this.state,S),zf}}),u=Oo.create(this,this.state,[]),p=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),p=this.docView.update(u),p&&this.docViewUpdate());for(let g=0;g<h.length;g++)if(c[g]!=zf)try{let S=h[g];S.write&&S.write(c[g],this)}catch(S){St(this.state,S)}if(p&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let S=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(S>1||S<-1){n=n+S,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Da))l(t)}get themeClasses(){return _a+" "+(this.state.facet(Pa)?qp:Hp)+" "+this.state.facet(Ms)}updateAttrs(){let e=Wf(this,vp,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ai)?"true":"false",class:"cm-content",style:`${j.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Wf(this,Ch,t);let i=this.observer.ignore(()=>{let n=wa(this.contentDOM,this.contentAttrs,t),s=wa(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(W.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(yn);let e=this.state.facet(W.cspNonce);Bi.mount(this.root,this.styleModules.concat(qE).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Cl(this,e,bf(this,e,t,i))}moveByGroup(e,t){return Cl(this,e,bf(this,e,t,i=>sE(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return C.cursor(s.side(t,n)+e.from,s.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return nE(this,e,t,i)}moveVertically(e,t,i){return Cl(this,e,oE(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Rp(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[Ri.find(s,e-n.from,-1,t)];return Yo(i,o.dir==Ce.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Op)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>KE)return up(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||fp(s.isolates,i=Tf(this,e))))return s.order;i||(i=Tf(this,e));let n=qS(e.text,t,i);return this.bidiCache.push(new yo(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||j.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Qd(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Rs.of(new Mr(typeof e=="number"?C.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Rs.of(new Mr(C.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Bi.newName(),n=[Ms.of(i),yn.of(Ba(`.${i}`,e))];return t&&t.dark&&n.push(Pa.of(!0)),n}static baseTheme(e){return pr.lowest(yn.of(Ba("."+_a,e,zp)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&ve.get(i)||ve.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}W.styleModule=yn;W.inputHandler=Ep;W.clipboardInputFilter=Rh;W.clipboardOutputFilter=Lh;W.scrollHandler=yp;W.focusChangeEffect=Tp;W.perLineTextDirection=Op;W.exceptionSink=Sp;W.updateListener=Da;W.editable=Ai;W.mouseSelectionStyle=gp;W.dragMovesSelection=mp;W.clickAddsSelectionRange=pp;W.decorations=zn;W.outerDecorations=bp;W.atomicRanges=Dh;W.bidiIsolatedRanges=Ap;W.scrollMargins=wp;W.darkTheme=Pa;W.cspNonce=G.define({combine:r=>r.length?r[0]:""});W.contentAttributes=Ch;W.editorAttributes=vp;W.lineWrapping=W.contentAttributes.of({class:"cm-lineWrapping"});W.announce=ie.define();const KE=4096,zf={};class yo{constructor(e,t,i,n,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:Ce.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new yo(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Wf(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Aa(o,t)}return t}const $E=j.mac?"mac":j.windows?"win":j.linux?"linux":"key";function QE(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Ps(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const XE=pr.default(W.domEventHandlers({keydown(r,e){return Gp(Wp(e.state),r,e,"editor")}})),Ph=G.define({enables:XE}),Gf=new WeakMap;function Wp(r){let e=r.facet(Ph),t=Gf.get(e);return t||Gf.set(e,t=ZE(e.reduce((i,n)=>i.concat(n),[]))),t}function JE(r,e,t){return Gp(Wp(r.state),e,r,t)}let wi=null;const YE=4e3;function ZE(r,e=$E){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h,c)=>{var u,p;let g=t[o]||(t[o]=Object.create(null)),S=l.split(/ (?!$)/).map(y=>QE(y,e));for(let y=1;y<S.length;y++){let A=S.slice(0,y).join(" ");n(A,!0),g[A]||(g[A]={preventDefault:!0,stopPropagation:!1,run:[v=>{let R=wi={view:v,prefix:A,scope:o};return setTimeout(()=>{wi==R&&(wi=null)},YE),!0}]})}let T=S.join(" ");n(T,!1);let I=g[T]||(g[T]={preventDefault:!1,stopPropagation:!1,run:((p=(u=g._any)===null||u===void 0?void 0:u.run)===null||p===void 0?void 0:p.slice())||[]});a&&I.run.push(a),h&&(I.preventDefault=!0),c&&(I.stopPropagation=!0)};for(let o of r){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let p in c)c[p].run.push(g=>u(g,Fa))}let a=o[e]||o.key;if(a)for(let h of l)s(h,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let Fa=null;function Gp(r,e,t,i){Fa=e;let n=vS(e),s=Xe(n,0),o=Ut(s)==n.length&&n!=" ",l="",a=!1,h=!1,c=!1;wi&&wi.view==t&&wi.scope==i&&(l=wi.prefix+" ",Dp.indexOf(e.keyCode)<0&&(h=!0,wi=null));let u=new Set,p=I=>{if(I){for(let y of I.run)if(!u.has(y)&&(u.add(y),y(t)))return I.stopPropagation&&(c=!0),!0;I.preventDefault&&(I.stopPropagation&&(c=!0),h=!0)}return!1},g=r[i],S,T;return g&&(p(g[l+Ps(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(j.windows&&e.ctrlKey&&e.altKey)&&(S=Fi[e.keyCode])&&S!=n?(p(g[l+Ps(S,e,!0)])||e.shiftKey&&(T=Fn[e.keyCode])!=n&&T!=S&&p(g[l+Ps(T,e,!1)]))&&(a=!0):o&&e.shiftKey&&p(g[l+Ps(n,e,!0)])&&(a=!0),!a&&p(g._any)&&(a=!0)),h&&(a=!0),a&&c&&e.stopPropagation(),Fa=null,a}class os{constructor(e,t,i,n,s){this.className=e,this.left=t,this.top=i,this.width=n,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let s=jp(e);return[new os(t,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return eT(e,t,i)}}function jp(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Ce.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function jf(r,e,t,i){let n=r.coordsAtPos(e,t*2);if(!n)return i;let s=r.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=r.posAtCoords({x:s.left+1,y:o}),a=r.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function eT(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let i=Math.max(t.from,r.viewport.from),n=Math.min(t.to,r.viewport.to),s=r.textDirection==Ce.LTR,o=r.contentDOM,l=o.getBoundingClientRect(),a=jp(r),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),p=l.right-(c?parseInt(c.paddingRight):0),g=Ua(r,i),S=Ua(r,n),T=g.type==ct.Text?g:null,I=S.type==ct.Text?S:null;if(T&&(r.lineWrapping||g.widgetLineBreaks)&&(T=jf(r,i,1,T)),I&&(r.lineWrapping||S.widgetLineBreaks)&&(I=jf(r,n,-1,I)),T&&I&&T.from==I.from&&T.to==I.to)return A(v(t.from,t.to,T));{let k=T?v(t.from,null,T):R(g,!1),w=I?v(null,t.to,I):R(S,!0),x=[];return(T||g).to<(I||S).from-(T&&I?1:0)||g.widgetLineBreaks>1&&k.bottom+r.defaultLineHeight/2<w.top?x.push(y(u,k.bottom,p,w.top)):k.bottom<w.top&&r.elementAtHeight((k.bottom+w.top)/2).type==ct.Text&&(k.bottom=w.top=(k.bottom+w.top)/2),A(k).concat(x).concat(A(w))}function y(k,w,x,q){return new os(e,k-a.left,w-a.top-.01,x-k,q-w+.01)}function A({top:k,bottom:w,horizontal:x}){let q=[];for(let H=0;H<x.length;H+=2)q.push(y(x[H],k,x[H+1],w));return q}function v(k,w,x){let q=1e9,H=-1e9,U=[];function _($,K,he,re,Ie){let ce=r.coordsAtPos($,$==x.to?-2:2),ue=r.coordsAtPos(he,he==x.from?2:-2);!ce||!ue||(q=Math.min(ce.top,ue.top,q),H=Math.max(ce.bottom,ue.bottom,H),Ie==Ce.LTR?U.push(s&&K?u:ce.left,s&&re?p:ue.right):U.push(!s&&re?u:ue.left,!s&&K?p:ce.right))}let D=k??x.from,z=w??x.to;for(let $ of r.visibleRanges)if($.to>D&&$.from<z)for(let K=Math.max($.from,D),he=Math.min($.to,z);;){let re=r.state.doc.lineAt(K);for(let Ie of r.bidiSpans(re)){let ce=Ie.from+re.from,ue=Ie.to+re.from;if(ce>=he)break;ue>K&&_(Math.max(ce,K),k==null&&ce<=D,Math.min(ue,he),w==null&&ue>=z,Ie.dir)}if(K=re.to+1,K>=he)break}return U.length==0&&_(D,k==null,z,w==null,r.textDirection),{top:q,bottom:H,horizontal:U}}function R(k,w){let x=l.top+(w?k.top:k.bottom);return{top:x,bottom:x,horizontal:[]}}}function tT(r,e){return r.constructor==e.constructor&&r.eq(e)}class iT{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(to)!=e.state.facet(to)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(to);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!tT(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const to=G.define();function Kp(r){return[qe.define(e=>new iT(e,r)),to.of(r)]}const $p=!j.ios,Wn=G.define({combine(r){return hi(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function rT(r={}){return[Wn.of(r),nT,sT,oT,Ip.of(!0)]}function Qp(r){return r.startState.facet(Wn)!=r.state.facet(Wn)}const nT=Kp({above:!0,markers(r){let{state:e}=r,t=e.facet(Wn),i=[];for(let n of e.selection.ranges){let s=n==e.selection.main;if(n.empty?!s||$p:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:C.cursor(n.head,n.head>n.anchor?-1:1);for(let a of os.forRange(r,o,l))i.push(a)}}return i},update(r,e){r.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Qp(r);return t&&Kf(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){Kf(e.state,r)},class:"cm-cursorLayer"});function Kf(r,e){e.style.animationDuration=r.facet(Wn).cursorBlinkRate+"ms"}const sT=Kp({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:os.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||Qp(r)},class:"cm-selectionLayer"}),Ha={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};$p&&(Ha[".cm-line"].caretColor=Ha[".cm-content"].caretColor="transparent !important");const oT=pr.highest(W.theme(Ha)),Xp=ie.define({map(r,e){return r==null?null:e.mapPos(r)}}),bn=et.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(Xp)?i.value:t,r)}}),lT=qe.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(bn);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(bn)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(bn),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let i=r.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-i.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(bn)!=r&&this.view.dispatch({effects:Xp.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function aT(){return[bn,lT]}function $f(r,e,t,i,n){e.lastIndex=0;for(let s=r.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(o+l.index,l)}function hT(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:s}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=s:i.push({from:n,to:s});return i}class cT{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,h,c)=>n(c,h,h+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,h,c)=>{let u=i(l,a,h);u&&c(h,h+l[0].length,u)};else if(i)this.addMatch=(l,a,h,c)=>c(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new _i,i=t.add.bind(t);for(let{from:n,to:s}of hT(e,this.maxLength))$f(e.state.doc,this.regexp,n,s,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,n);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let p=[],g,S=(T,I,y)=>p.push(y.range(T,I));if(a==h)for(this.regexp.lastIndex=c-a.from;(g=this.regexp.exec(a.text))&&g.index<u-a.from;)this.addMatch(g,e,g.index+a.from,S);else $f(e.state.doc,this.regexp,c,u,(T,I)=>this.addMatch(I,e,T,S));t=t.update({filterFrom:c,filterTo:u,filter:(T,I)=>T<c||I>u,add:p})}}return t}}const qa=/x/.unicode!=null?"gu":"g",fT=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,qa),uT={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ul=null;function dT(){var r;if(Ul==null&&typeof document<"u"&&document.body){let e=document.body.style;Ul=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return Ul||!1}const io=G.define({combine(r){let e=hi(r,{render:null,specialChars:fT,addSpecialChars:null});return(e.replaceTabs=!dT())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,qa)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,qa)),e}});function pT(r={}){return[io.of(r),mT()]}let Qf=null;function mT(){return Qf||(Qf=qe.fromClass(class{constructor(r){this.view=r,this.decorations=J.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(io)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new cT({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,s=Xe(e[0],0);if(s==9){let o=n.lineAt(i),l=t.state.tabSize,a=en(o.text,l,i-o.from);return J.replace({widget:new TT((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=J.replace({widget:new ET(r,s)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(io);r.startState.facet(io)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const gT="";function ST(r){return r>=32?gT:r==10?"":String.fromCharCode(9216+r)}class ET extends Wi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=ST(this.code),i=e.state.phrase("Control character")+" "+(uT[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class TT extends Wi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function OT(){return yT}const IT=J.line({class:"cm-activeLine"}),yT=qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){let n=r.lineBlockAt(i.head);n.from>e&&(t.push(IT.range(n.from)),e=n.from)}return J.set(t)}},{decorations:r=>r.decorations}),za=2e3;function NT(r,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),s=[];if(e.off>za||t.off>za||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let h=r.doc.line(a);h.length<=l&&s.push(C.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let h=r.doc.line(a),c=Ta(h.text,o,r.tabSize,!0);if(c<0)s.push(C.cursor(h.to));else{let u=Ta(h.text,l,r.tabSize);s.push(C.range(h.from+c,h.from+u))}}}return s}function vT(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function Xf(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),n=t-i.from,s=n>za?-1:n==i.length?vT(r,e.clientX):en(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:s,off:n}}function bT(r,e){let t=Xf(r,e),i=r.state.selection;return t?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,s,o){let l=Xf(r,n);if(!l)return i;let a=NT(r.state,t,l);return a.length?o?C.create(a.concat(i.ranges)):C.create(a):i}}:null}function AT(r){let e=t=>t.altKey&&t.button==0;return W.mouseSelectionStyle.of((t,i)=>e(i)?bT(t,i):null)}const wT={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},xT={style:"cursor: crosshair"};function kT(r={}){let[e,t]=wT[r.key||"Alt"],i=qe.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,W.contentAttributes.of(n=>{var s;return!((s=n.plugin(i))===null||s===void 0)&&s.isDown?xT:null})]}const pn="-10000px";class Jp{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let n=e.state.facet(this.facet),s=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<s.length;a++){let h=s[a],c=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let p=this.tooltips[u];p&&p.create==h.create&&(c=u)}if(c<0)o[a]=this.createTooltipView(h,a?o[a-1]:null),l&&(l[a]=!!h.above);else{let u=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),u.update&&u.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,h)=>t[h]=a),t.length=l.length),this.input=n,this.tooltips=s,this.tooltipViews=o,!0}}function RT(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Ml=G.define({combine:r=>{var e,t,i;return{position:j.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||RT}}}),Jf=new WeakMap,_h=qe.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(Ml);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Jp(r,Bh,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(Ml);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=pn,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(r=i.destroy)===null||r===void 0||r.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(j.gecko)i=n.offsetParent!=this.container.ownerDocument.body;else if(n.style.top==pn&&n.style.left=="0px"){let s=n.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((n,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(Ml).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:n,scaleY:s}=r,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=r.pos[l],p=r.size[l];if(!u||u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1){c.style.top=pn;continue}let g=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,S=g?7:0,T=p.right-p.left,I=(e=Jf.get(h))!==null&&e!==void 0?e:p.bottom-p.top,y=h.offset||CT,A=this.view.textDirection==Ce.LTR,v=p.width>i.right-i.left?A?i.left:i.right-p.width:A?Math.max(i.left,Math.min(u.left-(g?14:0)+y.x,i.right-T)):Math.min(Math.max(i.left,u.left-T+(g?14:0)-y.x),i.right-T),R=this.above[l];!a.strictSide&&(R?u.top-(p.bottom-p.top)-y.y<i.top:u.bottom+(p.bottom-p.top)+y.y>i.bottom)&&R==i.bottom-u.bottom>u.top-i.top&&(R=this.above[l]=!R);let k=(R?u.top-i.top:i.bottom-u.bottom)-S;if(k<I&&h.resize!==!1){if(k<this.view.defaultLineHeight){c.style.top=pn;continue}Jf.set(h,I),c.style.height=(I=k)/s+"px"}else c.style.height&&(c.style.height="");let w=R?u.top-I-S-y.y:u.bottom+S+y.y,x=v+T;if(h.overlap!==!0)for(let q of o)q.left<x&&q.right>v&&q.top<w+I&&q.bottom>w&&(w=R?q.top-I-2-S:q.bottom+S+2);if(this.position=="absolute"?(c.style.top=(w-r.parent.top)/s+"px",c.style.left=(v-r.parent.left)/n+"px"):(c.style.top=w/s+"px",c.style.left=v/n+"px"),g){let q=u.left+(A?y.x:-y.x)-(v+14-7);g.style.left=q/n+"px"}h.overlap!==!0&&o.push({left:v,top:w,right:x,bottom:w+I}),c.classList.toggle("cm-tooltip-above",R),c.classList.toggle("cm-tooltip-below",!R),h.positioned&&h.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=pn}},{eventObservers:{scroll(){this.maybeMeasure()}}}),LT=W.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),CT={x:0,y:0},Bh=G.define({enables:[_h,LT]}),No=G.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class tl{static create(e){return new tl(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Jp(e,No,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const DT=Bh.compute([No],r=>{let e=r.facet(No);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:tl.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class VT{constructor(e,t,i,n,s){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,s=1;if(i instanceof ki)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),h=a&&a.dir==Ce.RTL?-1:1;s=t.x<l.left?-h:h}let o=this.source(e,n,s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>St(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(_h),t=e?e.manager.tooltips.findIndex(i=>i.create==tl.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:s}=this;if(n.length&&s&&!UT(s.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!MT(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const _s=4;function UT(r,e){let{left:t,right:i,top:n,bottom:s}=r.getBoundingClientRect(),o;if(o=r.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),s=Math.max(l.bottom,s)}return e.clientX>=t-_s&&e.clientX<=i+_s&&e.clientY>=n-_s&&e.clientY<=s+_s}function MT(r,e,t,i,n,s){let o=r.scrollDOM.getBoundingClientRect(),l=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=r.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function PT(r,e={}){let t=ie.define(),i=et.define({create(){return[]},update(n,s){if(n.length&&(e.hideOnChange&&(s.docChanged||s.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of n){let a=s.changes.mapPos(l.pos,-1,ht.TrackDel);if(a!=null){let h=Object.assign(Object.create(null),l);h.pos=a,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}n=o}for(let o of s.effects)o.is(t)&&(n=o.value),o.is(_T)&&(n=[]);return n},provide:n=>No.from(n)});return{active:i,extension:[i,qe.define(n=>new VT(n,r,i,t,e.hoverTime||300)),DT]}}function Yp(r,e){let t=r.plugin(_h);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const _T=ie.define(),Yf=G.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Gn(r,e){let t=r.plugin(Zp),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Zp=qe.fromClass(class{constructor(r){this.input=r.state.facet(jn),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(Yf);this.top=new Bs(r,!0,e.topContainer),this.bottom=new Bs(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(Yf);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Bs(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Bs(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(jn);if(t!=this.input){let i=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),c;h<0?(c=a(r.view),l.push(c)):(c=this.panels[h],c.update&&c.update(r)),n.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>W.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Bs{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Zf(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Zf(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Zf(r){let e=r.nextSibling;return r.remove(),e}const jn=G.define({enables:Zp});class Ti extends lr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ti.prototype.elementClass="";Ti.prototype.toDOM=void 0;Ti.prototype.mapMode=ht.TrackBefore;Ti.prototype.startSide=Ti.prototype.endSide=-1;Ti.prototype.point=!0;const ro=G.define(),BT=G.define(),FT={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>me.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Cn=G.define();function HT(r){return[em(),Cn.of(Object.assign(Object.assign({},FT),r))]}const eu=G.define({combine:r=>r.some(e=>e)});function em(r){return[qT]}const qT=qe.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Cn).map(e=>new iu(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(eu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(eu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=me.iter(this.view.state.facet(ro),this.view.viewport.from),i=[],n=this.gutters.map(s=>new zT(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==ct.Text&&o){Wa(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(s.type==ct.Text){Wa(t,i,s.from);for(let o of n)o.line(this.view,s,i)}else if(s.widget)for(let o of n)o.widget(this.view,s);for(let s of n)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Cn),t=r.state.facet(Cn),i=r.docChanged||r.heightChanged||r.viewportChanged||!me.eq(r.startState.facet(ro),r.state.facet(ro),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new iu(this.view,s)):(this.gutters[o].update(r),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>W.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Ce.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function tu(r){return Array.isArray(r)?r:[r]}function Wa(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class zT{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=me.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new tm(e,o,s,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,s,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];Wa(this.cursor,n,t.from),i.length&&(n=n.concat(i));let s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let s of e.state.facet(BT)){let o=s(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class iu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let s=n.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=tu(t.markers(e)),t.initialSpacer&&(this.spacer=new tm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=tu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!me.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class tm{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),WT(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function WT(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const GT=G.define(),jT=G.define(),br=G.define({combine(r){return hi(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let s=i[n],o=t[n];i[n]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return i}})}});class Pl extends Ti{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function _l(r,e){return r.state.facet(br).formatNumber(e,r.state)}const KT=Cn.compute([br],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(GT)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Pl(_l(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(jT)){let s=n(e,t,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(br)!=e.state.facet(br),initialSpacer(e){return new Pl(_l(e,ru(e.state.doc.lines)))},updateSpacer(e,t){let i=_l(t.view,ru(t.view.state.doc.lines));return i==e.number?e:new Pl(i)},domEventHandlers:r.facet(br).domEventHandlers}));function $T(r={}){return[br.of(r),em(),KT]}function ru(r){let e=9;for(;e<r;)e=e*10+9;return e}const QT=new class extends Ti{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},XT=ro.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.head).from;n>t&&(t=n,e.push(QT.range(n)))}return me.of(e)});function JT(){return XT}const im=1024;let YT=0;class Bl{constructor(e,t){this.from=e,this.to=t}}class ae{constructor(e={}){this.id=YT++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Tt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ae.closedBy=new ae({deserialize:r=>r.split(" ")});ae.openedBy=new ae({deserialize:r=>r.split(" ")});ae.group=new ae({deserialize:r=>r.split(" ")});ae.isolate=new ae({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});ae.contextHash=new ae({perNode:!0});ae.lookAhead=new ae({perNode:!0});ae.mounted=new ae({perNode:!0});class vo{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ae.mounted.id]}}const ZT=Object.create(null);class Tt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):ZT,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new Tt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ae.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(ae.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}Tt.none=new Tt("",Object.create(null),0,8);class Fh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new Tt(i.name,n,i.id,i.flags):i)}return new Fh(t)}}const Fs=new WeakMap,nu=new WeakMap;var Ke;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Ke||(Ke={}));class He{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=vo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new ja(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Fs.get(this)||this.topNode,s=new ja(n);return s.moveTo(e,t),Fs.set(this,s._tree),s}get topNode(){return new Bt(this,0,0,null)}resolve(e,t=0){let i=Kn(Fs.get(this)||this.topNode,e,t,!1);return Fs.set(this,i),i}resolveInner(e,t=0){let i=Kn(nu.get(this)||this.topNode,e,t,!0);return nu.set(this,i),i}resolveStack(e,t=0){return iO(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e,o=e.mode||0,l=(o&Ke.IncludeAnonymous)>0;for(let a=this.cursor(o|Ke.IncludeAnonymous);;){let h=!1;if(a.from<=s&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:zh(Tt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new He(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new He(Tt.none,t,i,n)))}static build(e){return rO(e)}}He.empty=new He(Tt.none,[],[],0);class Hh{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Hh(this.buffer,this.index)}}class qi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Tt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(rm(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=n[l++],s[a++]=n[l++]-i;let h=s[a++]=n[l++]-i;s[a++]=n[l++]-e,o=Math.max(o,h)}return new qi(s,o,this.set)}}function rm(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Kn(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Bt&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Ke.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Bt&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class nm{cursor(e=0){return new ja(this,e)}getChild(e,t=null,i=null){let n=su(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return su(this,e,t,i)}resolve(e,t=0){return Kn(this,e,t,!1)}resolveInner(e,t=0){return Kn(this,e,t,!0)}matchContext(e){return Ga(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class Bt extends nm{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let c=l[e],u=a[e]+o.from;if(rm(n,i,u,u+c.length)){if(c instanceof qi){if(s&Ke.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,t,i-u,n);if(p>-1)return new Li(new eO(o,c,e,u),null,p)}else if(s&Ke.IncludeAnonymous||!c.type.isAnonymous||qh(c)){let p;if(!(s&Ke.IgnoreMounts)&&(p=vo.get(c))&&!p.overlay)return new Bt(p.tree,u,e,o);let g=new Bt(c,u,e,o);return s&Ke.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?c.children.length-1:0,t,i,n)}}}if(s&Ke.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Ke.IgnoreOverlays)&&(n=vo.get(this._tree))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Bt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function su(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function Ga(r,e,t=e.length-1){for(let i=r;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class eO{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Li extends nm{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Li(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ke.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Li(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Li(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Li(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1];e.push(i.slice(n,s,o)),t.push(0)}return new He(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function sm(r){if(!r.length)return null;let e=0,t=r[0];for(let s=1;s<r.length;s++){let o=r[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof Bt&&t.index<0?null:t.parent,n=r.slice();return i?n[e]=i:n.splice(e,1),new tO(n,t)}class tO{constructor(e,t){this.heads=e,this.node=t}get next(){return sm(this.heads)}}function iO(r,e,t){let i=r.resolveInner(e,t),n=null;for(let s=i instanceof Bt?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(n||(n=[i])).push(o.resolve(e,t)),s=o}else{let o=vo.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Bt(o.tree,o.overlay[0].from+s.from,-1,s);(n||(n=[i])).push(Kn(l,e,t,!1))}}return n?sm(n):i}class ja{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Bt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Bt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ke.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ke.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ke.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Ke.IncludeAnonymous||l instanceof qi||!l.type.isAnonymous||qh(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}for(let n=i;n<this.stack.length;n++)t=new Li(this.buffer,t,this.stack[n]);return this.bufferNode=new Li(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return Ga(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return Ga(this._tree,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function qh(r){return r.children.some(e=>e instanceof qi||!e.type.isAnonymous||qh(e))}function rO(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=im,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new Hh(t,t.length):t,a=i.types,h=0,c=0;function u(k,w,x,q,H,U){let{id:_,start:D,end:z,size:$}=l,K=c,he=h;for(;$<0;)if(l.next(),$==-1){let fe=s[_];x.push(fe),q.push(D-k);return}else if($==-3){h=_;return}else if($==-4){c=_;return}else throw new RangeError(`Unrecognized record size: ${$}`);let re=a[_],Ie,ce,ue=D-k;if(z-D<=n&&(ce=I(l.pos-w,H))){let fe=new Uint16Array(ce.size-ce.skip),Se=l.pos-ce.size,pe=fe.length;for(;l.pos>Se;)pe=y(ce.start,fe,pe);Ie=new qi(fe,z-ce.start,i),ue=ce.start-k}else{let fe=l.pos-$;l.next();let Se=[],pe=[],Ue=_>=o?_:-1,ze=0,Me=z;for(;l.pos>fe;)Ue>=0&&l.id==Ue&&l.size>=0?(l.end<=Me-n&&(S(Se,pe,D,ze,l.end,Me,Ue,K,he),ze=Se.length,Me=l.end),l.next()):U>2500?p(D,fe,Se,pe):u(D,fe,Se,pe,Ue,U+1);if(Ue>=0&&ze>0&&ze<Se.length&&S(Se,pe,D,ze,D,Me,Ue,K,he),Se.reverse(),pe.reverse(),Ue>-1&&ze>0){let tt=g(re,he);Ie=zh(re,Se,pe,0,Se.length,0,z-D,tt,tt)}else Ie=T(re,Se,pe,z-D,K-z,he)}x.push(Ie),q.push(ue)}function p(k,w,x,q){let H=[],U=0,_=-1;for(;l.pos>w;){let{id:D,start:z,end:$,size:K}=l;if(K>4)l.next();else{if(_>-1&&z<_)break;_<0&&(_=$-n),H.push(D,z,$),U++,l.next()}}if(U){let D=new Uint16Array(U*4),z=H[H.length-2];for(let $=H.length-3,K=0;$>=0;$-=3)D[K++]=H[$],D[K++]=H[$+1]-z,D[K++]=H[$+2]-z,D[K++]=K;x.push(new qi(D,H[2]-z,i)),q.push(z-k)}}function g(k,w){return(x,q,H)=>{let U=0,_=x.length-1,D,z;if(_>=0&&(D=x[_])instanceof He){if(!_&&D.type==k&&D.length==H)return D;(z=D.prop(ae.lookAhead))&&(U=q[_]+D.length+z)}return T(k,x,q,H,U,w)}}function S(k,w,x,q,H,U,_,D,z){let $=[],K=[];for(;k.length>q;)$.push(k.pop()),K.push(w.pop()+x-H);k.push(T(i.types[_],$,K,U-H,D-U,z)),w.push(H-x)}function T(k,w,x,q,H,U,_){if(U){let D=[ae.contextHash,U];_=_?[D].concat(_):[D]}if(H>25){let D=[ae.lookAhead,H];_=_?[D].concat(_):[D]}return new He(k,w,x,q,_)}function I(k,w){let x=l.fork(),q=0,H=0,U=0,_=x.end-n,D={size:0,start:0,skip:0};e:for(let z=x.pos-k;x.pos>z;){let $=x.size;if(x.id==w&&$>=0){D.size=q,D.start=H,D.skip=U,U+=4,q+=4,x.next();continue}let K=x.pos-$;if($<0||K<z||x.start<_)break;let he=x.id>=o?4:0,re=x.start;for(x.next();x.pos>K;){if(x.size<0)if(x.size==-3)he+=4;else break e;else x.id>=o&&(he+=4);x.next()}H=re,q+=$,U+=he}return(w<0||q==k)&&(D.size=q,D.start=H,D.skip=U),D.size>4?D:void 0}function y(k,w,x){let{id:q,start:H,end:U,size:_}=l;if(l.next(),_>=0&&q<o){let D=x;if(_>4){let z=l.pos-(_-4);for(;l.pos>z;)x=y(k,w,x)}w[--x]=D,w[--x]=U-k,w[--x]=H-k,w[--x]=q}else _==-3?h=q:_==-4&&(c=q);return x}let A=[],v=[];for(;l.pos>0;)u(r.start||0,r.bufferStart||0,A,v,-1,0);let R=(e=r.length)!==null&&e!==void 0?e:A.length?v[0]+A[0].length:0;return new He(a[r.topID],A.reverse(),v.reverse(),R)}const ou=new WeakMap;function no(r,e){if(!r.isAnonymous||e instanceof qi||e.type!=r)return 1;let t=ou.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof He)){t=1;break}t+=no(r,i)}ou.set(e,t)}return t}function zh(r,e,t,i,n,s,o,l,a){let h=0;for(let S=i;S<n;S++)h+=no(r,e[S]);let c=Math.ceil(h*1.5/8),u=[],p=[];function g(S,T,I,y,A){for(let v=I;v<y;){let R=v,k=T[v],w=no(r,S[v]);for(v++;v<y;v++){let x=no(r,S[v]);if(w+x>=c)break;w+=x}if(v==R+1){if(w>c){let x=S[R];g(x.children,x.positions,0,x.children.length,T[R]+A);continue}u.push(S[R])}else{let x=T[v-1]+S[v-1].length-k;u.push(zh(r,S,T,R,v,k,x,null,a))}p.push(k+A-s)}}return g(e,t,i,n,0),(l||a)(u,p,o)}class or{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new or(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=i)for(;o&&o.from<u;){let p=o;if(a>=p.from||u<=p.to||h){let g=Math.max(p.from,a)-h,S=Math.min(p.to,u)-h;p=g>=S?null:new or(g,S,p.tree,p.offset+h,l>0,!!c)}if(p&&n.push(p),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return n}}class om{startParse(e,t,i){return typeof e=="string"&&(e=new nO(e)),i=i?i.length?i.map(n=>new Bl(n.from,n.to)):[new Bl(0,0)]:[new Bl(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class nO{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ae({perNode:!0});let sO=0;class Dt{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=sO++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Dt&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new Dt(i,[],null,[]);if(n.set.push(n),t)for(let s of t.set)n.set.push(s);return n}static defineModifier(e){let t=new bo(e);return i=>i.modified.indexOf(t)>-1?i:bo.get(i.base||i,i.modified.concat(t).sort((n,s)=>n.id-s.id))}}let oO=0;class bo{constructor(e){this.name=e,this.instances=[],this.id=oO++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&lO(t,l.modified));if(i)return i;let n=[],s=new Dt(e.name,n,e,t);for(let l of t)l.instances.push(s);let o=aO(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(bo.get(l,a));return s}}function lO(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function aO(r){let e=[[]];for(let t=0;t<r.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(r[t]));return e.sort((t,i)=>i.length-t.length)}function lm(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let u=0;;){if(l=="..."&&u>0&&u+3==n.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!p)throw new RangeError("Invalid path: "+n);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),u+=p[0].length,u==n.length)break;let g=n[u++];if(u==n.length&&g=="!"){o=0;break}if(g!="/")throw new RangeError("Invalid path: "+n);l=n.slice(u)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let c=new Ao(i,o,a>0?s.slice(0,a):null);e[h]=c.sort(e[h])}}return am.add(e)}const am=new ae;class Ao{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ao.empty=new Ao([],2,null);function hm(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function hO(r,e){let t=null;for(let i of r){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function cO(r,e,t,i=0,n=r.length){let s=new fO(i,Array.isArray(e)?e:[e],t);s.highlightRange(r.cursor(),i,n,"",s.highlighters),s.flush(n)}class fO{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(g=>!g.scope||g.scope(o)));let h=n,c=uO(e)||Ao.empty,u=hO(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(Math.max(t,l),h),c.opaque)return;let p=e.tree&&e.tree.prop(ae.mounted);if(p&&p.overlay){let g=e.node.enter(p.overlay[0].from+l,1),S=this.highlighters.filter(I=>!I.scope||I.scope(p.tree.type)),T=e.firstChild();for(let I=0,y=l;;I++){let A=I<p.overlay.length?p.overlay[I]:null,v=A?A.from+l:a,R=Math.max(t,y),k=Math.min(i,v);if(R<k&&T)for(;e.from<k&&(this.highlightRange(e,R,k,n,s),this.startSpan(Math.min(k,e.to),h),!(e.to>=v||!e.nextSibling())););if(!A||v>i)break;y=A.to+l,y>t&&(this.highlightRange(g.cursor(),Math.max(t,A.from+l),Math.min(i,y),"",S),this.startSpan(Math.min(i,y),h))}T&&e.parent()}else if(e.firstChild()){p&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,s),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function uO(r){let e=r.type.prop(am);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const F=Dt.define,Hs=F(),vi=F(),lu=F(vi),au=F(vi),bi=F(),qs=F(bi),Fl=F(bi),ei=F(),Zi=F(ei),Yt=F(),Zt=F(),Ka=F(),mn=F(Ka),zs=F(),P={comment:Hs,lineComment:F(Hs),blockComment:F(Hs),docComment:F(Hs),name:vi,variableName:F(vi),typeName:lu,tagName:F(lu),propertyName:au,attributeName:F(au),className:F(vi),labelName:F(vi),namespace:F(vi),macroName:F(vi),literal:bi,string:qs,docString:F(qs),character:F(qs),attributeValue:F(qs),number:Fl,integer:F(Fl),float:F(Fl),bool:F(bi),regexp:F(bi),escape:F(bi),color:F(bi),url:F(bi),keyword:Yt,self:F(Yt),null:F(Yt),atom:F(Yt),unit:F(Yt),modifier:F(Yt),operatorKeyword:F(Yt),controlKeyword:F(Yt),definitionKeyword:F(Yt),moduleKeyword:F(Yt),operator:Zt,derefOperator:F(Zt),arithmeticOperator:F(Zt),logicOperator:F(Zt),bitwiseOperator:F(Zt),compareOperator:F(Zt),updateOperator:F(Zt),definitionOperator:F(Zt),typeOperator:F(Zt),controlOperator:F(Zt),punctuation:Ka,separator:F(Ka),bracket:mn,angleBracket:F(mn),squareBracket:F(mn),paren:F(mn),brace:F(mn),content:ei,heading:Zi,heading1:F(Zi),heading2:F(Zi),heading3:F(Zi),heading4:F(Zi),heading5:F(Zi),heading6:F(Zi),contentSeparator:F(ei),list:F(ei),quote:F(ei),emphasis:F(ei),strong:F(ei),link:F(ei),monospace:F(ei),strikethrough:F(ei),inserted:F(),deleted:F(),changed:F(),invalid:F(),meta:zs,documentMeta:F(zs),annotation:F(zs),processingInstruction:F(zs),definition:Dt.defineModifier("definition"),constant:Dt.defineModifier("constant"),function:Dt.defineModifier("function"),standard:Dt.defineModifier("standard"),local:Dt.defineModifier("local"),special:Dt.defineModifier("special")};for(let r in P){let e=P[r];e instanceof Dt&&(e.name=r)}hm([{tag:P.link,class:"tok-link"},{tag:P.heading,class:"tok-heading"},{tag:P.emphasis,class:"tok-emphasis"},{tag:P.strong,class:"tok-strong"},{tag:P.keyword,class:"tok-keyword"},{tag:P.atom,class:"tok-atom"},{tag:P.bool,class:"tok-bool"},{tag:P.url,class:"tok-url"},{tag:P.labelName,class:"tok-labelName"},{tag:P.inserted,class:"tok-inserted"},{tag:P.deleted,class:"tok-deleted"},{tag:P.literal,class:"tok-literal"},{tag:P.string,class:"tok-string"},{tag:P.number,class:"tok-number"},{tag:[P.regexp,P.escape,P.special(P.string)],class:"tok-string2"},{tag:P.variableName,class:"tok-variableName"},{tag:P.local(P.variableName),class:"tok-variableName tok-local"},{tag:P.definition(P.variableName),class:"tok-variableName tok-definition"},{tag:P.special(P.variableName),class:"tok-variableName2"},{tag:P.definition(P.propertyName),class:"tok-propertyName tok-definition"},{tag:P.typeName,class:"tok-typeName"},{tag:P.namespace,class:"tok-namespace"},{tag:P.className,class:"tok-className"},{tag:P.macroName,class:"tok-macroName"},{tag:P.propertyName,class:"tok-propertyName"},{tag:P.operator,class:"tok-operator"},{tag:P.comment,class:"tok-comment"},{tag:P.meta,class:"tok-meta"},{tag:P.invalid,class:"tok-invalid"},{tag:P.punctuation,class:"tok-punctuation"}]);var Hl;const Ar=new ae;function dO(r){return G.define({combine:r?e=>e.concat(r):void 0})}const pO=new ae;class Wt{constructor(e,t,i=[],n=""){this.data=e,this.name=n,ge.prototype.hasOwnProperty("tree")||Object.defineProperty(ge.prototype,"tree",{get(){return $e(this)}}),this.parser=t,this.extension=[zi.of(this),ge.languageData.of((s,o,l)=>{let a=hu(s,o,l),h=a.type.prop(Ar);if(!h)return[];let c=s.facet(h),u=a.type.prop(pO);if(u){let p=a.resolve(o-a.from,l);for(let g of u)if(g.test(p,s)){let S=s.facet(g.facet);return g.type=="replace"?S:S.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return hu(e,t,i).type.prop(Ar)==this.data}findRegions(e){let t=e.facet(zi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(Ar)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(ae.mounted);if(l){if(l.tree.prop(Ar)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof He&&n(h,s.positions[a]+o)}};return n($e(e),0),i}get allowsNesting(){return!0}}Wt.setState=ie.define();function hu(r,e,t){let i=r.facet(zi),n=$e(r).topNode;if(!i||i.allowsNesting)for(let s=n;s;s=s.enter(e,t,Ke.ExcludeBuffers))s.type.isTop&&(n=s);return n}class wo extends Wt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=dO(e.languageData);return new wo(t,e.parser.configure({props:[Ar.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new wo(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function $e(r){let e=r.field(Wt.state,!1);return e?e.tree:He.empty}class mO{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let gn=null;class xo{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new xo(e,t,[],He.empty,0,i,[],null)}startParse(){return this.parser.startParse(new mO(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=He.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(or.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(or.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=gn;gn=this;try{return e()}finally{gn=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cu(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,p)=>a.push({fromA:h,toA:c,fromB:u,toB:p})),i=or.applyChanges(i,a),n=He.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new xo(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=cu(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends om{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=gn;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new He(Tt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return gn}}function cu(r,e,t){return or.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class Gr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Gr(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=xo.create(e.facet(zi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Gr(i)}}Wt.state=et.define({create:Gr.init,update(r,e){for(let t of e.effects)if(t.is(Wt.setState))return t.value;return e.startState.facet(zi)!=e.state.facet(zi)?Gr.init(e.state):r.apply(e)}});let cm=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(cm=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const ql=typeof navigator<"u"&&(!((Hl=navigator.scheduling)===null||Hl===void 0)&&Hl.isInputPending)?()=>navigator.scheduling.isInputPending():null,gO=qe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Wt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Wt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=cm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Wt.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ql?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>ql&&ql()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Wt.setState.of(new Gr(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>St(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),zi=G.define({combine(r){return r.length?r[0]:null},enables:r=>[Wt.state,gO,W.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class SO{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const EO=G.define(),Wh=G.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function ko(r){let e=r.facet(Wh);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function $n(r,e){let t="",i=r.tabSize,n=r.facet(Wh)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let s=0;s<e;s++)t+=n;return t}function Gh(r,e){r instanceof ge&&(r=new il(r));for(let i of r.state.facet(EO)){let n=i(r,e);if(n!==void 0)return n}let t=$e(r.state);return t.length>=e?TO(r,t,e):null}class il{constructor(e,t={}){this.state=e,this.options=t,this.unit=ko(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return en(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const fm=new ae;function TO(r,e,t){let i=e.resolveStack(t),n=i.node.enterUnfinishedNodesBefore(t);if(n!=i.node){let s=[];for(let o=n;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return um(i,r,t)}function um(r,e,t){for(let i=r;i;i=i.next){let n=IO(i.node);if(n)return n(jh.create(e,t,i))}return 0}function OO(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function IO(r){let e=r.type.prop(fm);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(ae.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return o=>bO(o,!0,1,void 0,s&&!OO(o)?n.from:void 0)}return r.parent==null?yO:null}function yO(){return 0}class jh extends il{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new jh(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(NO(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return um(this.context.next,this.base,this.pos)}}function NO(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function vO(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}l=a.to}}function bO(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=n==r.pos+o,a=vO(r);return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}function AO({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const wO=200;function xO(){return ge.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,n=t.lineAt(i);if(i>n.from+wO)return r;let s=t.sliceString(n.from,i);if(!e.some(h=>h.test(s)))return r;let{state:o}=r,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let u=Gh(o,c.from);if(u==null)continue;let p=/^\s*/.exec(c.text)[0],g=$n(o,u);p!=g&&a.push({from:c.from,to:c.from+p.length,insert:g})}return a.length?[r,{changes:a,sequential:!0}]:r})}const kO=G.define(),dm=new ae;function RO(r,e,t){let i=$e(r);if(i.length<t)return null;let n=i.resolveStack(t,1),s=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let a=l.type.prop(dm);if(a&&(l.to<i.length-50||i.length==r.doc.length||!LO(l))){let h=a(l,r);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function LO(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function Ro(r,e,t){for(let i of r.facet(kO)){let n=i(r,e,t);if(n)return n}return RO(r,e,t)}function pm(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const rl=ie.define({map:pm}),ls=ie.define({map:pm});function mm(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const fr=et.define({create(){return J.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(rl)&&!CO(r,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Em),n=i?J.replace({widget:new BO(i(e.state,t.value))}):fu;r=r.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(ls)&&(r=r.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(n,s)=>{n<i&&s>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(n,s)=>s<=i||n>=i}))}return r},provide:r=>W.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let i=r[t++],n=r[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(fu.range(i,n))}return J.set(e,!0)}});function Lo(r,e,t){var i;let n=null;return(i=r.field(fr,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!n||n.from>s)&&(n={from:s,to:o})}),n}function CO(r,e,t){let i=!1;return r.between(e,e,(n,s)=>{n==e&&s==t&&(i=!0)}),i}function gm(r,e){return r.field(fr,!1)?e:e.concat(ie.appendConfig.of(Tm()))}const DO=r=>{for(let e of mm(r)){let t=Ro(r.state,e.from,e.to);if(t)return r.dispatch({effects:gm(r.state,[rl.of(t),Sm(r,t)])}),!0}return!1},VO=r=>{if(!r.state.field(fr,!1))return!1;let e=[];for(let t of mm(r)){let i=Lo(r.state,t.from,t.to);i&&e.push(ls.of(i),Sm(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function Sm(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,n=r.state.doc.lineAt(e.to).number;return W.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${n}.`)}const UO=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let n=r.lineBlockAt(i),s=Ro(e,n.from,n.to);s&&t.push(rl.of(s)),i=(s?r.lineBlockAt(s.to):n).to+1}return t.length&&r.dispatch({effects:gm(r.state,t)}),!!t.length},MO=r=>{let e=r.state.field(fr,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,n)=>{t.push(ls.of({from:i,to:n}))}),r.dispatch({effects:t}),!0},PO=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:DO},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:VO},{key:"Ctrl-Alt-[",run:UO},{key:"Ctrl-Alt-]",run:MO}],_O={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Em=G.define({combine(r){return hi(r,_O)}});function Tm(r){return[fr,qO]}function Om(r,e){let{state:t}=r,i=t.facet(Em),n=o=>{let l=r.lineBlockAt(r.posAtDOM(o.target)),a=Lo(r.state,l.from,l.to);a&&r.dispatch({effects:ls.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(r,n,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=n,s}const fu=J.replace({widget:new class extends Wi{toDOM(r){return Om(r,null)}}});class BO extends Wi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Om(e,this.value)}}const FO={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class zl extends Ti{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function HO(r={}){let e=Object.assign(Object.assign({},FO),r),t=new zl(e,!0),i=new zl(e,!1),n=qe.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(zi)!=o.state.facet(zi)||o.startState.field(fr,!1)!=o.state.field(fr,!1)||$e(o.startState)!=$e(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new _i;for(let a of o.viewportLineBlocks){let h=Lo(o.state,a.from,a.to)?i:Ro(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[n,HT({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||me.empty},initialSpacer(){return new zl(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=Lo(o.state,l.from,l.to);if(h)return o.dispatch({effects:ls.of(h)}),!0;let c=Ro(o.state,l.from,l.to);return c?(o.dispatch({effects:rl.of(c)}),!0):!1}})}),Tm()]}const qO=W.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class nl{constructor(e,t){this.specs=e;let i;function n(l){let a=Bi.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Wt?l=>l.prop(Ar)==o.data:o?l=>l==o:void 0,this.style=hm(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Bi(i):null,this.themeType=t.themeType}static define(e,t){return new nl(e,t||{})}}const $a=G.define(),Im=G.define({combine(r){return r.length?[r[0]]:null}});function Wl(r){let e=r.facet($a);return e.length?e:r.facet(Im)}function zO(r,e){let t=[GO],i;return r instanceof nl&&(r.module&&t.push(W.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?t.push(Im.of(r)):i?t.push($a.computeN([W.darkTheme],n=>n.facet(W.darkTheme)==(i=="dark")?[r]:[])):t.push($a.of(r)),t}class WO{constructor(e){this.markCache=Object.create(null),this.tree=$e(e.state),this.decorations=this.buildDeco(e,Wl(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=$e(e.state),i=Wl(e.state),n=i!=Wl(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!n&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return J.none;let i=new _i;for(let{from:n,to:s}of e.visibleRanges)cO(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=J.mark({class:a})))},n,s);return i.finish()}}const GO=pr.high(qe.fromClass(WO,{decorations:r=>r.decorations})),jO=nl.define([{tag:P.meta,color:"#404740"},{tag:P.link,textDecoration:"underline"},{tag:P.heading,textDecoration:"underline",fontWeight:"bold"},{tag:P.emphasis,fontStyle:"italic"},{tag:P.strong,fontWeight:"bold"},{tag:P.strikethrough,textDecoration:"line-through"},{tag:P.keyword,color:"#708"},{tag:[P.atom,P.bool,P.url,P.contentSeparator,P.labelName],color:"#219"},{tag:[P.literal,P.inserted],color:"#164"},{tag:[P.string,P.deleted],color:"#a11"},{tag:[P.regexp,P.escape,P.special(P.string)],color:"#e40"},{tag:P.definition(P.variableName),color:"#00f"},{tag:P.local(P.variableName),color:"#30a"},{tag:[P.typeName,P.namespace],color:"#085"},{tag:P.className,color:"#167"},{tag:[P.special(P.variableName),P.macroName],color:"#256"},{tag:P.definition(P.propertyName),color:"#00c"},{tag:P.comment,color:"#940"},{tag:P.invalid,color:"#f00"}]),KO=W.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ym=1e4,Nm="()[]{}",vm=G.define({combine(r){return hi(r,{afterCursor:!0,brackets:Nm,maxScanDistance:ym,renderMatch:XO})}}),$O=J.mark({class:"cm-matchingBracket"}),QO=J.mark({class:"cm-nonmatchingBracket"});function XO(r){let e=[],t=r.matched?$O:QO;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const JO=et.define({create(){return J.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(vm);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=ri(e.state,n.head,-1,i)||n.head>0&&ri(e.state,n.head-1,1,i)||i.afterCursor&&(ri(e.state,n.head,1,i)||n.head<e.state.doc.length&&ri(e.state,n.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return J.set(t,!0)},provide:r=>W.decorations.from(r)}),YO=[JO,KO];function ZO(r={}){return[vm.of(r),YO]}const e2=new ae;function Qa(r,e,t){let i=r.prop(e<0?ae.openedBy:ae.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function Xa(r){let e=r.type.prop(e2);return e?e(r.node):r}function ri(r,e,t,i={}){let n=i.maxScanDistance||ym,s=i.brackets||Nm,o=$e(r),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=Qa(a.type,t,s);if(h&&a.from<a.to){let c=Xa(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return t2(r,e,t,a,c,h,s)}}return i2(r,e,t,o,l.type,n,s)}function t2(r,e,t,i,n,s,o){let l=i.parent,a={from:n.from,to:n.to},h=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=Xa(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Qa(c.type,t,o))h++;else if(Qa(c.type,-t,o)){if(h==0){let u=Xa(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function i2(r,e,t,i,n,s,o){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),u=0;for(let p=0;!c.next().done&&p<=s;){let g=c.value;t<0&&(p+=g.length);let S=e+p*t;for(let T=t>0?0:g.length-1,I=t>0?g.length:-1;T!=I;T+=t){let y=o.indexOf(g[T]);if(!(y<0||i.resolveInner(S+T,1).type!=n))if(y%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:S+T,to:S+T+1},matched:y>>1==a>>1};u--}}t>0&&(p+=g.length)}return c.done?{start:h,matched:!1}:null}const r2=Object.create(null),uu=[Tt.none],du=[],pu=Object.create(null),n2=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])n2[r]=s2(r2,e);function Gl(r,e){du.indexOf(r)>-1||(du.push(r),console.warn(e))}function s2(r,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let c=r[h]||P[h];c?typeof c=="function"?a.length?a=a.map(c):Gl(h,`Modifier ${h} used at start of tag`):a.length?Gl(h,`Tag ${h} used as modifier`):a=Array.isArray(c)?c:[c]:Gl(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),s=pu[n];if(s)return s.id;let o=pu[n]=Tt.define({id:uu.length,name:i,props:[lm({[i]:t})]});return uu.push(o),o.id}Ce.RTL,Ce.LTR;const o2=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),i=$h(r.state,t.from);return i.line?l2(r):i.block?h2(r):!1};function Kh(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=r(e,t);return n?(i(t.update(n)),!0):!1}}const l2=Kh(u2,0),a2=Kh(bm,0),h2=Kh((r,e)=>bm(r,e,f2(e)),0);function $h(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Sn=50;function c2(r,{open:e,close:t},i,n){let s=r.sliceDoc(i-Sn,i),o=r.sliceDoc(n,n+Sn),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,u;n-i<=2*Sn?c=u=r.sliceDoc(i,n):(c=r.sliceDoc(i,i+Sn),u=r.sliceDoc(n-Sn,n));let p=/^\s*/.exec(c)[0].length,g=/\s*$/.exec(u)[0].length,S=u.length-g-t.length;return c.slice(p,p+e.length)==e&&u.slice(S,S+t.length)==t?{open:{pos:i+p+e.length,margin:/\s/.test(c.charAt(p+e.length))?1:0},close:{pos:n-g-t.length,margin:/\s/.test(u.charAt(S-1))?1:0}}:null}function f2(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),n=t.to<=i.to?i:r.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:r.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function bm(r,e,t=e.selection.ranges){let i=t.map(s=>$h(e,s.from).block);if(!i.every(s=>s))return null;let n=t.map((s,o)=>c2(e,i[o],s.from,s.to));if(r!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,o)=>n[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(r!=1&&n.some(s=>s)){let s=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:h,close:c}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function u2(r,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9,h=$h(e,s).line;if(h){for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>n&&(s==o||o>u.from)){n=u.from;let p=/^\s*/.exec(u.text)[0].length,g=p==u.length,S=u.text.slice(p,p+h.length)==h?p:-1;p<u.text.length&&p<a&&(a=p),i.push({line:u,comment:S,token:h,indent:p,empty:g,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(r!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of i)(u||!c)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}const Ja=Oi.define(),d2=Oi.define(),p2=G.define(),Am=G.define({combine(r){return hi(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),wm=et.define({create(){return ni.empty},update(r,e){let t=e.state.facet(Am),i=e.annotation(Ja);if(i){let a=Et.fromTransaction(e,i.selection),h=i.side,c=h==0?r.undone:r.done;return a?c=Co(c,c.length,t.minDepth,a):c=Rm(c,e.startState.selection),new ni(h==0?i.rest:c,h==0?c:i.rest)}let n=e.annotation(d2);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(Ge.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=Et.fromTransaction(e),o=e.annotation(Ge.time),l=e.annotation(Ge.userEvent);return s?r=r.addChanges(s,o,l,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new ni(r.done.map(Et.fromJSON),r.undone.map(Et.fromJSON))}});function m2(r={}){return[wm,Am.of(r),W.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?xm:e.inputType=="historyRedo"?Ya:null;return i?(e.preventDefault(),i(t)):!1}})]}function sl(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(wm,!1);if(!n)return!1;let s=n.pop(r,t,e);return s?(i(s),!0):!1}}const xm=sl(0,!1),Ya=sl(1,!1),g2=sl(0,!0),S2=sl(1,!0);class Et{constructor(e,t,i,n,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new Et(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new Et(e.changes&&We.fromJSON(e.changes),[],e.mapped&&oi.fromJSON(e.mapped),e.startSelection&&C.fromJSON(e.startSelection),e.selectionsAfter.map(C.fromJSON))}static fromTransaction(e,t){let i=Pt;for(let n of e.startState.facet(p2)){let s=n(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Et(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Pt)}static selection(e){return new Et(void 0,Pt,void 0,void 0,e)}}function Co(r,e,t,i){let n=e+1>t+20?e-t-1:0,s=r.slice(n,e);return s.push(i),s}function E2(r,e){let t=[],i=!1;return r.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(i=!0)}}),i}function T2(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function km(r,e){return r.length?e.length?r.concat(e):r:e}const Pt=[],O2=200;function Rm(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-O2));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),Co(r,r.length-1,1e9,t.setSelAfter(i)))}else return[Et.selection([e])]}function I2(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function jl(r,e){if(!r.length)return r;let t=r.length,i=Pt;for(;t;){let n=y2(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let s=r.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[Et.selection(i)]:Pt}function y2(r,e,t){let i=km(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):Pt,t);if(!r.changes)return Et.selection(i);let n=r.changes.map(e),s=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(s):s;return new Et(n,ie.mapEffects(r.effects,e),o,r.startSelection.map(s),i)}const N2=/^(input\.type|delete)($|\.)/;class ni{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new ni(this.done,this.undone):this}addChanges(e,t,i,n,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||N2.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(s,E2(l.changes,e.changes))||i=="input.type.compose")?o=Co(o,o.length-1,n.minDepth,new Et(e.changes.compose(l.changes),km(ie.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Pt)):o=Co(o,o.length,n.minDepth,e),new ni(o,Pt,t,i)}addSelection(e,t,i,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Pt;return s.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&T2(s[s.length-1],e)?this:new ni(Rm(this.done,e),this.undone,t,i)}addMapping(e){return new ni(jl(this.done,e),jl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1],o=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Ja.of({side:e,rest:I2(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=n.length==1?Pt:n.slice(0,n.length-1);return s.mapped&&(l=jl(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Ja.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ni.empty=new ni(Pt,Pt);const v2=[{key:"Mod-z",run:xm,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ya,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ya,preventDefault:!0},{key:"Mod-u",run:g2,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:S2,preventDefault:!0}];function tn(r,e){return C.create(r.ranges.map(e),r.mainIndex)}function ci(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Qt({state:r,dispatch:e},t){let i=tn(r.selection,t);return i.eq(r.selection,!0)?!1:(e(ci(r,i)),!0)}function ol(r,e){return C.cursor(e?r.to:r.from)}function Lm(r,e){return Qt(r,t=>t.empty?r.moveByChar(t,e):ol(t,e))}function ot(r){return r.textDirectionAt(r.state.selection.main.head)==Ce.LTR}const Cm=r=>Lm(r,!ot(r)),Dm=r=>Lm(r,ot(r));function Vm(r,e){return Qt(r,t=>t.empty?r.moveByGroup(t,e):ol(t,e))}const b2=r=>Vm(r,!ot(r)),A2=r=>Vm(r,ot(r));function w2(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function ll(r,e,t){let i=$e(r).resolveInner(e.head),n=t?ae.closedBy:ae.openedBy;for(let a=e.head;;){let h=t?i.childAfter(a):i.childBefore(a);if(!h)break;w2(r,h,n)?i=h:a=t?h.to:h.from}let s=i.type.prop(n),o,l;return s&&(o=t?ri(r,i.from,1):ri(r,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,C.cursor(l,t?-1:1)}const x2=r=>Qt(r,e=>ll(r.state,e,!ot(r))),k2=r=>Qt(r,e=>ll(r.state,e,ot(r)));function Um(r,e){return Qt(r,t=>{if(!t.empty)return ol(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const Mm=r=>Um(r,!1),Pm=r=>Um(r,!0);function _m(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let s of r.state.facet(W.scrollMargins)){let o=s(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=r.scrollDOM.clientHeight-t-i}else n=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(r.defaultLineHeight,n-5)}}function Bm(r,e){let t=_m(r),{state:i}=r,n=tn(i.selection,o=>o.empty?r.moveVertically(o,e,t.height):ol(o,e));if(n.eq(i.selection))return!1;let s;if(t.selfScroll){let o=r.coordsAtPos(i.selection.main.head),l=r.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<h&&(s=W.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return r.dispatch(ci(i,n),{effects:s}),!0}const mu=r=>Bm(r,!1),Za=r=>Bm(r,!0);function Gi(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let s=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(n=C.cursor(i.from+s))}return n}const R2=r=>Qt(r,e=>Gi(r,e,!0)),L2=r=>Qt(r,e=>Gi(r,e,!1)),C2=r=>Qt(r,e=>Gi(r,e,!ot(r))),D2=r=>Qt(r,e=>Gi(r,e,ot(r))),V2=r=>Qt(r,e=>C.cursor(r.lineBlockAt(e.head).from,1)),U2=r=>Qt(r,e=>C.cursor(r.lineBlockAt(e.head).to,-1));function M2(r,e,t){let i=!1,n=tn(r.selection,s=>{let o=ri(r,s.head,-1)||ri(r,s.head,1)||s.head>0&&ri(r,s.head-1,1)||s.head<r.doc.length&&ri(r,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return C.cursor(l)});return i?(e(ci(r,n)),!0):!1}const P2=({state:r,dispatch:e})=>M2(r,e);function Ht(r,e){let t=tn(r.state.selection,i=>{let n=e(i);return C.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(ci(r.state,t)),!0)}function Fm(r,e){return Ht(r,t=>r.moveByChar(t,e))}const Hm=r=>Fm(r,!ot(r)),qm=r=>Fm(r,ot(r));function zm(r,e){return Ht(r,t=>r.moveByGroup(t,e))}const _2=r=>zm(r,!ot(r)),B2=r=>zm(r,ot(r)),F2=r=>Ht(r,e=>ll(r.state,e,!ot(r))),H2=r=>Ht(r,e=>ll(r.state,e,ot(r)));function Wm(r,e){return Ht(r,t=>r.moveVertically(t,e))}const Gm=r=>Wm(r,!1),jm=r=>Wm(r,!0);function Km(r,e){return Ht(r,t=>r.moveVertically(t,e,_m(r).height))}const gu=r=>Km(r,!1),Su=r=>Km(r,!0),q2=r=>Ht(r,e=>Gi(r,e,!0)),z2=r=>Ht(r,e=>Gi(r,e,!1)),W2=r=>Ht(r,e=>Gi(r,e,!ot(r))),G2=r=>Ht(r,e=>Gi(r,e,ot(r))),j2=r=>Ht(r,e=>C.cursor(r.lineBlockAt(e.head).from)),K2=r=>Ht(r,e=>C.cursor(r.lineBlockAt(e.head).to)),Eu=({state:r,dispatch:e})=>(e(ci(r,{anchor:0})),!0),Tu=({state:r,dispatch:e})=>(e(ci(r,{anchor:r.doc.length})),!0),Ou=({state:r,dispatch:e})=>(e(ci(r,{anchor:r.selection.main.anchor,head:0})),!0),Iu=({state:r,dispatch:e})=>(e(ci(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),$2=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),Q2=({state:r,dispatch:e})=>{let t=al(r).map(({from:i,to:n})=>C.range(i,Math.min(n+1,r.doc.length)));return e(r.update({selection:C.create(t),userEvent:"select"})),!0},X2=({state:r,dispatch:e})=>{let t=tn(r.selection,i=>{let n=$e(r),s=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return C.range(l.to,l.from)}return i});return t.eq(r.selection)?!1:(e(ci(r,t)),!0)},J2=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=C.create([t.main]):t.main.empty||(i=C.create([C.cursor(t.main.head)])),i?(e(ci(r,i)),!0):!1};function as(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:i}=r,n=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=Ws(r,a,!1)):a>o&&(t="delete.forward",a=Ws(r,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Ws(r,o,!1),l=Ws(r,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:C.cursor(o,o<s.head?-1:1)}});return n.changes.empty?!1:(r.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?W.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ws(r,e,t){if(r instanceof W)for(let i of r.state.facet(W.atomicRanges).map(n=>n(r)))i.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}const $m=(r,e,t)=>as(r,i=>{let n=i.from,{state:s}=r,o=s.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let h=en(l,s.tabSize),c=h%ko(s)||ko(s);for(let u=0;u<c&&l[l.length-1-u]==" ";u++)n--;a=n}else a=Ze(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=Ze(o.text,a-o.from,!1,!1)+o.from);return a}),eh=r=>$m(r,!1,!0),Qm=r=>$m(r,!0,!1),Xm=(r,e)=>as(r,t=>{let i=t.head,{state:n}=r,s=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=Ze(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||i!=t.head)&&(l=c),i=a}return i}),Jm=r=>Xm(r,!1),Y2=r=>Xm(r,!0),Z2=r=>as(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),eI=r=>as(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),tI=r=>as(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),iI=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Te.of(["",""])},range:C.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},rI=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,s=r.doc.lineAt(n),o=n==s.from?n-1:Ze(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:Ze(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:r.doc.slice(n,l).append(r.doc.slice(o,n))},range:C.cursor(l)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function al(r){let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),s=r.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=r.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:n.from,to:s.to,ranges:[i]});t=s.number+1}return e}function Ym(r,e,t){if(r.readOnly)return!1;let i=[],n=[];for(let s of al(r)){if(t?s.to==r.doc.length:s.from==0)continue;let o=r.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+r.lineBreak});for(let a of s.ranges)n.push(C.range(Math.min(r.doc.length,a.anchor+l),Math.min(r.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:r.lineBreak+o.text});for(let a of s.ranges)n.push(C.range(a.anchor-l,a.head-l))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:C.create(n,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const nI=({state:r,dispatch:e})=>Ym(r,e,!1),sI=({state:r,dispatch:e})=>Ym(r,e,!0);function Zm(r,e,t){if(r.readOnly)return!1;let i=[];for(let n of al(r))t?i.push({from:n.from,insert:r.doc.slice(n.from,n.to)+r.lineBreak}):i.push({from:n.to,insert:r.lineBreak+r.doc.slice(n.from,n.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const oI=({state:r,dispatch:e})=>Zm(r,e,!1),lI=({state:r,dispatch:e})=>Zm(r,e,!0),aI=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(al(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),i=tn(e.selection,n=>{let s;if(r.lineWrapping){let o=r.lineBlockAt(n.head),l=r.coordsAtPos(n.head,n.assoc||1);l&&(s=o.bottom+r.documentTop-l.bottom+r.defaultLineHeight/2)}return r.moveVertically(n,!0,s)}).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function hI(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=$e(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),s;return i&&n&&i.to<=e&&n.from>=e&&(s=i.type.prop(ae.closedBy))&&s.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from&&!/\S/.test(r.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const yu=e0(!1),cI=e0(!0);function e0(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:s,to:o}=n,l=e.doc.lineAt(s),a=!r&&s==o&&hI(e,s);r&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new il(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=Gh(h,s);for(c==null&&(c=en(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",$n(e,c)];return a&&u.push($n(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:Te.of(u)},range:C.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Qh(r,e){let t=-1;return r.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=r.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let s=r.changes(n);return{changes:n,range:C.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const fI=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new il(r,{overrideIndentation:s=>{let o=t[s];return o??-1}}),n=Qh(r,(s,o,l)=>{let a=Gh(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],c=$n(r,a);(h!=c||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:c}))});return n.changes.empty||e(r.update(n,{userEvent:"indent"})),!0},uI=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Qh(r,(t,i)=>{i.push({from:t.from,insert:r.facet(Wh)})}),{userEvent:"input.indent"})),!0),dI=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(Qh(r,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=en(n,r.tabSize),o=0,l=$n(r,Math.max(0,s-ko(r)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),pI=r=>(r.setTabFocusMode(),!0),mI=[{key:"Ctrl-b",run:Cm,shift:Hm,preventDefault:!0},{key:"Ctrl-f",run:Dm,shift:qm},{key:"Ctrl-p",run:Mm,shift:Gm},{key:"Ctrl-n",run:Pm,shift:jm},{key:"Ctrl-a",run:V2,shift:j2},{key:"Ctrl-e",run:U2,shift:K2},{key:"Ctrl-d",run:Qm},{key:"Ctrl-h",run:eh},{key:"Ctrl-k",run:Z2},{key:"Ctrl-Alt-h",run:Jm},{key:"Ctrl-o",run:iI},{key:"Ctrl-t",run:rI},{key:"Ctrl-v",run:Za}],gI=[{key:"ArrowLeft",run:Cm,shift:Hm,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:b2,shift:_2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:C2,shift:W2,preventDefault:!0},{key:"ArrowRight",run:Dm,shift:qm,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:A2,shift:B2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:D2,shift:G2,preventDefault:!0},{key:"ArrowUp",run:Mm,shift:Gm,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Eu,shift:Ou},{mac:"Ctrl-ArrowUp",run:mu,shift:gu},{key:"ArrowDown",run:Pm,shift:jm,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Tu,shift:Iu},{mac:"Ctrl-ArrowDown",run:Za,shift:Su},{key:"PageUp",run:mu,shift:gu},{key:"PageDown",run:Za,shift:Su},{key:"Home",run:L2,shift:z2,preventDefault:!0},{key:"Mod-Home",run:Eu,shift:Ou},{key:"End",run:R2,shift:q2,preventDefault:!0},{key:"Mod-End",run:Tu,shift:Iu},{key:"Enter",run:yu,shift:yu},{key:"Mod-a",run:$2},{key:"Backspace",run:eh,shift:eh},{key:"Delete",run:Qm},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Jm},{key:"Mod-Delete",mac:"Alt-Delete",run:Y2},{mac:"Mod-Backspace",run:eI},{mac:"Mod-Delete",run:tI}].concat(mI.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),SI=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:x2,shift:F2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:k2,shift:H2},{key:"Alt-ArrowUp",run:nI},{key:"Shift-Alt-ArrowUp",run:oI},{key:"Alt-ArrowDown",run:sI},{key:"Shift-Alt-ArrowDown",run:lI},{key:"Escape",run:J2},{key:"Mod-Enter",run:cI},{key:"Alt-l",mac:"Ctrl-l",run:Q2},{key:"Mod-i",run:X2,preventDefault:!0},{key:"Mod-[",run:dI},{key:"Mod-]",run:uI},{key:"Mod-Alt-\\",run:fI},{key:"Shift-Mod-k",run:aI},{key:"Shift-Mod-\\",run:P2},{key:"Mod-/",run:o2},{key:"Alt-A",run:a2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pI}].concat(gI);function xe(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?r.setAttribute(i,n):n!=null&&(r[i]=n)}e++}for(;e<arguments.length;e++)t0(r,arguments[e]);return r}function t0(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)t0(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Nu=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class jr{constructor(e,t,i=0,n=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=s?l=>s(Nu(l)):Nu,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Xe(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=vh(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ut(e);let n=this.normalize(t);for(let s=0,o=i;;s++){let l=n.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==n.length-1){if(a)return this.value=a,this;break}o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,i){let n=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(jr.prototype[Symbol.iterator]=function(){return this});const i0={from:-1,to:-1,match:/.*/.exec("")},Xh="gm"+(/x/.unicode==null?"":"u");class r0{constructor(e,t,i,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=i0,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new n0(e,t,i,n,s);this.re=new RegExp(t,Xh+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Do(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Do(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Kl=new WeakMap;class Pr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=Kl.get(e);if(!n||n.from>=i||n.to<=t){let l=new Pr(t,e.sliceString(t,i));return Kl.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:s,from:o}=n;return o>t&&(s=e.sliceString(t,o)+s,o=t),n.to<i&&(s+=e.sliceString(n.to,i)),Kl.set(e,new Pr(o,s)),new Pr(t,s.slice(t-o,i-o))}}class n0{constructor(e,t,i,n,s){this.text=e,this.to=s,this.done=!1,this.value=i0,this.matchPos=Do(e,n),this.re=new RegExp(t,Xh+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Pr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Do(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Pr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(r0.prototype[Symbol.iterator]=n0.prototype[Symbol.iterator]=function(){return this});function EI(r){try{return new RegExp(r,Xh),!0}catch{return!1}}function Do(r,e){if(e>=r.length)return e;let t=r.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function th(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=xe("input",{class:"cm-textfield",name:"line",value:e}),i=xe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),r.dispatch({effects:Vo.of(!1)}),r.focus()):s.keyCode==13&&(s.preventDefault(),n())},onsubmit:s=>{s.preventDefault(),n()}},xe("label",r.state.phrase("Go to line"),": ",t)," ",xe("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function n(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=r,l=o.doc.lineAt(o.selection.main.head),[,a,h,c,u]=s,p=c?+c.slice(1):0,g=h?+h:l.number;if(h&&u){let I=g/100;a&&(I=I*(a=="-"?-1:1)+l.number/o.doc.lines),g=Math.round(o.doc.lines*I)}else h&&a&&(g=g*(a=="-"?-1:1)+l.number);let S=o.doc.line(Math.max(1,Math.min(o.doc.lines,g))),T=C.cursor(S.from+Math.max(0,Math.min(p,S.length)));r.dispatch({effects:[Vo.of(!1),W.scrollIntoView(T.from,{y:"center"})],selection:T}),r.focus()}return{dom:i}}const Vo=ie.define(),vu=et.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(Vo)&&(r=t.value);return r},provide:r=>jn.from(r,e=>e?th:null)}),TI=r=>{let e=Gn(r,th);if(!e){let t=[Vo.of(!0)];r.state.field(vu,!1)==null&&t.push(ie.appendConfig.of([vu,OI])),r.dispatch({effects:t}),e=Gn(r,th)}return e&&e.dom.querySelector("input").select(),!0},OI=W.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),II={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},yI=G.define({combine(r){return hi(r,II,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function NI(r){return[xI,wI]}const vI=J.mark({class:"cm-selectionMatch"}),bI=J.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bu(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=Ve.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Ve.Word)}function AI(r,e,t,i){return r(e.sliceDoc(t,t+1))==Ve.Word&&r(e.sliceDoc(i-1,i))==Ve.Word}const wI=qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(yI),{state:t}=r,i=t.selection;if(i.ranges.length>1)return J.none;let n=i.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return J.none;let a=t.wordAt(n.head);if(!a)return J.none;o=t.charCategorizer(n.head),s=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return J.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(bu(o,t,n.from,n.to)&&AI(o,t,n.from,n.to)))return J.none}else if(s=t.sliceDoc(n.from,n.to),!s)return J.none}let l=[];for(let a of r.visibleRanges){let h=new jr(t.doc,s,a.from,a.to);for(;!h.next().done;){let{from:c,to:u}=h.value;if((!o||bu(o,t,c,u))&&(n.empty&&c<=n.from&&u>=n.to?l.push(bI.range(c,u)):(c>=n.to||u<=n.from)&&l.push(vI.range(c,u)),l.length>e.maxMatches))return J.none}}return J.set(l)}},{decorations:r=>r.decorations}),xI=W.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),kI=({state:r,dispatch:e})=>{let{selection:t}=r,i=C.create(t.ranges.map(n=>r.wordAt(n.head)||C.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function RI(r,e){let{main:t,ranges:i}=r.selection,n=r.wordAt(t.head),s=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new jr(r.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new jr(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=r.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const LI=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(s=>s.from===s.to))return kI({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(s=>r.sliceDoc(s.from,s.to)!=i))return!1;let n=RI(r,i);return n?(e(r.update({selection:r.selection.addRange(C.range(n.from,n.to),!1),effects:W.scrollIntoView(n.to)})),!0):!1},rn=G.define({combine(r){return hi(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new zI(e),scrollToMatch:e=>W.scrollIntoView(e)})}});class s0{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||EI(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new UI(this):new DI(this)}getCursor(e,t=0,i){let n=e.doc?e:ge.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Nr(this,n,t,i):yr(this,n,t,i)}}class o0{constructor(e){this.spec=e}}function yr(r,e,t,i){return new jr(e.doc,r.unquoted,t,i,r.caseSensitive?void 0:n=>n.toLowerCase(),r.wholeWord?CI(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function CI(r,e){return(t,i,n,s)=>((s>t||s+n.length<i)&&(s=Math.max(0,t-2),n=r.sliceString(s,Math.min(r.length,i+2))),(e(Uo(n,t-s))!=Ve.Word||e(Mo(n,t-s))!=Ve.Word)&&(e(Mo(n,i-s))!=Ve.Word||e(Uo(n,i-s))!=Ve.Word))}class DI extends o0{constructor(e){super(e)}nextMatch(e,t,i){let n=yr(this.spec,e,i,e.doc.length).nextOverlapping();return n.done&&(n=yr(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let s=Math.max(t,n-1e4-this.spec.unquoted.length),o=yr(this.spec,e,s,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=yr(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=yr(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}function Nr(r,e,t,i){return new r0(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?VI(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Uo(r,e){return r.slice(Ze(r,e,!1),e)}function Mo(r,e){return r.slice(e,Ze(r,e))}function VI(r){return(e,t,i)=>!i[0].length||(r(Uo(i.input,i.index))!=Ve.Word||r(Mo(i.input,i.index))!=Ve.Word)&&(r(Mo(i.input,i.index+i[0].length))!=Ve.Word||r(Uo(i.input,i.index+i[0].length))!=Ve.Word)}class UI extends o0{nextMatch(e,t,i){let n=Nr(this.spec,e,i,e.doc.length).next();return n.done&&(n=Nr(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let s=Math.max(t,i-n*1e4),o=Nr(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Nr(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Nr(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}const Qn=ie.define(),Jh=ie.define(),Di=et.define({create(r){return new $l(ih(r).create(),null)},update(r,e){for(let t of e.effects)t.is(Qn)?r=new $l(t.value.create(),r.panel):t.is(Jh)&&(r=new $l(r.query,t.value?Yh:null));return r},provide:r=>jn.from(r,e=>e.panel)});class $l{constructor(e,t){this.query=e,this.panel=t}}const MI=J.mark({class:"cm-searchMatch"}),PI=J.mark({class:"cm-searchMatch cm-searchMatch-selected"}),_I=qe.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Di))}update(r){let e=r.state.field(Di);(e!=r.startState.field(Di)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return J.none;let{view:t}=this,i=new _i;for(let n=0,s=t.visibleRanges,o=s.length;n<o;n++){let{from:l,to:a}=s[n];for(;n<o-1&&a>s[n+1].from-2*250;)a=s[++n].to;r.highlight(t.state,l,a,(h,c)=>{let u=t.state.selection.ranges.some(p=>p.from==h&&p.to==c);i.add(h,c,u?PI:MI)})}return i.finish()}},{decorations:r=>r.decorations});function hs(r){return e=>{let t=e.state.field(Di,!1);return t&&t.query.spec.valid?r(e,t):h0(e)}}const Po=hs((r,{query:e})=>{let{to:t}=r.state.selection.main,i=e.nextMatch(r.state,t,t);if(!i)return!1;let n=C.single(i.from,i.to),s=r.state.facet(rn);return r.dispatch({selection:n,effects:[Zh(r,i),s.scrollToMatch(n.main,r)],userEvent:"select.search"}),a0(r),!0}),_o=hs((r,{query:e})=>{let{state:t}=r,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let s=C.single(n.from,n.to),o=r.state.facet(rn);return r.dispatch({selection:s,effects:[Zh(r,n),o.scrollToMatch(s.main,r)],userEvent:"select.search"}),a0(r),!0}),BI=hs((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:C.create(t.map(i=>C.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),FI=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,s=[],o=0;for(let l=new jr(r.doc,r.sliceDoc(i,n));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(C.range(l.value.from,l.value.to))}return e(r.update({selection:C.create(s,o),userEvent:"select.search.matches"})),!0},Au=hs((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=[],l,a,h=[];if(s.from==i&&s.to==n&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t,s.from,s.to),h.push(W.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=C.single(s.from-c,s.to-c),h.push(Zh(r,s)),h.push(t.facet(rn).scrollToMatch(l.main,r))}return r.dispatch({changes:o,selection:l,effects:h,userEvent:"input.replace"}),!0}),HI=hs((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(n=>{let{from:s,to:o}=n;return{from:s,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:W.announce.of(i),userEvent:"input.replace.all"}),!0});function Yh(r){return r.state.facet(rn).createPanel(r)}function ih(r,e){var t,i,n,s,o;let l=r.selection.main,a=l.empty||l.to>l.from+100?"":r.sliceDoc(l.from,l.to);if(e&&!a)return e;let h=r.facet(rn);return new s0({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:h.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function l0(r){let e=Gn(r,Yh);return e&&e.dom.querySelector("[main-field]")}function a0(r){let e=l0(r);e&&e==r.root.activeElement&&e.select()}const h0=r=>{let e=r.state.field(Di,!1);if(e&&e.panel){let t=l0(r);if(t&&t!=r.root.activeElement){let i=ih(r.state,e.query.spec);i.valid&&r.dispatch({effects:Qn.of(i)}),t.focus(),t.select()}}else r.dispatch({effects:[Jh.of(!0),e?Qn.of(ih(r.state,e.query.spec)):ie.appendConfig.of(GI)]});return!0},c0=r=>{let e=r.state.field(Di,!1);if(!e||!e.panel)return!1;let t=Gn(r,Yh);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:Jh.of(!1)}),!0},qI=[{key:"Mod-f",run:h0,scope:"editor search-panel"},{key:"F3",run:Po,shift:_o,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Po,shift:_o,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:c0,scope:"editor search-panel"},{key:"Mod-Shift-l",run:FI},{key:"Mod-Alt-g",run:TI},{key:"Mod-d",run:LI,preventDefault:!0}];class zI{constructor(e){this.view=e;let t=this.query=e.state.field(Di).query.spec;this.commit=this.commit.bind(this),this.searchField=xe("input",{value:t.search,placeholder:vt(e,"Find"),"aria-label":vt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xe("input",{value:t.replace,placeholder:vt(e,"Replace"),"aria-label":vt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xe("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=xe("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=xe("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,s,o){return xe("button",{class:"cm-button",name:n,onclick:s,type:"button"},o)}this.dom=xe("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Po(e),[vt(e,"next")]),i("prev",()=>_o(e),[vt(e,"previous")]),i("select",()=>BI(e),[vt(e,"all")]),xe("label",null,[this.caseField,vt(e,"match case")]),xe("label",null,[this.reField,vt(e,"regexp")]),xe("label",null,[this.wordField,vt(e,"by word")]),...e.state.readOnly?[]:[xe("br"),this.replaceField,i("replace",()=>Au(e),[vt(e,"replace")]),i("replaceAll",()=>HI(e),[vt(e,"replace all")])],xe("button",{name:"close",onclick:()=>c0(e),"aria-label":vt(e,"close"),type:"button"},[""])])}commit(){let e=new s0({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Qn.of(e)}))}keydown(e){JE(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?_o:Po)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Au(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(Qn)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rn).top}}function vt(r,e){return r.state.phrase(e)}const Gs=30,js=/[\s\.,:;?!]/;function Zh(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),n=r.state.doc.lineAt(t).to,s=Math.max(i.from,e-Gs),o=Math.min(n,t+Gs),l=r.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<Gs;a++)if(!js.test(l[a+1])&&js.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-Gs;a--)if(!js.test(l[a-1])&&js.test(l[a])){l=l.slice(0,a);break}}return W.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${i.number}.`)}const WI=W.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),GI=[Di,pr.low(_I),WI];class f0{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=$e(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),s=n.search(d0(e,!1));return s<0?null:{from:i+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function wu(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function jI(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=wu(e)+wu(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function u0(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:jI(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}function KI(r,e){return t=>{for(let i=$e(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(r.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class xu{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function Vi(r){return r.selection.main.from}function d0(r,e){var t;let{source:i}=r,n=e&&i[0]!="^",s=i[i.length-1]!="$";return!n&&!s?r:new RegExp(`${n?"^":""}(?:${i})${s?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const p0=Oi.define();function $I(r,e,t,i){let{main:n}=r.selection,s=t-n.from,o=i-n.from;return Object.assign(Object.assign({},r.changeByRange(l=>{if(l!=n&&t!=i&&r.sliceDoc(l.from+s,l.from+o)!=r.sliceDoc(t,i))return{range:l};let a=r.toText(e);return{changes:{from:l.from+s,to:i==n.from?l.to:l.from+o,insert:a},range:C.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const ku=new WeakMap;function QI(r){if(!Array.isArray(r))return r;let e=ku.get(r);return e||ku.set(r,e=u0(r)),e}const Bo=ie.define(),Xn=ie.define();class XI{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Xe(e,t),n=Ut(i);this.chars.push(i);let s=e.slice(t,t+n),o=s.toUpperCase();this.folded.push(Xe(o==s?s.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:s,byWord:o}=this;if(t.length==1){let A=Xe(e,0),v=Ut(A),R=v==e.length?0:-100;if(A!=t[0])if(A==i[0])R+=-200;else return null;return this.ret(R,[0,v])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,h=0;if(l<0){for(let A=0,v=Math.min(e.length,200);A<v&&h<a;){let R=Xe(e,A);(R==t[h]||R==i[h])&&(n[h++]=A),A+=Ut(R)}if(h<a)return null}let c=0,u=0,p=!1,g=0,S=-1,T=-1,I=/[a-z]/.test(e),y=!0;for(let A=0,v=Math.min(e.length,200),R=0;A<v&&u<a;){let k=Xe(e,A);l<0&&(c<a&&k==t[c]&&(s[c++]=A),g<a&&(k==t[g]||k==i[g]?(g==0&&(S=A),T=A+1,g++):g=0));let w,x=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(w=vh(k))!=w.toLowerCase()?1:w!=w.toUpperCase()?2:0;(!A||x==1&&I||R==0&&x!=0)&&(t[u]==k||i[u]==k&&(p=!0)?o[u++]=A:o.length&&(y=!1)),R=x,A+=Ut(k)}return u==a&&o[0]==0&&y?this.result(-100+(p?-200:0),o,e):g==a&&S==0?this.ret(-200-e.length+(T==e.length?0:-100),[0,T]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==a?this.ret(-900-e.length,[S,T]):u==a?this.result(-100+(p?-200:0)+-700+(y?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],s=0;for(let o of t){let l=o+(this.astral?Ut(Xe(i,o)):1);s&&n[s-1]==o?n[s-1]=l:(n[s++]=o,n[s++]=l)}return this.ret(e-i.length,n)}}class JI{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ye=G.define({combine(r){return hi(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:YI,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Ru(e(i),t(i)),optionClass:(e,t)=>i=>Ru(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Ru(r,e){return r?e?r+" "+e:r:e}function YI(r,e,t,i,n,s){let o=r.textDirection==Ce.RTL,l=o,a=!1,h="top",c,u,p=e.left-n.left,g=n.right-e.right,S=i.right-i.left,T=i.bottom-i.top;if(l&&p<Math.min(S,g)?l=!1:!l&&g<Math.min(S,p)&&(l=!0),S<=(l?p:g))c=Math.max(n.top,Math.min(t.top,n.bottom-T))-e.top,u=Math.min(400,l?p:g);else{a=!0,u=Math.min(400,(o?e.right:n.right-e.left)-30);let A=n.bottom-e.bottom;A>=T||A>e.top?c=t.bottom-e.top:(h="bottom",c=e.bottom-t.top)}let I=(e.bottom-e.top)/s.offsetHeight,y=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${c/I}px; max-width: ${u/y}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function ZI(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let h=0;h<s.length;){let c=s[h++],u=s[h++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(l.slice(c,u))),p.className="cm-completionMatchedText",a=u}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function Ql(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class ey{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:s,selected:o}=n.open,l=e.state.facet(Ye);this.optionContent=ZI(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Ql(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:h}=e.state.field(t).open;for(let c=a.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Ye).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Xn.of(null)})}),this.showOptions(s,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:s,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=s)&&(this.range=Ql(s.length,o,e.state.facet(Ye).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ql(t.options.length,t.selected,this.view.state.facet(Ye).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>St(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:s}=e;i.appendChild(n),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&iy(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return n.top>Math.min(s.bottom,t.bottom)-10||n.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Ye).positionInfo(this.view,t,n,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:h}=l;if(h){let p=typeof h=="string"?h:h.name;if(p!=s&&(o>i.from||i.from==0))if(s=p,typeof h!="string"&&h.header)n.appendChild(h.header(h));else{let g=n.appendChild(document.createElement("completion-section"));g.textContent=p}}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(l);u&&(c.className=u);for(let p of this.optionContent){let g=p(l,this.view.state,this.view,a);g&&c.appendChild(g)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ty(r,e){return t=>new ey(t,r,e)}function iy(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/r.offsetHeight;i.top<t.top?r.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(r.scrollTop+=(i.bottom-t.bottom)/n)}function Lu(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function ry(r,e){let t=[],i=null,n=h=>{t.push(h);let{section:c}=h.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(p=>p.name==u)||i.push(typeof c=="string"?{name:u}:c)}},s=e.facet(Ye);for(let h of r)if(h.hasResult()){let c=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)n(new xu(u,h.source,c?c(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),p,g=s.filterStrict?new JI(u):new XI(u);for(let S of h.result.options)if(p=g.match(S.label)){let T=S.displayLabel?c?c(S,p.matched):[]:p.matched;n(new xu(S,h.source,T,p.score+(S.boost||0)))}}}if(i){let h=Object.create(null),c=0,u=(p,g)=>{var S,T;return((S=p.rank)!==null&&S!==void 0?S:1e9)-((T=g.rank)!==null&&T!==void 0?T:1e9)||(p.name<g.name?-1:1)};for(let p of i.sort(u))c-=1e5,h[p.name]=c;for(let p of t){let{section:g}=p.completion;g&&(p.score+=h[typeof g=="string"?g:g.name])}}let o=[],l=null,a=s.compareCompletions;for(let h of t.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=h.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?o.push(h):Lu(h.completion)>Lu(l)&&(o[o.length-1]=h),l=h.completion}return o}class wr{constructor(e,t,i,n,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new wr(this.options,Cu(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,s){let o=ry(e,t);if(!o.length)return n&&e.some(a=>a.state==1)?new wr(n.options,n.attrs,n.tooltip,n.timestamp,n.selected,!0):null;let l=t.facet(Ye).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let a=n.options[n.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==a){l=h;break}}return new wr(o,Cu(i,l),{pos:e.reduce((a,h)=>h.hasResult()?Math.min(a,h.from):a,1e8),create:hy,above:s.aboveCursor},n?n.timestamp:Date.now(),l,!1)}map(e){return new wr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Fo{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Fo(ly,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ye),s=(i.override||t.languageDataAt("autocomplete",Vi(t)).map(QI)).map(l=>(this.active.find(h=>h.source==l)||new xt(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!ny(s,this.active)?o=wr.build(s,t,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new xt(l.source,0):l));for(let l of e.effects)l.is(S0)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Fo(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?sy:oy}}function ny(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==r.length,s=i==e.length;if(n||s)return n==s;if(r[t++].result!=e[i++].result)return!1}}const sy={"aria-autocomplete":"list"},oy={};function Cu(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const ly=[];function m0(r,e){if(r.isUserEvent("input.complete")){let i=r.annotation(p0);if(i&&e.activateOnCompletion(i))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class xt{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=m0(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new xt(n.source,0)),i&4&&n.state==0&&(n=new xt(this.source,1)),n=n.updateFor(e,i);for(let s of e.effects)if(s.is(Bo))n=new xt(n.source,1,s.value?Vi(e.state):-1);else if(s.is(Xn))n=new xt(n.source,0);else if(s.is(g0))for(let o of s.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new xt(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Vi(e.state))}}class _r extends xt{constructor(e,t,i,n,s){super(e,2,t),this.result=i,this.from=n,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Vi(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||!n||t&2&&Vi(e.startState)==this.from)return new xt(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return ay(n.validFor,e.state,s,o)?new _r(this.source,a,n,s,o):n.update&&(n=n.update(n,s,o,new f0(e.state,l,a>=0)))?new _r(this.source,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Vi(e.state)):new xt(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new _r(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new xt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function ay(r,e,t,i){if(!r)return!1;let n=e.sliceDoc(t,i);return typeof r=="function"?r(n,t,i,e):d0(r,!0).test(n)}const g0=ie.define({map(r,e){return r.map(t=>t.map(e))}}),S0=ie.define(),gt=et.define({create(){return Fo.start()},update(r,e){return r.update(e)},provide:r=>[Bh.from(r,e=>e.tooltip),W.contentAttributes.from(r,e=>e.attrs)]});function ec(r,e){const t=e.completion.apply||e.completion.label;let i=r.state.field(gt).active.find(n=>n.source==e.source);return i instanceof _r?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},$I(r.state,t,i.from,i.to)),{annotations:p0.of(e.completion)})):t(r,e.completion,i.from,i.to),!0):!1}const hy=ty(gt,ec);function Ks(r,e="option"){return t=>{let i=t.state.field(gt,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ye).interactionDelay)return!1;let n=1,s;e=="page"&&(s=Yp(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(r?1:-1):r?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:S0.of(l)}),!0}}const cy=r=>{let e=r.state.field(gt,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(Ye).interactionDelay?!1:ec(r,e.open.options[e.open.selected])},Du=r=>r.state.field(gt,!1)?(r.dispatch({effects:Bo.of(!0)}),!0):!1,fy=r=>{let e=r.state.field(gt,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:Xn.of(null)}),!0)};class uy{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const dy=50,py=1e3,my=qe.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(gt).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(gt),t=r.state.facet(Ye);if(!r.selectionSet&&!r.docChanged&&r.startState.field(gt)==e)return;let i=r.transactions.some(s=>{let o=m0(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&r.docChanged||o.updates.length+r.transactions.length>dy&&Date.now()-o.time>py){for(let l of o.context.abortListeners)try{l()}catch(a){St(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(s=>s.effects.some(o=>o.is(Bo)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let s of r.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(gt);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Vi(e),i=new f0(e,t,r.explicitPos==t,this.view),n=new uy(r,i);this.running.push(n),Promise.resolve(r.source(i)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Xn.of(null)}),St(this.view.state,s)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ye).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ye);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new _r(n.active.source,n.active.explicitPos,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:Vi(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(gt).active.find(o=>o.source==n.active.source);if(s&&s.state==1)if(n.done==null){let o=new xt(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:g0.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(gt,!1);if(e&&e.tooltip&&this.view.state.facet(Ye).closeOnBlur){let t=e.open&&Yp(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Xn.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Bo.of(!1)}),20),this.composing=0}}}),gy=typeof navigator=="object"&&/Win/.test(navigator.platform),Sy=pr.highest(W.domEventHandlers({keydown(r,e){let t=e.state.field(gt,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(gy&&r.altKey)||r.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||n.result.commitCharacters;return s&&s.indexOf(r.key)>-1&&ec(e,i),!1}})),Ey=W.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Jn={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},sr=ie.define({map(r,e){let t=e.mapPos(r,-1,ht.TrackAfter);return t??void 0}}),tc=new class extends lr{};tc.startSide=1;tc.endSide=-1;const E0=et.define({create(){return me.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(sr)&&(r=r.update({add:[tc.range(t.value,t.value+1)]}));return r}});function Ty(){return[Iy,E0]}const Xl="()[]{}<>";function T0(r){for(let e=0;e<Xl.length;e+=2)if(Xl.charCodeAt(e)==r)return Xl.charAt(e+1);return vh(r<128?r:r+1)}function O0(r,e){return r.languageDataAt("closeBrackets",e)[0]||Jn}const Oy=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Iy=W.inputHandler.of((r,e,t,i)=>{if((Oy?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let n=r.state.selection.main;if(i.length>2||i.length==2&&Ut(Xe(i,0))==1||e!=n.from||t!=n.to)return!1;let s=vy(r.state,i);return s?(r.dispatch(s),!0):!1}),yy=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=O0(r,r.selection.main.head).brackets||Jn.brackets,n=null,s=r.changeByRange(o=>{if(o.empty){let l=by(r.doc,o.head);for(let a of i)if(a==l&&hl(r.doc,o.head)==T0(Xe(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:C.cursor(o.head-a.length)}}return{range:n=o}});return n||e(r.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},Ny=[{key:"Backspace",run:yy}];function vy(r,e){let t=O0(r,r.selection.main.head),i=t.brackets||Jn.brackets;for(let n of i){let s=T0(Xe(n,0));if(e==n)return s==n?xy(r,n,i.indexOf(n+n+n)>-1,t):Ay(r,n,s,t.before||Jn.before);if(e==s&&I0(r,r.selection.main.from))return wy(r,n,s)}return null}function I0(r,e){let t=!1;return r.field(E0).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function hl(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Ut(Xe(t,0)))}function by(r,e){let t=r.sliceString(e-2,e);return Ut(Xe(t,0))==t.length?t:t.slice(1)}function Ay(r,e,t,i){let n=null,s=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:sr.of(o.to+e.length),range:C.range(o.anchor+e.length,o.head+e.length)};let l=hl(r.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:sr.of(o.head+e.length),range:C.cursor(o.head+e.length)}:{range:n=o}});return n?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function wy(r,e,t){let i=null,n=r.changeByRange(s=>s.empty&&hl(r.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:C.cursor(s.head+t.length)}:i={range:s});return i?null:r.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function xy(r,e,t,i){let n=i.stringPrefixes||Jn.stringPrefixes,s=null,o=r.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:sr.of(l.to+e.length),range:C.range(l.anchor+e.length,l.head+e.length)};let a=l.head,h=hl(r.doc,a),c;if(h==e){if(Vu(r,a))return{changes:{insert:e+e,from:a},effects:sr.of(a+e.length),range:C.cursor(a+e.length)};if(I0(r,a)){let p=t&&r.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+p.length,insert:p},range:C.cursor(a+p.length)}}}else{if(t&&r.sliceDoc(a-2*e.length,a)==e+e&&(c=Uu(r,a-2*e.length,n))>-1&&Vu(r,c))return{changes:{insert:e+e+e+e,from:a},effects:sr.of(a+e.length),range:C.cursor(a+e.length)};if(r.charCategorizer(a)(h)!=Ve.Word&&Uu(r,a,n)>-1&&!ky(r,a,e,n))return{changes:{insert:e+e,from:a},effects:sr.of(a+e.length),range:C.cursor(a+e.length)}}return{range:s=l}});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Vu(r,e){let t=$e(r).resolveInner(e+1);return t.parent&&t.from==e}function ky(r,e,t,i){let n=$e(r).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=r.sliceDoc(n.from,Math.min(n.to,n.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+a;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=n.to==e&&n.parent;if(!h)break;n=h}return!1}function Uu(r,e,t){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=Ve.Word)return e;for(let n of t){let s=e-n.length;if(r.sliceDoc(s,e)==n&&i(r.sliceDoc(s-1,s))!=Ve.Word)return s}return-1}function y0(r={}){return[Sy,gt,Ye.of(r),my,Ry,Ey]}const N0=[{key:"Ctrl-Space",run:Du},{mac:"Alt-`",run:Du},{key:"Escape",run:fy},{key:"ArrowDown",run:Ks(!0)},{key:"ArrowUp",run:Ks(!1)},{key:"PageDown",run:Ks(!0,"page")},{key:"PageUp",run:Ks(!1,"page")},{key:"Enter",run:cy}],Ry=pr.highest(Ph.computeN([Ye],r=>r.facet(Ye).defaultKeymap?[N0]:[]));class Ly{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class rr{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,s=i.facet(Yn).markerFilter;s&&(n=s(n,i));let o=J.set(n.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?J.widget({widget:new Fy(l),diagnostic:l}).range(l.from):J.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new rr(o,t,Kr(o))}}function Kr(r,e=null,t=0){let i=null;return r.between(t,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new Ly(n,s,o.diagnostic),!1}),i}function Cy(r,e){let t=e.pos,i=e.end||t,n=r.state.facet(Yn).hideOn(r,t,i);if(n!=null)return n;let s=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(o=>o.is(v0))||r.changes.touchesRange(s.from,Math.max(s.to,i)))}function Dy(r,e){return r.field(Rt,!1)?e:e.concat(ie.appendConfig.of(zy))}const v0=ie.define(),ic=ie.define(),b0=ie.define(),Rt=et.define({create(){return new rr(J.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),i=null,n=r.panel;if(r.selected){let s=e.changes.mapPos(r.selected.from,1);i=Kr(t,r.selected.diagnostic,s)||Kr(t,null,s)}!t.size&&n&&e.state.facet(Yn).autoPanel&&(n=null),r=new rr(t,n,i)}for(let t of e.effects)if(t.is(v0)){let i=e.state.facet(Yn).autoPanel?t.value.length?Zn.open:null:r.panel;r=rr.init(t.value,i,e.state)}else t.is(ic)?r=new rr(r.diagnostics,t.value?Zn.open:null,r.selected):t.is(b0)&&(r=new rr(r.diagnostics,r.panel,t.value));return r},provide:r=>[jn.from(r,e=>e.panel),W.decorations.from(r,e=>e.diagnostics)]}),Vy=J.mark({class:"cm-lintRange cm-lintRange-active"});function Uy(r,e,t){let{diagnostics:i}=r.state.field(Rt),n=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:c})=>{e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0))&&(n.push(c.diagnostic),s=Math.min(a,s),o=Math.max(h,o))});let l=r.state.facet(Yn).tooltipFilter;return l&&(n=l(n,r.state)),n.length?{pos:s,end:o,above:r.state.doc.lineAt(s).to<o,create(){return{dom:My(r,n)}}}:null}function My(r,e){return xe("ul",{class:"cm-tooltip-lint"},e.map(t=>w0(r,t,!1)))}const Py=r=>{let e=r.state.field(Rt,!1);(!e||!e.panel)&&r.dispatch({effects:Dy(r.state,[ic.of(!0)])});let t=Gn(r,Zn.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Mu=r=>{let e=r.state.field(Rt,!1);return!e||!e.panel?!1:(r.dispatch({effects:ic.of(!1)}),!0)},_y=r=>{let e=r.state.field(Rt,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},By=[{key:"Mod-Shift-m",run:Py,preventDefault:!0},{key:"F8",run:_y}],Yn=G.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},hi(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function A0(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function w0(r,e,t){var i;let n=t?A0(e.actions):[];return xe("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},xe("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=Kr(r.state.field(Rt).diagnostics,e);g&&s.apply(r,g.from,g.to)},{name:h}=s,c=n[o]?h.indexOf(n[o]):-1,u=c<0?h:[h.slice(0,c),xe("u",h.slice(c,c+1)),h.slice(c+1)];return xe("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${n[o]})"`}.`},u)}),e.source&&xe("div",{class:"cm-diagnosticSource"},e.source))}class Fy extends Wi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return xe("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Pu{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=w0(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Zn{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)Mu(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=A0(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=Kr(this.view.state.field(Rt).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=xe("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=xe("div",{class:"cm-panel-lint"},this.list,xe("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Mu(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Rt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Rt),i=0,n=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,c;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){h=u;break}h<0?(c=new Pu(this.view,a.diagnostic),this.items.splice(i,0,c),n=!0):(c=this.items[h],h>i&&(this.items.splice(i,h-i),n=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Pu(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let a=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/a:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Rt),i=Kr(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:b0.of(i)})}static open(e){return new Zn(e)}}function Hy(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function $s(r){return Hy(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const qy=W.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:$s("#d11")},".cm-lintRange-warning":{backgroundImage:$s("orange")},".cm-lintRange-info":{backgroundImage:$s("#999")},".cm-lintRange-hint":{backgroundImage:$s("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),zy=[Rt,W.decorations.compute([Rt],r=>{let{selected:e,panel:t}=r.field(Rt);return!e||!t||e.from==e.to?J.none:J.set([Vy.range(e.from,e.to)])}),PT(Uy,{hideOn:Cy}),qy],Wy=[$T(),JT(),pT(),m2(),HO(),rT(),aT(),ge.allowMultipleSelections.of(!0),xO(),zO(jO,{fallback:!0}),ZO(),Ty(),y0(),AT(),kT(),OT(),NI(),Ph.of([...Ny,...SI,...qI,...v2,...PO,...N0,...By])];var _u={};class Ho{constructor(e,t,i,n,s,o,l,a,h,c=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Ho(e,[],t,i,i,0,[],0,n?new Bu(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(n);if(l&&(this.score+=l),i==0){this.pushState(s.getGoto(this.state,n,!0),this.reducePos),n<s.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),h=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[n])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,p=this.bufferBase+this.buffer.length-u;if(n<s.minRepeatTerm||e&131072){let g=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,h,g,p+4,!0)}if(e&262144)this.state=this.stack[a];else{let g=this.stack[a-3];this.state=s.getGoto(g,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,h)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i,n){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4);else{let s=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(s,1)||(this.reducePos=n)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}}apply(e,t,i,n){e&65536?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Ho(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Gy(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<8&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,s)=>{if(!t.includes(n))return t.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Bu(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Bu{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Gy{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class qo{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new qo(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new qo(this.stack,this.pos,this.index)}}function Qs(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}class so{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Fu=new so;class jy{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Fu,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Fu,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Br{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;$y(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Br.prototype.contextual=Br.prototype.fallback=Br.prototype.extend=!1;Br.prototype.fallback=Br.prototype.extend=!1;class Ky{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function $y(r,e,t,i,n,s){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&r[o];){let h=r[o+1];for(let g=o+3;g<h;g+=2)if((r[g+1]&l)>0){let S=r[g];if(a.allows(S)&&(e.token.value==-1||e.token.value==S||Qy(S,e.token.value,n,s))){e.acceptToken(S);break}}let c=e.next,u=0,p=r[o+2];if(e.next<0&&p>u&&r[h+p*3-3]==65535){o=r[h+p*3-1];continue e}for(;u<p;){let g=u+p>>1,S=h+g+(g<<1),T=r[S],I=r[S+1]||65536;if(c<T)p=g;else if(c>=I)u=g+1;else{o=r[S+2],e.advance();continue e}}break}}function Hu(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function Qy(r,e,t,i){let n=Hu(t,i,e);return n<0||Hu(t,i,r)<n}const bt=typeof process<"u"&&_u&&/\bparse\b/.test(_u.LOG);let Jl=null;function qu(r,e,t){let i=r.cursor(Ke.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class Xy{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qu(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof He){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(ae.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class Jy{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new so)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if(!(1<<h&o))continue;let c=s[h],u=this.tokens[h];if(!(i&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let p=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(i=u,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new so,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new so,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=pi(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(pi(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(pi(l,h+1),t,i,n))}return n}}class Yy{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new jy(t,n),this.tokens=new Jy(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[Ho.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new Xy(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&eN(n);if(o)return bt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw bt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return bt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=bt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(n);u;){let p=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(p>-1&&u.length&&(!h||(u.prop(ae.contextHash)||0)==c))return e.useNode(u,p),bt&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof He)||u.children.length==0||u.positions[0]>0)break;let g=u.children[0];if(g instanceof He&&u.positions[0]==0)u=g;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),bt&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let c=a[h++],u=a[h++],p=a[h++],g=h==a.length||!i,S=g?e:e.split(),T=this.tokens.mainToken;if(S.apply(c,u,T?T.start:S.pos,p),bt&&console.log(o+this.stackID(S)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(u)} @ ${n}${S==e?"":", split"})`),g)return!0;S.pos>n?t.push(S):i.push(S)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return zu(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],c=bt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),bt&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),p=c;for(let g=0;u.forceReduce()&&g<10&&(bt&&console.log(p+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));g++)bt&&(p=this.stackID(u)+" -> ");for(let g of l.recoverByInsert(a))bt&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),bt&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),zu(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),He.build({buffer:qo.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Jl||(Jl=new WeakMap)).get(e);return t||Jl.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function zu(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class Zy{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class zo extends om{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ae[a]);for(let h=1;h<l.length;){let c=l[h++];if(c>=0)s(c,a,l[h++]);else{let u=l[h+-c];for(let p=-c;p>0;p--)s(l[h++],a,u);h++}}}this.nodeSet=new Fh(t.map((l,a)=>Tt.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=im;let o=Qs(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Wu),this.states=Qs(e.states,Uint32Array),this.data=Qs(e.stateData),this.goto=Qs(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Br(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new Yy(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=pi(i,s+2)];else{if(i[s+1]==2)return pi(i,s+2);break}if(o==t||o==0)return pi(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let s=this.stateSlot(e,1);n==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=pi(this.data,s+2);else break;n=t(pi(this.data,s+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=pi(this.data,i+2);else break;if(!(this.data[i+2]&1)){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}configure(e){let t=Object.assign(Object.create(zo.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[n]=Wu(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new Zy(e,i,n)}static deserialize(e){return new zo(e)}}function pi(r,e){return r[e]|r[e+1]<<16}function eN(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Wu(r){if(r.external){let e=r.extend?1:0;return(t,i)=>r.external(t,i)<<1|e}return r.get}const tN=36,Gu=1,iN=2,Or=3,Yl=4,rN=5,nN=6,sN=7,oN=8,lN=9,aN=10,hN=11,cN=12,fN=13,uN=14,dN=15,pN=16,mN=17,ju=18,gN=19,x0=20,k0=21,Ku=22,SN=23,EN=24;function rh(r){return r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57}function TN(r){return r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70}function tr(r,e,t){for(let i=!1;;){if(r.next<0)return;if(r.next==e&&!i){r.advance();return}i=t&&!i&&r.next==92,r.advance()}}function ON(r,e){e:for(;;){if(r.next<0)return;if(r.next==36){r.advance();for(let t=0;t<e.length;t++){if(r.next!=e.charCodeAt(t))continue e;r.advance()}if(r.next==36){r.advance();return}}else r.advance()}}function IN(r,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(r.next<0)return;if(r.next==i&&r.peek(1)==39){r.advance(2);return}r.advance()}}function nh(r,e){for(;!(r.next!=95&&!rh(r.next));)e!=null&&(e+=String.fromCharCode(r.next)),r.advance();return e}function yN(r){if(r.next==39||r.next==34||r.next==96){let e=r.next;r.advance(),tr(r,e,!1)}else nh(r)}function $u(r,e){for(;r.next==48||r.next==49;)r.advance();e&&r.next==e&&r.advance()}function Qu(r,e){for(;;){if(r.next==46){if(e)break;e=!0}else if(r.next<48||r.next>57)break;r.advance()}if(r.next==69||r.next==101)for(r.advance(),(r.next==43||r.next==45)&&r.advance();r.next>=48&&r.next<=57;)r.advance()}function Xu(r){for(;!(r.next<0||r.next==10);)r.advance()}function er(r,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==r)return!0;return!1}const Zl=` 	\r
`;function R0(r,e,t){let i=Object.create(null);i.true=i.false=rN,i.null=i.unknown=nN;for(let n of r.split(" "))n&&(i[n]=x0);for(let n of e.split(" "))n&&(i[n]=k0);for(let n of(t||"").split(" "))n&&(i[n]=EN);return i}const NN="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",vN="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",sh={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:R0(vN,NN)};function bN(r,e,t,i){let n={};for(let s in sh)n[s]=(r.hasOwnProperty(s)?r:sh)[s];return e&&(n.words=R0(e,t||"",i)),n}function L0(r){return new Ky(e=>{var t;let{next:i}=e;if(e.advance(),er(i,Zl)){for(;er(e.next,Zl);)e.advance();e.acceptToken(tN)}else if(i==36&&r.doubleDollarQuotedStrings){let n=nh(e,"");e.next==36&&(e.advance(),ON(e,n),e.acceptToken(Or))}else if(i==39||i==34&&r.doubleQuotedStrings)tr(e,i,r.backslashEscapes),e.acceptToken(Or);else if(i==35&&r.hashComments||i==47&&e.next==47&&r.slashComments)Xu(e),e.acceptToken(Gu);else if(i==45&&e.next==45&&(!r.spaceAfterDashes||e.peek(1)==32))Xu(e),e.acceptToken(Gu);else if(i==47&&e.next==42){e.advance();for(let n=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(n--,e.advance(),!n)break}else s==47&&e.next==42&&(n++,e.advance())}e.acceptToken(iN)}else if((i==101||i==69)&&e.next==39)e.advance(),tr(e,39,!0),e.acceptToken(Or);else if((i==110||i==78)&&e.next==39&&r.charSetCasts)e.advance(),tr(e,39,r.backslashEscapes),e.acceptToken(Or);else if(i==95&&r.charSetCasts)for(let n=0;;n++){if(e.next==39&&n>1){e.advance(),tr(e,39,r.backslashEscapes),e.acceptToken(Or);break}if(!rh(e.next))break;e.advance()}else if(r.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!er(e.peek(1),Zl)){let n=e.peek(1);e.advance(2),IN(e,n),e.acceptToken(Or)}else if(i==40)e.acceptToken(sN);else if(i==41)e.acceptToken(oN);else if(i==123)e.acceptToken(lN);else if(i==125)e.acceptToken(aN);else if(i==91)e.acceptToken(hN);else if(i==93)e.acceptToken(cN);else if(i==59)e.acceptToken(fN);else if(r.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),$u(e),e.acceptToken(Ku);else if((i==98||i==66)&&(e.next==39||e.next==34)){const n=e.next;e.advance(),r.treatBitsAsBytes?(tr(e,n,r.backslashEscapes),e.acceptToken(SN)):($u(e,n),e.acceptToken(Ku))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let n=e.next==39;for(e.advance();TN(e.next);)e.advance();n&&e.next==39&&e.advance(),e.acceptToken(Yl)}else if(i==46&&e.next>=48&&e.next<=57)Qu(e,!0),e.acceptToken(Yl);else if(i==46)e.acceptToken(uN);else if(i>=48&&i<=57)Qu(e,!1),e.acceptToken(Yl);else if(er(i,r.operatorChars)){for(;er(e.next,r.operatorChars);)e.advance();e.acceptToken(dN)}else if(er(i,r.specialVar))e.next==i&&e.advance(),yN(e),e.acceptToken(mN);else if(er(i,r.identifierQuotes))tr(e,i,!1),e.acceptToken(gN);else if(i==58||i==44)e.acceptToken(pN);else if(rh(i)){let n=nh(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-n.length-1)==46?ju:(t=r.words[n.toLowerCase()])!==null&&t!==void 0?t:ju)}})}const C0=L0(sh),AN=zo.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,C0],topRules:{Script:[0,25]},tokenPrec:0});function oh(r){let e=r.cursor().moveTo(r.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function es(r,e){let t=r.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function Wo(r){return r&&(r.name=="Identifier"||r.name=="QuotedIdentifier")}function wN(r,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)Wo(i)&&t.push(es(r,i));return t}return[es(r,e)]}function Ju(r,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=oh(e);if(!Wo(i))return t;t.unshift(es(r,i)),e=oh(i)}}function xN(r,e){let t=$e(r).resolveInner(e,-1),i=RN(r.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?r.doc.sliceString(t.from,t.from+1):null,parents:Ju(r.doc,oh(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:Ju(r.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const kN=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function RN(r,e){let t;for(let n=e;!t;n=n.parent){if(!n)return null;n.name=="Statement"&&(t=n)}let i=null;for(let n=t.firstChild,s=!1,o=null;n;n=n.nextSibling){let l=n.name=="Keyword"?r.sliceString(n.from,n.to).toLowerCase():null,a=null;if(!s)s=l=="from";else if(l=="as"&&o&&Wo(n.nextSibling))a=es(r,n.nextSibling);else{if(l&&kN.has(l))break;o&&Wo(n)&&(a=es(r,n))}a&&(i||(i=Object.create(null)),i[a]=wN(r,o)),o=/Identifier$/.test(n.name)?n:null}return i}function LN(r,e){return r?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==r?t.label:r+t.label+r,apply:void 0})):e}const CN=/^\w*$/,DN=/^[`'"]?\w*[`'"]?$/;function Yu(r){return r.self&&typeof r.self.label=="string"}class rc{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(n=>n.label==e)&&this.list.push(Zu(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new rc(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?Zu(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):Yu(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],n=null,s=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),o=this;Yu(i)&&(n=i.self,i=i.children);for(let l=0;l<s.length;l++)n&&l==s.length-1&&o.addCompletion(n),o=o.child(s[l].replace(/\\\./g,"."));o.addNamespace(i)}}}function Zu(r,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(r)?{label:r,type:e}:{label:r,type:e,apply:t+r+t}}function VN(r,e,t,i,n,s){var o;let l=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',a=new rc(l,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),h=n?a.child(n):null;return a.addNamespace(r),e&&(h||a).addCompletions(e),t&&a.addCompletions(t),h&&a.addCompletions(h.list),i&&a.addCompletions((h||a).child(i).list),c=>{let{parents:u,from:p,quoted:g,empty:S,aliases:T}=xN(c.state,c.pos);if(S&&!c.explicit)return null;T&&u.length==1&&(u=T[u[0]]||u);let I=a;for(let v of u){for(;!I.children||!I.children[v];)if(I==a&&h)I=h;else if(I==h&&i)I=I.child(i);else return null;let R=I.maybeChild(v);if(!R)return null;I=R}let y=g&&c.state.sliceDoc(c.pos,c.pos+1)==g,A=I.list;return I==a&&T&&(A=A.concat(Object.keys(T).map(v=>({label:v,type:"constant"})))),{from:p,to:y?c.pos+1:void 0,options:LN(g,A),validFor:g?DN:CN}}}function UN(r){return r==k0?"type":r==x0?"keyword":"variable"}function MN(r,e,t){let i=Object.keys(r).map(n=>t(e?n.toUpperCase():n,UN(r[n])));return KI(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],u0(i))}let PN=AN.configure({props:[fm.add({Statement:AO()}),dm.add({Statement(r,e){return{from:Math.min(r.from+100,e.doc.lineAt(r.from).to),to:r.to}},BlockComment(r){return{from:r.from+2,to:r.to-2}}}),lm({Keyword:P.keyword,Type:P.typeName,Builtin:P.standard(P.name),Bits:P.number,Bytes:P.string,Bool:P.bool,Null:P.null,Number:P.number,String:P.string,Identifier:P.name,QuotedIdentifier:P.special(P.string),SpecialVar:P.special(P.name),LineComment:P.lineComment,BlockComment:P.blockComment,Operator:P.operator,"Semi Punctuation":P.punctuation,"( )":P.paren,"{ }":P.brace,"[ ]":P.squareBracket})]});class nc{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=bN(e,e.keywords,e.types,e.builtin),i=wo.define({name:"sql",parser:PN.configure({tokenizers:[{from:C0,to:L0(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new nc(t,i,e)}}function _N(r,e){return{label:r,type:e,boost:-1}}function BN(r,e=!1,t){return MN(r.dialect.words,e,t||_N)}function FN(r){return r.schema?VN(r.schema,r.tables,r.schemas,r.defaultTable,r.defaultSchema,r.dialect||sc):()=>null}function HN(r){return r.schema?(r.dialect||sc).language.data.of({autocomplete:FN(r)}):[]}function qN(r={}){let e=r.dialect||sc;return new SO(e.language,[HN(r),e.language.data.of({autocomplete:BN(e,r.upperCaseKeywords,r.keywordCompletion)})])}const sc=nc.define({});var zN=De('<div class="editor-container svelte-ohskb8"><div class="toolbar svelte-ohskb8"><button class="run-btn svelte-ohskb8"><i class="fas fa-play svelte-ohskb8"></i> Run</button></div> <div class="editor svelte-ohskb8"></div></div>');function WN(r,e){Yr(e,!0);let t,i;const n=h=>{let c=h.matchBefore(/\w*/);if(!c)return null;let u=[];const p=["SELECT","FROM","WHERE","AND","OR","INSERT","UPDATE","DELETE","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","GROUP BY","ORDER BY","HAVING","LIMIT","OFFSET","AS","ON","IN","BETWEEN","LIKE"];return u.push(...p.map(S=>({label:S,type:"keyword",info:"SQL Keyword"}))),xd().tables.forEach(S=>{u.push({label:S.name,type:"class",info:"Table"}),S.columns.forEach(T=>{u.push({label:T.name,type:"property",info:`${S.name}.${T.name} (${T.type})`})})}),{from:c.from,options:u}};Nh(()=>{i=new W({doc:e.query,extensions:[Wy,qN(),y0({override:[n]}),W.updateListener.of(h=>{if(h.docChanged){const c=h.state.doc.toString();c!==e.query&&e.onQueryChange(c)}}),W.theme({"&":{height:"100%"},".cm-scroller":{overflow:"auto"},".cm-gutters":{backgroundColor:"#1e1e1e",color:"#858585",border:"none"},".cm-activeLineGutter":{backgroundColor:"#1e1e1e",color:"#eeeeee"},".cm-lineNumbers":{color:"#858585"},".cm-lineNumbers .cm-activeLineNumber":{backgroundColor:"#1e1e1e",color:"#c6c6c6"},".cm-content":{color:"#d4d4d4",padding:"0"},".cm-line":{padding:"0 4px"},".cm-keyword":{color:"#569cd6"},".cm-operator":{color:"#d4d4d4"},".cm-number":{color:"#b5cea8"},".cm-string":{color:"#ce9178"},".cm-comment":{color:"#6a9955"},".cm-function":{color:"#dcdcaa"},".cm-variable":{color:"#9cdcfe"},".cm-punctuation":{color:"#d4d4d4"},".cm-cursor":{borderLeftColor:"#fff",borderLeftWidth:"2px"},".cm-activeLine":{backgroundColor:"#1e1e1e"},"&.cm-focused .cm-selectionBackground, ::selection":{backgroundColor:"#5b5b5b"},".cm-atom":{color:"#569cd6"},".cm-builtin":{color:"#dcdcaa"},".cm-tableName":{color:"#4ec9b0"},".cm-columnName":{color:"#9cdcfe"},".cm-operator.cm-compareOperator":{color:"#d4d4d4"},".cm-operator.cm-logicOperator":{color:"#569cd6"},".cm-star":{color:"#d4d4d4"},".cm-tooltip":{backgroundColor:"#252526",border:"1px solid #454545",borderRadius:"3px"},".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{maxHeight:"300px",fontFamily:"'Segoe UI', system-ui, sans-serif",fontSize:"13px"},"& > ul > li":{padding:"4px 8px"},"& > ul > li[aria-selected]":{backgroundColor:"#04395e",color:"#ffffff"}},".cm-completionLabel":{color:"#d4d4d4"},".cm-completionDetail":{color:"#9cdcfe",marginLeft:"8px",fontSize:"12px"},".cm-completionMatchedText":{textDecoration:"none",color:"#18a3ff"},".cm-completionIcon":{marginRight:"8px",'&[class*="keyword"]':{color:"#569cd6"},'&[class*="class"]':{color:"#4ec9b0"},'&[class*="property"]':{color:"#9cdcfe"},'&[class*="method"]':{color:"#dcdcaa"},'&[class*="function"]':{color:"#dcdcaa"}}})],parent:t})}),L1(()=>{i&&i.destroy()}),co(()=>{i&&i.state.doc.toString()!==e.query&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:e.query}})});var s=zN(),o=te(s),l=te(o),a=Le(o,2);k1(a,h=>t=h,()=>t),Vt("click",l,function(...h){var c;(c=e.onRun)==null||c.apply(this,h)}),Ee(r,s),Zr()}var GN=De('<div class="error-message svelte-tu01r1"><div class="error-header svelte-tu01r1"><span class="error-icon"></span> <span>SQL Error<!></span></div> <pre class="error-details svelte-tu01r1"> </pre></div>'),jN=De('<div class="modification-message svelte-tu01r1"><i class="fas fa-check-circle success-icon svelte-tu01r1"></i> Query executed successfully</div>'),KN=De('<th class="svelte-tu01r1"><div class="th-content svelte-tu01r1"><span class="th-text svelte-tu01r1"> </span> <div class="resize-handle svelte-tu01r1"></div></div></th>'),$N=De('<td class="svelte-tu01r1"> </td>'),QN=De('<tr class="svelte-tu01r1"></tr>'),XN=De('<div class="table-wrapper svelte-tu01r1"><table class="svelte-tu01r1"><thead class="svelte-tu01r1"><tr class="svelte-tu01r1"></tr></thead><tbody></tbody></table></div>'),JN=De('<div class="results-container svelte-tu01r1"><!></div>');function YN(r,e){Yr(e,!1);let t=pt(e,"results",24,()=>[]),i=pt(e,"columns",24,()=>[]),n=pt(e,"queryExecuted",8,!1),s=pt(e,"error",8,null),o=pt(e,"errorLine",8,null);pt(e,"affectedRows",8,void 0);let l=pt(e,"isModificationQuery",8,!1),a=at({}),h=!1,c=at(null),u,p,g=at(!1);const S=100,T=800,I=32,y=8,A={number:.7,date:1.2,string:1.5};function v(U){return typeof U=="number"?"number":U instanceof Date?"date":"string"}function R(){if(!i().length||!t().length||V(g))return;const U=document.querySelector(".table-wrapper");if(!U)return;const _=Math.max(800,U.clientWidth-I),D=i().reduce(($,K)=>{const he=t().map(fe=>fe[K]),re=he.map(fe=>((fe==null?void 0:fe.toString())||"").length),Ie=Math.max(K.length,...re),ce=re.reduce((fe,Se)=>fe+Se,0)/re.length,ue=v(he[0]);return $[K]={maxLength:Ie,avgLength:ce,type:ue,weight:A[ue]},$},{}),z=Object.values(D).reduce(($,K)=>$+K.avgLength*K.weight,0);i().forEach($=>{if(V(a)[$])return;const K=D[$],he=K.avgLength*K.weight/z;let re=Math.floor(_*he);K.type==="number"?re=Math.min(re,K.maxLength*y+I):K.maxLength>K.avgLength*2&&(re=Math.max(re,K.avgLength*y*1.5)),Dn(a,V(a)[$]=Math.max(S,Math.min(T,re)))}),se(a,{...V(a)}),se(g,!0)}function k(U,_){h=!0,se(c,_),u=U.pageX,p=V(a)[_]||S,window.addEventListener("mousemove",w),window.addEventListener("mouseup",x),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}function w(U){if(!h||!V(c))return;const _=U.pageX-u,D=Math.max(S,Math.min(T,p+_));Dn(a,V(a)[V(c)]=D),se(a,{...V(a)})}function x(){h=!1,se(c,null),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}t1(()=>(En(n()),En(s()),En(l()),En(t())),()=>{n()&&!s()&&!l()&&t().length>0&&(se(g,!1),setTimeout(R,0))}),i1(),Xo();var q=JN(),H=te(q);Mt(H,n,U=>{var _=mo(),D=Vn(_);Mt(D,s,z=>{var $=GN(),K=te($),he=Le(te(K),2),re=Le(te(he));Mt(re,o,ue=>{var fe=S1();nt(()=>kt(fe,`on line ${o()??""}`)),Ee(ue,fe)});var Ie=Le(K,2),ce=te(Ie);nt(()=>kt(ce,s())),Ee(z,$)},z=>{var $=mo(),K=Vn($);Mt(K,l,he=>{var re=jN();Ee(he,re)},he=>{var re=XN(),Ie=te(re),ce=te(Ie),ue=te(ce);Cr(ue,5,i,Lr,(Se,pe)=>{var Ue=KN(),ze=te(Ue),Me=te(ze),tt=te(Me),fi=Le(Me,2);nt(()=>{Pn(Ue,"style",`width: ${(V(a)[V(pe)]||S)??""}px`),kt(tt,V(pe)),Fr(fi,"resizing",V(c)===V(pe))}),Vt("mousedown",fi,vd(ji=>k(ji,V(pe)))),Ee(Se,Ue)});var fe=Le(ce);Cr(fe,5,t,Lr,(Se,pe)=>{var Ue=QN();Cr(Ue,5,i,Lr,(ze,Me)=>{var tt=$N(),fi=te(tt);nt(()=>{Pn(tt,"style",`width: ${(V(a)[V(Me)]||S)??""}px`),kt(fi,V(pe)[V(Me)])}),Ee(ze,tt)}),Ee(Se,Ue)}),Ee(he,re)},!0),Ee(z,$)}),Ee(U,_)}),nt(()=>Fr(q,"visible",n())),Ee(r,q),Zr()}var ZN=De('<div class="progress svelte-txm7b2"> </div>'),ev=De('<div class="loader svelte-txm7b2"><div class="spinner svelte-txm7b2"></div> <div class="text svelte-txm7b2"> </div> <!></div>');function tv(r,e){let t=pt(e,"message",8,"Loading..."),i=pt(e,"progress",8,null);var n=ev(),s=Le(te(n),2),o=te(s),l=Le(s,2);Mt(l,i,a=>{var h=ZN(),c=te(h);nt(()=>kt(c,i())),Ee(a,h)}),nt(()=>kt(o,t())),Ee(r,n)}var iv=De('<div class="loading-container svelte-5n605g"><!></div>'),rv=De('<div class="error-container svelte-5n605g"><h2 class="svelte-5n605g">Failed to initialize database</h2> <p> </p></div>'),nv=De('<div class="tab-content svelte-5n605g"><div class="editor-section svelte-5n605g"><!></div> <div class="resize-handle svelte-5n605g"></div> <div class="results-section svelte-5n605g"><!></div> <div class="status-bar svelte-5n605g"><span>Ready</span> <span class="status-message svelte-5n605g"> </span></div></div>'),sv=De('<div class="empty-state svelte-5n605g"><button class="new-query-btn svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> New Query</button></div>'),ov=De('<div class="app svelte-5n605g"><!> <div class="main svelte-5n605g"><div class="tabs svelte-5n605g"><div class="tabs-container svelte-5n605g"><!> <button class="add-tab svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> <span class="tooltip svelte-5n605g">New Query</span></button></div></div> <!></div></div>');function lv(r,e){Yr(e,!1);let t=1,i=at(-1),n=at([]),s=at(!1),o=at("60%"),l=at(!0),a=at(null),h=at(null);Nh(async()=>{try{const x=setInterval(()=>{const q=W1();if(q.sqlJsLoaded&&se(h,"Initializing database..."),q.error){se(a,q.error),se(l,!1);return}},100);await wd(),clearInterval(x),se(l,!1)}catch(w){se(a,w.message),se(l,!1)}});function c(w=""){se(n,[...V(n),{id:(t+=1)-1,query:w,results:[],columns:[],queryExecuted:!1,error:null,isModificationQuery:!1}]),se(i,V(n).length-1)}function u(w){se(n,V(n).filter((x,q)=>q!==w)),V(i)>=V(n).length&&se(i,Math.max(-1,V(n).length-1))}function p(w){se(i,w)}function g(w){V(i)>=0&&(Dn(n,V(n)[V(i)].query=w),se(n,[...V(n)]))}function S(){if(V(i)>=0){const{results:w,columns:x,error:q,isModificationQuery:H,affectedRows:U}=j1(V(n)[V(i)].query);Dn(n,V(n)[V(i)]={...V(n)[V(i)],results:w,columns:x,queryExecuted:!0,error:q,affectedRows:U,isModificationQuery:H}),se(n,[...V(n)])}}function T(w){const x=`SELECT * FROM ${w.detail.tableName}`;c(x),S()}function I(w){return w.queryExecuted?w.error?"Error in SQL statement":w.isModificationQuery?`${w.affectedRows} row${w.affectedRows===1?"":"s"} affected`:`Showing [${w.results.length}] rows`:"Write your SQL query and click Run"}function y(w){se(s,!0),w.clientY,window.addEventListener("mousemove",A),window.addEventListener("mouseup",v),document.body.style.cursor="row-resize",document.body.style.userSelect="none"}function A(w){if(!V(s))return;const x=document.querySelector(".tab-content");if(!x)return;const q=x.getBoundingClientRect(),H=(w.clientY-q.top)/q.height*100;se(o,Math.max(20,Math.min(80,H))+"%")}function v(){se(s,!1),window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",v),document.body.style.cursor="",document.body.style.userSelect=""}Xo();var R=mo(),k=Vn(R);Mt(k,()=>V(l),w=>{var x=iv(),q=te(x);tv(q,{message:"Loading application...",get progress(){return V(h)}}),Ee(w,x)},w=>{var x=mo(),q=Vn(x);Mt(q,()=>V(a),H=>{var U=rv(),_=Le(te(U),2),D=te(_);nt(()=>kt(D,V(a))),Ee(H,U)},H=>{var U=ov(),_=te(U);iS(_,{$$events:{showTableData:T}});var D=Le(_,2),z=te(D),$=te(z),K=te($);Cr(K,1,()=>V(n),Lr,(Ie,ce,ue)=>{var fe=ph(()=>ue===V(i));nS(Ie,{get query(){return V(ce).query},index:ue,get active(){return V(fe)},onClose:()=>u(ue),onClick:()=>p(ue)})});var he=Le(K,2),re=Le(z,2);Mt(re,()=>V(i)>=0,Ie=>{var ce=nv(),ue=te(ce),fe=te(ue);WN(fe,{get query(){return V(n)[V(i)].query},onQueryChange:g,onRun:S,get queryExecuted(){return V(n)[V(i)].queryExecuted}});var Se=Le(ue,2),pe=Le(Se,2),Ue=te(pe);YN(Ue,{get results(){return V(n)[V(i)].results},get columns(){return V(n)[V(i)].columns},get queryExecuted(){return V(n)[V(i)].queryExecuted},get error(){return V(n)[V(i)].error},get affectedRows(){return V(n)[V(i)].affectedRows},get isModificationQuery(){return V(n)[V(i)].isModificationQuery}});var ze=Le(pe,2),Me=Le(te(ze),2),tt=te(Me);nt(()=>kt(tt,I(V(n)[V(i)]))),nt(()=>{Pn(ue,"style",`height: ${V(o)??""}`),Fr(Se,"resizing",V(s))}),Vt("mousedown",Se,y),Ee(Ie,ce)},Ie=>{var ce=sv(),ue=te(ce);Vt("click",ue,()=>c()),Ee(Ie,ce)}),Vt("click",he,()=>c()),Ee(H,U)},!0),Ee(w,x)}),Ee(r,R),Zr()}const ed=document.querySelector(".initial-loader");ed&&ed.remove();O1(lv,{target:document.getElementById("app")});
