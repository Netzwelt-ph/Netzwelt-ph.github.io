(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const xg=!1;var rl=Array.isArray,Eh=Array.from,kg=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,cd=Object.getOwnPropertyDescriptors,Rg=Object.prototype,Lg=Array.prototype,Oo=Object.getPrototypeOf;function Cg(r){return r()}function ca(r){for(var e=0;e<r.length;e++)r[e]()}const Ii=2,fd=4,cs=8,Oh=16,Zt=32,fs=64,Or=128,yo=256,gt=512,Hi=1024,on=2048,Oi=4096,ln=8192,Dg=16384,yh=32768,Vg=65536,Ug=1<<18,ud=1<<19,qr=Symbol("$state");function dd(r){return r===this.v}function Mg(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Ih(r){return!Mg(r,this.v)}function Pg(r){throw new Error("effect_in_teardown")}function _g(){throw new Error("effect_in_unowned_derived")}function Bg(r){throw new Error("effect_orphan")}function Fg(){throw new Error("effect_update_depth_exceeded")}function Hg(r){throw new Error("props_invalid_value")}function qg(){throw new Error("state_descriptors_fixed")}function zg(){throw new Error("state_prototype_fixed")}function Wg(){throw new Error("state_unsafe_local_read")}function Gg(){throw new Error("state_unsafe_mutation")}function Pt(r){return{f:0,v:r,reactions:null,equals:dd,version:0}}function vh(r,e=!1){var i;const t=Pt(r);return e||(t.equals=Ih),Ce!==null&&Ce.l!==null&&((i=Ce.l).s??(i.s=[])).push(t),t}function Qe(r,e=!1){return Kg(vh(r,e))}function Kg(r){return we!==null&&we.f&Ii&&(fi===null?u1([r]):fi.push(r)),r}function Pi(r,e){return ie(r,zi(()=>N(r))),e}function ie(r,e){return we!==null&&Vh()&&we.f&(Ii|Oh)&&(fi===null||!fi.includes(r))&&Gg(),fa(r,e)}function fa(r,e){return r.equals(e)||(r.v=e,r.version=Rd(),pd(r,Hi),Vh()&&Te!==null&&Te.f&gt&&!(Te.f&Zt)&&(st!==null&&st.includes(r)?(ei(Te,Hi),ll(Te)):_i===null?d1([r]):_i.push(r))),e}function pd(r,e){var t=r.reactions;if(t!==null)for(var i=Vh(),n=t.length,s=0;s<n;s++){var o=t[s],l=o.f;l&Hi||!i&&o===Te||(ei(o,e),l&(gt|Or)&&(l&Ii?pd(o,on):ll(o)))}}const Nh=1,bh=2,md=4,jg=8,$g=16,Qg=1,Xg=2,Jg=4,Yg=8,Zg=16,e1=1,t1=2,kt=Symbol();let gd=!1;function Vr(r,e=null,t){if(typeof r!="object"||r===null||qr in r)return r;const i=Oo(r);if(i!==Rg&&i!==Lg)return r;var n=new Map,s=rl(r),o=Pt(0);s&&n.set("length",Pt(r.length));var l;return new Proxy(r,{defineProperty(a,h,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&qg();var u=n.get(h);return u===void 0?(u=Pt(c.value),n.set(h,u)):ie(u,Vr(c.value,l)),!0},deleteProperty(a,h){var c=n.get(h);if(c===void 0)h in a&&n.set(h,Pt(kt));else{if(s&&typeof h=="string"){var u=n.get("length"),p=Number(h);Number.isInteger(p)&&p<u.v&&ie(u,p)}ie(c,kt),Xc(o)}return!0},get(a,h,c){var S;if(h===qr)return r;var u=n.get(h),p=h in a;if(u===void 0&&(!p||(S=Hr(a,h))!=null&&S.writable)&&(u=Pt(Vr(p?a[h]:kt,l)),n.set(h,u)),u!==void 0){var g=N(u);return g===kt?void 0:g}return Reflect.get(a,h,c)},getOwnPropertyDescriptor(a,h){var c=Reflect.getOwnPropertyDescriptor(a,h);if(c&&"value"in c){var u=n.get(h);u&&(c.value=N(u))}else if(c===void 0){var p=n.get(h),g=p==null?void 0:p.v;if(p!==void 0&&g!==kt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(a,h){var g;if(h===qr)return!0;var c=n.get(h),u=c!==void 0&&c.v!==kt||Reflect.has(a,h);if(c!==void 0||Te!==null&&(!u||(g=Hr(a,h))!=null&&g.writable)){c===void 0&&(c=Pt(u?Vr(a[h],l):kt),n.set(h,c));var p=N(c);if(p===kt)return!1}return u},set(a,h,c,u){var A;var p=n.get(h),g=h in a;if(s&&h==="length")for(var S=c;S<p.v;S+=1){var E=n.get(S+"");E!==void 0?ie(E,kt):S in a&&(E=Pt(kt),n.set(S+"",E))}p===void 0?(!g||(A=Hr(a,h))!=null&&A.writable)&&(p=Pt(void 0),ie(p,Vr(c,l)),n.set(h,p)):(g=p.v!==kt,ie(p,Vr(c,l)));var y=Reflect.getOwnPropertyDescriptor(a,h);if(y!=null&&y.set&&y.set.call(u,c),!g){if(s&&typeof h=="string"){var I=n.get("length"),w=Number(h);Number.isInteger(w)&&w>=I.v&&ie(I,w+1)}Xc(o)}return!0},ownKeys(a){N(o);var h=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==kt});for(var[c,u]of n)u.v!==kt&&!(c in a)&&h.push(c);return h},setPrototypeOf(){zg()}})}function Xc(r,e=1){ie(r,r.v+e)}var ua,Sd,Td;function i1(){if(ua===void 0){ua=window;var r=Element.prototype,e=Node.prototype;Sd=Hr(e,"firstChild").get,Td=Hr(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function nl(r=""){return document.createTextNode(r)}function Io(r){return Sd.call(r)}function sl(r){return Td.call(r)}function oe(r,e){return Io(r)}function fr(r,e){{var t=Io(r);return t instanceof Comment&&t.data===""?sl(t):t}}function ke(r,e=1,t=!1){let i=r;for(;e--;)i=sl(i);return i}function r1(r){r.textContent=""}function vo(r){var e=Ii|Hi;Te===null?e|=Or:Te.f|=ud;const t={children:null,ctx:Ce,deps:null,equals:dd,f:e,fn:r,reactions:null,v:null,version:0,parent:Te};if(we!==null&&we.f&Ii){var i=we;(i.children??(i.children=[])).push(t)}return t}function Ah(r){const e=vo(r);return e.equals=Ih,e}function Ed(r){var e=r.children;if(e!==null){r.children=null;for(var t=0;t<e.length;t+=1){var i=e[t];i.f&Ii?wh(i):yr(i)}}}function Od(r){var e,t=Te;di(r.parent);try{Ed(r),e=Ld(r)}finally{di(t)}return e}function yd(r){var e=Od(r),t=(Pr||r.f&Or)&&r.deps!==null?on:gt;ei(r,t),r.equals(e)||(r.v=e,r.version=Rd())}function wh(r){Ed(r),Gn(r,0),ei(r,ln),r.v=r.children=r.deps=r.ctx=r.reactions=null}function Id(r){Te===null&&we===null&&Bg(),we!==null&&we.f&Or&&_g(),Dh&&Pg()}function n1(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function an(r,e,t,i=!0){var n=(r&fs)!==0,s=Te,o={ctx:Ce,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|Hi,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(t){var l=zr;try{Jc(!0),us(o),o.f|=Dg}catch(c){throw yr(o),c}finally{Jc(l)}}else e!==null&&ll(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&ud)===0;if(!a&&!n&&i&&(s!==null&&n1(o,s),we!==null&&we.f&Ii)){var h=we;(h.children??(h.children=[])).push(o)}return o}function s1(r){const e=an(cs,null,!1);return ei(e,gt),e.teardown=r,e}function No(r){Id();var e=Te!==null&&(Te.f&Zt)!==0&&Ce!==null&&!Ce.m;if(e){var t=Ce;(t.e??(t.e=[])).push({fn:r,effect:Te,reaction:we})}else{var i=xh(r);return i}}function o1(r){return Id(),ol(r)}function l1(r){const e=an(fs,r,!0);return()=>{yr(e)}}function xh(r){return an(fd,r,!1)}function a1(r,e){var t=Ce,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=ol(()=>{r(),!i.ran&&(i.ran=!0,ie(t.l.r2,!0),zi(e))})}function h1(){var r=Ce;ol(()=>{if(N(r.l.r2)){for(var e of r.l.r1){var t=e.effect;t.f&gt&&ei(t,on),hn(t)&&us(t),e.ran=!1}r.l.r2.v=!1}})}function ol(r){return an(cs,r,!0)}function Xe(r){return kh(r)}function kh(r,e=0){return an(cs|Oh|e,r,!0)}function Wn(r,e=!0){return an(cs|Zt,r,!0,e)}function vd(r){var e=r.teardown;if(e!==null){const t=Dh,i=we;Yc(!0),qi(null);try{e.call(null)}finally{Yc(t),qi(i)}}}function Nd(r){var e=r.deriveds;if(e!==null){r.deriveds=null;for(var t=0;t<e.length;t+=1)wh(e[t])}}function bd(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var i=t.next;yr(t,e),t=i}}function c1(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Zt||yr(e),e=t}}function yr(r,e=!0){var t=!1;if((e||r.f&Ug)&&r.nodes_start!==null){for(var i=r.nodes_start,n=r.nodes_end;i!==null;){var s=i===n?null:sl(i);i.remove(),i=s}t=!0}Nd(r),bd(r,e&&!t),Gn(r,0),ei(r,ln);var o=r.transitions;if(o!==null)for(const a of o)a.stop();vd(r);var l=r.parent;l!==null&&l.first!==null&&Ad(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.parent=r.fn=r.nodes_start=r.nodes_end=null}function Ad(r){var e=r.parent,t=r.prev,i=r.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===r&&(e.first=i),e.last===r&&(e.last=t))}function da(r,e){var t=[];Rh(r,t,!0),wd(t,()=>{yr(r),e&&e()})}function wd(r,e){var t=r.length;if(t>0){var i=()=>--t||e();for(var n of r)n.out(i)}else e()}function Rh(r,e,t){if(!(r.f&Oi)){if(r.f^=Oi,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var i=r.first;i!==null;){var n=i.next,s=(i.f&yh)!==0||(i.f&Zt)!==0;Rh(i,e,s?t:!1),i=n}}}function bo(r){xd(r,!0)}function xd(r,e){if(r.f&Oi){r.f^=Oi,hn(r)&&us(r);for(var t=r.first;t!==null;){var i=t.next,n=(t.f&yh)!==0||(t.f&Zt)!==0;xd(t,n?e:!1),t=i}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let pa=!1,ma=[];function f1(){pa=!1;const r=ma.slice();ma=[],ca(r)}function Lh(r){pa||(pa=!0,queueMicrotask(f1)),ma.push(r)}function Ch(r){throw new Error("lifecycle_outside_component")}let Ao=!1,zr=!1,Dh=!1;function Jc(r){zr=r}function Yc(r){Dh=r}let ga=[],_n=0;let we=null;function qi(r){we=r}let Te=null;function di(r){Te=r}let fi=null;function u1(r){fi=r}let st=null,Ct=0,_i=null;function d1(r){_i=r}let kd=0,Pr=!1,Ce=null;function Rd(){return++kd}function Vh(){return Ce!==null&&Ce.l===null}function hn(r){var o,l;var e=r.f;if(e&Hi)return!0;if(e&on){var t=r.deps,i=(e&Or)!==0;if(t!==null){var n;if(e&yo){for(n=0;n<t.length;n++)((o=t[n]).reactions??(o.reactions=[])).push(r);r.f^=yo}for(n=0;n<t.length;n++){var s=t[n];if(hn(s)&&yd(s),i&&Te!==null&&!Pr&&!((l=s==null?void 0:s.reactions)!=null&&l.includes(r))&&(s.reactions??(s.reactions=[])).push(r),s.version>r.version)return!0}}i||ei(r,gt)}return!1}function p1(r,e,t){throw r}function Ld(r){var p;var e=st,t=Ct,i=_i,n=we,s=Pr,o=fi,l=Ce,a=r.f;st=null,Ct=0,_i=null,we=a&(Zt|fs)?null:r,Pr=!zr&&(a&Or)!==0,fi=null,Ce=r.ctx;try{var h=(0,r.fn)(),c=r.deps;if(st!==null){var u;if(Gn(r,Ct),c!==null&&Ct>0)for(c.length=Ct+st.length,u=0;u<st.length;u++)c[Ct+u]=st[u];else r.deps=c=st;if(!Pr)for(u=Ct;u<c.length;u++)((p=c[u]).reactions??(p.reactions=[])).push(r)}else c!==null&&Ct<c.length&&(Gn(r,Ct),c.length=Ct);return h}finally{st=e,Ct=t,_i=i,we=n,Pr=s,fi=o,Ce=l}}function m1(r,e){let t=e.reactions;if(t!==null){var i=t.indexOf(r);if(i!==-1){var n=t.length-1;n===0?t=e.reactions=null:(t[i]=t[n],t.pop())}}t===null&&e.f&Ii&&(st===null||!st.includes(e))&&(ei(e,on),e.f&(Or|yo)||(e.f^=yo),Gn(e,0))}function Gn(r,e){var t=r.deps;if(t!==null)for(var i=e;i<t.length;i++)m1(r,t[i])}function us(r){var e=r.f;if(!(e&ln)){ei(r,gt);var t=Te;Te=r;try{Nd(r),e&Oh?c1(r):bd(r),vd(r);var i=Ld(r);r.teardown=typeof i=="function"?i:null,r.version=kd}catch(n){p1(n)}finally{Te=t}}}function g1(){_n>1e3&&(_n=0,Fg()),_n++}function S1(r){var e=r.length;if(e!==0){g1();var t=zr;zr=!0;try{for(var i=0;i<e;i++){var n=r[i];n.f&gt||(n.f^=gt);var s=[];Cd(n,s),T1(s)}}finally{zr=t}}}function T1(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var i=r[t];!(i.f&(ln|Oi))&&hn(i)&&(us(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Ad(i):i.fn=null))}}function E1(){if(Ao=!1,_n>1001)return;const r=ga;ga=[],S1(r),Ao||(_n=0)}function ll(r){Ao||(Ao=!0,queueMicrotask(E1));for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(fs|Zt)){if(!(t&gt))return;e.f^=gt}}ga.push(e)}function Cd(r,e){var t=r.first,i=[];e:for(;t!==null;){var n=t.f,s=(n&Zt)!==0,o=s&&(n&gt)!==0;if(!o&&!(n&Oi))if(n&cs){s?t.f^=gt:hn(t)&&us(t);var l=t.first;if(l!==null){t=l;continue}}else n&fd&&i.push(t);var a=t.next;if(a===null){let u=t.parent;for(;u!==null;){if(r===u)break e;var h=u.next;if(h!==null){t=h;continue e}u=u.parent}}t=a}for(var c=0;c<i.length;c++)l=i[c],e.push(l),Cd(l,e)}function N(r){var l;var e=r.f,t=(e&Ii)!==0;if(t&&e&ln){var i=Od(r);return wh(r),i}if(we!==null){fi!==null&&fi.includes(r)&&Wg();var n=we.deps;st===null&&n!==null&&n[Ct]===r?Ct++:st===null?st=[r]:st.push(r),_i!==null&&Te!==null&&Te.f&gt&&!(Te.f&Zt)&&_i.includes(r)&&(ei(Te,Hi),ll(Te))}else if(t&&r.deps===null){var s=r,o=s.parent;o!==null&&!((l=o.deriveds)!=null&&l.includes(s))&&(o.deriveds??(o.deriveds=[])).push(s)}return t&&(s=r,hn(s)&&yd(s)),r.v}function zi(r){const e=we;try{return we=null,r()}finally{we=e}}const O1=~(Hi|on|gt);function ei(r,e){r.f=r.f&O1|e}function cn(r,e=!1,t){Ce={p:Ce,c:null,e:null,m:!1,s:r,x:null,l:null},e||(Ce.l={s:null,u:null,r1:[],r2:Pt(!1)})}function fn(r){const e=Ce;if(e!==null){const o=e.e;if(o!==null){var t=Te,i=we;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];di(s.effect),qi(s.reaction),xh(s.fn)}}finally{di(t),qi(i)}}Ce=e.p,e.m=!0}return{}}function Rn(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(qr in r)Sa(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&qr in t&&Sa(t)}}}function Sa(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let i in r)try{Sa(r[i],e)}catch{}const t=Oo(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=cd(t);for(let n in i){const s=i[n].get;if(s)try{s.call(r)}catch{}}}}}const y1=new Set,Zc=new Set;function I1(r,e,t,i){function n(s){if(i.capture||Ln.call(e,s),!s.cancelBubble){var o=we,l=Te;qi(null),di(null);try{return t.call(this,s)}finally{qi(o),di(l)}}}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Lh(()=>{e.addEventListener(r,n,i)}):e.addEventListener(r,n,i),n}function Ge(r,e,t,i,n){var s={capture:i,passive:n},o=I1(r,e,t,s);(e===document.body||e===window||e===document)&&s1(()=>{e.removeEventListener(r,o,s)})}function Ln(r){var w;var e=this,t=e.ownerDocument,i=r.type,n=((w=r.composedPath)==null?void 0:w.call(r))||[],s=n[0]||r.target,o=0,l=r.__root;if(l){var a=n.indexOf(l);if(a!==-1&&(e===document||e===window)){r.__root=e;return}var h=n.indexOf(e);if(h===-1)return;a<=h&&(o=a)}if(s=n[o]||r.target,s!==e){kg(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=we,u=Te;qi(null),di(null);try{for(var p,g=[];s!==null;){var S=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+i];if(E!==void 0&&!s.disabled)if(rl(E)){var[y,...I]=E;y.apply(s,[r,...I])}else E.call(s,r)}catch(A){p?g.push(A):p=A}if(r.cancelBubble||S===e||S===null)break;s=S}if(p){for(let A of g)queueMicrotask(()=>{throw A});throw p}}finally{r.__root=e,delete r.currentTarget,qi(c),di(u)}}}function v1(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function wo(r,e){var t=Te;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Ae(r,e){var t=(e&e1)!==0,i=(e&t1)!==0,n,s=!r.startsWith("<!>");return()=>{n===void 0&&(n=v1(s?r:"<!>"+r),t||(n=Io(n)));var o=i?document.importNode(n,!0):n.cloneNode(!0);if(t){var l=Io(o),a=o.lastChild;wo(l,a)}else wo(o,o);return o}}function N1(r=""){{var e=nl(r+"");return wo(e,e),e}}function Kn(){var r=document.createDocumentFragment(),e=document.createComment(""),t=nl();return r.append(e,t),wo(e,t),r}function ge(r,e){r!==null&&r.before(e)}const b1=["touchstart","touchmove"];function A1(r){return b1.includes(r)}function vt(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function w1(r,e){return x1(r,e)}const Lr=new Map;function x1(r,{target:e,anchor:t,props:i={},events:n,context:s,intro:o=!0}){i1();var l=new Set,a=u=>{for(var p=0;p<u.length;p++){var g=u[p];if(!l.has(g)){l.add(g);var S=A1(g);e.addEventListener(g,Ln,{passive:S});var E=Lr.get(g);E===void 0?(document.addEventListener(g,Ln,{passive:S}),Lr.set(g,1)):Lr.set(g,E+1)}}};a(Eh(y1)),Zc.add(a);var h=void 0,c=l1(()=>{var u=t??e.appendChild(nl());return Wn(()=>{if(s){cn({});var p=Ce;p.c=s}n&&(i.$$events=n),h=r(u,i)||{},s&&fn()}),()=>{var S;for(var p of l){e.removeEventListener(p,Ln);var g=Lr.get(p);--g===0?(document.removeEventListener(p,Ln),Lr.delete(p)):Lr.set(p,g)}Zc.delete(a),ef.delete(h),u!==t&&((S=u.parentNode)==null||S.removeChild(u))}});return ef.set(h,c),h}let ef=new WeakMap;function ut(r,e,t,i=null,n=!1){var s=r,o=null,l=null,a=null,h=n?yh:0;kh(()=>{a!==(a=!!e())&&(a?(o?bo(o):o=Wn(()=>t(s)),l&&da(l,()=>{l=null})):(l?bo(l):i&&(l=Wn(()=>i(s))),o&&da(o,()=>{o=null})))},h)}let Ul=null;function ur(r,e){return e}function k1(r,e,t,i){for(var n=[],s=e.length,o=0;o<s;o++)Rh(e[o].e,n,!0);var l=s>0&&n.length===0&&t!==null;if(l){var a=t.parentNode;r1(a),a.append(t),i.clear(),xi(r,e[0].prev,e[s-1].next)}wd(n,()=>{for(var h=0;h<s;h++){var c=e[h];l||(i.delete(c.k),xi(r,c.prev,c.next)),yr(c.e,!l)}})}function dr(r,e,t,i,n,s=null){var o=r,l={flags:e,items:new Map,first:null},a=(e&md)!==0;if(a){var h=r;o=h.appendChild(nl())}var c=null,u=!1;kh(()=>{var p=t(),g=rl(p)?p:p==null?[]:Eh(p),S=g.length;u&&S===0||(u=S===0,R1(g,l,o,n,e,i),s!==null&&(S===0?c?bo(c):c=Wn(()=>s(o)):c!==null&&da(c,()=>{c=null})),t())})}function R1(r,e,t,i,n,s){var q,Z,re,pe;var o=(n&jg)!==0,l=(n&(Nh|bh))!==0,a=r.length,h=e.items,c=e.first,u=c,p,g=null,S,E=[],y=[],I,w,A,R;if(o)for(R=0;R<a;R+=1)I=r[R],w=s(I,R),A=h.get(w),A!==void 0&&((q=A.a)==null||q.measure(),(S??(S=new Set)).add(A));for(R=0;R<a;R+=1){if(I=r[R],w=s(I,R),A=h.get(w),A===void 0){var L=u?u.e.nodes_start:t;g=C1(L,e,g,g===null?e.first:g.next,I,w,R,i,n),h.set(w,g),E=[],y=[],u=g.next;continue}if(l&&L1(A,I,R,n),A.e.f&Oi&&(bo(A.e),o&&((Z=A.a)==null||Z.unfix(),(S??(S=new Set)).delete(A))),A!==u){if(p!==void 0&&p.has(A)){if(E.length<y.length){var x=y[0],k;g=x.prev;var H=E[0],B=E[E.length-1];for(k=0;k<E.length;k+=1)tf(E[k],x,t);for(k=0;k<y.length;k+=1)p.delete(y[k]);xi(e,H.prev,B.next),xi(e,g,H),xi(e,B,x),u=x,g=B,R-=1,E=[],y=[]}else p.delete(A),tf(A,u,t),xi(e,A.prev,A.next),xi(e,A,g===null?e.first:g.next),xi(e,g,A),g=A;continue}for(E=[],y=[];u!==null&&u.k!==w;)u.e.f&Oi||(p??(p=new Set)).add(u),y.push(u),u=u.next;if(u===null)continue;A=u}E.push(A),g=A,u=A.next}if(u!==null||p!==void 0){for(var F=p===void 0?[]:Eh(p);u!==null;)u.e.f&Oi||F.push(u),u=u.next;var $=F.length;if($>0){var C=n&md&&a===0?t:null;if(o){for(R=0;R<$;R+=1)(re=F[R].a)==null||re.measure();for(R=0;R<$;R+=1)(pe=F[R].a)==null||pe.fix()}k1(e,F,C,h)}}o&&Lh(()=>{var Ee;if(S!==void 0)for(A of S)(Ee=A.a)==null||Ee.apply()}),Te.first=e.first&&e.first.e,Te.last=g&&g.e}function L1(r,e,t,i){i&Nh&&fa(r.v,e),i&bh?fa(r.i,t):r.i=t}function C1(r,e,t,i,n,s,o,l,a){var h=Ul;try{var c=(a&Nh)!==0,u=(a&$g)===0,p=c?u?vh(n):Pt(n):n,g=a&bh?Pt(o):o,S={i:g,v:p,k:s,a:null,e:null,prev:t,next:i};return Ul=S,S.e=Wn(()=>l(r,p,g),gd),S.e.prev=t&&t.e,S.e.next=i&&i.e,t===null?e.first=S:(t.next=S,t.e.next=S.e),i!==null&&(i.prev=S,i.e.prev=S.e),S}finally{Ul=h}}function tf(r,e,t){for(var i=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==i;){var o=sl(s);n.before(s),s=o}}function xi(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Wr(r,e,t,i){var n=r.__attributes??(r.__attributes={});n[e]!==(n[e]=t)&&("__styles"in r&&(r.__styles={}),t==null?r.removeAttribute(e):typeof t!="string"&&D1(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var rf=new Map;function D1(r){var e=rf.get(r.nodeName);if(e)return e;rf.set(r.nodeName,e=[]);for(var t,i=Oo(r),n=Element.prototype;n!==i;){t=cd(i);for(var s in t)t[s].set&&e.push(s);i=Oo(i)}return e}function V1(r,e){var t=r.__className,i=U1(e);(t!==i||gd)&&(e==null?r.removeAttribute("class"):r.className=i,r.__className=i)}function U1(r){return r??""}function Qt(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}function nf(r,e){return r===e||(r==null?void 0:r[qr])===e}function M1(r={},e,t,i){return xh(()=>{var n,s;return ol(()=>{n=s,s=[],zi(()=>{r!==t(...s)&&(e(r,...s),n&&nf(t(...n),r)&&e(null,...n))})}),()=>{Lh(()=>{s&&nf(t(...s),r)&&e(null,...s)})}}),r}function Cn(r){return function(...e){var t=e[0];return t.preventDefault(),r==null?void 0:r.apply(this,e)}}function al(r=!1){const e=Ce,t=e.l.u;if(!t)return;let i=()=>Rn(e.s);if(r){let n=0,s={};const o=vo(()=>{let l=!1;const a=e.s;for(const h in a)a[h]!==s[h]&&(s[h]=a[h],l=!0);return l&&n++,n});i=()=>N(o)}t.b.length&&o1(()=>{sf(e,i),ca(t.b)}),No(()=>{const n=zi(()=>t.m.map(Cg));return()=>{for(const s of n)typeof s=="function"&&s()}}),t.a.length&&No(()=>{sf(e,i),ca(t.a)})}function sf(r,e){if(r.l.s)for(const t of r.l.s)N(t);e()}let Ps=!1;function P1(r){var e=Ps;try{return Ps=!1,[r(),Ps]}finally{Ps=e}}function of(r){for(var e=Te,t=Te;e!==null&&!(e.f&(Zt|fs));)e=e.parent;try{return di(e),r()}finally{di(t)}}function Ot(r,e,t,i){var x;var n=(t&Qg)!==0,s=(t&Xg)!==0,o=(t&Yg)!==0,l=(t&Zg)!==0,a=!1,h;o?[h,a]=P1(()=>r[e]):h=r[e];var c=(x=Hr(r,e))==null?void 0:x.set,u=i,p=!0,g=!1,S=()=>(g=!0,p&&(p=!1,l?u=zi(i):u=i),u);h===void 0&&i!==void 0&&(c&&s&&Hg(),h=S(),c&&c(h));var E;if(s)E=()=>{var k=r[e];return k===void 0?S():(p=!0,g=!1,k)};else{var y=of(()=>(n?vo:Ah)(()=>r[e]));y.f|=Vg,E=()=>{var k=N(y);return k!==void 0&&(u=void 0),k===void 0?u:k}}if(!(t&Jg))return E;if(c){var I=r.$$legacy;return function(k,H){return arguments.length>0?((!s||!H||I||a)&&c(H?E():k),k):E()}}var w=!1,A=!1,R=vh(h),L=of(()=>vo(()=>{var k=E(),H=N(R),B=we;return w||k===void 0&&B.f&ln?(w=!1,A=!0,H):(A=!1,R.v=k)}));return n||(L.equals=Ih),function(k,H){if(arguments.length>0){const B=H?N(L):s&&o?Vr(k):k;return L.equals(B)||(w=!0,ie(R,B),g&&u!==void 0&&(u=B),zi(()=>N(L))),k}return N(L)}}function Uh(r){Ce===null&&Ch(),Ce.l!==null?H1(Ce).m.push(r):No(()=>{const e=zi(r);if(typeof e=="function")return e})}function _1(r){Ce===null&&Ch(),Uh(()=>()=>zi(r))}function B1(r,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:i})}function F1(){const r=Ce;return r===null&&Ch(),(e,t,i)=>{var s;const n=(s=r.s.$$events)==null?void 0:s[e];if(n){const o=rl(n)?n.slice():[n],l=B1(e,t,i);for(const a of o)a.call(r.x,l);return!l.defaultPrevented}return!0}}function H1(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const q1="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(q1);function z1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function W1(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var Dd={exports:{}};const G1={},K1=Object.freeze(Object.defineProperty({__proto__:null,default:G1},Symbol.toStringTag,{value:"Module"})),Ml=W1(K1);(function(r,e){var t=void 0,i=function(n){return t||(t=new Promise(function(s,o){var l=typeof n<"u"?n:{},a=l.onAbort;l.onAbort=function(f){o(new Error(f)),a&&a(f)},l.postRun=l.postRun||[],l.postRun.push(function(){s(l)}),r=void 0;var h;h||(h=typeof l<"u"?l:{});var c=typeof window=="object",u=typeof importScripts=="function",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";h.onRuntimeInitialized=function(){function f(v,M){switch(typeof M){case"boolean":Ag(v,M?1:0);break;case"number":vg(v,M);break;case"string":Ng(v,M,-1,-1);break;case"object":if(M===null)jc(v);else if(M.length!=null){var j=Cs(M,Ls);bg(v,j,M.length,-1),Vs(j)}else Ms(v,"Wrong API use : tried to return a value of an unknown type ("+M+").",-1);break;default:jc(v)}}function d(v,M){for(var j=[],ne=0;ne<v;ne+=1){var ue=Gt(M+4*ne,"i32"),De=Tg(ue);if(De===1||De===2)ue=Ig(ue);else if(De===3)ue=Og(ue);else if(De===4){De=ue,ue=Eg(De),De=yg(De);for(var jt=new Uint8Array(ue),Mt=0;Mt<ue;Mt+=1)jt[Mt]=B[De+Mt];ue=jt}else ue=null;j.push(ue)}return j}function m(v,M){this.Ka=v,this.db=M,this.Ia=1,this.eb=[]}function T(v,M){if(this.db=M,M=Kt(v)+1,this.Xa=Dl(M),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");Tt(v,F,this.Xa,M),this.cb=this.Xa,this.Ta=this.hb=null}function O(v){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),v!=null){var M=this.filename,j="/",ne=M;if(j&&(j=typeof j=="string"?j:Ns(j),ne=M?St(j+"/"+M):j),M=Ec(!0,!0),ne=bs(ne,(M!==void 0?M:438)&4095|32768,0),v){if(typeof v=="string"){j=Array(v.length);for(var ue=0,De=v.length;ue<De;++ue)j[ue]=v.charCodeAt(ue);v=j}ws(ne,M|146),j=kr(ne,577),Mc(j,v,0,v.length,0),wl(j),ws(ne,M)}}this.handleError(te(this.filename,b)),this.db=Gt(b,"i32"),Qc(this.db),this.Ya={},this.Ma={}}var b=wi(4),D=h.cwrap,te=D("sqlite3_open","number",["string","number"]),be=D("sqlite3_close_v2","number",["number"]),he=D("sqlite3_exec","number",["number","string","number","number","number"]),He=D("sqlite3_changes","number",["number"]),$e=D("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qc=D("sqlite3_sql","string",["number"]),tg=D("sqlite3_normalized_sql","string",["number"]),zc=D("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ig=D("sqlite3_bind_text","number",["number","number","number","number","number"]),Wc=D("sqlite3_bind_blob","number",["number","number","number","number","number"]),rg=D("sqlite3_bind_double","number",["number","number","number"]),ng=D("sqlite3_bind_int","number",["number","number","number"]),sg=D("sqlite3_bind_parameter_index","number",["number","string"]),og=D("sqlite3_step","number",["number"]),lg=D("sqlite3_errmsg","string",["number"]),ag=D("sqlite3_column_count","number",["number"]),hg=D("sqlite3_data_count","number",["number"]),cg=D("sqlite3_column_double","number",["number","number"]),Gc=D("sqlite3_column_text","string",["number","number"]),fg=D("sqlite3_column_blob","number",["number","number"]),ug=D("sqlite3_column_bytes","number",["number","number"]),dg=D("sqlite3_column_type","number",["number","number"]),pg=D("sqlite3_column_name","string",["number","number"]),mg=D("sqlite3_reset","number",["number"]),gg=D("sqlite3_clear_bindings","number",["number"]),Sg=D("sqlite3_finalize","number",["number"]),Kc=D("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Tg=D("sqlite3_value_type","number",["number"]),Eg=D("sqlite3_value_bytes","number",["number"]),Og=D("sqlite3_value_text","string",["number"]),yg=D("sqlite3_value_blob","number",["number"]),Ig=D("sqlite3_value_double","number",["number"]),vg=D("sqlite3_result_double","",["number","number"]),jc=D("sqlite3_result_null","",["number"]),Ng=D("sqlite3_result_text","",["number","string","number","number"]),bg=D("sqlite3_result_blob","",["number","number","number","number"]),Ag=D("sqlite3_result_int","",["number","number"]),Ms=D("sqlite3_result_error","",["number","string","number"]),$c=D("sqlite3_aggregate_context","number",["number","number"]),Qc=D("RegisterExtensionFunctions","number",["number"]);m.prototype.bind=function(v){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(v)?this.vb(v):v!=null&&typeof v=="object"?this.wb(v):!0},m.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var v=og(this.Ka);switch(v){case 100:return!0;case 101:return!1;default:throw this.db.handleError(v)}},m.prototype.qb=function(v){return v==null&&(v=this.Ia,this.Ia+=1),cg(this.Ka,v)},m.prototype.zb=function(v){if(v==null&&(v=this.Ia,this.Ia+=1),v=Gc(this.Ka,v),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(v)},m.prototype.Ab=function(v){return v==null&&(v=this.Ia,this.Ia+=1),Gc(this.Ka,v)},m.prototype.getBlob=function(v){v==null&&(v=this.Ia,this.Ia+=1);var M=ug(this.Ka,v);v=fg(this.Ka,v);for(var j=new Uint8Array(M),ne=0;ne<M;ne+=1)j[ne]=B[v+ne];return j},m.prototype.get=function(v,M){M=M||{},v!=null&&this.bind(v)&&this.step(),v=[];for(var j=hg(this.Ka),ne=0;ne<j;ne+=1)switch(dg(this.Ka,ne)){case 1:var ue=M.useBigInt?this.zb(ne):this.qb(ne);v.push(ue);break;case 2:v.push(this.qb(ne));break;case 3:v.push(this.Ab(ne));break;case 4:v.push(this.getBlob(ne));break;default:v.push(null)}return v},m.prototype.getColumnNames=function(){for(var v=[],M=ag(this.Ka),j=0;j<M;j+=1)v.push(pg(this.Ka,j));return v},m.prototype.getAsObject=function(v,M){v=this.get(v,M),M=this.getColumnNames();for(var j={},ne=0;ne<M.length;ne+=1)j[M[ne]]=v[ne];return j},m.prototype.getSQL=function(){return qc(this.Ka)},m.prototype.getNormalizedSQL=function(){return tg(this.Ka)},m.prototype.run=function(v){return v!=null&&this.bind(v),this.step(),this.reset()},m.prototype.mb=function(v,M){M==null&&(M=this.Ia,this.Ia+=1),v=vs(v);var j=Cs(v,Ls);this.eb.push(j),this.db.handleError(ig(this.Ka,M,j,v.length-1,0))},m.prototype.ub=function(v,M){M==null&&(M=this.Ia,this.Ia+=1);var j=Cs(v,Ls);this.eb.push(j),this.db.handleError(Wc(this.Ka,M,j,v.length,0))},m.prototype.lb=function(v,M){M==null&&(M=this.Ia,this.Ia+=1),this.db.handleError((v===(v|0)?ng:rg)(this.Ka,M,v))},m.prototype.xb=function(v){v==null&&(v=this.Ia,this.Ia+=1),Wc(this.Ka,v,0,0,0)},m.prototype.nb=function(v,M){switch(M==null&&(M=this.Ia,this.Ia+=1),typeof v){case"string":this.mb(v,M);return;case"number":this.lb(v,M);return;case"bigint":this.mb(v.toString(),M);return;case"boolean":this.lb(v+0,M);return;case"object":if(v===null){this.xb(M);return}if(v.length!=null){this.ub(v,M);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+v+")."},m.prototype.wb=function(v){var M=this;return Object.keys(v).forEach(function(j){var ne=sg(M.Ka,j);ne!==0&&M.nb(v[j],ne)}),!0},m.prototype.vb=function(v){for(var M=0;M<v.length;M+=1)this.nb(v[M],M+1);return!0},m.prototype.reset=function(){return this.freemem(),gg(this.Ka)===0&&mg(this.Ka)===0},m.prototype.freemem=function(){for(var v;(v=this.eb.pop())!==void 0;)Vs(v)},m.prototype.free=function(){this.freemem();var v=Sg(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,v},T.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var v=vn(),M=wi(4);Yi(b),Yi(M);try{this.db.handleError(zc(this.db.db,this.cb,-1,b,M)),this.cb=Gt(M,"i32");var j=Gt(b,"i32");return j===0?(this.fb(),{done:!0}):(this.Ta=new m(j,this.db),this.db.Ya[j]=this.Ta,{value:this.Ta,done:!1})}catch(ne){throw this.hb=vr(this.cb),this.fb(),ne}finally{In(v)}},T.prototype.fb=function(){Vs(this.Xa),this.Xa=null},T.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:vr(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(T.prototype[Symbol.iterator]=function(){return this}),O.prototype.run=function(v,M){if(!this.db)throw"Database closed";if(M){v=this.prepare(v,M);try{v.step()}finally{v.free()}}else this.handleError(he(this.db,v,0,0,b));return this},O.prototype.exec=function(v,M,j){if(!this.db)throw"Database closed";var ne=vn(),ue=null;try{var De=Ll(v),jt=wi(4);for(v=[];Gt(De,"i8")!==0;){Yi(b),Yi(jt),this.handleError(zc(this.db,De,-1,b,jt));var Mt=Gt(b,"i32");if(De=Gt(jt,"i32"),Mt!==0){var xt=null;for(ue=new m(Mt,this),M!=null&&ue.bind(M);ue.step();)xt===null&&(xt={columns:ue.getColumnNames(),values:[]},v.push(xt)),xt.values.push(ue.get(null,j));ue.free()}}return v}catch($t){throw ue&&ue.free(),$t}finally{In(ne)}},O.prototype.each=function(v,M,j,ne,ue){typeof M=="function"&&(ne=j,j=M,M=void 0),v=this.prepare(v,M);try{for(;v.step();)j(v.getAsObject(null,ue))}finally{v.free()}if(typeof ne=="function")return ne()},O.prototype.prepare=function(v,M){if(Yi(b),this.handleError($e(this.db,v,-1,b,0)),v=Gt(b,"i32"),v===0)throw"Nothing to prepare";var j=new m(v,this);return M!=null&&j.bind(M),this.Ya[v]=j},O.prototype.iterateStatements=function(v){return new T(v,this)},O.prototype.export=function(){Object.values(this.Ya).forEach(function(M){M.free()}),Object.values(this.Ma).forEach(Rr),this.Ma={},this.handleError(be(this.db));var v=X0(this.filename);return this.handleError(te(this.filename,b)),this.db=Gt(b,"i32"),Qc(this.db),v},O.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(v){v.free()}),Object.values(this.Ma).forEach(Rr),this.Ma={},this.handleError(be(this.db)),Rc("/"+this.filename),this.db=null)},O.prototype.handleError=function(v){if(v===0)return null;throw v=lg(this.db),Error(v)},O.prototype.getRowsModified=function(){return He(this.db)},O.prototype.create_function=function(v,M){Object.prototype.hasOwnProperty.call(this.Ma,v)&&(Rr(this.Ma[v]),delete this.Ma[v]);var j=Ds(function(ne,ue,De){ue=d(ue,De);try{var jt=M.apply(null,ue)}catch(Mt){Ms(ne,Mt,-1);return}f(ne,jt)},"viii");return this.Ma[v]=j,this.handleError(Kc(this.db,v,M.length,1,0,j,0,0,0)),this},O.prototype.create_aggregate=function(v,M){var j=M.init||function(){return null},ne=M.finalize||function(xt){return xt},ue=M.step;if(!ue)throw"An aggregate function must have a step function in "+v;var De={};Object.hasOwnProperty.call(this.Ma,v)&&(Rr(this.Ma[v]),delete this.Ma[v]),M=v+"__finalize",Object.hasOwnProperty.call(this.Ma,M)&&(Rr(this.Ma[M]),delete this.Ma[M]);var jt=Ds(function(xt,$t,Vl){var rr=$c(xt,1);Object.hasOwnProperty.call(De,rr)||(De[rr]=j()),$t=d($t,Vl),$t=[De[rr]].concat($t);try{De[rr]=ue.apply(null,$t)}catch(wg){delete De[rr],Ms(xt,wg,-1)}},"viii"),Mt=Ds(function(xt){var $t=$c(xt,1);try{var Vl=ne(De[$t])}catch(rr){delete De[$t],Ms(xt,rr,-1);return}f(xt,Vl),delete De[$t]},"vi");return this.Ma[v]=jt,this.Ma[M]=Mt,this.handleError(Kc(this.db,v,ue.length-1,1,0,0,jt,Mt,0)),this},h.Database=O};var g=Object.assign({},h),S="./this.program",E="",y,I;if(p){var w=Ml,A=Ml;E=__dirname+"/",I=f=>(f=Q(f)?new URL(f):A.normalize(f),w.readFileSync(f)),y=f=>(f=Q(f)?new URL(f):A.normalize(f),new Promise((d,m)=>{w.readFile(f,void 0,(T,O)=>{T?m(T):d(O.buffer)})})),!h.thisProgram&&1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.exports=h}else(c||u)&&(u?E=self.location.href:typeof document<"u"&&document.currentScript&&(E=document.currentScript.src),E=E.startsWith("blob:")?"":E.substr(0,E.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(I=f=>{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),y=f=>Q(f)?new Promise((d,m)=>{var T=new XMLHttpRequest;T.open("GET",f,!0),T.responseType="arraybuffer",T.onload=()=>{(T.status==200||T.status==0&&T.response)&&m(T.response),d(T.status)},T.onerror=d,T.send(null)}):fetch(f,{credentials:"same-origin"}).then(d=>d.ok?d.arrayBuffer():Promise.reject(Error(d.status+" : "+d.url))));var R=h.print||console.log.bind(console),L=h.printErr||console.error.bind(console);Object.assign(h,g),g=null,h.thisProgram&&(S=h.thisProgram);var x;h.wasmBinary&&(x=h.wasmBinary);var k,H=!1,B,F,$,C,q,Z,re;function pe(){var f=k.buffer;h.HEAP8=B=new Int8Array(f),h.HEAP16=$=new Int16Array(f),h.HEAPU8=F=new Uint8Array(f),h.HEAPU16=new Uint16Array(f),h.HEAP32=C=new Int32Array(f),h.HEAPU32=q=new Uint32Array(f),h.HEAPF32=Z=new Float32Array(f),h.HEAPF64=re=new Float64Array(f)}var Ee=[],ve=[],le=[];function se(){var f=h.preRun.shift();Ee.unshift(f)}var ee=0,Se=null;function ce(f){var d;throw(d=h.onAbort)==null||d.call(h,f),f="Aborted("+f+")",L(f),H=!0,new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info.")}var K=f=>f.startsWith("data:application/octet-stream;base64,"),Q=f=>f.startsWith("file://"),me;function Oe(f){if(f==me&&x)return new Uint8Array(x);if(I)return I(f);throw"both async and sync fetching of the wasm failed"}function ht(f){return x?Promise.resolve().then(()=>Oe(f)):y(f).then(d=>new Uint8Array(d),()=>Oe(f))}function ct(f,d,m){return ht(f).then(T=>WebAssembly.instantiate(T,d)).then(m,T=>{L(`failed to asynchronously prepare wasm: ${T}`),ce(T)})}function Si(f,d){var m=me;x||typeof WebAssembly.instantiateStreaming!="function"||K(m)||Q(m)||p||typeof fetch!="function"?ct(m,f,d):fetch(m,{credentials:"same-origin"}).then(T=>WebAssembly.instantiateStreaming(T,f).then(d,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),ct(m,f,d)}))}var J,xe,mn=f=>{for(;0<f.length;)f.shift()(h)};function Gt(f,d="i8"){switch(d.endsWith("*")&&(d="*"),d){case"i1":return B[f];case"i8":return B[f];case"i16":return $[f>>1];case"i32":return C[f>>2];case"i64":ce("to do getValue(i64) use WASM_BIGINT");case"float":return Z[f>>2];case"double":return re[f>>3];case"*":return q[f>>2];default:ce(`invalid type for getValue: ${d}`)}}function Yi(f){var d="i32";switch(d.endsWith("*")&&(d="*"),d){case"i1":B[f]=0;break;case"i8":B[f]=0;break;case"i16":$[f>>1]=0;break;case"i32":C[f>>2]=0;break;case"i64":ce("to do setValue(i64) use WASM_BIGINT");case"float":Z[f>>2]=0;break;case"double":re[f>>3]=0;break;case"*":q[f>>2]=0;break;default:ce(`invalid type for setValue: ${d}`)}}var Os=typeof TextDecoder<"u"?new TextDecoder:void 0,_e=(f,d,m)=>{var T=d+m;for(m=d;f[m]&&!(m>=T);)++m;if(16<m-d&&f.buffer&&Os)return Os.decode(f.subarray(d,m));for(T="";d<m;){var O=f[d++];if(O&128){var b=f[d++]&63;if((O&224)==192)T+=String.fromCharCode((O&31)<<6|b);else{var D=f[d++]&63;O=(O&240)==224?(O&15)<<12|b<<6|D:(O&7)<<18|b<<12|D<<6|f[d++]&63,65536>O?T+=String.fromCharCode(O):(O-=65536,T+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else T+=String.fromCharCode(O)}return T},vr=(f,d)=>f?_e(F,f,d):"",ys=(f,d)=>{for(var m=0,T=f.length-1;0<=T;T--){var O=f[T];O==="."?f.splice(T,1):O===".."?(f.splice(T,1),m++):m&&(f.splice(T,1),m--)}if(d)for(;m;m--)f.unshift("..");return f},St=f=>{var d=f.charAt(0)==="/",m=f.substr(-1)==="/";return(f=ys(f.split("/").filter(T=>!!T),!d).join("/"))||d||(f="."),f&&m&&(f+="/"),(d?"/":"")+f},Nr=f=>{var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(f).slice(1);return f=d[0],d=d[1],!f&&!d?".":(d&&(d=d.substr(0,d.length-1)),f+d)},Zi=f=>{if(f==="/")return"/";f=St(f),f=f.replace(/\/$/,"");var d=f.lastIndexOf("/");return d===-1?f:f.substr(d+1)},Is=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return m=>crypto.getRandomValues(m);if(p)try{var f=Ml;if(f.randomFillSync)return m=>f.randomFillSync(m);var d=f.randomBytes;return m=>(m.set(d(m.byteLength)),m)}catch{}ce("initRandomDevice")},gn=f=>(gn=Is())(f),br=(...f)=>{for(var d="",m=!1,T=f.length-1;-1<=T&&!m;T--){if(m=0<=T?f[T]:"/",typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!m)return"";d=m+"/"+d,m=m.charAt(0)==="/"}return d=ys(d.split("/").filter(O=>!!O),!m).join("/"),(m?"/":"")+d||"."},Sn=[],Kt=f=>{for(var d=0,m=0;m<f.length;++m){var T=f.charCodeAt(m);127>=T?d++:2047>=T?d+=2:55296<=T&&57343>=T?(d+=4,++m):d+=3}return d},Tt=(f,d,m,T)=>{if(!(0<T))return 0;var O=m;T=m+T-1;for(var b=0;b<f.length;++b){var D=f.charCodeAt(b);if(55296<=D&&57343>=D){var te=f.charCodeAt(++b);D=65536+((D&1023)<<10)|te&1023}if(127>=D){if(m>=T)break;d[m++]=D}else{if(2047>=D){if(m+1>=T)break;d[m++]=192|D>>6}else{if(65535>=D){if(m+2>=T)break;d[m++]=224|D>>12}else{if(m+3>=T)break;d[m++]=240|D>>18,d[m++]=128|D>>12&63}d[m++]=128|D>>6&63}d[m++]=128|D&63}}return d[m]=0,m-O};function vs(f,d){var m=Array(Kt(f)+1);return f=Tt(f,m,0,m.length),d&&(m.length=f),m}var Ar=[];function wr(f,d){Ar[f]={input:[],output:[],Wa:d},bl(f,q0)}var q0={open(f){var d=Ar[f.node.rdev];if(!d)throw new P(43);f.tty=d,f.seekable=!1},close(f){f.tty.Wa.fsync(f.tty)},fsync(f){f.tty.Wa.fsync(f.tty)},read(f,d,m,T){if(!f.tty||!f.tty.Wa.rb)throw new P(60);for(var O=0,b=0;b<T;b++){try{var D=f.tty.Wa.rb(f.tty)}catch{throw new P(29)}if(D===void 0&&O===0)throw new P(6);if(D==null)break;O++,d[m+b]=D}return O&&(f.node.timestamp=Date.now()),O},write(f,d,m,T){if(!f.tty||!f.tty.Wa.ib)throw new P(60);try{for(var O=0;O<T;O++)f.tty.Wa.ib(f.tty,d[m+O])}catch{throw new P(29)}return T&&(f.node.timestamp=Date.now()),O}},z0={rb(){e:{if(!Sn.length){var f=null;if(p){var d=Buffer.alloc(256),m=0,T=process.stdin.fd;try{m=w.readSync(T,d,0,256)}catch(O){if(O.toString().includes("EOF"))m=0;else throw O}0<m&&(f=d.slice(0,m).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(f=window.prompt("Input: "),f!==null&&(f+=`
`));if(!f){f=null;break e}Sn=vs(f,!0)}f=Sn.shift()}return f},ib(f,d){d===null||d===10?(R(_e(f.output,0)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){f.output&&0<f.output.length&&(R(_e(f.output,0)),f.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},W0={ib(f,d){d===null||d===10?(L(_e(f.output,0)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){f.output&&0<f.output.length&&(L(_e(f.output,0)),f.output=[])}};function Tc(f,d){var m=f.Ha?f.Ha.length:0;m>=d||(d=Math.max(d,m*(1048576>m?2:1.125)>>>0),m!=0&&(d=Math.max(d,256)),m=f.Ha,f.Ha=new Uint8Array(d),0<f.La&&f.Ha.set(m.subarray(0,f.La),0))}var fe={Pa:null,Qa(){return fe.createNode(null,"/",16895,0)},createNode(f,d,m,T){if((m&61440)===24576||(m&61440)===4096)throw new P(63);return fe.Pa||(fe.Pa={dir:{node:{Oa:fe.Fa.Oa,Na:fe.Fa.Na,lookup:fe.Fa.lookup,$a:fe.Fa.$a,rename:fe.Fa.rename,unlink:fe.Fa.unlink,rmdir:fe.Fa.rmdir,readdir:fe.Fa.readdir,symlink:fe.Fa.symlink},stream:{Sa:fe.Ga.Sa}},file:{node:{Oa:fe.Fa.Oa,Na:fe.Fa.Na},stream:{Sa:fe.Ga.Sa,read:fe.Ga.read,write:fe.Ga.write,kb:fe.Ga.kb,ab:fe.Ga.ab,bb:fe.Ga.bb}},link:{node:{Oa:fe.Fa.Oa,Na:fe.Fa.Na,readlink:fe.Fa.readlink},stream:{}},ob:{node:{Oa:fe.Fa.Oa,Na:fe.Fa.Na},stream:Q0}}),m=vc(f,d,m,T),wt(m.mode)?(m.Fa=fe.Pa.dir.node,m.Ga=fe.Pa.dir.stream,m.Ha={}):(m.mode&61440)===32768?(m.Fa=fe.Pa.file.node,m.Ga=fe.Pa.file.stream,m.La=0,m.Ha=null):(m.mode&61440)===40960?(m.Fa=fe.Pa.link.node,m.Ga=fe.Pa.link.stream):(m.mode&61440)===8192&&(m.Fa=fe.Pa.ob.node,m.Ga=fe.Pa.ob.stream),m.timestamp=Date.now(),f&&(f.Ha[d]=m,f.timestamp=m.timestamp),m},Kb(f){return f.Ha?f.Ha.subarray?f.Ha.subarray(0,f.La):new Uint8Array(f.Ha):new Uint8Array(0)},Fa:{Oa(f){var d={};return d.dev=(f.mode&61440)===8192?f.id:1,d.ino=f.id,d.mode=f.mode,d.nlink=1,d.uid=0,d.gid=0,d.rdev=f.rdev,wt(f.mode)?d.size=4096:(f.mode&61440)===32768?d.size=f.La:(f.mode&61440)===40960?d.size=f.link.length:d.size=0,d.atime=new Date(f.timestamp),d.mtime=new Date(f.timestamp),d.ctime=new Date(f.timestamp),d.yb=4096,d.blocks=Math.ceil(d.size/d.yb),d},Na(f,d){if(d.mode!==void 0&&(f.mode=d.mode),d.timestamp!==void 0&&(f.timestamp=d.timestamp),d.size!==void 0&&(d=d.size,f.La!=d))if(d==0)f.Ha=null,f.La=0;else{var m=f.Ha;f.Ha=new Uint8Array(d),m&&f.Ha.set(m.subarray(0,Math.min(d,f.La))),f.La=d}},lookup(){throw vl[44]},$a(f,d,m,T){return fe.createNode(f,d,m,T)},rename(f,d,m){if(wt(f.mode)){try{var T=er(d,m)}catch{}if(T)for(var O in T.Ha)throw new P(55)}delete f.parent.Ha[f.name],f.parent.timestamp=Date.now(),f.name=m,d.Ha[m]=f,d.timestamp=f.parent.timestamp},unlink(f,d){delete f.Ha[d],f.timestamp=Date.now()},rmdir(f,d){var m=er(f,d),T;for(T in m.Ha)throw new P(55);delete f.Ha[d],f.timestamp=Date.now()},readdir(f){var d=[".",".."],m;for(m of Object.keys(f.Ha))d.push(m);return d},symlink(f,d,m){return f=fe.createNode(f,d,41471,0),f.link=m,f},readlink(f){if((f.mode&61440)!==40960)throw new P(28);return f.link}},Ga:{read(f,d,m,T,O){var b=f.node.Ha;if(O>=f.node.La)return 0;if(f=Math.min(f.node.La-O,T),8<f&&b.subarray)d.set(b.subarray(O,O+f),m);else for(T=0;T<f;T++)d[m+T]=b[O+T];return f},write(f,d,m,T,O,b){if(d.buffer===B.buffer&&(b=!1),!T)return 0;if(f=f.node,f.timestamp=Date.now(),d.subarray&&(!f.Ha||f.Ha.subarray)){if(b)return f.Ha=d.subarray(m,m+T),f.La=T;if(f.La===0&&O===0)return f.Ha=d.slice(m,m+T),f.La=T;if(O+T<=f.La)return f.Ha.set(d.subarray(m,m+T),O),T}if(Tc(f,O+T),f.Ha.subarray&&d.subarray)f.Ha.set(d.subarray(m,m+T),O);else for(b=0;b<T;b++)f.Ha[O+b]=d[m+b];return f.La=Math.max(f.La,O+T),T},Sa(f,d,m){if(m===1?d+=f.position:m===2&&(f.node.mode&61440)===32768&&(d+=f.node.La),0>d)throw new P(28);return d},kb(f,d,m){Tc(f.node,d+m),f.node.La=Math.max(f.node.La,d+m)},ab(f,d,m,T,O){if((f.node.mode&61440)!==32768)throw new P(43);if(f=f.node.Ha,O&2||f.buffer!==B.buffer){if((0<m||m+d<f.length)&&(f.subarray?f=f.subarray(m,m+d):f=Array.prototype.slice.call(f,m,m+d)),m=!0,d=65536*Math.ceil(d/65536),(O=Fc(65536,d))?(F.fill(0,O,O+d),d=O):d=0,!d)throw new P(48);B.set(f,d)}else m=!1,d=f.byteOffset;return{Cb:d,tb:m}},bb(f,d,m,T){return fe.Ga.write(f,d,0,T,m,!1),0}}},Ec=(f,d)=>{var m=0;return f&&(m|=365),d&&(m|=146),m},Il=null,Oc={},Tn=[],G0=1,Ai=null,yc=!0,P=class{constructor(f){this.name="ErrnoError",this.Ja=f}},vl={},K0=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(f){this.Za.flags=f}get position(){return this.Za.position}set position(f){this.Za.position=f}},j0=class{constructor(f,d,m,T){f||(f=this),this.parent=f,this.Qa=f.Qa,this.Ua=null,this.id=G0++,this.name=d,this.mode=m,this.Fa={},this.Ga={},this.rdev=T}get read(){return(this.mode&365)===365}set read(f){f?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(f){f?this.mode|=146:this.mode&=-147}};function Et(f,d={}){if(f=br(f),!f)return{path:"",node:null};if(d=Object.assign({pb:!0,jb:0},d),8<d.jb)throw new P(32);f=f.split("/").filter(D=>!!D);for(var m=Il,T="/",O=0;O<f.length;O++){var b=O===f.length-1;if(b&&d.parent)break;if(m=er(m,f[O]),T=St(T+"/"+f[O]),m.Ua&&(!b||b&&d.pb)&&(m=m.Ua.root),!b||d.Ra){for(b=0;(m.mode&61440)===40960;)if(m=Lc(T),T=br(Nr(T),m),m=Et(T,{jb:d.jb+1}).node,40<b++)throw new P(32)}}return{path:T,node:m}}function Ns(f){for(var d;;){if(f===f.parent)return f=f.Qa.sb,d?f[f.length-1]!=="/"?`${f}/${d}`:f+d:f;d=d?`${f.name}/${d}`:f.name,f=f.parent}}function Nl(f,d){for(var m=0,T=0;T<d.length;T++)m=(m<<5)-m+d.charCodeAt(T)|0;return(f+m>>>0)%Ai.length}function Ic(f){var d=Nl(f.parent.id,f.name);if(Ai[d]===f)Ai[d]=f.Va;else for(d=Ai[d];d;){if(d.Va===f){d.Va=f.Va;break}d=d.Va}}function er(f,d){var m=wt(f.mode)?(m=xr(f,"x"))?m:f.Fa.lookup?0:2:54;if(m)throw new P(m);for(m=Ai[Nl(f.id,d)];m;m=m.Va){var T=m.name;if(m.parent.id===f.id&&T===d)return m}return f.Fa.lookup(f,d)}function vc(f,d,m,T){return f=new j0(f,d,m,T),d=Nl(f.parent.id,f.name),f.Va=Ai[d],Ai[d]=f}function wt(f){return(f&61440)===16384}function Nc(f){var d=["r","w","rw"][f&3];return f&512&&(d+="w"),d}function xr(f,d){if(yc)return 0;if(!d.includes("r")||f.mode&292){if(d.includes("w")&&!(f.mode&146)||d.includes("x")&&!(f.mode&73))return 2}else return 2;return 0}function bc(f,d){try{return er(f,d),20}catch{}return xr(f,"wx")}function Ac(f,d,m){try{var T=er(f,d)}catch(O){return O.Ja}if(f=xr(f,"wx"))return f;if(m){if(!wt(T.mode))return 54;if(T===T.parent||Ns(T)==="/")return 10}else if(wt(T.mode))return 31;return 0}function ft(f){if(f=Tn[f],!f)throw new P(8);return f}function wc(f,d=-1){if(f=Object.assign(new K0,f),d==-1)e:{for(d=0;4096>=d;d++)if(!Tn[d])break e;throw new P(33)}return f.fd=d,Tn[d]=f}function $0(f,d=-1){var m,T;return f=wc(f,d),(T=(m=f.Ga)==null?void 0:m.Jb)==null||T.call(m,f),f}var Q0={open(f){var d,m;f.Ga=Oc[f.node.rdev].Ga,(m=(d=f.Ga).open)==null||m.call(d,f)},Sa(){throw new P(70)}};function bl(f,d){Oc[f]={Ga:d}}function xc(f,d){var m=d==="/";if(m&&Il)throw new P(10);if(!m&&d){var T=Et(d,{pb:!1});if(d=T.path,T=T.node,T.Ua)throw new P(10);if(!wt(T.mode))throw new P(54)}d={type:f,Ob:{},sb:d,Bb:[]},f=f.Qa(d),f.Qa=d,d.root=f,m?Il=f:T&&(T.Ua=d,T.Qa&&T.Qa.Bb.push(d))}function bs(f,d,m){var T=Et(f,{parent:!0}).node;if(f=Zi(f),!f||f==="."||f==="..")throw new P(28);var O=bc(T,f);if(O)throw new P(O);if(!T.Fa.$a)throw new P(63);return T.Fa.$a(T,f,d,m)}function ii(f,d){return bs(f,(d!==void 0?d:511)&1023|16384,0)}function As(f,d,m){typeof m>"u"&&(m=d,d=438),bs(f,d|8192,m)}function Al(f,d){if(!br(f))throw new P(44);var m=Et(d,{parent:!0}).node;if(!m)throw new P(44);d=Zi(d);var T=bc(m,d);if(T)throw new P(T);if(!m.Fa.symlink)throw new P(63);m.Fa.symlink(m,d,f)}function kc(f){var d=Et(f,{parent:!0}).node;f=Zi(f);var m=er(d,f),T=Ac(d,f,!0);if(T)throw new P(T);if(!d.Fa.rmdir)throw new P(63);if(m.Ua)throw new P(10);d.Fa.rmdir(d,f),Ic(m)}function Rc(f){var d=Et(f,{parent:!0}).node;if(!d)throw new P(44);f=Zi(f);var m=er(d,f),T=Ac(d,f,!1);if(T)throw new P(T);if(!d.Fa.unlink)throw new P(63);if(m.Ua)throw new P(10);d.Fa.unlink(d,f),Ic(m)}function Lc(f){if(f=Et(f).node,!f)throw new P(44);if(!f.Fa.readlink)throw new P(28);return br(Ns(f.parent),f.Fa.readlink(f))}function En(f,d){if(f=Et(f,{Ra:!d}).node,!f)throw new P(44);if(!f.Fa.Oa)throw new P(63);return f.Fa.Oa(f)}function Cc(f){return En(f,!0)}function ws(f,d){if(f=typeof f=="string"?Et(f,{Ra:!0}).node:f,!f.Fa.Na)throw new P(63);f.Fa.Na(f,{mode:d&4095|f.mode&-4096,timestamp:Date.now()})}function Dc(f,d){if(0>d)throw new P(28);if(f=typeof f=="string"?Et(f,{Ra:!0}).node:f,!f.Fa.Na)throw new P(63);if(wt(f.mode))throw new P(31);if((f.mode&61440)!==32768)throw new P(28);var m=xr(f,"w");if(m)throw new P(m);f.Fa.Na(f,{size:d,timestamp:Date.now()})}function kr(f,d,m){if(f==="")throw new P(44);if(typeof d=="string"){var T={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[d];if(typeof T>"u")throw Error(`Unknown file open mode: ${d}`);d=T}if(m=d&64?(typeof m>"u"?438:m)&4095|32768:0,typeof f=="object")var O=f;else{f=St(f);try{O=Et(f,{Ra:!(d&131072)}).node}catch{}}if(T=!1,d&64)if(O){if(d&128)throw new P(20)}else O=bs(f,m,0),T=!0;if(!O)throw new P(44);if((O.mode&61440)===8192&&(d&=-513),d&65536&&!wt(O.mode))throw new P(54);if(!T&&(m=O?(O.mode&61440)===40960?32:wt(O.mode)&&(Nc(d)!=="r"||d&512)?31:xr(O,Nc(d)):44))throw new P(m);return d&512&&!T&&Dc(O,0),d&=-131713,O=wc({node:O,path:Ns(O),flags:d,seekable:!0,position:0,Ga:O.Ga,Db:[],error:!1}),O.Ga.open&&O.Ga.open(O),!h.logReadFiles||d&1||(xl||(xl={}),f in xl||(xl[f]=1)),O}function wl(f){if(f.fd===null)throw new P(8);f.gb&&(f.gb=null);try{f.Ga.close&&f.Ga.close(f)}catch(d){throw d}finally{Tn[f.fd]=null}f.fd=null}function Vc(f,d,m){if(f.fd===null)throw new P(8);if(!f.seekable||!f.Ga.Sa)throw new P(70);if(m!=0&&m!=1&&m!=2)throw new P(28);f.position=f.Ga.Sa(f,d,m),f.Db=[]}function Uc(f,d,m,T,O){if(0>T||0>O)throw new P(28);if(f.fd===null)throw new P(8);if((f.flags&2097155)===1)throw new P(8);if(wt(f.node.mode))throw new P(31);if(!f.Ga.read)throw new P(28);var b=typeof O<"u";if(!b)O=f.position;else if(!f.seekable)throw new P(70);return d=f.Ga.read(f,d,m,T,O),b||(f.position+=d),d}function Mc(f,d,m,T,O){if(0>T||0>O)throw new P(28);if(f.fd===null)throw new P(8);if(!(f.flags&2097155))throw new P(8);if(wt(f.node.mode))throw new P(31);if(!f.Ga.write)throw new P(28);f.seekable&&f.flags&1024&&Vc(f,0,2);var b=typeof O<"u";if(!b)O=f.position;else if(!f.seekable)throw new P(70);return d=f.Ga.write(f,d,m,T,O,void 0),b||(f.position+=d),d}function X0(f){var d,m=kr(f,m||0);f=En(f).size;var T=new Uint8Array(f);return Uc(m,T,0,f,0),d=T,wl(m),d}var Pc;function On(f,d,m){f=St("/dev/"+f);var T=Ec(!!d,!!m);_c||(_c=64);var O=_c++<<8|0;bl(O,{open(b){b.seekable=!1},close(){var b;(b=m==null?void 0:m.buffer)!=null&&b.length&&m(10)},read(b,D,te,be){for(var he=0,He=0;He<be;He++){try{var $e=d()}catch{throw new P(29)}if($e===void 0&&he===0)throw new P(6);if($e==null)break;he++,D[te+He]=$e}return he&&(b.node.timestamp=Date.now()),he},write(b,D,te,be){for(var he=0;he<be;he++)try{m(D[te+he])}catch{throw new P(29)}return be&&(b.node.timestamp=Date.now()),he}}),As(f,T,O)}var _c,Ue={},xl;function tr(f,d,m){if(d.charAt(0)==="/")return d;if(f=f===-100?"/":ft(f).path,d.length==0){if(!m)throw new P(44);return f}return St(f+"/"+d)}function xs(f,d,m){f=f(d),C[m>>2]=f.dev,C[m+4>>2]=f.mode,q[m+8>>2]=f.nlink,C[m+12>>2]=f.uid,C[m+16>>2]=f.gid,C[m+20>>2]=f.rdev,xe=[f.size>>>0,(J=f.size,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[m+24>>2]=xe[0],C[m+28>>2]=xe[1],C[m+32>>2]=4096,C[m+36>>2]=f.blocks,d=f.atime.getTime();var T=f.mtime.getTime(),O=f.ctime.getTime();return xe=[Math.floor(d/1e3)>>>0,(J=Math.floor(d/1e3),1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[m+40>>2]=xe[0],C[m+44>>2]=xe[1],q[m+48>>2]=d%1e3*1e3,xe=[Math.floor(T/1e3)>>>0,(J=Math.floor(T/1e3),1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[m+56>>2]=xe[0],C[m+60>>2]=xe[1],q[m+64>>2]=T%1e3*1e3,xe=[Math.floor(O/1e3)>>>0,(J=Math.floor(O/1e3),1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[m+72>>2]=xe[0],C[m+76>>2]=xe[1],q[m+80>>2]=O%1e3*1e3,xe=[f.ino>>>0,(J=f.ino,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[m+88>>2]=xe[0],C[m+92>>2]=xe[1],0}var ks=void 0;function Rs(){var f=C[+ks>>2];return ks+=4,f}var yn=(f,d)=>d+2097152>>>0<4194305-!!f?(f>>>0)+4294967296*d:NaN,J0=[0,31,60,91,121,152,182,213,244,274,305,335],Y0=[0,31,59,90,120,151,181,212,243,273,304,334],kl={},Bc=()=>{if(!Rl){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},d;for(d in kl)kl[d]===void 0?delete f[d]:f[d]=kl[d];var m=[];for(d in f)m.push(`${d}=${f[d]}`);Rl=m}return Rl},Rl,Ll=f=>{var d=Kt(f)+1,m=wi(d);return Tt(f,F,m,d),m},Z0=(f,d,m,T)=>{var O={string:he=>{var He=0;return he!=null&&he!==0&&(He=Ll(he)),He},array:he=>{var He=wi(he.length);return B.set(he,He),He}};f=h["_"+f];var b=[],D=0;if(T)for(var te=0;te<T.length;te++){var be=O[m[te]];be?(D===0&&(D=vn()),b[te]=be(T[te])):b[te]=T[te]}return m=f(...b),m=function(he){return D!==0&&In(D),d==="string"?he?_e(F,he):"":d==="boolean"?!!he:he}(m)},Ls=0,Cs=(f,d)=>(d=d==1?wi(f.length):Dl(f.length),f.subarray||f.slice||(f=new Uint8Array(f)),F.set(f,d),d),ir,Cl=[],Ti,Rr=f=>{ir.delete(Ti.get(f)),Ti.set(f,null),Cl.push(f)},Ds=(f,d)=>{if(!ir){ir=new WeakMap;var m=Ti.length;if(ir)for(var T=0;T<0+m;T++){var O=Ti.get(T);O&&ir.set(O,T)}}if(m=ir.get(f)||0)return m;if(Cl.length)m=Cl.pop();else{try{Ti.grow(1)}catch(te){throw te instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":te}m=Ti.length-1}try{Ti.set(m,f)}catch(te){if(!(te instanceof TypeError))throw te;if(typeof WebAssembly.Function=="function"){T=WebAssembly.Function,O={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var b={parameters:[],results:d[0]=="v"?[]:[O[d[0]]]},D=1;D<d.length;++D)b.parameters.push(O[d[D]]);d=new T(b,f)}else{for(T=[1],O=d.slice(0,1),d=d.slice(1),b={i:127,p:127,j:126,f:125,d:124,e:111},T.push(96),D=d.length,128>D?T.push(D):T.push(D%128|128,D>>7),D=0;D<d.length;++D)T.push(b[d[D]]);O=="v"?T.push(0):T.push(1,b[O]),d=[0,97,115,109,1,0,0,0,1],O=T.length,128>O?d.push(O):d.push(O%128|128,O>>7),d.push(...T),d.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),d=new WebAssembly.Module(new Uint8Array(d)),d=new WebAssembly.Instance(d,{e:{f}}).exports.f}Ti.set(m,d)}return ir.set(f,m),m};[44].forEach(f=>{vl[f]=new P(f),vl[f].stack="<generic error, no stack>"}),Ai=Array(4096),xc(fe,"/"),ii("/tmp"),ii("/home"),ii("/home/web_user"),function(){ii("/dev"),bl(259,{read:()=>0,write:(T,O,b,D)=>D}),As("/dev/null",259),wr(1280,z0),wr(1536,W0),As("/dev/tty",1280),As("/dev/tty1",1536);var f=new Uint8Array(1024),d=0,m=()=>(d===0&&(d=gn(f).byteLength),f[--d]);On("random",m),On("urandom",m),ii("/dev/shm"),ii("/dev/shm/tmp")}(),function(){ii("/proc");var f=ii("/proc/self");ii("/proc/self/fd"),xc({Qa(){var d=vc(f,"fd",16895,73);return d.Fa={lookup(m,T){var O=ft(+T);return m={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>O.path}},m.parent=m}},d}},"/proc/self/fd")}();var eg={a:(f,d,m,T)=>{ce(`Assertion failed: ${f?_e(F,f):""}, at: `+[d?d?_e(F,d):"":"unknown filename",m,T?T?_e(F,T):"":"unknown function"])},h:function(f,d){try{return f=f?_e(F,f):"",ws(f,d),0}catch(m){if(typeof Ue>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},H:function(f,d,m){try{if(d=d?_e(F,d):"",d=tr(f,d),m&-8)return-28;var T=Et(d,{Ra:!0}).node;return T?(f="",m&4&&(f+="r"),m&2&&(f+="w"),m&1&&(f+="x"),f&&xr(T,f)?-2:0):-44}catch(O){if(typeof Ue>"u"||O.name!=="ErrnoError")throw O;return-O.Ja}},i:function(f,d){try{var m=ft(f);return ws(m.node,d),0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},g:function(f){try{var d=ft(f).node,m=typeof d=="string"?Et(d,{Ra:!0}).node:d;if(!m.Fa.Na)throw new P(63);return m.Fa.Na(m,{timestamp:Date.now()}),0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},b:function(f,d,m){ks=m;try{var T=ft(f);switch(d){case 0:var O=Rs();if(0>O)break;for(;Tn[O];)O++;return $0(T,O).fd;case 1:case 2:return 0;case 3:return T.flags;case 4:return O=Rs(),T.flags|=O,0;case 12:return O=Rs(),$[O+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(b){if(typeof Ue>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},f:function(f,d){try{var m=ft(f);return xs(En,m.path,d)}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},n:function(f,d,m){d=yn(d,m);try{if(isNaN(d))return 61;var T=ft(f);if(!(T.flags&2097155))throw new P(28);return Dc(T.node,d),0}catch(O){if(typeof Ue>"u"||O.name!=="ErrnoError")throw O;return-O.Ja}},C:function(f,d){try{if(d===0)return-28;var m=Kt("/")+1;return d<m?-68:(Tt("/",F,f,d),m)}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},F:function(f,d){try{return f=f?_e(F,f):"",xs(Cc,f,d)}catch(m){if(typeof Ue>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},z:function(f,d,m){try{return d=d?_e(F,d):"",d=tr(f,d),d=St(d),d[d.length-1]==="/"&&(d=d.substr(0,d.length-1)),ii(d,m),0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},E:function(f,d,m,T){try{d=d?_e(F,d):"";var O=T&256;return d=tr(f,d,T&4096),xs(O?Cc:En,d,m)}catch(b){if(typeof Ue>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},x:function(f,d,m,T){ks=T;try{d=d?_e(F,d):"",d=tr(f,d);var O=T?Rs():0;return kr(d,m,O).fd}catch(b){if(typeof Ue>"u"||b.name!=="ErrnoError")throw b;return-b.Ja}},v:function(f,d,m,T){try{if(d=d?_e(F,d):"",d=tr(f,d),0>=T)return-28;var O=Lc(d),b=Math.min(T,Kt(O)),D=B[m+b];return Tt(O,F,m,T+1),B[m+b]=D,b}catch(te){if(typeof Ue>"u"||te.name!=="ErrnoError")throw te;return-te.Ja}},u:function(f){try{return f=f?_e(F,f):"",kc(f),0}catch(d){if(typeof Ue>"u"||d.name!=="ErrnoError")throw d;return-d.Ja}},G:function(f,d){try{return f=f?_e(F,f):"",xs(En,f,d)}catch(m){if(typeof Ue>"u"||m.name!=="ErrnoError")throw m;return-m.Ja}},r:function(f,d,m){try{return d=d?_e(F,d):"",d=tr(f,d),m===0?Rc(d):m===512?kc(d):ce("Invalid flags passed to unlinkat"),0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return-T.Ja}},q:function(f,d,m){try{if(d=d?_e(F,d):"",d=tr(f,d,!0),m){var T=q[m>>2]+4294967296*C[m+4>>2],O=C[m+8>>2];b=1e3*T+O/1e6,m+=16,T=q[m>>2]+4294967296*C[m+4>>2],O=C[m+8>>2],D=1e3*T+O/1e6}else var b=Date.now(),D=b;f=b;var te=Et(d,{Ra:!0}).node;return te.Fa.Na(te,{timestamp:Math.max(f,D)}),0}catch(be){if(typeof Ue>"u"||be.name!=="ErrnoError")throw be;return-be.Ja}},l:function(f,d,m){f=new Date(1e3*yn(f,d)),C[m>>2]=f.getSeconds(),C[m+4>>2]=f.getMinutes(),C[m+8>>2]=f.getHours(),C[m+12>>2]=f.getDate(),C[m+16>>2]=f.getMonth(),C[m+20>>2]=f.getFullYear()-1900,C[m+24>>2]=f.getDay(),d=f.getFullYear(),C[m+28>>2]=(d%4!==0||d%100===0&&d%400!==0?Y0:J0)[f.getMonth()]+f.getDate()-1|0,C[m+36>>2]=-(60*f.getTimezoneOffset()),d=new Date(f.getFullYear(),6,1).getTimezoneOffset();var T=new Date(f.getFullYear(),0,1).getTimezoneOffset();C[m+32>>2]=(d!=T&&f.getTimezoneOffset()==Math.min(T,d))|0},j:function(f,d,m,T,O,b,D,te){O=yn(O,b);try{if(isNaN(O))return 61;var be=ft(T);if(d&2&&!(m&2)&&(be.flags&2097155)!==2)throw new P(2);if((be.flags&2097155)===1)throw new P(2);if(!be.Ga.ab)throw new P(43);var he=be.Ga.ab(be,f,O,d,m),He=he.Cb;return C[D>>2]=he.tb,q[te>>2]=He,0}catch($e){if(typeof Ue>"u"||$e.name!=="ErrnoError")throw $e;return-$e.Ja}},k:function(f,d,m,T,O,b,D){b=yn(b,D);try{var te=ft(O);if(m&2){if((te.node.mode&61440)!==32768)throw new P(43);if(!(T&2)){var be=F.slice(f,f+d);te.Ga.bb&&te.Ga.bb(te,be,b,d,T)}}}catch(he){if(typeof Ue>"u"||he.name!=="ErrnoError")throw he;return-he.Ja}},y:(f,d,m,T)=>{var O=new Date().getFullYear(),b=new Date(O,0,1).getTimezoneOffset();O=new Date(O,6,1).getTimezoneOffset(),q[f>>2]=60*Math.max(b,O),C[d>>2]=+(b!=O),d=D=>{var te=Math.abs(D);return`UTC${0<=D?"-":"+"}${String(Math.floor(te/60)).padStart(2,"0")}${String(te%60).padStart(2,"0")}`},f=d(b),d=d(O),O<b?(Tt(f,F,m,17),Tt(d,F,T,17)):(Tt(f,F,T,17),Tt(d,F,m,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:f=>{var d=F.length;if(f>>>=0,2147483648<f)return!1;for(var m=1;4>=m;m*=2){var T=d*(1+.2/m);T=Math.min(T,f+100663296);var O=Math;T=Math.max(f,T);e:{O=(O.min.call(O,2147483648,T+(65536-T%65536)%65536)-k.buffer.byteLength+65535)/65536;try{k.grow(O),pe();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},A:(f,d)=>{var m=0;return Bc().forEach((T,O)=>{var b=d+m;for(O=q[f+4*O>>2]=b,b=0;b<T.length;++b)B[O++]=T.charCodeAt(b);B[O]=0,m+=T.length+1}),0},B:(f,d)=>{var m=Bc();q[f>>2]=m.length;var T=0;return m.forEach(O=>T+=O.length+1),q[d>>2]=T,0},e:function(f){try{var d=ft(f);return wl(d),0}catch(m){if(typeof Ue>"u"||m.name!=="ErrnoError")throw m;return m.Ja}},p:function(f,d){try{var m=ft(f);return B[d]=m.tty?2:wt(m.mode)?3:(m.mode&61440)===40960?7:4,$[d+2>>1]=0,xe=[0,(J=0,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[d+8>>2]=xe[0],C[d+12>>2]=xe[1],xe=[0,(J=0,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[d+16>>2]=xe[0],C[d+20>>2]=xe[1],0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return T.Ja}},w:function(f,d,m,T){try{e:{var O=ft(f);f=d;for(var b,D=d=0;D<m;D++){var te=q[f>>2],be=q[f+4>>2];f+=8;var he=Uc(O,B,te,be,b);if(0>he){var He=-1;break e}if(d+=he,he<be)break;typeof b<"u"&&(b+=he)}He=d}return q[T>>2]=He,0}catch($e){if(typeof Ue>"u"||$e.name!=="ErrnoError")throw $e;return $e.Ja}},m:function(f,d,m,T,O){d=yn(d,m);try{if(isNaN(d))return 61;var b=ft(f);return Vc(b,d,T),xe=[b.position>>>0,(J=b.position,1<=+Math.abs(J)?0<J?+Math.floor(J/4294967296)>>>0:~~+Math.ceil((J-+(~~J>>>0))/4294967296)>>>0:0)],C[O>>2]=xe[0],C[O+4>>2]=xe[1],b.gb&&d===0&&T===0&&(b.gb=null),0}catch(D){if(typeof Ue>"u"||D.name!=="ErrnoError")throw D;return D.Ja}},D:function(f){var m;try{var d=ft(f);return(m=d.Ga)!=null&&m.fsync?d.Ga.fsync(d):0}catch(T){if(typeof Ue>"u"||T.name!=="ErrnoError")throw T;return T.Ja}},t:function(f,d,m,T){try{e:{var O=ft(f);f=d;for(var b,D=d=0;D<m;D++){var te=q[f>>2],be=q[f+4>>2];f+=8;var he=Mc(O,B,te,be,b);if(0>he){var He=-1;break e}d+=he,typeof b<"u"&&(b+=he)}He=d}return q[T>>2]=He,0}catch($e){if(typeof Ue>"u"||$e.name!=="ErrnoError")throw $e;return $e.Ja}}},X=function(){var m;function f(T){var O;return X=T.exports,k=X.I,pe(),Ti=X.K,ve.unshift(X.J),ee--,(O=h.monitorRunDependencies)==null||O.call(h,ee),ee==0&&Se&&(T=Se,Se=null,T()),X}var d={a:eg};if(ee++,(m=h.monitorRunDependencies)==null||m.call(h,ee),h.instantiateWasm)try{return h.instantiateWasm(d,f)}catch(T){return L(`Module.instantiateWasm callback failed with error: ${T}`),!1}return me||(me=K("sql-wasm.wasm")?"sql-wasm.wasm":h.locateFile?h.locateFile("sql-wasm.wasm",E):E+"sql-wasm.wasm"),Si(d,function(T){f(T.instance)}),{}}();h._sqlite3_free=f=>(h._sqlite3_free=X.L)(f),h._sqlite3_value_text=f=>(h._sqlite3_value_text=X.M)(f),h._sqlite3_prepare_v2=(f,d,m,T,O)=>(h._sqlite3_prepare_v2=X.N)(f,d,m,T,O),h._sqlite3_step=f=>(h._sqlite3_step=X.O)(f),h._sqlite3_reset=f=>(h._sqlite3_reset=X.P)(f),h._sqlite3_exec=(f,d,m,T,O)=>(h._sqlite3_exec=X.Q)(f,d,m,T,O),h._sqlite3_finalize=f=>(h._sqlite3_finalize=X.R)(f),h._sqlite3_column_name=(f,d)=>(h._sqlite3_column_name=X.S)(f,d),h._sqlite3_column_text=(f,d)=>(h._sqlite3_column_text=X.T)(f,d),h._sqlite3_column_type=(f,d)=>(h._sqlite3_column_type=X.U)(f,d),h._sqlite3_errmsg=f=>(h._sqlite3_errmsg=X.V)(f),h._sqlite3_clear_bindings=f=>(h._sqlite3_clear_bindings=X.W)(f),h._sqlite3_value_blob=f=>(h._sqlite3_value_blob=X.X)(f),h._sqlite3_value_bytes=f=>(h._sqlite3_value_bytes=X.Y)(f),h._sqlite3_value_double=f=>(h._sqlite3_value_double=X.Z)(f),h._sqlite3_value_int=f=>(h._sqlite3_value_int=X._)(f),h._sqlite3_value_type=f=>(h._sqlite3_value_type=X.$)(f),h._sqlite3_result_blob=(f,d,m,T)=>(h._sqlite3_result_blob=X.aa)(f,d,m,T),h._sqlite3_result_double=(f,d)=>(h._sqlite3_result_double=X.ba)(f,d),h._sqlite3_result_error=(f,d,m)=>(h._sqlite3_result_error=X.ca)(f,d,m),h._sqlite3_result_int=(f,d)=>(h._sqlite3_result_int=X.da)(f,d),h._sqlite3_result_int64=(f,d,m)=>(h._sqlite3_result_int64=X.ea)(f,d,m),h._sqlite3_result_null=f=>(h._sqlite3_result_null=X.fa)(f),h._sqlite3_result_text=(f,d,m,T)=>(h._sqlite3_result_text=X.ga)(f,d,m,T),h._sqlite3_aggregate_context=(f,d)=>(h._sqlite3_aggregate_context=X.ha)(f,d),h._sqlite3_column_count=f=>(h._sqlite3_column_count=X.ia)(f),h._sqlite3_data_count=f=>(h._sqlite3_data_count=X.ja)(f),h._sqlite3_column_blob=(f,d)=>(h._sqlite3_column_blob=X.ka)(f,d),h._sqlite3_column_bytes=(f,d)=>(h._sqlite3_column_bytes=X.la)(f,d),h._sqlite3_column_double=(f,d)=>(h._sqlite3_column_double=X.ma)(f,d),h._sqlite3_bind_blob=(f,d,m,T,O)=>(h._sqlite3_bind_blob=X.na)(f,d,m,T,O),h._sqlite3_bind_double=(f,d,m)=>(h._sqlite3_bind_double=X.oa)(f,d,m),h._sqlite3_bind_int=(f,d,m)=>(h._sqlite3_bind_int=X.pa)(f,d,m),h._sqlite3_bind_text=(f,d,m,T,O)=>(h._sqlite3_bind_text=X.qa)(f,d,m,T,O),h._sqlite3_bind_parameter_index=(f,d)=>(h._sqlite3_bind_parameter_index=X.ra)(f,d),h._sqlite3_sql=f=>(h._sqlite3_sql=X.sa)(f),h._sqlite3_normalized_sql=f=>(h._sqlite3_normalized_sql=X.ta)(f),h._sqlite3_changes=f=>(h._sqlite3_changes=X.ua)(f),h._sqlite3_close_v2=f=>(h._sqlite3_close_v2=X.va)(f),h._sqlite3_create_function_v2=(f,d,m,T,O,b,D,te,be)=>(h._sqlite3_create_function_v2=X.wa)(f,d,m,T,O,b,D,te,be),h._sqlite3_open=(f,d)=>(h._sqlite3_open=X.xa)(f,d);var Dl=h._malloc=f=>(Dl=h._malloc=X.ya)(f),Vs=h._free=f=>(Vs=h._free=X.za)(f);h._RegisterExtensionFunctions=f=>(h._RegisterExtensionFunctions=X.Aa)(f);var Fc=(f,d)=>(Fc=X.Ba)(f,d),In=f=>(In=X.Ca)(f),wi=f=>(wi=X.Da)(f),vn=()=>(vn=X.Ea)();h.stackSave=()=>vn(),h.stackRestore=f=>In(f),h.stackAlloc=f=>wi(f),h.cwrap=(f,d,m,T)=>{var O=!m||m.every(b=>b==="number"||b==="boolean");return d!=="string"&&O&&!T?h["_"+f]:(...b)=>Z0(f,d,m,b)},h.addFunction=Ds,h.removeFunction=Rr,h.UTF8ToString=vr,h.ALLOC_NORMAL=Ls,h.allocate=Cs,h.allocateUTF8OnStack=Ll;var Us;Se=function f(){Us||Hc(),Us||(Se=f)};function Hc(){function f(){var m;if(!Us&&(Us=!0,h.calledRun=!0,!H)){if(h.noFSInit||Pc||(Pc=!0,h.stdin=h.stdin,h.stdout=h.stdout,h.stderr=h.stderr,h.stdin?On("stdin",h.stdin):Al("/dev/tty","/dev/stdin"),h.stdout?On("stdout",null,h.stdout):Al("/dev/tty","/dev/stdout"),h.stderr?On("stderr",null,h.stderr):Al("/dev/tty1","/dev/stderr"),kr("/dev/stdin",0),kr("/dev/stdout",1),kr("/dev/stderr",1)),yc=!1,mn(ve),(m=h.onRuntimeInitialized)==null||m.call(h),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var d=h.postRun.shift();le.unshift(d)}mn(le)}}if(!(0<ee)){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)se();mn(Ee),0<ee||(h.setStatus?(h.setStatus("Running..."),setTimeout(function(){setTimeout(function(){h.setStatus("")},1),f()},1)):f())}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return Hc(),l}),t)};r.exports=i,r.exports.default=i})(Dd);var j1=Dd.exports;const $1=z1(j1),lo={sqlJsLoaded:!1,databaseInitialized:!1,error:null};let lf=null;async function Q1(){try{const r=await $1({locateFile:e=>`https://sql.js.org/dist/${e}`});return lo.sqlJsLoaded=!0,lf=new r.Database,lo.databaseInitialized=!0,lf}catch(r){throw lo.error=`SQL.js initialization failed: ${r.message}`,r}}function X1(){return{...lo}}const J1=`
DROP TABLE IF EXISTS OrderDetails;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS Products;
DROP TABLE IF EXISTS Categories;
DROP TABLE IF EXISTS Customers;
DROP TABLE IF EXISTS Employees;
DROP TABLE IF EXISTS Shippers;
DROP TABLE IF EXISTS Suppliers;

CREATE TABLE Categories
(      
    CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,
    CategoryName TEXT,
    Description TEXT
);

CREATE TABLE Customers
(      
    CustomerID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT
);

CREATE TABLE Employees
(
    EmployeeID INTEGER PRIMARY KEY AUTOINCREMENT,
    LastName TEXT,
    FirstName TEXT,
    BirthDate DATE,
    Photo TEXT,
    Notes TEXT
);

CREATE TABLE Shippers(
    ShipperID INTEGER PRIMARY KEY AUTOINCREMENT,
    ShipperName TEXT,
    Phone TEXT
);

CREATE TABLE Suppliers(
    SupplierID INTEGER PRIMARY KEY AUTOINCREMENT,
    SupplierName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT,
    Phone TEXT
);

CREATE TABLE Products(
    ProductID INTEGER PRIMARY KEY AUTOINCREMENT,
    ProductName TEXT,
    SupplierID INTEGER,
    CategoryID INTEGER,
    Unit TEXT,
    Price NUMERIC DEFAULT 0,
	FOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID),
	FOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID)
);

CREATE TABLE Orders(
    OrderID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerID INTEGER,
    EmployeeID INTEGER,
    OrderDate DATETIME,
    ShipperID INTEGER,
    FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID),
    FOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID),
    FOREIGN KEY (ShipperID) REFERENCES Shippers (ShipperID)
);

CREATE TABLE OrderDetails(
    OrderDetailID INTEGER PRIMARY KEY AUTOINCREMENT,
    OrderID INTEGER,
    ProductID INTEGER,
    Quantity INTEGER,
	FOREIGN KEY (OrderID) REFERENCES Orders (OrderID),
	FOREIGN KEY (ProductID) REFERENCES Products (ProductID)
);

INSERT INTO Categories VALUES(1,'Beverages','Soft drinks, coffees, teas, beers, and ales');
INSERT INTO Categories VALUES(2,'Condiments','Sweet and savory sauces, relishes, spreads, and seasonings');
INSERT INTO Categories VALUES(3,'Confections','Desserts, candies, and sweet breads');
INSERT INTO Categories VALUES(4,'Dairy Products','Cheeses');
INSERT INTO Categories VALUES(5,'Grains/Cereals','Breads, crackers, pasta, and cereal');
INSERT INTO Categories VALUES(6,'Meat/Poultry','Prepared meats');
INSERT INTO Categories VALUES(7,'Produce','Dried fruit and bean curd');
INSERT INTO Categories VALUES(8,'Seafood','Seaweed and fish');

INSERT INTO Customers VALUES(1,'Alfreds Futterkiste','Maria Anders','Obere Str. 57','Berlin','12209','Germany');
INSERT INTO Customers VALUES(2,'Ana Trujillo Emparedados y helados','Ana Trujillo','Avda. de la Constitucin 2222','Mxico D.F.','5021','Mexico');
INSERT INTO Customers VALUES(3,'Antonio Moreno Taquera','Antonio Moreno','Mataderos 2312','Mxico D.F.','5023','Mexico');
INSERT INTO Customers VALUES(4,'Around the Horn','Thomas Hardy','120 Hanover Sq.','London','WA1 1DP','UK');
INSERT INTO Customers VALUES(5,'Berglunds snabbkp','Christina Berglund','Berguvsvgen 8','Lule','S-958 22','Sweden');
INSERT INTO Customers VALUES(6,'Blauer See Delikatessen','Hanna Moos','Forsterstr. 57','Mannheim','68306','Germany');
INSERT INTO Customers VALUES(7,'Blondel pre et fils','Frdrique Citeaux','24, place Klber','Strasbourg','67000','France');
INSERT INTO Customers VALUES(8,'Blido Comidas preparadas','Martn Sommer','C/ Araquil, 67','Madrid','28023','Spain');
INSERT INTO Customers VALUES(9,'Bon app''''','Laurence Lebihans','12, rue des Bouchers','Marseille','13008','France');
INSERT INTO Customers VALUES(10,'Bottom-Dollar Marketse','Elizabeth Lincoln','23 Tsawassen Blvd.','Tsawassen','T2F 8M4','Canada');
INSERT INTO Customers VALUES(11,'B''''s Beverages','Victoria Ashworth','Fauntleroy Circus','London','EC2 5NT','UK');
INSERT INTO Customers VALUES(12,'Cactus Comidas para llevar','Patricio Simpson','Cerrito 333','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(13,'Centro comercial Moctezuma','Francisco Chang','Sierras de Granada 9993','Mxico D.F.','5022','Mexico');
INSERT INTO Customers VALUES(14,'Chop-suey Chinese','Yang Wang','Hauptstr. 29','Bern','3012','Switzerland');
INSERT INTO Customers VALUES(15,'Comrcio Mineiro','Pedro Afonso','Av. dos Lusadas, 23','So Paulo','05432-043','Brazil');
INSERT INTO Customers VALUES(16,'Consolidated Holdings','Elizabeth Brown','Berkeley Gardens 12 Brewery','London','WX1 6LT','UK');
INSERT INTO Customers VALUES(17,'Drachenblut Delikatessend','Sven Ottlieb','Walserweg 21','Aachen','52066','Germany');
INSERT INTO Customers VALUES(18,'Du monde entier','Janine Labrune','67, rue des Cinquante Otages','Nantes','44000','France');
INSERT INTO Customers VALUES(19,'Eastern Connection','Ann Devon','35 King George','London','WX3 6FW','UK');
INSERT INTO Customers VALUES(20,'Ernst Handel','Roland Mendel','Kirchgasse 6','Graz','8010','Austria');
INSERT INTO Customers VALUES(21,'Familia Arquibaldo','Aria Cruz','Rua Ors, 92','So Paulo','05442-030','Brazil');
INSERT INTO Customers VALUES(22,'FISSA Fabrica Inter. Salchichas S.A.','Diego Roel','C/ Moralzarzal, 86','Madrid','28034','Spain');
INSERT INTO Customers VALUES(23,'Folies gourmandes','Martine Ranc','184, chausse de Tournai','Lille','59000','France');
INSERT INTO Customers VALUES(24,'Folk och f HB','Maria Larsson','kergatan 24','Brcke','S-844 67','Sweden');
INSERT INTO Customers VALUES(25,'Frankenversand','Peter Franken','Berliner Platz 43','Mnchen','80805','Germany');
INSERT INTO Customers VALUES(26,'France restauration','Carine Schmitt','54, rue Royale','Nantes','44000','France');
INSERT INTO Customers VALUES(27,'Franchi S.p.A.','Paolo Accorti','Via Monte Bianco 34','Torino','10100','Italy');
INSERT INTO Customers VALUES(28,'Furia Bacalhau e Frutos do Mar','Lino Rodriguez','Jardim das rosas n. 32','Lisboa','1675','Portugal');
INSERT INTO Customers VALUES(29,'Galera del gastrnomo','Eduardo Saavedra','Rambla de Catalua, 23','Barcelona','8022','Spain');
INSERT INTO Customers VALUES(30,'Godos Cocina Tpica','Jos Pedro Freyre','C/ Romero, 33','Sevilla','41101','Spain');
INSERT INTO Customers VALUES(31,'Gourmet Lanchonetes','Andr Fonseca','Av. Brasil, 442','Campinas','04876-786','Brazil');
INSERT INTO Customers VALUES(32,'Great Lakes Food Market','Howard Snyder','2732 Baker Blvd.','Eugene','97403','USA');
INSERT INTO Customers VALUES(33,'GROSELLA-Restaurante','Manuel Pereira','5 Ave. Los Palos Grandes','Caracas','1081','Venezuela');
INSERT INTO Customers VALUES(34,'Hanari Carnes','Mario Pontes','Rua do Pao, 67','Rio de Janeiro','05454-876','Brazil');
INSERT INTO Customers VALUES(35,'HILARIN-Abastos','Carlos Hernndez','Carrera 22 con Ave. Carlos Soublette #8-35','San Cristbal','5022','Venezuela');
INSERT INTO Customers VALUES(36,'Hungry Coyote Import Store','Yoshi Latimer','City Center Plaza 516 Main St.','Elgin','97827','USA');
INSERT INTO Customers VALUES(37,'Hungry Owl All-Night Grocers','Patricia McKenna','8 Johnstown Road','Cork','','Ireland');
INSERT INTO Customers VALUES(38,'Island Trading','Helen Bennett','Garden House Crowther Way','Cowes','PO31 7PJ','UK');
INSERT INTO Customers VALUES(39,'Kniglich Essen','Philip Cramer','Maubelstr. 90','Brandenburg','14776','Germany');
INSERT INTO Customers VALUES(40,'La corne d''''abondance','Daniel Tonini','67, avenue de l''''Europe','Versailles','78000','France');
INSERT INTO Customers VALUES(41,'La maison d''''Asie','Annette Roulet','1 rue Alsace-Lorraine','Toulouse','31000','France');
INSERT INTO Customers VALUES(42,'Laughing Bacchus Wine Cellars','Yoshi Tannamuri','1900 Oak St.','Vancouver','V3F 2K1','Canada');
INSERT INTO Customers VALUES(43,'Lazy K Kountry Store','John Steel','12 Orchestra Terrace','Walla Walla','99362','USA');
INSERT INTO Customers VALUES(44,'Lehmanns Marktstand','Renate Messner','Magazinweg 7','Frankfurt a.M.','60528','Germany');
INSERT INTO Customers VALUES(45,'Let''''s Stop N Shop','Jaime Yorres','87 Polk St. Suite 5','San Francisco','94117','USA');
INSERT INTO Customers VALUES(46,'LILA-Supermercado','Carlos Gonzlez','Carrera 52 con Ave. Bolvar #65-98 Llano Largo','Barquisimeto','3508','Venezuela');
INSERT INTO Customers VALUES(47,'LINO-Delicateses','Felipe Izquierdo','Ave. 5 de Mayo Porlamar','I. de Margarita','4980','Venezuela');
INSERT INTO Customers VALUES(48,'Lonesome Pine Restaurant','Fran Wilson','89 Chiaroscuro Rd.','Portland','97219','USA');
INSERT INTO Customers VALUES(49,'Magazzini Alimentari Riuniti','Giovanni Rovelli','Via Ludovico il Moro 22','Bergamo','24100','Italy');
INSERT INTO Customers VALUES(50,'Maison Dewey','Catherine Dewey','Rue Joseph-Bens 532','Bruxelles','B-1180','Belgium');
INSERT INTO Customers VALUES(51,'Mre Paillarde','Jean Fresnire','43 rue St. Laurent','Montral','H1J 1C3','Canada');
INSERT INTO Customers VALUES(52,'Morgenstern Gesundkost','Alexander Feuer','Heerstr. 22','Leipzig','4179','Germany');
INSERT INTO Customers VALUES(53,'North/South','Simon Crowther','South House 300 Queensbridge','London','SW7 1RZ','UK');
INSERT INTO Customers VALUES(54,'Ocano Atlntico Ltda.','Yvonne Moncada','Ing. Gustavo Moncada 8585 Piso 20-A','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(55,'Old World Delicatessen','Rene Phillips','2743 Bering St.','Anchorage','99508','USA');
INSERT INTO Customers VALUES(56,'Ottilies Kseladen','Henriette Pfalzheim','Mehrheimerstr. 369','Kln','50739','Germany');
INSERT INTO Customers VALUES(57,'Paris spcialits','Marie Bertrand','265, boulevard Charonne','Paris','75012','France');
INSERT INTO Customers VALUES(58,'Pericles Comidas clsicas','Guillermo Fernndez','Calle Dr. Jorge Cash 321','Mxico D.F.','5033','Mexico');
INSERT INTO Customers VALUES(59,'Piccolo und mehr','Georg Pipps','Geislweg 14','Salzburg','5020','Austria');
INSERT INTO Customers VALUES(60,'Princesa Isabel Vinhoss','Isabel de Castro','Estrada da sade n. 58','Lisboa','1756','Portugal');
INSERT INTO Customers VALUES(61,'Que Delcia','Bernardo Batista','Rua da Panificadora, 12','Rio de Janeiro','02389-673','Brazil');
INSERT INTO Customers VALUES(62,'Queen Cozinha','Lcia Carvalho','Alameda dos Canrios, 891','So Paulo','05487-020','Brazil');
INSERT INTO Customers VALUES(63,'QUICK-Stop','Horst Kloss','Taucherstrae 10','Cunewalde','1307','Germany');
INSERT INTO Customers VALUES(64,'Rancho grande','Sergio Gutirrez','Av. del Libertador 900','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(65,'Rattlesnake Canyon Grocery','Paula Wilson','2817 Milton Dr.','Albuquerque','87110','USA');
INSERT INTO Customers VALUES(66,'Reggiani Caseifici','Maurizio Moroni','Strada Provinciale 124','Reggio Emilia','42100','Italy');
INSERT INTO Customers VALUES(67,'Ricardo Adocicados','Janete Limeira','Av. Copacabana, 267','Rio de Janeiro','02389-890','Brazil');
INSERT INTO Customers VALUES(68,'Richter Supermarkt','Michael Holz','Grenzacherweg 237','Genve','1203','Switzerland');
INSERT INTO Customers VALUES(69,'Romero y tomillo','Alejandra Camino','Gran Va, 1','Madrid','28001','Spain');
INSERT INTO Customers VALUES(70,'Sant Gourmet','Jonas Bergulfsen','Erling Skakkes gate 78','Stavern','4110','Norway');
INSERT INTO Customers VALUES(71,'Save-a-lot Markets','Jose Pavarotti','187 Suffolk Ln.','Boise','83720','USA');
INSERT INTO Customers VALUES(72,'Seven Seas Imports','Hari Kumar','90 Wadhurst Rd.','London','OX15 4NB','UK');
INSERT INTO Customers VALUES(73,'Simons bistro','Jytte Petersen','Vinbltet 34','Kbenhavn','1734','Denmark');
INSERT INTO Customers VALUES(74,'Spcialits du monde','Dominique Perrier','25, rue Lauriston','Paris','75016','France');
INSERT INTO Customers VALUES(75,'Split Rail Beer & Ale','Art Braunschweiger','P.O. Box 555','Lander','82520','USA');
INSERT INTO Customers VALUES(76,'Suprmes dlices','Pascale Cartrain','Boulevard Tirou, 255','Charleroi','B-6000','Belgium');
INSERT INTO Customers VALUES(77,'The Big Cheese','Liz Nixon','89 Jefferson Way Suite 2','Portland','97201','USA');
INSERT INTO Customers VALUES(78,'The Cracker Box','Liu Wong','55 Grizzly Peak Rd.','Butte','59801','USA');
INSERT INTO Customers VALUES(79,'Toms Spezialitten','Karin Josephs','Luisenstr. 48','Mnster','44087','Germany');
INSERT INTO Customers VALUES(80,'Tortuga Restaurante','Miguel Angel Paolino','Avda. Azteca 123','Mxico D.F.','5033','Mexico');
INSERT INTO Customers VALUES(81,'Tradio Hipermercados','Anabela Domingues','Av. Ins de Castro, 414','So Paulo','05634-030','Brazil');
INSERT INTO Customers VALUES(82,'Trail''''s Head Gourmet Provisioners','Helvetius Nagy','722 DaVinci Blvd.','Kirkland','98034','USA');
INSERT INTO Customers VALUES(83,'Vaffeljernet','Palle Ibsen','Smagslget 45','rhus','8200','Denmark');
INSERT INTO Customers VALUES(84,'Victuailles en stock','Mary Saveley','2, rue du Commerce','Lyon','69004','France');
INSERT INTO Customers VALUES(85,'Vins et alcools Chevalier','Paul Henriot','59 rue de l''''Abbaye','Reims','51100','France');
INSERT INTO Customers VALUES(86,'Die Wandernde Kuh','Rita Mller','Adenauerallee 900','Stuttgart','70563','Germany');
INSERT INTO Customers VALUES(87,'Wartian Herkku','Pirkko Koskitalo','Torikatu 38','Oulu','90110','Finland');
INSERT INTO Customers VALUES(88,'Wellington Importadora','Paula Parente','Rua do Mercado, 12','Resende','08737-363','Brazil');
INSERT INTO Customers VALUES(89,'White Clover Markets','Karl Jablonski','305 - 14th Ave. S. Suite 3B','Seattle','98128','USA');
INSERT INTO Customers VALUES(90,'Wilman Kala','Matti Karttunen','Keskuskatu 45','Helsinki','21240','Finland');
INSERT INTO Customers VALUES(91,'Wolski','Zbyszek','ul. Filtrowa 68','Walla','01-012','Poland');

INSERT INTO Employees VALUES(1,'Davolio','Nancy','1968-12-08','EmpID1.pic','Education includes a BA in psychology from Colorado State University. She also completed (The Art of the Cold Call). Nancy is a member of ''Toastmasters International''.');
INSERT INTO Employees VALUES(2,'Fuller','Andrew','1952-02-19','EmpID2.pic','Andrew received his BTS commercial and a Ph.D. in international marketing from the University of Dallas. He is fluent in French and Italian and reads German. He joined the company as a sales representative, was promoted to sales manager and was then named vice president of sales. Andrew is a member of the Sales Management Roundtable, the Seattle Chamber of Commerce, and the Pacific Rim Importers Association.');
INSERT INTO Employees VALUES(3,'Leverling','Janet','1963-08-30','EmpID3.pic','Janet has a BS degree in chemistry from Boston College). She has also completed a certificate program in food retailing management. Janet was hired as a sales associate and was promoted to sales representative.');
INSERT INTO Employees VALUES(4,'Peacock','Margaret','1958-09-19','EmpID4.pic','Margaret holds a BA in English literature from Concordia College and an MA from the American Institute of Culinary Arts. She was temporarily assigned to the London office before returning to her permanent post in Seattle.');
INSERT INTO Employees VALUES(5,'Buchanan','Steven','1955-03-04','EmpID5.pic','Steven Buchanan graduated from St. Andrews University, Scotland, with a BSC degree. Upon joining the company as a sales representative, he spent 6 months in an orientation program at the Seattle office and then returned to his permanent post in London, where he was promoted to sales manager. Mr. Buchanan has completed the courses ''Successful Telemarketing'' and ''International Sales Management''. He is fluent in French.');
INSERT INTO Employees VALUES(6,'Suyama','Michael','1963-07-02','EmpID6.pic','Michael is a graduate of Sussex University (MA, economics) and the University of California at Los Angeles (MBA, marketing). He has also taken the courses ''Multi-Cultural Selling'' and ''Time Management for the Sales Professional''. He is fluent in Japanese and can read and write French, Portuguese, and Spanish.');
INSERT INTO Employees VALUES(7,'King','Robert','1960-05-29','EmpID7.pic','Robert King served in the Peace Corps and traveled extensively before completing his degree in English at the University of Michigan and then joining the company. After completing a course entitled ''Selling in Europe'', he was transferred to the London office.');
INSERT INTO Employees VALUES(8,'Callahan','Laura','1958-01-09','EmpID8.pic','Laura received a BA in psychology from the University of Washington. She has also completed a course in business French. She reads and writes French.');
INSERT INTO Employees VALUES(9,'Dodsworth','Anne','1969-07-02','EmpID9.pic','Anne has a BA degree in English from St. Lawrence College. She is fluent in French and German.');
INSERT INTO Employees VALUES(10,'West','Adam','1928-09-19','EmpID10.pic','An old chum.');

INSERT INTO Shippers VALUES(1, 'Speedy Express', '(503) 555-9831');
INSERT INTO Shippers VALUES(2, 'United Package', '(503) 555-3199');
INSERT INTO Shippers VALUES(3, 'Federal Shipping', '(503) 555-9931');

INSERT INTO Suppliers VALUES(1,'Exotic Liquid','Charlotte Cooper','49 Gilbert St.','Londona','EC1 4SD','UK','(171) 555-2222');
INSERT INTO Suppliers VALUES(2,'New Orleans Cajun Delights','Shelley Burke','P.O. Box 78934','New Orleans','70117','USA','(100) 555-4822');
INSERT INTO Suppliers VALUES(3,'Grandma Kelly''s Homestead','Regina Murphy','707 Oxford Rd.','Ann Arbor','48104','USA','(313) 555-5735');
INSERT INTO Suppliers VALUES(4,'Tokyo Traders','Yoshi Nagase','9-8 Sekimai Musashino-shi','Tokyo','100','Japan','(03) 3555-5011');
INSERT INTO Suppliers VALUES(5,'Cooperativa de Quesos ''Las Cabras''','Antonio del Valle Saavedra','Calle del Rosal 4','Oviedo','33007','Spain','(98) 598 76 54');
INSERT INTO Suppliers VALUES(6,'Mayumi''s','Mayumi Ohno','92 Setsuko Chuo-ku','Osaka','545','Japan','(06) 431-7877');
INSERT INTO Suppliers VALUES(7,'Pavlova, Ltd.','Ian Devling','74 Rose St. Moonie Ponds','Melbourne','3058','Australia','(03) 444-2343');
INSERT INTO Suppliers VALUES(8,'Specialty Biscuits, Ltd.','Peter Wilson','29 King''s Way','Manchester','M14 GSD','UK','(161) 555-4448');
INSERT INTO Suppliers VALUES(9,'PB Knckebrd AB','Lars Peterson','Kaloadagatan 13','Gteborg','S-345 67','Sweden','031-987 65 43');
INSERT INTO Suppliers VALUES(10,'Refrescos Americanas LTDA','Carlos Diaz','Av. das Americanas 12.890','So Paulo','5442','Brazil','(11) 555 4640');
INSERT INTO Suppliers VALUES(11,'Heli Swaren GmbH & Co. KG','Petra Winkler','Tiergartenstrae 5','Berlin','10785','Germany','(010) 9984510');
INSERT INTO Suppliers VALUES(12,'Plutzer Lebensmittelgromrkte AG','Martin Bein','Bogenallee 51','Frankfurt','60439','Germany','(069) 992755');
INSERT INTO Suppliers VALUES(13,'Nord-Ost-Fisch Handelsgesellschaft mbH','Sven Petersen','Frahmredder 112a','Cuxhaven','27478','Germany','(04721) 8713');
INSERT INTO Suppliers VALUES(14,'Formaggi Fortini s.r.l.','Elio Rossi','Viale Dante, 75','Ravenna','48100','Italy','(0544) 60323');
INSERT INTO Suppliers VALUES(15,'Norske Meierier','Beate Vileid','Hatlevegen 5','Sandvika','1320','Norway','(0)2-953010');
INSERT INTO Suppliers VALUES(16,'Bigfoot Breweries','Cheryl Saylor','3400 - 8th Avenue Suite 210','Bend','97101','USA','(503) 555-9931');
INSERT INTO Suppliers VALUES(17,'Svensk Sjfda AB','Michael Bjrn','Brovallavgen 231','Stockholm','S-123 45','Sweden','08-123 45 67');
INSERT INTO Suppliers VALUES(18,'Aux joyeux ecclsiastiques','Guylne Nodier','203, Rue des Francs-Bourgeois','Paris','75004','France','(1) 03.83.00.68');
INSERT INTO Suppliers VALUES(19,'New England Seafood Cannery','Robb Merchant','Order Processing Dept. 2100 Paul Revere Blvd.','Boston','2134','USA','(617) 555-3267');
INSERT INTO Suppliers VALUES(20,'Leka Trading','Chandra Leka','471 Serangoon Loop, Suite #402','Singapore','512','Singapore','555-8787');
INSERT INTO Suppliers VALUES(21,'Lyngbysild','Niels Petersen','Lyngbysild Fiskebakken 10','Lyngby','2800','Denmark','43844108');
INSERT INTO Suppliers VALUES(22,'Zaanse Snoepfabriek','Dirk Luchte','Verkoop Rijnweg 22','Zaandam','9999 ZZ','Netherlands','(12345) 1212');
INSERT INTO Suppliers VALUES(23,'Karkki Oy','Anne Heikkonen','Valtakatu 12','Lappeenranta','53120','Finland','(953) 10956');
INSERT INTO Suppliers VALUES(24,'G''day, Mate','Wendy Mackenzie','170 Prince Edward Parade Hunter''s Hill','Sydney','2042','Australia','(02) 555-5914');
INSERT INTO Suppliers VALUES(25,'Ma Maison','Jean-Guy Lauzon','2960 Rue St. Laurent','Montral','H1J 1C3','Canada','(514) 555-9022');
INSERT INTO Suppliers VALUES(26,'Pasta Buttini s.r.l.','Giovanni Giudici','Via dei Gelsomini, 153','Salerno','84100','Italy','(089) 6547665');
INSERT INTO Suppliers VALUES(27,'Escargots Nouveaux','Marie Delamare','22, rue H. Voiron','Montceau','71300','France','85.57.00.07');
INSERT INTO Suppliers VALUES(28,'Gai pturage','Eliane Noz','Bat. B 3, rue des Alpes','Annecy','74000','France','38.76.98.06');
INSERT INTO Suppliers VALUES(29,'Forts d''rables','Chantal Goulet','148 rue Chasseur','Ste-Hyacinthe','J2S 7S8','Canada','(514) 555-2955');

INSERT INTO Products VALUES(1,'Chais',1,1,'10 boxes x 20 bags',18.00);
INSERT INTO Products VALUES(2,'Chang',1,1,'24 - 12 oz bottles',19.00);
INSERT INTO Products VALUES(3,'Aniseed Syrup',1,2,'12 - 550 ml bottles',10.00);
INSERT INTO Products VALUES(4,'Chef Anton''s Cajun Seasoning',2,2,'48 - 6 oz jars',22.00);
INSERT INTO Products VALUES(5,'Chef Anton''s Gumbo Mix',2,2,'36 boxes',21.35);
INSERT INTO Products VALUES(6,'Grandma''s Boysenberry Spread',3,2,'12 - 8 oz jars',25.00);
INSERT INTO Products VALUES(7,'Uncle Bob''s Organic Dried Pears',3,7,'12 - 1 lb pkgs.',30.00);
INSERT INTO Products VALUES(8,'Northwoods Cranberry Sauce',3,2,'12 - 12 oz jars',40.00);
INSERT INTO Products VALUES(9,'Mishi Kobe Niku',4,6,'18 - 500 g pkgs.',97.00);
INSERT INTO Products VALUES(10,'Ikura',4,8,'12 - 200 ml jars',31.00);
INSERT INTO Products VALUES(11,'Queso Cabrales',5,4,'1 kg pkg.',21.00);
INSERT INTO Products VALUES(12,'Queso Manchego La Pastora',5,4,'10 - 500 g pkgs.',38.00);
INSERT INTO Products VALUES(13,'Konbu',6,8,'2 kg box',6.00);
INSERT INTO Products VALUES(14,'Tofu',6,7,'40 - 100 g pkgs.',23.25);
INSERT INTO Products VALUES(15,'Genen Shouyu',6,2,'24 - 250 ml bottles',15.50);
INSERT INTO Products VALUES(16,'Pavlova',7,3,'32 - 500 g boxes',17.45);
INSERT INTO Products VALUES(17,'Alice Mutton',7,6,'20 - 1 kg tins',39);
INSERT INTO Products VALUES(18,'Carnarvon Tigers',7,8,'16 kg pkg.',62.50);
INSERT INTO Products VALUES(19,'Teatime Chocolate Biscuits',8,3,'10 boxes x 12 pieces',9.20);
INSERT INTO Products VALUES(20,'Sir Rodney''s Marmalade',8,3,'30 gift boxes',81.00);
INSERT INTO Products VALUES(21,'Sir Rodney''s Scones',8,3,'24 pkgs. x 4 pieces',10.00);
INSERT INTO Products VALUES(22,'Gustaf''s Knckebrd',9,5,'24 - 500 g pkgs.',21.00);
INSERT INTO Products VALUES(23,'Tunnbrd',9,5,'12 - 250 g pkgs.',9.00);
INSERT INTO Products VALUES(24,'Guaran Fantstica',10,1,'12 - 355 ml cans',4.50);
INSERT INTO Products VALUES(25,'NuNuCa Nu-Nougat-Creme',11,3,'20 - 450 g glasses',14.00);
INSERT INTO Products VALUES(26,'Gumbr Gummibrchen',11,3,'100 - 250 g bags',31.23);
INSERT INTO Products VALUES(27,'Schoggi Schokolade',11,3,'100 - 100 g pieces',43.90);
INSERT INTO Products VALUES(28,'Rssle Sauerkraut',12,7,'25 - 825 g cans',45.60);
INSERT INTO Products VALUES(29,'Thringer Rostbratwurst',12,6,'50 bags x 30 sausgs.',123.79);
INSERT INTO Products VALUES(30,'Nord-Ost Matjeshering',13,8,'10 - 200 g glasses',25.89);
INSERT INTO Products VALUES(31,'Gorgonzola Telino',14,4,'12 - 100 g pkgs',12.50);
INSERT INTO Products VALUES(32,'Mascarpone Fabioli',14,4,'24 - 200 g pkgs.',32.00);
INSERT INTO Products VALUES(33,'Geitost',15,4,'500 g',2.50);
INSERT INTO Products VALUES(34,'Sasquatch Ale',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(35,'Steeleye Stout',16,1,'24 - 12 oz bottles',18.00);
INSERT INTO Products VALUES(36,'Inlagd Sill',17,8,'24 - 250 g jars',19.00);
INSERT INTO Products VALUES(37,'Gravad lax',17,8,'12 - 500 g pkgs.',26.00);
INSERT INTO Products VALUES(38,'Cte de Blaye',18,1,'12 - 75 cl bottles',263.50);
INSERT INTO Products VALUES(39,'Chartreuse verte',18,1,'750 cc per bottle',18.00);
INSERT INTO Products VALUES(40,'Boston Crab Meat',19,8,'24 - 4 oz tins',18.40);
INSERT INTO Products VALUES(41,'Jack''s New England Clam Chowder',19,8,'12 - 12 oz cans',9.65);
INSERT INTO Products VALUES(42,'Singaporean Hokkien Fried Mee',20,5,'32 - 1 kg pkgs.',14.00);
INSERT INTO Products VALUES(43,'Ipoh Coffee',20,1,'16 - 500 g tins',46.00);
INSERT INTO Products VALUES(44,'Gula Malacca',20,2,'20 - 2 kg bags',19.45);
INSERT INTO Products VALUES(45,'Rgede sild',21,8,'1k pkg.',9.50);
INSERT INTO Products VALUES(46,'Spegesild',21,8,'4 - 450 g glasses',12.00);
INSERT INTO Products VALUES(47,'Zaanse koeken',22,3,'10 - 4 oz boxes',9.50);
INSERT INTO Products VALUES(48,'Chocolade',22,3,'10 pkgs.',12.75);
INSERT INTO Products VALUES(49,'Maxilaku',23,3,'24 - 50 g pkgs.',20.00);
INSERT INTO Products VALUES(50,'Valkoinen suklaa',23,3,'12 - 100 g bars',16.25);
INSERT INTO Products VALUES(51,'Manjimup Dried Apples',24,7,'50 - 300 g pkgs.',53.00);
INSERT INTO Products VALUES(52,'Filo Mix',24,5,'16 - 2 kg boxes',7.00);
INSERT INTO Products VALUES(53,'Perth Pasties',24,6,'48 pieces',32.80);
INSERT INTO Products VALUES(54,'Tourtire',25,6,'16 pies',7.45);
INSERT INTO Products VALUES(55,'Pt chinois',25,6,'24 boxes x 2 pies',24.00);
INSERT INTO Products VALUES(56,'Gnocchi di nonna Alice',26,5,'24 - 250 g pkgs.',38.00);
INSERT INTO Products VALUES(57,'Ravioli Angelo',26,5,'24 - 250 g pkgs.',19.50);
INSERT INTO Products VALUES(58,'Escargots de Bourgogne',27,8,'24 pieces',13.25);
INSERT INTO Products VALUES(59,'Raclette Courdavault',28,4,'5 kg pkg.',55.00);
INSERT INTO Products VALUES(60,'Camembert Pierrot',28,4,'15 - 300 g rounds',34.00);
INSERT INTO Products VALUES(61,'Sirop d''rable',29,2,'24 - 500 ml bottles',28.50);
INSERT INTO Products VALUES(62,'Tarte au sucre',29,3,'48 pies',49.30);
INSERT INTO Products VALUES(63,'Vegie-spread',7,2,'15 - 625 g jars',43.90);
INSERT INTO Products VALUES(64,'Wimmers gute Semmelkndel',12,5,'20 bags x 4 pieces',33.25);
INSERT INTO Products VALUES(65,'Louisiana Fiery Hot Pepper Sauce',2,2,'32 - 8 oz bottles',21.05);
INSERT INTO Products VALUES(66,'Louisiana Hot Spiced Okra',2,2,'24 - 8 oz jars',17.00);
INSERT INTO Products VALUES(67,'Laughing Lumberjack Lager',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(68,'Scottish Longbreads',8,3,'10 boxes x 8 pieces',12.50);
INSERT INTO Products VALUES(69,'Gudbrandsdalsost',15,4,'10 kg pkg.',36.00);
INSERT INTO Products VALUES(70,'Outback Lager',7,1,'24 - 355 ml bottles',15.00);
INSERT INTO Products VALUES(71,'Fltemysost',15,4,'10 - 500 g pkgs.',21.50);
INSERT INTO Products VALUES(72,'Mozzarella di Giovanni',14,4,'24 - 200 g pkgs.',34.80);
INSERT INTO Products VALUES(73,'Rd Kaviar',17,8,'24 - 150 g jars',15.00);
INSERT INTO Products VALUES(74,'Longlife Tofu',4,7,'5 kg pkg.',10.00);
INSERT INTO Products VALUES(75,'Rhnbru Klosterbier',12,1,'24 - 0.5 l bottles',7.75);
INSERT INTO Products VALUES(76,'Lakkalikri',23,1,'500 ml',18.00);
INSERT INTO Products VALUES(77,'Original Frankfurter grne Soe',12,2,'12 boxes',13.00);

INSERT INTO Orders VALUES(10248,90,5,'1996-07-04',3);
INSERT INTO Orders VALUES(10249,81,6,'1996-07-05',1);
INSERT INTO Orders VALUES(10250,34,4,'1996-07-08',2);
INSERT INTO Orders VALUES(10251,84,3,'1996-07-08',1);
INSERT INTO Orders VALUES(10252,76,4,'1996-07-09',2);
INSERT INTO Orders VALUES(10253,34,3,'1996-07-10',2);
INSERT INTO Orders VALUES(10254,14,5,'1996-07-11',2);
INSERT INTO Orders VALUES(10255,68,9,'1996-07-12',3);
INSERT INTO Orders VALUES(10256,88,3,'1996-07-15',2);
INSERT INTO Orders VALUES(10257,35,4,'1996-07-16',3);
INSERT INTO Orders VALUES(10258,20,1,'1996-07-17',1);
INSERT INTO Orders VALUES(10259,13,4,'1996-07-18',3);
INSERT INTO Orders VALUES(10260,55,4,'1996-07-19',1);
INSERT INTO Orders VALUES(10261,61,4,'1996-07-19',2);
INSERT INTO Orders VALUES(10262,65,8,'1996-07-22',3);
INSERT INTO Orders VALUES(10263,20,9,'1996-07-23',3);
INSERT INTO Orders VALUES(10264,24,6,'1996-07-24',3);
INSERT INTO Orders VALUES(10265,7,2,'1996-07-25',1);
INSERT INTO Orders VALUES(10266,87,3,'1996-07-26',3);
INSERT INTO Orders VALUES(10267,25,4,'1996-07-29',1);
INSERT INTO Orders VALUES(10268,33,8,'1996-07-30',3);
INSERT INTO Orders VALUES(10269,89,5,'1996-07-31',1);
INSERT INTO Orders VALUES(10270,87,1,'1996-08-01',1);
INSERT INTO Orders VALUES(10271,75,6,'1996-08-01',2);
INSERT INTO Orders VALUES(10272,65,6,'1996-08-02',2);
INSERT INTO Orders VALUES(10273,63,3,'1996-08-05',3);
INSERT INTO Orders VALUES(10274,85,6,'1996-08-06',1);
INSERT INTO Orders VALUES(10275,49,1,'1996-08-07',1);
INSERT INTO Orders VALUES(10276,80,8,'1996-08-08',3);
INSERT INTO Orders VALUES(10277,52,2,'1996-08-09',3);
INSERT INTO Orders VALUES(10278,5,8,'1996-08-12',2);
INSERT INTO Orders VALUES(10279,44,8,'1996-08-13',2);
INSERT INTO Orders VALUES(10280,5,2,'1996-08-14',1);
INSERT INTO Orders VALUES(10281,69,4,'1996-08-14',1);
INSERT INTO Orders VALUES(10282,69,4,'1996-08-15',1);
INSERT INTO Orders VALUES(10283,46,3,'1996-08-16',3);
INSERT INTO Orders VALUES(10284,44,4,'1996-08-19',1);
INSERT INTO Orders VALUES(10285,63,1,'1996-08-20',2);
INSERT INTO Orders VALUES(10286,63,8,'1996-08-21',3);
INSERT INTO Orders VALUES(10287,67,8,'1996-08-22',3);
INSERT INTO Orders VALUES(10288,66,4,'1996-08-23',1);
INSERT INTO Orders VALUES(10289,11,7,'1996-08-26',3);
INSERT INTO Orders VALUES(10290,15,8,'1996-08-27',1);
INSERT INTO Orders VALUES(10291,61,6,'1996-08-27',2);
INSERT INTO Orders VALUES(10292,81,1,'1996-08-28',2);
INSERT INTO Orders VALUES(10293,80,1,'1996-08-29',3);
INSERT INTO Orders VALUES(10294,65,4,'1996-08-30',2);
INSERT INTO Orders VALUES(10295,85,2,'1996-09-02',2);
INSERT INTO Orders VALUES(10296,46,6,'1996-09-03',1);
INSERT INTO Orders VALUES(10297,7,5,'1996-09-04',2);
INSERT INTO Orders VALUES(10298,37,6,'1996-09-05',2);
INSERT INTO Orders VALUES(10299,67,4,'1996-09-06',2);
INSERT INTO Orders VALUES(10300,49,2,'1996-09-09',2);
INSERT INTO Orders VALUES(10301,86,8,'1996-09-09',2);
INSERT INTO Orders VALUES(10302,76,4,'1996-09-10',2);
INSERT INTO Orders VALUES(10303,30,7,'1996-09-11',2);
INSERT INTO Orders VALUES(10304,80,1,'1996-09-12',2);
INSERT INTO Orders VALUES(10305,55,8,'1996-09-13',3);
INSERT INTO Orders VALUES(10306,69,1,'1996-09-16',3);
INSERT INTO Orders VALUES(10307,48,2,'1996-09-17',2);
INSERT INTO Orders VALUES(10308,2,7,'1996-09-18',3);
INSERT INTO Orders VALUES(10309,37,3,'1996-09-19',1);
INSERT INTO Orders VALUES(10310,77,8,'1996-09-20',2);
INSERT INTO Orders VALUES(10311,18,1,'1996-09-20',3);
INSERT INTO Orders VALUES(10312,86,2,'1996-09-23',2);
INSERT INTO Orders VALUES(10313,63,2,'1996-09-24',2);
INSERT INTO Orders VALUES(10314,65,1,'1996-09-25',2);
INSERT INTO Orders VALUES(10315,38,4,'1996-09-26',2);
INSERT INTO Orders VALUES(10316,65,1,'1996-09-27',3);
INSERT INTO Orders VALUES(10317,48,6,'1996-09-30',1);
INSERT INTO Orders VALUES(10318,38,8,'1996-10-01',2);
INSERT INTO Orders VALUES(10319,80,7,'1996-10-02',3);
INSERT INTO Orders VALUES(10320,87,5,'1996-10-03',3);
INSERT INTO Orders VALUES(10321,38,3,'1996-10-03',2);
INSERT INTO Orders VALUES(10322,58,7,'1996-10-04',3);
INSERT INTO Orders VALUES(10323,39,4,'1996-10-07',1);
INSERT INTO Orders VALUES(10324,71,9,'1996-10-08',1);
INSERT INTO Orders VALUES(10325,39,1,'1996-10-09',3);
INSERT INTO Orders VALUES(10326,8,4,'1996-10-10',2);
INSERT INTO Orders VALUES(10327,24,2,'1996-10-11',1);
INSERT INTO Orders VALUES(10328,28,4,'1996-10-14',3);
INSERT INTO Orders VALUES(10329,75,4,'1996-10-15',2);
INSERT INTO Orders VALUES(10330,46,3,'1996-10-16',1);
INSERT INTO Orders VALUES(10331,9,9,'1996-10-16',1);
INSERT INTO Orders VALUES(10332,51,3,'1996-10-17',2);
INSERT INTO Orders VALUES(10333,87,5,'1996-10-18',3);
INSERT INTO Orders VALUES(10334,84,8,'1996-10-21',2);
INSERT INTO Orders VALUES(10335,37,7,'1996-10-22',2);
INSERT INTO Orders VALUES(10336,60,7,'1996-10-23',2);
INSERT INTO Orders VALUES(10337,25,4,'1996-10-24',3);
INSERT INTO Orders VALUES(10338,55,4,'1996-10-25',3);
INSERT INTO Orders VALUES(10339,51,2,'1996-10-28',2);
INSERT INTO Orders VALUES(10340,9,1,'1996-10-29',3);
INSERT INTO Orders VALUES(10341,73,7,'1996-10-29',3);
INSERT INTO Orders VALUES(10342,25,4,'1996-10-30',2);
INSERT INTO Orders VALUES(10343,44,4,'1996-10-31',1);
INSERT INTO Orders VALUES(10344,89,4,'1996-11-01',2);
INSERT INTO Orders VALUES(10345,63,2,'1996-11-04',2);
INSERT INTO Orders VALUES(10346,65,3,'1996-11-05',3);
INSERT INTO Orders VALUES(10347,21,4,'1996-11-06',3);
INSERT INTO Orders VALUES(10348,86,4,'1996-11-07',2);
INSERT INTO Orders VALUES(10349,75,7,'1996-11-08',1);
INSERT INTO Orders VALUES(10350,41,6,'1996-11-11',2);
INSERT INTO Orders VALUES(10351,20,1,'1996-11-11',1);
INSERT INTO Orders VALUES(10352,28,3,'1996-11-12',3);
INSERT INTO Orders VALUES(10353,59,7,'1996-11-13',3);
INSERT INTO Orders VALUES(10354,58,8,'1996-11-14',3);
INSERT INTO Orders VALUES(10355,4,6,'1996-11-15',1);
INSERT INTO Orders VALUES(10356,86,6,'1996-11-18',2);
INSERT INTO Orders VALUES(10357,46,1,'1996-11-19',3);
INSERT INTO Orders VALUES(10358,41,5,'1996-11-20',1);
INSERT INTO Orders VALUES(10359,72,5,'1996-11-21',3);
INSERT INTO Orders VALUES(10360,7,4,'1996-11-22',3);
INSERT INTO Orders VALUES(10361,63,1,'1996-11-22',2);
INSERT INTO Orders VALUES(10362,9,3,'1996-11-25',1);
INSERT INTO Orders VALUES(10363,17,4,'1996-11-26',3);
INSERT INTO Orders VALUES(10364,19,1,'1996-11-26',1);
INSERT INTO Orders VALUES(10365,3,3,'1996-11-27',2);
INSERT INTO Orders VALUES(10366,29,8,'1996-11-28',2);
INSERT INTO Orders VALUES(10367,83,7,'1996-11-28',3);
INSERT INTO Orders VALUES(10368,20,2,'1996-11-29',2);
INSERT INTO Orders VALUES(10369,75,8,'1996-12-02',2);
INSERT INTO Orders VALUES(10370,14,6,'1996-12-03',2);
INSERT INTO Orders VALUES(10371,41,1,'1996-12-03',1);
INSERT INTO Orders VALUES(10372,62,5,'1996-12-04',2);
INSERT INTO Orders VALUES(10373,37,4,'1996-12-05',3);
INSERT INTO Orders VALUES(10374,91,1,'1996-12-05',3);
INSERT INTO Orders VALUES(10375,36,3,'1996-12-06',2);
INSERT INTO Orders VALUES(10376,51,1,'1996-12-09',2);
INSERT INTO Orders VALUES(10377,72,1,'1996-12-09',3);
INSERT INTO Orders VALUES(10378,24,5,'1996-12-10',3);
INSERT INTO Orders VALUES(10379,61,2,'1996-12-11',1);
INSERT INTO Orders VALUES(10380,37,8,'1996-12-12',3);
INSERT INTO Orders VALUES(10381,46,3,'1996-12-12',3);
INSERT INTO Orders VALUES(10382,20,4,'1996-12-13',1);
INSERT INTO Orders VALUES(10383,4,8,'1996-12-16',3);
INSERT INTO Orders VALUES(10384,5,3,'1996-12-16',3);
INSERT INTO Orders VALUES(10385,75,1,'1996-12-17',2);
INSERT INTO Orders VALUES(10386,21,9,'1996-12-18',3);
INSERT INTO Orders VALUES(10387,70,1,'1996-12-18',2);
INSERT INTO Orders VALUES(10388,72,2,'1996-12-19',1);
INSERT INTO Orders VALUES(10389,10,4,'1996-12-20',2);
INSERT INTO Orders VALUES(10390,20,6,'1996-12-23',1);
INSERT INTO Orders VALUES(10391,17,3,'1996-12-23',3);
INSERT INTO Orders VALUES(10392,59,2,'1996-12-24',3);
INSERT INTO Orders VALUES(10393,71,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10394,36,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10395,35,6,'1996-12-26',1);
INSERT INTO Orders VALUES(10396,25,1,'1996-12-27',3);
INSERT INTO Orders VALUES(10397,60,5,'1996-12-27',1);
INSERT INTO Orders VALUES(10398,71,2,'1996-12-30',3);
INSERT INTO Orders VALUES(10399,83,8,'1996-12-31',3);
INSERT INTO Orders VALUES(10400,19,1,'1997-01-01',3);
INSERT INTO Orders VALUES(10401,65,1,'1997-01-01',1);
INSERT INTO Orders VALUES(10402,20,8,'1997-01-02',2);
INSERT INTO Orders VALUES(10403,20,4,'1997-01-03',3);
INSERT INTO Orders VALUES(10404,49,2,'1997-01-03',1);
INSERT INTO Orders VALUES(10405,47,1,'1997-01-06',1);
INSERT INTO Orders VALUES(10406,62,7,'1997-01-07',1);
INSERT INTO Orders VALUES(10407,56,2,'1997-01-07',2);
INSERT INTO Orders VALUES(10408,23,8,'1997-01-08',1);
INSERT INTO Orders VALUES(10409,54,3,'1997-01-09',1);
INSERT INTO Orders VALUES(10410,10,3,'1997-01-10',3);
INSERT INTO Orders VALUES(10411,10,9,'1997-01-10',3);
INSERT INTO Orders VALUES(10412,87,8,'1997-01-13',2);
INSERT INTO Orders VALUES(10413,41,3,'1997-01-14',2);
INSERT INTO Orders VALUES(10414,21,2,'1997-01-14',3);
INSERT INTO Orders VALUES(10415,36,3,'1997-01-15',1);
INSERT INTO Orders VALUES(10416,87,8,'1997-01-16',3);
INSERT INTO Orders VALUES(10417,73,4,'1997-01-16',3);
INSERT INTO Orders VALUES(10418,63,4,'1997-01-17',1);
INSERT INTO Orders VALUES(10419,68,4,'1997-01-20',2);
INSERT INTO Orders VALUES(10420,88,3,'1997-01-21',1);
INSERT INTO Orders VALUES(10421,61,8,'1997-01-21',1);
INSERT INTO Orders VALUES(10422,27,2,'1997-01-22',1);
INSERT INTO Orders VALUES(10423,31,6,'1997-01-23',3);
INSERT INTO Orders VALUES(10424,51,7,'1997-01-23',2);
INSERT INTO Orders VALUES(10425,41,6,'1997-01-24',2);
INSERT INTO Orders VALUES(10426,29,4,'1997-01-27',1);
INSERT INTO Orders VALUES(10427,59,4,'1997-01-27',2);
INSERT INTO Orders VALUES(10428,66,7,'1997-01-28',1);
INSERT INTO Orders VALUES(10429,37,3,'1997-01-29',2);
INSERT INTO Orders VALUES(10430,20,4,'1997-01-30',1);
INSERT INTO Orders VALUES(10431,10,4,'1997-01-30',2);
INSERT INTO Orders VALUES(10432,75,3,'1997-01-31',2);
INSERT INTO Orders VALUES(10433,60,3,'1997-02-03',3);
INSERT INTO Orders VALUES(10434,24,3,'1997-02-03',2);
INSERT INTO Orders VALUES(10435,16,8,'1997-02-04',2);
INSERT INTO Orders VALUES(10436,7,3,'1997-02-05',2);
INSERT INTO Orders VALUES(10437,87,8,'1997-02-05',1);
INSERT INTO Orders VALUES(10438,79,3,'1997-02-06',2);
INSERT INTO Orders VALUES(10439,51,6,'1997-02-07',3);
INSERT INTO Orders VALUES(10440,71,4,'1997-02-10',2);
INSERT INTO Orders VALUES(10441,55,3,'1997-02-10',2);
INSERT INTO Orders VALUES(10442,20,3,'1997-02-11',2);
INSERT INTO Orders VALUES(10443,66,8,'1997-02-12',1);

INSERT INTO OrderDetails VALUES(1,10248,11,12);
INSERT INTO OrderDetails VALUES(2,10248,42,10);
INSERT INTO OrderDetails VALUES(3,10248,72,5);
INSERT INTO OrderDetails VALUES(4,10249,14,9);
INSERT INTO OrderDetails VALUES(5,10249,51,40);
INSERT INTO OrderDetails VALUES(6,10250,41,10);
INSERT INTO OrderDetails VALUES(7,10250,51,35);
INSERT INTO OrderDetails VALUES(8,10250,65,15);
INSERT INTO OrderDetails VALUES(9,10251,22,6);
INSERT INTO OrderDetails VALUES(10,10251,57,15);
INSERT INTO OrderDetails VALUES(11,10251,65,20);
INSERT INTO OrderDetails VALUES(12,10252,20,40);
INSERT INTO OrderDetails VALUES(13,10252,33,25);
INSERT INTO OrderDetails VALUES(14,10252,60,40);
INSERT INTO OrderDetails VALUES(15,10253,31,20);
INSERT INTO OrderDetails VALUES(16,10253,39,42);
INSERT INTO OrderDetails VALUES(17,10253,49,40);
INSERT INTO OrderDetails VALUES(18,10254,24,15);
INSERT INTO OrderDetails VALUES(19,10254,55,21);
INSERT INTO OrderDetails VALUES(20,10254,74,21);
INSERT INTO OrderDetails VALUES(21,10255,2,20);
INSERT INTO OrderDetails VALUES(22,10255,16,35);
INSERT INTO OrderDetails VALUES(23,10255,36,25);
INSERT INTO OrderDetails VALUES(24,10255,59,30);
INSERT INTO OrderDetails VALUES(25,10256,53,15);
INSERT INTO OrderDetails VALUES(26,10256,77,12);
INSERT INTO OrderDetails VALUES(27,10257,27,25);
INSERT INTO OrderDetails VALUES(28,10257,39,6);
INSERT INTO OrderDetails VALUES(29,10257,77,15);
INSERT INTO OrderDetails VALUES(30,10258,2,50);
INSERT INTO OrderDetails VALUES(31,10258,5,65);
INSERT INTO OrderDetails VALUES(32,10258,32,6);
INSERT INTO OrderDetails VALUES(33,10259,21,10);
INSERT INTO OrderDetails VALUES(34,10259,37,1);
INSERT INTO OrderDetails VALUES(35,10260,41,16);
INSERT INTO OrderDetails VALUES(36,10260,57,50);
INSERT INTO OrderDetails VALUES(37,10260,62,15);
INSERT INTO OrderDetails VALUES(38,10260,70,21);
INSERT INTO OrderDetails VALUES(39,10261,21,20);
INSERT INTO OrderDetails VALUES(40,10261,35,20);
INSERT INTO OrderDetails VALUES(41,10262,5,12);
INSERT INTO OrderDetails VALUES(42,10262,7,15);
INSERT INTO OrderDetails VALUES(43,10262,56,2);
INSERT INTO OrderDetails VALUES(44,10263,16,60);
INSERT INTO OrderDetails VALUES(45,10263,24,28);
INSERT INTO OrderDetails VALUES(46,10263,30,60);
INSERT INTO OrderDetails VALUES(47,10263,74,36);
INSERT INTO OrderDetails VALUES(48,10264,2,35);
INSERT INTO OrderDetails VALUES(49,10264,41,25);
INSERT INTO OrderDetails VALUES(50,10265,17,30);
INSERT INTO OrderDetails VALUES(51,10265,70,20);
INSERT INTO OrderDetails VALUES(52,10266,12,12);
INSERT INTO OrderDetails VALUES(53,10267,40,50);
INSERT INTO OrderDetails VALUES(54,10267,59,70);
INSERT INTO OrderDetails VALUES(55,10267,76,15);
INSERT INTO OrderDetails VALUES(56,10268,29,10);
INSERT INTO OrderDetails VALUES(57,10268,72,4);
INSERT INTO OrderDetails VALUES(58,10269,33,60);
INSERT INTO OrderDetails VALUES(59,10269,72,20);
INSERT INTO OrderDetails VALUES(60,10270,36,30);
INSERT INTO OrderDetails VALUES(61,10270,43,25);
INSERT INTO OrderDetails VALUES(62,10271,33,24);
INSERT INTO OrderDetails VALUES(63,10272,20,6);
INSERT INTO OrderDetails VALUES(64,10272,31,40);
INSERT INTO OrderDetails VALUES(65,10272,72,24);
INSERT INTO OrderDetails VALUES(66,10273,10,24);
INSERT INTO OrderDetails VALUES(67,10273,31,15);
INSERT INTO OrderDetails VALUES(68,10273,33,20);
INSERT INTO OrderDetails VALUES(69,10273,40,60);
INSERT INTO OrderDetails VALUES(70,10273,76,33);
INSERT INTO OrderDetails VALUES(71,10274,71,20);
INSERT INTO OrderDetails VALUES(72,10274,72,7);
INSERT INTO OrderDetails VALUES(73,10275,24,12);
INSERT INTO OrderDetails VALUES(74,10275,59,6);
INSERT INTO OrderDetails VALUES(75,10276,10,15);
INSERT INTO OrderDetails VALUES(76,10276,13,10);
INSERT INTO OrderDetails VALUES(77,10277,28,20);
INSERT INTO OrderDetails VALUES(78,10277,62,12);
INSERT INTO OrderDetails VALUES(79,10278,44,16);
INSERT INTO OrderDetails VALUES(80,10278,59,15);
INSERT INTO OrderDetails VALUES(81,10278,63,8);
INSERT INTO OrderDetails VALUES(82,10278,73,25);
INSERT INTO OrderDetails VALUES(83,10279,17,15);
INSERT INTO OrderDetails VALUES(84,10280,24,12);
INSERT INTO OrderDetails VALUES(85,10280,55,20);
INSERT INTO OrderDetails VALUES(86,10280,75,30);
INSERT INTO OrderDetails VALUES(87,10281,19,1);
INSERT INTO OrderDetails VALUES(88,10281,24,6);
INSERT INTO OrderDetails VALUES(89,10281,35,4);
INSERT INTO OrderDetails VALUES(90,10282,30,6);
INSERT INTO OrderDetails VALUES(91,10282,57,2);
INSERT INTO OrderDetails VALUES(92,10283,15,20);
INSERT INTO OrderDetails VALUES(93,10283,19,18);
INSERT INTO OrderDetails VALUES(94,10283,60,35);
INSERT INTO OrderDetails VALUES(95,10283,72,3);
INSERT INTO OrderDetails VALUES(96,10284,27,15);
INSERT INTO OrderDetails VALUES(97,10284,44,21);
INSERT INTO OrderDetails VALUES(98,10284,60,20);
INSERT INTO OrderDetails VALUES(99,10284,67,5);
INSERT INTO OrderDetails VALUES(100,10285,1,45);
INSERT INTO OrderDetails VALUES(101,10285,40,40);
INSERT INTO OrderDetails VALUES(102,10285,53,36);
INSERT INTO OrderDetails VALUES(103,10286,35,100);
INSERT INTO OrderDetails VALUES(104,10286,62,40);
INSERT INTO OrderDetails VALUES(105,10287,16,40);
INSERT INTO OrderDetails VALUES(106,10287,34,20);
INSERT INTO OrderDetails VALUES(107,10287,46,15);
INSERT INTO OrderDetails VALUES(108,10288,54,10);
INSERT INTO OrderDetails VALUES(109,10288,68,3);
INSERT INTO OrderDetails VALUES(110,10289,3,30);
INSERT INTO OrderDetails VALUES(111,10289,64,9);
INSERT INTO OrderDetails VALUES(112,10290,5,20);
INSERT INTO OrderDetails VALUES(113,10290,29,15);
INSERT INTO OrderDetails VALUES(114,10290,49,15);
INSERT INTO OrderDetails VALUES(115,10290,77,10);
INSERT INTO OrderDetails VALUES(116,10291,13,20);
INSERT INTO OrderDetails VALUES(117,10291,44,24);
INSERT INTO OrderDetails VALUES(118,10291,51,2);
INSERT INTO OrderDetails VALUES(119,10292,20,20);
INSERT INTO OrderDetails VALUES(120,10293,18,12);
INSERT INTO OrderDetails VALUES(121,10293,24,10);
INSERT INTO OrderDetails VALUES(122,10293,63,5);
INSERT INTO OrderDetails VALUES(123,10293,75,6);
INSERT INTO OrderDetails VALUES(124,10294,1,18);
INSERT INTO OrderDetails VALUES(125,10294,17,15);
INSERT INTO OrderDetails VALUES(126,10294,43,15);
INSERT INTO OrderDetails VALUES(127,10294,60,21);
INSERT INTO OrderDetails VALUES(128,10294,75,6);
INSERT INTO OrderDetails VALUES(129,10295,56,4);
INSERT INTO OrderDetails VALUES(130,10296,11,12);
INSERT INTO OrderDetails VALUES(131,10296,16,30);
INSERT INTO OrderDetails VALUES(132,10296,69,15);
INSERT INTO OrderDetails VALUES(133,10297,39,60);
INSERT INTO OrderDetails VALUES(134,10297,72,20);
INSERT INTO OrderDetails VALUES(135,10298,2,40);
INSERT INTO OrderDetails VALUES(136,10298,36,40);
INSERT INTO OrderDetails VALUES(137,10298,59,30);
INSERT INTO OrderDetails VALUES(138,10298,62,15);
INSERT INTO OrderDetails VALUES(139,10299,19,15);
INSERT INTO OrderDetails VALUES(140,10299,70,20);
INSERT INTO OrderDetails VALUES(141,10300,66,30);
INSERT INTO OrderDetails VALUES(142,10300,68,20);
INSERT INTO OrderDetails VALUES(143,10301,40,10);
INSERT INTO OrderDetails VALUES(144,10301,56,20);
INSERT INTO OrderDetails VALUES(145,10302,17,40);
INSERT INTO OrderDetails VALUES(146,10302,28,28);
INSERT INTO OrderDetails VALUES(147,10302,43,12);
INSERT INTO OrderDetails VALUES(148,10303,40,40);
INSERT INTO OrderDetails VALUES(149,10303,65,30);
INSERT INTO OrderDetails VALUES(150,10303,68,15);
INSERT INTO OrderDetails VALUES(151,10304,49,30);
INSERT INTO OrderDetails VALUES(152,10304,59,10);
INSERT INTO OrderDetails VALUES(153,10304,71,2);
INSERT INTO OrderDetails VALUES(154,10305,18,25);
INSERT INTO OrderDetails VALUES(155,10305,29,25);
INSERT INTO OrderDetails VALUES(156,10305,39,30);
INSERT INTO OrderDetails VALUES(157,10306,30,10);
INSERT INTO OrderDetails VALUES(158,10306,53,10);
INSERT INTO OrderDetails VALUES(159,10306,54,5);
INSERT INTO OrderDetails VALUES(160,10307,62,10);
INSERT INTO OrderDetails VALUES(161,10307,68,3);
INSERT INTO OrderDetails VALUES(162,10308,69,1);
INSERT INTO OrderDetails VALUES(163,10308,70,5);
INSERT INTO OrderDetails VALUES(164,10309,4,20);
INSERT INTO OrderDetails VALUES(165,10309,6,30);
INSERT INTO OrderDetails VALUES(166,10309,42,2);
INSERT INTO OrderDetails VALUES(167,10309,43,20);
INSERT INTO OrderDetails VALUES(168,10309,71,3);
INSERT INTO OrderDetails VALUES(169,10310,16,10);
INSERT INTO OrderDetails VALUES(170,10310,62,5);
INSERT INTO OrderDetails VALUES(171,10311,42,6);
INSERT INTO OrderDetails VALUES(172,10311,69,7);
INSERT INTO OrderDetails VALUES(173,10312,28,4);
INSERT INTO OrderDetails VALUES(174,10312,43,24);
INSERT INTO OrderDetails VALUES(175,10312,53,20);
INSERT INTO OrderDetails VALUES(176,10312,75,10);
INSERT INTO OrderDetails VALUES(177,10313,36,12);
INSERT INTO OrderDetails VALUES(178,10314,32,40);
INSERT INTO OrderDetails VALUES(179,10314,58,30);
INSERT INTO OrderDetails VALUES(180,10314,62,25);
INSERT INTO OrderDetails VALUES(181,10315,34,14);
INSERT INTO OrderDetails VALUES(182,10315,70,30);
INSERT INTO OrderDetails VALUES(183,10316,41,10);
INSERT INTO OrderDetails VALUES(184,10316,62,70);
INSERT INTO OrderDetails VALUES(185,10317,1,20);
INSERT INTO OrderDetails VALUES(186,10318,41,20);
INSERT INTO OrderDetails VALUES(187,10318,76,6);
INSERT INTO OrderDetails VALUES(188,10319,17,8);
INSERT INTO OrderDetails VALUES(189,10319,28,14);
INSERT INTO OrderDetails VALUES(190,10319,76,30);
INSERT INTO OrderDetails VALUES(191,10320,71,30);
INSERT INTO OrderDetails VALUES(192,10321,35,10);
INSERT INTO OrderDetails VALUES(193,10322,52,20);
INSERT INTO OrderDetails VALUES(194,10323,15,5);
INSERT INTO OrderDetails VALUES(195,10323,25,4);
INSERT INTO OrderDetails VALUES(196,10323,39,4);
INSERT INTO OrderDetails VALUES(197,10324,16,21);
INSERT INTO OrderDetails VALUES(198,10324,35,70);
INSERT INTO OrderDetails VALUES(199,10324,46,30);
INSERT INTO OrderDetails VALUES(200,10324,59,40);
INSERT INTO OrderDetails VALUES(201,10324,63,80);
INSERT INTO OrderDetails VALUES(202,10325,6,6);
INSERT INTO OrderDetails VALUES(203,10325,13,12);
INSERT INTO OrderDetails VALUES(204,10325,14,9);
INSERT INTO OrderDetails VALUES(205,10325,31,4);
INSERT INTO OrderDetails VALUES(206,10325,72,40);
INSERT INTO OrderDetails VALUES(207,10326,4,24);
INSERT INTO OrderDetails VALUES(208,10326,57,16);
INSERT INTO OrderDetails VALUES(209,10326,75,50);
INSERT INTO OrderDetails VALUES(210,10327,2,25);
INSERT INTO OrderDetails VALUES(211,10327,11,50);
INSERT INTO OrderDetails VALUES(212,10327,30,35);
INSERT INTO OrderDetails VALUES(213,10327,58,30);
INSERT INTO OrderDetails VALUES(214,10328,59,9);
INSERT INTO OrderDetails VALUES(215,10328,65,40);
INSERT INTO OrderDetails VALUES(216,10328,68,10);
INSERT INTO OrderDetails VALUES(217,10329,19,10);
INSERT INTO OrderDetails VALUES(218,10329,30,8);
INSERT INTO OrderDetails VALUES(219,10329,38,20);
INSERT INTO OrderDetails VALUES(220,10329,56,12);
INSERT INTO OrderDetails VALUES(221,10330,26,50);
INSERT INTO OrderDetails VALUES(222,10330,72,25);
INSERT INTO OrderDetails VALUES(223,10331,54,15);
INSERT INTO OrderDetails VALUES(224,10332,18,40);
INSERT INTO OrderDetails VALUES(225,10332,42,10);
INSERT INTO OrderDetails VALUES(226,10332,47,16);
INSERT INTO OrderDetails VALUES(227,10333,14,10);
INSERT INTO OrderDetails VALUES(228,10333,21,10);
INSERT INTO OrderDetails VALUES(229,10333,71,40);
INSERT INTO OrderDetails VALUES(230,10334,52,8);
INSERT INTO OrderDetails VALUES(231,10334,68,10);
INSERT INTO OrderDetails VALUES(232,10335,2,7);
INSERT INTO OrderDetails VALUES(233,10335,31,25);
INSERT INTO OrderDetails VALUES(234,10335,32,6);
INSERT INTO OrderDetails VALUES(235,10335,51,48);
INSERT INTO OrderDetails VALUES(236,10336,4,18);
INSERT INTO OrderDetails VALUES(237,10337,23,40);
INSERT INTO OrderDetails VALUES(238,10337,26,24);
INSERT INTO OrderDetails VALUES(239,10337,36,20);
INSERT INTO OrderDetails VALUES(240,10337,37,28);
INSERT INTO OrderDetails VALUES(241,10337,72,25);
INSERT INTO OrderDetails VALUES(242,10338,17,20);
INSERT INTO OrderDetails VALUES(243,10338,30,15);
INSERT INTO OrderDetails VALUES(244,10339,4,10);
INSERT INTO OrderDetails VALUES(245,10339,17,70);
INSERT INTO OrderDetails VALUES(246,10339,62,28);
INSERT INTO OrderDetails VALUES(247,10340,18,20);
INSERT INTO OrderDetails VALUES(248,10340,41,12);
INSERT INTO OrderDetails VALUES(249,10340,43,40);
INSERT INTO OrderDetails VALUES(250,10341,33,8);
INSERT INTO OrderDetails VALUES(251,10341,59,9);
INSERT INTO OrderDetails VALUES(252,10342,2,24);
INSERT INTO OrderDetails VALUES(253,10342,31,56);
INSERT INTO OrderDetails VALUES(254,10342,36,40);
INSERT INTO OrderDetails VALUES(255,10342,55,40);
INSERT INTO OrderDetails VALUES(256,10343,64,50);
INSERT INTO OrderDetails VALUES(257,10343,68,4);
INSERT INTO OrderDetails VALUES(258,10343,76,15);
INSERT INTO OrderDetails VALUES(259,10344,4,35);
INSERT INTO OrderDetails VALUES(260,10344,8,70);
INSERT INTO OrderDetails VALUES(261,10345,8,70);
INSERT INTO OrderDetails VALUES(262,10345,19,80);
INSERT INTO OrderDetails VALUES(263,10345,42,9);
INSERT INTO OrderDetails VALUES(264,10346,17,36);
INSERT INTO OrderDetails VALUES(265,10346,56,20);
INSERT INTO OrderDetails VALUES(266,10347,25,10);
INSERT INTO OrderDetails VALUES(267,10347,39,50);
INSERT INTO OrderDetails VALUES(268,10347,40,4);
INSERT INTO OrderDetails VALUES(269,10347,75,6);
INSERT INTO OrderDetails VALUES(270,10348,1,15);
INSERT INTO OrderDetails VALUES(271,10348,23,25);
INSERT INTO OrderDetails VALUES(272,10349,54,24);
INSERT INTO OrderDetails VALUES(273,10350,50,15);
INSERT INTO OrderDetails VALUES(274,10350,69,18);
INSERT INTO OrderDetails VALUES(275,10351,38,20);
INSERT INTO OrderDetails VALUES(276,10351,41,13);
INSERT INTO OrderDetails VALUES(277,10351,44,77);
INSERT INTO OrderDetails VALUES(278,10351,65,10);
INSERT INTO OrderDetails VALUES(279,10352,24,10);
INSERT INTO OrderDetails VALUES(280,10352,54,20);
INSERT INTO OrderDetails VALUES(281,10353,11,12);
INSERT INTO OrderDetails VALUES(282,10353,38,50);
INSERT INTO OrderDetails VALUES(283,10354,1,12);
INSERT INTO OrderDetails VALUES(284,10354,29,4);
INSERT INTO OrderDetails VALUES(285,10355,24,25);
INSERT INTO OrderDetails VALUES(286,10355,57,25);
INSERT INTO OrderDetails VALUES(287,10356,31,30);
INSERT INTO OrderDetails VALUES(288,10356,55,12);
INSERT INTO OrderDetails VALUES(289,10356,69,20);
INSERT INTO OrderDetails VALUES(290,10357,10,30);
INSERT INTO OrderDetails VALUES(291,10357,26,16);
INSERT INTO OrderDetails VALUES(292,10357,60,8);
INSERT INTO OrderDetails VALUES(293,10358,24,10);
INSERT INTO OrderDetails VALUES(294,10358,34,10);
INSERT INTO OrderDetails VALUES(295,10358,36,20);
INSERT INTO OrderDetails VALUES(296,10359,16,56);
INSERT INTO OrderDetails VALUES(297,10359,31,70);
INSERT INTO OrderDetails VALUES(298,10359,60,80);
INSERT INTO OrderDetails VALUES(299,10360,28,30);
INSERT INTO OrderDetails VALUES(300,10360,29,35);
INSERT INTO OrderDetails VALUES(301,10360,38,10);
INSERT INTO OrderDetails VALUES(302,10360,49,35);
INSERT INTO OrderDetails VALUES(303,10360,54,28);
INSERT INTO OrderDetails VALUES(304,10361,39,54);
INSERT INTO OrderDetails VALUES(305,10361,60,55);
INSERT INTO OrderDetails VALUES(306,10362,25,50);
INSERT INTO OrderDetails VALUES(307,10362,51,20);
INSERT INTO OrderDetails VALUES(308,10362,54,24);
INSERT INTO OrderDetails VALUES(309,10363,31,20);
INSERT INTO OrderDetails VALUES(310,10363,75,12);
INSERT INTO OrderDetails VALUES(311,10363,76,12);
INSERT INTO OrderDetails VALUES(312,10364,69,30);
INSERT INTO OrderDetails VALUES(313,10364,71,5);
INSERT INTO OrderDetails VALUES(314,10365,11,24);
INSERT INTO OrderDetails VALUES(315,10366,65,5);
INSERT INTO OrderDetails VALUES(316,10366,77,5);
INSERT INTO OrderDetails VALUES(317,10367,34,36);
INSERT INTO OrderDetails VALUES(318,10367,54,18);
INSERT INTO OrderDetails VALUES(319,10367,65,15);
INSERT INTO OrderDetails VALUES(320,10367,77,7);
INSERT INTO OrderDetails VALUES(321,10368,21,5);
INSERT INTO OrderDetails VALUES(322,10368,28,13);
INSERT INTO OrderDetails VALUES(323,10368,57,25);
INSERT INTO OrderDetails VALUES(324,10368,64,35);
INSERT INTO OrderDetails VALUES(325,10369,29,20);
INSERT INTO OrderDetails VALUES(326,10369,56,18);
INSERT INTO OrderDetails VALUES(327,10370,1,15);
INSERT INTO OrderDetails VALUES(328,10370,64,30);
INSERT INTO OrderDetails VALUES(329,10370,74,20);
INSERT INTO OrderDetails VALUES(330,10371,36,6);
INSERT INTO OrderDetails VALUES(331,10372,20,12);
INSERT INTO OrderDetails VALUES(332,10372,38,40);
INSERT INTO OrderDetails VALUES(333,10372,60,70);
INSERT INTO OrderDetails VALUES(334,10372,72,42);
INSERT INTO OrderDetails VALUES(335,10373,58,80);
INSERT INTO OrderDetails VALUES(336,10373,71,50);
INSERT INTO OrderDetails VALUES(337,10374,31,30);
INSERT INTO OrderDetails VALUES(338,10374,58,15);
INSERT INTO OrderDetails VALUES(339,10375,14,15);
INSERT INTO OrderDetails VALUES(340,10375,54,10);
INSERT INTO OrderDetails VALUES(341,10376,31,42);
INSERT INTO OrderDetails VALUES(342,10377,28,20);
INSERT INTO OrderDetails VALUES(343,10377,39,20);
INSERT INTO OrderDetails VALUES(344,10378,71,6);
INSERT INTO OrderDetails VALUES(345,10379,41,8);
INSERT INTO OrderDetails VALUES(346,10379,63,16);
INSERT INTO OrderDetails VALUES(347,10379,65,20);
INSERT INTO OrderDetails VALUES(348,10380,30,18);
INSERT INTO OrderDetails VALUES(349,10380,53,20);
INSERT INTO OrderDetails VALUES(350,10380,60,6);
INSERT INTO OrderDetails VALUES(351,10380,70,30);
INSERT INTO OrderDetails VALUES(352,10381,74,14);
INSERT INTO OrderDetails VALUES(353,10382,5,32);
INSERT INTO OrderDetails VALUES(354,10382,18,9);
INSERT INTO OrderDetails VALUES(355,10382,29,14);
INSERT INTO OrderDetails VALUES(356,10382,33,60);
INSERT INTO OrderDetails VALUES(357,10382,74,50);
INSERT INTO OrderDetails VALUES(358,10383,13,20);
INSERT INTO OrderDetails VALUES(359,10383,50,15);
INSERT INTO OrderDetails VALUES(360,10383,56,20);
INSERT INTO OrderDetails VALUES(361,10384,20,28);
INSERT INTO OrderDetails VALUES(362,10384,60,15);
INSERT INTO OrderDetails VALUES(363,10385,7,10);
INSERT INTO OrderDetails VALUES(364,10385,60,20);
INSERT INTO OrderDetails VALUES(365,10385,68,8);
INSERT INTO OrderDetails VALUES(366,10386,24,15);
INSERT INTO OrderDetails VALUES(367,10386,34,10);
INSERT INTO OrderDetails VALUES(368,10387,24,15);
INSERT INTO OrderDetails VALUES(369,10387,28,6);
INSERT INTO OrderDetails VALUES(370,10387,59,12);
INSERT INTO OrderDetails VALUES(371,10387,71,15);
INSERT INTO OrderDetails VALUES(372,10388,45,15);
INSERT INTO OrderDetails VALUES(373,10388,52,20);
INSERT INTO OrderDetails VALUES(374,10388,53,40);
INSERT INTO OrderDetails VALUES(375,10389,10,16);
INSERT INTO OrderDetails VALUES(376,10389,55,15);
INSERT INTO OrderDetails VALUES(377,10389,62,20);
INSERT INTO OrderDetails VALUES(378,10389,70,30);
INSERT INTO OrderDetails VALUES(379,10390,31,60);
INSERT INTO OrderDetails VALUES(380,10390,35,40);
INSERT INTO OrderDetails VALUES(381,10390,46,45);
INSERT INTO OrderDetails VALUES(382,10390,72,24);
INSERT INTO OrderDetails VALUES(383,10391,13,18);
INSERT INTO OrderDetails VALUES(384,10392,69,50);
INSERT INTO OrderDetails VALUES(385,10393,2,25);
INSERT INTO OrderDetails VALUES(386,10393,14,42);
INSERT INTO OrderDetails VALUES(387,10393,25,7);
INSERT INTO OrderDetails VALUES(388,10393,26,70);
INSERT INTO OrderDetails VALUES(389,10393,31,32);
INSERT INTO OrderDetails VALUES(390,10394,13,10);
INSERT INTO OrderDetails VALUES(391,10394,62,10);
INSERT INTO OrderDetails VALUES(392,10395,46,28);
INSERT INTO OrderDetails VALUES(393,10395,53,70);
INSERT INTO OrderDetails VALUES(394,10395,69,8);
INSERT INTO OrderDetails VALUES(395,10396,23,40);
INSERT INTO OrderDetails VALUES(396,10396,71,60);
INSERT INTO OrderDetails VALUES(397,10396,72,21);
INSERT INTO OrderDetails VALUES(398,10397,21,10);
INSERT INTO OrderDetails VALUES(399,10397,51,18);
INSERT INTO OrderDetails VALUES(400,10398,35,30);
INSERT INTO OrderDetails VALUES(401,10398,55,120);
INSERT INTO OrderDetails VALUES(402,10399,68,60);
INSERT INTO OrderDetails VALUES(403,10399,71,30);
INSERT INTO OrderDetails VALUES(404,10399,76,35);
INSERT INTO OrderDetails VALUES(405,10399,77,14);
INSERT INTO OrderDetails VALUES(406,10400,29,21);
INSERT INTO OrderDetails VALUES(407,10400,35,35);
INSERT INTO OrderDetails VALUES(408,10400,49,30);
INSERT INTO OrderDetails VALUES(409,10401,30,18);
INSERT INTO OrderDetails VALUES(410,10401,56,70);
INSERT INTO OrderDetails VALUES(411,10401,65,20);
INSERT INTO OrderDetails VALUES(412,10401,71,60);
INSERT INTO OrderDetails VALUES(413,10402,23,60);
INSERT INTO OrderDetails VALUES(414,10402,63,65);
INSERT INTO OrderDetails VALUES(415,10403,16,21);
INSERT INTO OrderDetails VALUES(416,10403,48,70);
INSERT INTO OrderDetails VALUES(417,10404,26,30);
INSERT INTO OrderDetails VALUES(418,10404,42,40);
INSERT INTO OrderDetails VALUES(419,10404,49,30);
INSERT INTO OrderDetails VALUES(420,10405,3,50);
INSERT INTO OrderDetails VALUES(421,10406,1,10);
INSERT INTO OrderDetails VALUES(422,10406,21,30);
INSERT INTO OrderDetails VALUES(423,10406,28,42);
INSERT INTO OrderDetails VALUES(424,10406,36,5);
INSERT INTO OrderDetails VALUES(425,10406,40,2);
INSERT INTO OrderDetails VALUES(426,10407,11,30);
INSERT INTO OrderDetails VALUES(427,10407,69,15);
INSERT INTO OrderDetails VALUES(428,10407,71,15);
INSERT INTO OrderDetails VALUES(429,10408,37,10);
INSERT INTO OrderDetails VALUES(430,10408,54,6);
INSERT INTO OrderDetails VALUES(431,10408,62,35);
INSERT INTO OrderDetails VALUES(432,10409,14,12);
INSERT INTO OrderDetails VALUES(433,10409,21,12);
INSERT INTO OrderDetails VALUES(434,10410,33,49);
INSERT INTO OrderDetails VALUES(435,10410,59,16);
INSERT INTO OrderDetails VALUES(436,10411,41,25);
INSERT INTO OrderDetails VALUES(437,10411,44,40);
INSERT INTO OrderDetails VALUES(438,10411,59,9);
INSERT INTO OrderDetails VALUES(439,10412,14,20);
INSERT INTO OrderDetails VALUES(440,10413,1,24);
INSERT INTO OrderDetails VALUES(441,10413,62,40);
INSERT INTO OrderDetails VALUES(442,10413,76,14);
INSERT INTO OrderDetails VALUES(443,10414,19,18);
INSERT INTO OrderDetails VALUES(444,10414,33,50);
INSERT INTO OrderDetails VALUES(445,10415,17,2);
INSERT INTO OrderDetails VALUES(446,10415,33,20);
INSERT INTO OrderDetails VALUES(447,10416,19,20);
INSERT INTO OrderDetails VALUES(448,10416,53,10);
INSERT INTO OrderDetails VALUES(449,10416,57,20);
INSERT INTO OrderDetails VALUES(450,10417,38,50);
INSERT INTO OrderDetails VALUES(451,10417,46,2);
INSERT INTO OrderDetails VALUES(452,10417,68,36);
INSERT INTO OrderDetails VALUES(453,10417,77,35);
INSERT INTO OrderDetails VALUES(454,10418,2,60);
INSERT INTO OrderDetails VALUES(455,10418,47,55);
INSERT INTO OrderDetails VALUES(456,10418,61,16);
INSERT INTO OrderDetails VALUES(457,10418,74,15);
INSERT INTO OrderDetails VALUES(458,10419,60,60);
INSERT INTO OrderDetails VALUES(459,10419,69,20);
INSERT INTO OrderDetails VALUES(460,10420,9,20);
INSERT INTO OrderDetails VALUES(461,10420,13,2);
INSERT INTO OrderDetails VALUES(462,10420,70,8);
INSERT INTO OrderDetails VALUES(463,10420,73,20);
INSERT INTO OrderDetails VALUES(464,10421,19,4);
INSERT INTO OrderDetails VALUES(465,10421,26,30);
INSERT INTO OrderDetails VALUES(466,10421,53,15);
INSERT INTO OrderDetails VALUES(467,10421,77,10);
INSERT INTO OrderDetails VALUES(468,10422,26,2);
INSERT INTO OrderDetails VALUES(469,10423,31,14);
INSERT INTO OrderDetails VALUES(470,10423,59,20);
INSERT INTO OrderDetails VALUES(471,10424,35,60);
INSERT INTO OrderDetails VALUES(472,10424,38,49);
INSERT INTO OrderDetails VALUES(473,10424,68,30);
INSERT INTO OrderDetails VALUES(474,10425,55,10);
INSERT INTO OrderDetails VALUES(475,10425,76,20);
INSERT INTO OrderDetails VALUES(476,10426,56,5);
INSERT INTO OrderDetails VALUES(477,10426,64,7);
INSERT INTO OrderDetails VALUES(478,10427,14,35);
INSERT INTO OrderDetails VALUES(479,10428,46,20);
INSERT INTO OrderDetails VALUES(480,10429,50,40);
INSERT INTO OrderDetails VALUES(481,10429,63,35);
INSERT INTO OrderDetails VALUES(482,10430,17,45);
INSERT INTO OrderDetails VALUES(483,10430,21,50);
INSERT INTO OrderDetails VALUES(484,10430,56,30);
INSERT INTO OrderDetails VALUES(485,10430,59,70);
INSERT INTO OrderDetails VALUES(486,10431,17,50);
INSERT INTO OrderDetails VALUES(487,10431,40,50);
INSERT INTO OrderDetails VALUES(488,10431,47,30);
INSERT INTO OrderDetails VALUES(489,10432,26,10);
INSERT INTO OrderDetails VALUES(490,10432,54,40);
INSERT INTO OrderDetails VALUES(491,10433,56,28);
INSERT INTO OrderDetails VALUES(492,10434,11,6);
INSERT INTO OrderDetails VALUES(493,10434,76,18);
INSERT INTO OrderDetails VALUES(494,10435,2,10);
INSERT INTO OrderDetails VALUES(495,10435,22,12);
INSERT INTO OrderDetails VALUES(496,10435,72,10);
INSERT INTO OrderDetails VALUES(497,10436,46,5);
INSERT INTO OrderDetails VALUES(498,10436,56,40);
INSERT INTO OrderDetails VALUES(499,10436,64,30);
INSERT INTO OrderDetails VALUES(500,10436,75,24);
INSERT INTO OrderDetails VALUES(501,10437,53,15);
INSERT INTO OrderDetails VALUES(502,10438,19,15);
INSERT INTO OrderDetails VALUES(503,10438,34,20);
INSERT INTO OrderDetails VALUES(504,10438,57,15);
INSERT INTO OrderDetails VALUES(505,10439,12,15);
INSERT INTO OrderDetails VALUES(506,10439,16,16);
INSERT INTO OrderDetails VALUES(507,10439,64,6);
INSERT INTO OrderDetails VALUES(508,10439,74,30);
INSERT INTO OrderDetails VALUES(509,10440,2,45);
INSERT INTO OrderDetails VALUES(510,10440,16,49);
INSERT INTO OrderDetails VALUES(511,10440,29,24);
INSERT INTO OrderDetails VALUES(512,10440,61,90);
INSERT INTO OrderDetails VALUES(513,10441,27,50);
INSERT INTO OrderDetails VALUES(514,10442,11,30);
INSERT INTO OrderDetails VALUES(515,10442,54,80);
INSERT INTO OrderDetails VALUES(516,10442,66,60);
INSERT INTO OrderDetails VALUES(517,10443,11,6);
INSERT INTO OrderDetails VALUES(518,10443,28,12);
`;let Ta=null;function Mh(){return Ta}async function Vd(){try{Ta=await Q1(),Ta.run(J1),console.log("Database initialized successfully")}catch(r){throw console.error("database.initDatabase: Failed to initialize database: ",r),r}}function Y1(r){const e=Mh(),t=`
    SELECT 
      p."from" as from_col,
      p."table" as to_table,
      p."to" as to_col
    FROM pragma_foreign_key_list('${r}') p
  `;try{const i=e.exec(t)[0];if(!i)return{};const n={};return i.values.forEach(s=>{n[s[0]]={table:s[1],column:s[2]}}),n}catch(i){return console.error("Error getting foreign keys:",i),{}}}function Z1(){const r=Mh();return{name:"Northwind",tables:r.exec(`
    SELECT name 
    FROM sqlite_master 
    WHERE type='table' 
    AND name NOT LIKE 'sqlite_%'
    ORDER BY name
  `)[0].values.map(t=>t[0]).map(t=>{const i=r.exec(`PRAGMA table_info([${t}])`)[0],n=Y1(t),s=i.values.map(o=>({name:o[1],type:o[2],notnull:o[3],pk:o[5],fk:n[o[1]]}));return{name:t,columns:s}})}}function eS(r,e){const t=[/near "([^"]+)": syntax error/,/no such table: ([^\s]+)/,/no such column: ([^\s]+)/];for(const i of t){const n=e.match(i);if(n){const s=n[1],o=r.split(`
`);for(let l=0;l<o.length;l++)if(o[l].includes(s))return l+1}}return null}function tS(r){try{const e=Mh();if(r.trim().toLowerCase().startsWith("select")){const i=e.exec(r)[0];return i?{results:i.values.map(s=>{const o={};return i.columns.forEach((l,a)=>{o[l]=s[a]}),o}),columns:i.columns,error:null,isModificationQuery:!1}:{results:[],columns:[],error:null,isModificationQuery:!1}}else return e.run(r),{results:[],columns:[],error:null,isModificationQuery:!0,affectedRows:e.getRowsModified()}}catch(e){const t=e.message,i=eS(r,t);return{results:[],columns:[],error:t,errorLine:i,isModificationQuery:!1}}}var iS=Ae('<button class="toggle-btn collapsed svelte-3ad19a" title="Expand sidebar"><i class="fas fa-database"></i></button>'),rS=Ae('<i class="fas fa-database database-icon svelte-3ad19a"></i> <span class="title-text svelte-3ad19a">Northwind</span> <button class="toggle-btn svelte-3ad19a" title="Collapse sidebar"><i class="fas fa-chevron-left"></i></button>',1),nS=Ae('<i class="fas fa-key icon key-icon svelte-3ad19a"></i>'),sS=Ae('<i class="fas fa-key icon fk-icon svelte-3ad19a"></i>'),oS=Ae('<i class="fas fa-columns icon column-icon svelte-3ad19a"></i>'),lS=Ae('<div class="tree-node column svelte-3ad19a"><!> <span class="label svelte-3ad19a"> <span class="metadata svelte-3ad19a"> </span></span></div>'),aS=Ae('<div class="tree-children svelte-3ad19a"></div>'),hS=Ae('<div class="tree-item svelte-3ad19a"><button class="tree-node svelte-3ad19a"><i></i> <i class="fas fa-table icon table-icon svelte-3ad19a"></i> <span class="label svelte-3ad19a"> </span> <span class="count svelte-3ad19a"> </span></button> <!></div>'),cS=Ae('<div class="tree-view svelte-3ad19a"></div>'),fS=Ae('<div class="context-menu svelte-3ad19a"><button class="menu-item svelte-3ad19a"><i class="fas fa-table svelte-3ad19a"></i> Show Data</button></div>'),uS=Ae('<div class="tooltip-line svelte-3ad19a"> </div>'),dS=Ae('<div class="tooltip svelte-3ad19a"></div>'),pS=Ae('<div class="sidebar svelte-3ad19a"><div class="title svelte-3ad19a"><!></div> <div class="content svelte-3ad19a"><!></div> <div class="resize-handle svelte-3ad19a"><div class="resize-indicator svelte-3ad19a"><div class="resize-line svelte-3ad19a"></div> <div class="resize-dots svelte-3ad19a"><div class="resize-dot svelte-3ad19a"></div> <div class="resize-dot svelte-3ad19a"></div> <div class="resize-dot svelte-3ad19a"></div></div> <div class="resize-line svelte-3ad19a"></div></div></div></div> <!> <!>',1);function mS(r,e){cn(e,!1);const t=F1();let i=Qe(300),n=Qe(!1),s=Qe(!1),o,l,a=null,h=Qe(null),c=Qe(new Set),u=Qe(!1),p=Qe({visible:!1,x:0,y:0,tableName:""}),g=Qe({visible:!1,x:0,y:0,content:"",timer:null});async function S(){try{await Vd(),ie(h,Z1())}catch(K){console.error("Failed to initialize database:",K)}}S();function E(){ie(u,!N(u)),N(u)?ie(i,50):ie(i,300)}function y(K){N(c).has(K)?N(c).delete(K):N(c).add(K),ie(c,new Set(N(c)))}function I(K){const Q=[];K.notnull&&Q.push("NOT NULL");let me=`Type: ${K.type}`;return Q.length&&(me+=`
Constraints: ${Q.join(", ")}`),K.fk&&(me+=`
Foreign Key: References ${K.fk.table}(${K.fk.column})`),me}function w(K){return`(${K.type})`}function A(K,Q){K.preventDefault(),ie(p,{visible:!0,x:K.pageX,y:K.pageY,tableName:Q})}function R(){Pi(p,N(p).visible=!1)}function L(){t("showTableData",{tableName:N(p).tableName}),R()}function x(K){N(p).visible&&!K.target.closest(".context-menu")&&R()}function k(K,Q){const Oe=K.currentTarget.getBoundingClientRect();Pi(g,N(g).timer=setTimeout(()=>{ie(g,{...N(g),visible:!0,x:Oe.right+10,y:Oe.top,content:I(Q)})},1e3))}function H(){N(g).timer&&clearTimeout(N(g).timer),Pi(g,N(g).visible=!1)}function B(K){if(N(u))return;const Q=K.touches[0];a=window.setTimeout(()=>{ie(s,!0),o=Q.pageX,l=N(i),K.target.classList.add("touch-active")},1e3),K.target.classList.add("touch-highlight")}function F(K){if(!N(s)){a!==null&&(clearTimeout(a),a=null);return}K.preventDefault();const me=K.touches[0].pageX-o;ie(i,Math.max(200,Math.min(600,l+me)))}function $(K){a!==null&&(clearTimeout(a),a=null),N(s)&&ie(s,!1),K.target.classList.remove("touch-active","touch-highlight")}function C(K){N(u)||(ie(n,!0),o=K.pageX,l=N(i),window.addEventListener("mousemove",q),window.addEventListener("mouseup",Z),document.body.style.cursor="col-resize",document.body.style.userSelect="none")}function q(K){if(!N(n))return;const Q=K.pageX-o;ie(i,Math.max(200,Math.min(600,l+Q)))}function Z(){ie(n,!1),window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",Z),document.body.style.cursor="",document.body.style.userSelect=""}al();var re=pS();Ge("click",ua,x);var pe=fr(re),Ee=oe(pe),ve=oe(Ee);ut(ve,()=>N(u),K=>{var Q=iS();Ge("click",Q,E),ge(K,Q)},K=>{var Q=rS(),me=ke(fr(Q),4);Ge("click",me,E),ge(K,Q)});var le=ke(Ee,2),se=oe(le);ut(se,()=>N(h)&&!N(u),K=>{var Q=cS();dr(Q,5,()=>N(h).tables,ur,(me,Oe)=>{var ht=hS(),ct=oe(ht),Si=oe(ct);const J=Ah(()=>`fas fa-chevron-${(N(c).has(N(Oe).name)?"down":"right")??""} chevron svelte-3ad19a`);var xe=ke(Si,4),mn=oe(xe),Gt=ke(xe,2),Yi=oe(Gt),Os=ke(ct,2);ut(Os,()=>N(c).has(N(Oe).name),_e=>{var vr=aS();dr(vr,5,()=>N(Oe).columns,ur,(ys,St)=>{var Nr=lS(),Zi=oe(Nr);ut(Zi,()=>N(St).pk,Kt=>{var Tt=nS();ge(Kt,Tt)},Kt=>{var Tt=Kn(),vs=fr(Tt);ut(vs,()=>N(St).fk,Ar=>{var wr=sS();ge(Ar,wr)},Ar=>{var wr=oS();ge(Ar,wr)},!0),ge(Kt,Tt)});var Is=ke(Zi,2),gn=oe(Is),br=ke(gn),Sn=oe(br);Xe(()=>vt(Sn,w(N(St)))),Xe(()=>{Qt(Is,"required",N(St).notnull),vt(gn,`${N(St).name??""} `)}),Ge("mouseenter",Nr,Kt=>k(Kt,N(St))),Ge("mouseleave",Nr,H),ge(ys,Nr)}),ge(_e,vr)}),Xe(()=>{V1(Si,N(J)),vt(mn,N(Oe).name),vt(Yi,N(Oe).columns.length)}),Ge("click",ct,()=>y(N(Oe).name)),Ge("contextmenu",ct,Cn(_e=>A(_e,N(Oe).name))),ge(me,ht)}),ge(K,Q)});var ee=ke(le,2),Se=ke(pe,2);ut(Se,()=>N(p).visible,K=>{var Q=fS(),me=oe(Q);Xe(()=>Wr(Q,"style",`left: ${N(p).x??""}px; top: ${N(p).y??""}px`)),Ge("click",me,L),ge(K,Q)});var ce=ke(Se,2);ut(ce,()=>N(g).visible,K=>{var Q=dS();dr(Q,5,()=>N(g).content.split(`
`),ur,(me,Oe)=>{var ht=uS(),ct=oe(ht);Xe(()=>vt(ct,N(Oe))),ge(me,ht)}),Xe(()=>Wr(Q,"style",`left: ${N(g).x??""}px; top: ${N(g).y??""}px`)),ge(K,Q)}),Xe(()=>{Wr(pe,"style",`width: ${N(i)??""}px`),Qt(pe,"collapsed",N(u)),Qt(Ee,"collapsed",N(u)),Qt(le,"collapsed",N(u)),Qt(ee,"resizing",N(n)),Qt(ee,"touch-resizing",N(s)),Qt(ee,"hidden",N(u))}),Ge("mousedown",ee,C),Ge("touchstart",ee,Cn(B)),Ge("touchmove",ee,Cn(F)),Ge("touchend",ee,Cn($)),ge(r,re),fn()}var gS=Ae('<div class="tab svelte-1k0t1jg"><span> </span> <button class="close-btn svelte-1k0t1jg"></button></div>');function SS(r,e){cn(e,!1),Ot(e,"query",8,"");let t=Ot(e,"active",8,!1),i=Ot(e,"onClose",8),n=Ot(e,"onClick",8),s=Ot(e,"index",8);function o(u){u.target.closest(".close-btn")||n()()}al();var l=gS(),a=oe(l),h=oe(a),c=ke(a,2);Xe(()=>{Qt(l,"active",t()),vt(h,`Query ${s()+1}`)}),Ge("click",c,function(...u){var p;(p=i())==null||p.apply(this,u)}),Ge("click",l,o),ge(r,l),fn()}let Ne=class Ud{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Yr(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),li.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Yr(this,e,t);let i=[];return this.decompose(e,t,i,0),li.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new Bn(this),s=new Bn(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new Bn(this,e)}iterRange(e,t=this.length){return new Md(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Pd(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ud.empty:e.length<=32?new Fe(e):li.from(Fe.split(e,[]))}};class Fe extends Ne{constructor(e,t=TS(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new ES(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Fe(af(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=ao(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Fe(l,o.length+s.length));else{let a=l.length>>1;i.push(new Fe(l.slice(0,a)),new Fe(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Fe))return super.replace(e,t,i);[e,t]=Yr(this,e,t);let n=ao(this.text,ao(i.text,af(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Fe(n,s):li.from(Fe.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=Yr(this,e,t);let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Fe(i,n)),i=[],n=-1);return n>-1&&t.push(new Fe(i,n)),t}}class li extends Ne{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if([e,t]=Yr(this,e,t),i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[n]=a,new li(c,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Yr(this,e,t);let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof li))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let g of e)i+=g.lines;if(i<32){let g=[];for(let S of e)S.flatten(g);return new Fe(g,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,c=[];function u(g){let S;if(g.lines>s&&g instanceof li)for(let E of g.children)u(E);else g.lines>o&&(a>o||!a)?(p(),l.push(g)):g instanceof Fe&&a&&(S=c[c.length-1])instanceof Fe&&g.lines+S.lines<=32?(a+=g.lines,h+=g.length+1,c[c.length-1]=new Fe(S.text.concat(g.text),S.length+1+g.length)):(a+g.lines>n&&p(),a+=g.lines,h+=g.length+1,c.push(g))}function p(){a!=0&&(l.push(c.length==1?c[0]:li.from(c,h)),h=-1,a=c.length=0)}for(let g of e)u(g);return p(),l.length==1?l[0]:new li(l,t)}}Ne.empty=new Fe([""],0);function TS(r){let e=-1;for(let t of r)e+=t.length+1;return e}function ao(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function af(r,e,t){return ao(r,[""],e,t)}class Bn{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Fe?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Fe?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Fe){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Fe?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Md{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Bn(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Pd{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ne.prototype[Symbol.iterator]=function(){return this.iter()},Bn.prototype[Symbol.iterator]=Md.prototype[Symbol.iterator]=Pd.prototype[Symbol.iterator]=function(){return this});class ES{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function Yr(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let Gr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Gr.length;r++)Gr[r]+=Gr[r-1];function OS(r){for(let e=1;e<Gr.length;e+=2)if(Gr[e]>r)return Gr[e-1]<=r;return!1}function hf(r){return r>=127462&&r<=127487}const cf=8205;function rt(r,e,t=!0,i=!0){return(t?_d:yS)(r,e,i)}function _d(r,e,t){if(e==r.length)return e;e&&Bd(r.charCodeAt(e))&&Fd(r.charCodeAt(e-1))&&e--;let i=et(r,e);for(e+=Bt(i);e<r.length;){let n=et(r,e);if(i==cf||n==cf||t&&OS(n))e+=Bt(n),i=n;else if(hf(n)){let s=0,o=e-2;for(;o>=0&&hf(et(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function yS(r,e,t){for(;e>0;){let i=_d(r,e-2,t);if(i<e)return i;e--}return 0}function Bd(r){return r>=56320&&r<57344}function Fd(r){return r>=55296&&r<56320}function et(r,e){let t=r.charCodeAt(e);if(!Fd(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return Bd(i)?(t-55296<<10)+(i-56320)+65536:t}function Ph(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Bt(r){return r<65536?1:2}const Ea=/\r\n?|\n/;var dt=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(dt||(dt={}));class ui{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){Oa(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new ui(e)}composeDesc(e){return this.empty?e:e.empty?this:Hd(this,e)}mapDesc(e,t=!1){return e.empty?this:ya(this,e,t)}mapPos(e,t=-1,i=dt.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=dt.Simple&&h>=e&&(i==dt.TrackDel&&n<e&&h>e||i==dt.TrackBefore&&n<e||i==dt.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ui(e)}static create(e){return new ui(e)}}class Ke extends ui{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Oa(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return ya(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Ne.empty);i.push(o?e.slice(s,s+o):Ne.empty)}s+=o}return new Ke(t,i)}compose(e){return this.empty?e:e.empty?this:Hd(this,e,!0)}map(e,t=!1){return e.empty?this:ya(this,e,t,!0)}iterChanges(e,t=!1){Oa(this,e,t)}get desc(){return ui.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new jn(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);ot(n,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;ot(t,c,u),u>0&&Di(i,t,s.text),s.forward(c),l+=c}let h=e[o++];for(;l<h;){if(s.done)break e;let c=Math.min(s.len,h-l);ot(t,c,-1),ot(n,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new Ke(t,i),filtered:ui.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&ot(n,t-o,-1);let u=new Ke(n,s);l=l?l.compose(u.map(l)):u,n=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof Ke){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:p=u,insert:g}=c;if(u>p||u<0||p>t)throw new RangeError(`Invalid change range ${u} to ${p} (in doc of length ${t})`);let S=g?typeof g=="string"?Ne.of(g.split(i||Ea)):g:Ne.empty,E=S.length;if(u==p&&E==0)return;u<o&&a(),u>o&&ot(n,u-o,-1),ot(n,p-u,E),Di(s,n,S),o=p}}return h(e),a(!l),l}static empty(e){return new Ke(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Ne.empty);i[n]=Ne.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new Ke(t,i)}static createSet(e,t){return new Ke(e,t)}}function ot(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function Di(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Ne.empty);r.push(t)}}function Oa(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,c=s,u=Ne.empty;for(;h+=l,c+=a,a&&i&&(u=u.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,c,u),n=h,s=c}}}function ya(r,e,t,i=!1){let n=[],s=i?[]:null,o=new jn(r),l=new jn(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);ot(n,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(ot(n,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&(ot(n,0,o.ins),s&&Di(s,n,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;ot(n,h,a<o.i?o.ins:0),s&&a<o.i&&Di(s,n,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?Ke.createSet(n,s):ui.create(n);throw new Error("Mismatched change set lengths")}}function Hd(r,e,t=!1){let i=[],n=t?[]:null,s=new jn(r),o=new jn(e);for(let l=!1;;){if(s.done&&o.done)return n?Ke.createSet(i,n):ui.create(i);if(s.ins==0)ot(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)ot(i,0,o.ins,l),n&&Di(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;ot(i,a,c,l),n&&c&&Di(n,i,o.text)}else o.ins==-1?(ot(i,s.off?0:s.len,a,l),n&&Di(n,i,s.textBit(a))):(ot(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&Di(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class jn{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ne.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ne.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class hr{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new hr(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return V.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return V.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return V.range(e.anchor,e.head)}static create(e,t,i){return new hr(e,t,i)}}class V{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:V.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new V([this.main],0)}addRange(e,t=!0){return V.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,V.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new V(e.ranges.map(t=>hr.fromJSON(t)),e.main)}static single(e,t=e){return new V([V.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return V.normalized(e.slice(),t);i=s.to}return new V(e,t)}static cursor(e,t=0,i,n){return hr.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let s=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?hr.create(t,e,48|s):hr.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?V.range(a,l):V.range(l,a))}}return new V(e,t)}}function qd(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let _h=0;class W{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=_h++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new W(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Bh),!!e.static,e.enables)}of(e){return new ho([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ho(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ho(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Bh(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class ho{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=_h++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,p){if(a&&p.docChanged||h&&(p.docChanged||p.selection)||Ia(u,c)){let g=i(u);if(l?!ff(g,u.values[o],n):!n(g,u.values[o]))return u.values[o]=g,1}return 0},reconfigure:(u,p)=>{let g,S=p.config.address[s];if(S!=null){let E=ko(p,S);if(this.dependencies.every(y=>y instanceof W?p.facet(y)===u.facet(y):y instanceof nt?p.field(y,!1)==u.field(y,!1):!0)||(l?ff(g=i(u),E,n):n(g=i(u),E)))return u.values[o]=E,0}else g=i(u);return u.values[o]=g,1}}}}function ff(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Ia(r,e){let t=!1;for(let i of e)Fn(r,i)&1&&(t=!0);return t}function IS(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let c=0;c<i.length;c++){let u=ko(a,i[c]);if(n[c]==2)for(let p of u)h.push(p);else h.push(u)}return e.combine(h)}return{create(a){for(let h of i)Fn(a,h);return a.values[o]=l(a),1},update(a,h){if(!Ia(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=Ia(a,i),u=h.config.facets[e.id],p=h.facet(e);if(u&&!c&&Bh(t,u))return a.values[o]=p,0;let g=l(a);return e.compare(g,p)?(a.values[o]=p,0):(a.values[o]=g,1)}}}const uf=W.define({static:!0});class nt{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new nt(_h++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(uf).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,uf.of({field:this,create:e})]}get extension(){return this}}const lr={lowest:4,low:3,default:2,high:1,highest:0};function Nn(r){return e=>new zd(e,r)}const Ir={highest:Nn(lr.highest),high:Nn(lr.high),default:Nn(lr.default),low:Nn(lr.low),lowest:Nn(lr.lowest)};class zd{constructor(e,t){this.inner=e,this.prec=t}}class hl{of(e){return new va(this,e)}reconfigure(e){return hl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class va{constructor(e,t){this.compartment=e,this.inner=t}}class xo{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let p of vS(e,t,o))p instanceof nt?n.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let l=Object.create(null),a=[],h=[];for(let p of n)l[p.id]=h.length<<1,h.push(g=>p.slot(g));let c=i==null?void 0:i.config.facets;for(let p in s){let g=s[p],S=g[0].facet,E=c&&c[p]||[];if(g.every(y=>y.type==0))if(l[S.id]=a.length<<1|1,Bh(E,g))a.push(i.facet(S));else{let y=S.combine(g.map(I=>I.value));a.push(i&&S.compare(y,i.facet(S))?i.facet(S):y)}else{for(let y of g)y.type==0?(l[y.id]=a.length<<1|1,a.push(y.value)):(l[y.id]=h.length<<1,h.push(I=>y.dynamicSlot(I)));l[S.id]=h.length<<1,h.push(y=>IS(y,S,g))}}let u=h.map(p=>p(l));return new xo(e,o,u,l,a,s)}}function vS(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof va&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof va){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof zd)s(o.inner,o.prec);else if(o instanceof nt)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof ho)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,lr.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,lr.default),i.reduce((o,l)=>o.concat(l))}function Fn(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function ko(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const Wd=W.define(),Na=W.define({combine:r=>r.some(e=>e),static:!0}),Gd=W.define({combine:r=>r.length?r[0]:void 0,static:!0}),Kd=W.define(),jd=W.define(),$d=W.define(),Qd=W.define({combine:r=>r.length?r[0]:!1});class bi{constructor(e,t){this.type=e,this.value=t}static define(){return new NS}}class NS{of(e){return new bi(this,e)}}class bS{constructor(e){this.map=e}of(e){return new ae(this,e)}}class ae{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ae(this.type,t)}is(e){return this.type==e}static define(e={}){return new bS(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}ae.reconfigure=ae.define();ae.appendConfig=ae.define();class je{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&qd(i,t.newLength),s.some(l=>l.type==je.time)||(this.annotations=s.concat(je.time.of(Date.now())))}static create(e,t,i,n,s,o){return new je(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(je.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}je.time=bi.define();je.userEvent=bi.define();je.addToHistory=bi.define();je.remote=bi.define();function AS(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Xd(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=Ke.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:ae.mapEffects(r.effects,n).concat(ae.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function ba(r,e,t){let i=e.selection,n=Kr(e.annotations);return e.userEvent&&(n=n.concat(je.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ke?e.changes:Ke.of(e.changes||[],t,r.facet(Gd)),selection:i&&(i instanceof V?i:V.single(i.anchor,i.head)),effects:Kr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Jd(r,e,t){let i=ba(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=Xd(i,ba(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=je.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return xS(t?wS(n):n)}function wS(r){let e=r.startState,t=!0;for(let n of e.facet(Kd)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:AS(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=Ke.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}r=je.create(e,n,r.selection&&r.selection.map(s),ae.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(jd);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof je?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof je?r=s[0]:r=Jd(e,Kr(s),!1)}return r}function xS(r){let e=r.startState,t=e.facet($d),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=Xd(i,ba(e,s,r.changes.newLength),!0))}return i==r?r:je.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const kS=[];function Kr(r){return r==null?kS:Array.isArray(r)?r:[r]}var Be=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Be||(Be={}));const RS=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Aa;try{Aa=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function LS(r){if(Aa)return Aa.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||RS.test(t)))return!0}return!1}function CS(r){return e=>{if(!/\S/.test(e))return Be.Space;if(LS(e))return Be.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Be.Word;return Be.Other}}class Ie{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Fn(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return Fn(this,i),ko(this,i)}update(...e){return Jd(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(hl.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,h)=>n.set(h,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(ae.reconfigure)?(t=null,i=l.value):l.is(ae.appendConfig)&&(t=null,i=Kr(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=xo.resolve(i,n,this),s=new Ie(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=e.startState.facet(Na)?e.newSelection:e.newSelection.asSingle();new Ie(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:V.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=Kr(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(n);for(let p=0;p<l;p++)s[p]=s[p].map(c);let u=n.mapDesc(h,!0);s.push(a.range.map(u)),n=n.compose(c),o=ae.mapEffects(o,c).concat(ae.mapEffects(Kr(a.effects),u))}return{changes:n,selection:V.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ke?e:Ke.of(e,this.doc.length,this.facet(Ie.lineSeparator))}toText(e){return Ne.of(e.split(this.facet(Ie.lineSeparator)||Ea))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Fn(this,t),ko(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof nt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Ie.create({doc:e.doc,selection:V.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=xo.resolve(e.extensions||[],new Map),i=e.doc instanceof Ne?e.doc:Ne.of((e.doc||"").split(t.staticFacet(Ie.lineSeparator)||Ea)),n=e.selection?e.selection instanceof V?e.selection:V.single(e.selection.anchor,e.selection.head):V.single(0);return qd(n,i.length),t.staticFacet(Na)||(n=n.asSingle()),new Ie(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ie.tabSize)}get lineBreak(){return this.facet(Ie.lineSeparator)||`
`}get readOnly(){return this.facet(Qd)}phrase(e,...t){for(let i of this.facet(Ie.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet(Wd))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return CS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=rt(t,o,!1);if(s(t.slice(a,o))!=Be.Word)break;o=a}for(;l<n;){let a=rt(t,l);if(s(t.slice(l,a))!=Be.Word)break;l=a}return o==l?null:V.range(o+i,l+i)}}Ie.allowMultipleSelections=Na;Ie.tabSize=W.define({combine:r=>r.length?r[0]:4});Ie.lineSeparator=Gd;Ie.readOnly=Qd;Ie.phrases=W.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});Ie.languageData=Wd;Ie.changeFilter=Kd;Ie.transactionFilter=jd;Ie.transactionExtender=$d;hl.reconfigure=ae.define();function mi(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class mr{eq(e){return this==e}range(e,t=e){return wa.create(e,t,this)}}mr.prototype.startSide=mr.prototype.endSide=0;mr.prototype.point=!1;mr.prototype.mapMode=dt.TrackDel;let wa=class Yd{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Yd(e,t,i)}};function xa(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class Fh{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,p,g;if(c==u){let S=t.mapPos(c,h.startSide,h.mapMode);if(S==null||(p=g=S,h.startSide!=h.endSide&&(g=t.mapPos(c,h.endSide),g<p)))continue}else if(p=t.mapPos(c,h.startSide),g=t.mapPos(u,h.endSide),p>g||p==g&&h.startSide>0&&h.endSide<=0)continue;(g-p||h.endSide-h.startSide)<0||(o<0&&(o=p),h.point&&(l=Math.max(l,g-p)),i.push(h),n.push(p-o),s.push(g-o))}return{mapped:i.length?new Fh(n,s,i,l):null,pos:o}}}class ye{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new ye(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(xa)),this.isEmpty)return t.length?ye.of(t):this;let l=new Zd(this,null,-1).goto(0),a=0,h=[],c=new Wi;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(wa.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?ye.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new ye(i,t,s||ye.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return $n.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return $n.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=df(o,l,i),h=new bn(o,a,s),c=new bn(l,a,s);i.iterGaps((u,p,g)=>pf(h,u,c,p,g,n)),i.empty&&i.length==0&&pf(h,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=df(s,o),a=new bn(s,l,0).goto(i),h=new bn(o,l,0).goto(i);for(;;){if(a.to!=h.to||!ka(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new bn(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);n.point(l,h,o.point,c,u,o.pointRank),a=Math.min(o.openEnd(h),c.length)}else h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new Wi;for(let n of e instanceof wa?[e]:t?DS(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return ye.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=ye.empty;n=n.nextLayer)t=new ye(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}ye.empty=new ye([],[],null,-1);function DS(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(xa(e,i)>0)return r.slice().sort(xa);e=i}return r}ye.empty.nextLayer=ye.empty;class Wi{finishChunk(e){this.chunks.push(new Fh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Wi)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ye.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ye.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function df(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class Zd{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class $n{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new Zd(o,t,i,s));return n.length==1?n[0]:new $n(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pl(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Pl(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Pl(this.heap,0)}}}function Pl(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class bn{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=$n.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){_s(this.active,e),_s(this.activeTo,e),_s(this.activeRank,e),this.minActive=mf(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Bs(this.active,t,i),Bs(this.activeTo,t,n),Bs(this.activeRank,t,s),e&&Bs(e,t,this.cursor.from),this.minActive=mf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&_s(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function pf(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,c=h<0?r.to+a:t.to,u=Math.min(c,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&ka(r.activeForPoint(r.to),t.activeForPoint(t.to))||s.comparePoint(l,u,r.point,t.point):u>l&&!ka(r.active,t.active)&&s.compareRange(l,u,r.active,t.active),c>o)break;l=c,h<=0&&r.next(),h>=0&&t.next()}}function ka(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function _s(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function Bs(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function mf(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function un(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=rt(r,n));return i}function Ra(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=rt(r,n)}return i===!0?-1:r.length}const La="",gf=typeof Symbol>"u"?"__"+La:Symbol.for(La),Ca=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Gi{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),p=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let g in l){let S=l[g];if(/&/.test(g))s(g.split(/,\s*/).map(E=>o.map(y=>E.replace(/&/,y))).reduce((E,y)=>E.concat(y)),S,a);else if(S&&typeof S=="object"){if(!u)throw new RangeError("The value of a property ("+g+") should be a primitive value.");s(n(g),S,c,p)}else S!=null&&c.push(g.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+S+";")}(c.length||p)&&a.push((i&&!u&&!h?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Sf[gf]||1;return Sf[gf]=e+1,La+e.toString(36)}static mount(e,t,i){let n=e[Ca],s=i&&i.nonce;n?s&&n.setNonce(s):n=new VS(e,s),n.mount(Array.isArray(t)?t:[t],e)}}let Tf=new Map;class VS{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=Tf.get(i);if(s)return e[Ca]=s;this.sheet=new n.CSSStyleSheet,Tf.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Ca]=this}mount(e,t){let i=this.sheet,n=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],n++)}else{for(;s<a;)n+=this.modules[s++].rules.length;n+=l.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ki={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Qn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},US=typeof navigator<"u"&&/Mac/.test(navigator.platform),MS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tt=0;tt<10;tt++)Ki[48+tt]=Ki[96+tt]=String(tt);for(var tt=1;tt<=24;tt++)Ki[tt+111]="F"+tt;for(var tt=65;tt<=90;tt++)Ki[tt]=String.fromCharCode(tt+32),Qn[tt]=String.fromCharCode(tt);for(var _l in Ki)Qn.hasOwnProperty(_l)||(Qn[_l]=Ki[_l]);function PS(r){var e=US&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||MS&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Qn:Ki)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Xn(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Da(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function co(r,e){if(!e.anchorNode)return!1;try{return Da(r,e.anchorNode)}catch{return!1}}function Jn(r){return r.nodeType==3?Sr(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Hn(r,e,t,i){return t?Ef(r,e,t,i,-1)||Ef(r,e,t,i,1):!1}function gr(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Ro(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function Ef(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:pi(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=gr(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?pi(r):0}else return!1}}function pi(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function cl(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function _S(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function ep(r,e){let t=e.width/r.offsetWidth,i=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-r.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function BS(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView||window;for(let c=r,u=!1;c&&!u;)if(c.nodeType==1){let p,g=c==a.body,S=1,E=1;if(g)p=_S(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:S,scaleY:E}=ep(c,w)),p={left:w.left,right:w.left+c.clientWidth*S,top:w.top,bottom:w.top+c.clientHeight*E}}let y=0,I=0;if(n=="nearest")e.top<p.top?(I=-(p.top-e.top+o),t>0&&e.bottom>p.bottom+I&&(I=e.bottom-p.bottom+I+o)):e.bottom>p.bottom&&(I=e.bottom-p.bottom+o,t<0&&e.top-I<p.top&&(I=-(p.top+I-e.top+o)));else{let w=e.bottom-e.top,A=p.bottom-p.top;I=(n=="center"&&w<=A?e.top+w/2-A/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-A+o)-p.top}if(i=="nearest"?e.left<p.left?(y=-(p.left-e.left+s),t>0&&e.right>p.right+y&&(y=e.right-p.right+y+s)):e.right>p.right&&(y=e.right-p.right+s,t<0&&e.left<p.left+y&&(y=-(p.left+y-e.left+s))):y=(i=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:i=="start"==l?e.left-s:e.right-(p.right-p.left)+s)-p.left,y||I)if(g)h.scrollBy(y,I);else{let w=0,A=0;if(I){let R=c.scrollTop;c.scrollTop+=I/E,A=(c.scrollTop-R)*E}if(y){let R=c.scrollLeft;c.scrollLeft+=y/S,w=(c.scrollLeft-R)*S}e={left:e.left-w,top:e.top-A,right:e.right-w,bottom:e.bottom-A},w&&Math.abs(w-y)<1&&(i="nearest"),A&&Math.abs(A-I)<1&&(n="nearest")}if(g)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function FS(r){let e=r.ownerDocument,t,i;for(let n=r.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class HS{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?pi(t):0),i,Math.min(e.focusOffset,i?pi(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Cr=null;function tp(r){if(r.setActive)return r.setActive();if(Cr)return r.focus(Cr);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Cr==null?{get preventScroll(){return Cr={preventScroll:!0},!0}}:void 0),!Cr){Cr=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Of;function Sr(r,e,t=e){let i=Of||(Of=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function jr(r,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,r.dispatchEvent(s);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,r.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function qS(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function ip(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function zS(r,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,pi(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=pi(t))}else{if(t==r)return!0;i=gr(t),t=t.parentNode}}function rp(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function np(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=pi(t)}else if(t.parentNode&&!Ro(t))i=gr(t),t=t.parentNode;else return null}}function sp(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Ro(t))i=gr(t)+1,t=t.parentNode;else return null}}class lt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new lt(e.parentNode,gr(e),t)}static after(e,t){return new lt(e.parentNode,gr(e)+1,t)}}const Hh=[];class Le{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=n?n.nextSibling:i.firstChild)){let l=Le.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=yf(s);else i.insertBefore(o.dom,s);n=o.dom}for(s=n?n.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=yf(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=pi(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Le.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,c=i;a<this.children.length;a++){let u=this.children[a],p=h+u.length;if(h<e&&p>t)return u.domBoundsAround(e,t,h);if(p>=e&&n==-1&&(n=a,s=h),h>t&&u.dom.parentNode==this.dom){o=a,l=c;break}c=p,h=p+u.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Hh){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new op(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Le.prototype.breakAfter=0;function yf(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class op{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function lp(r,e,t,i,n,s,o,l,a){let{children:h}=r,c=h.length?h[e]:null,u=s.length?s[s.length-1]:null,p=u?u.breakAfter:o;if(!(e==i&&c&&!o&&!p&&s.length<2&&c.merge(t,n,s.length?u:null,t==0,l,a))){if(i<h.length){let g=h[i];g&&(n<g.length||g.breakAfter&&(u!=null&&u.breakAfter))?(e==i&&(g=g.split(n),n=0),!p&&u&&g.merge(0,n,u,!0,0,a)?s[s.length-1]=g:((n||g.children.length&&!g.children[0].length)&&g.merge(0,n,null,!1,0,a),s.push(g))):g!=null&&g.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function ap(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),u=e-t;for(let p of i)u+=p.length;r.length+=u,lp(r,h,c,l,a,i,0,n,s)}let yt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Va=typeof document<"u"?document:{documentElement:{style:{}}};const Ua=/Edge\/(\d+)/.exec(yt.userAgent),hp=/MSIE \d/.test(yt.userAgent),Ma=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yt.userAgent),fl=!!(hp||Ma||Ua),If=!fl&&/gecko\/(\d+)/i.test(yt.userAgent),Bl=!fl&&/Chrome\/(\d+)/.exec(yt.userAgent),vf="webkitFontSmoothing"in Va.documentElement.style,cp=!fl&&/Apple Computer/.test(yt.vendor),Nf=cp&&(/Mobile\/\w+/.test(yt.userAgent)||yt.maxTouchPoints>2);var G={mac:Nf||/Mac/.test(yt.platform),windows:/Win/.test(yt.platform),linux:/Linux|X11/.test(yt.platform),ie:fl,ie_version:hp?Va.documentMode||6:Ma?+Ma[1]:Ua?+Ua[1]:0,gecko:If,gecko_version:If?+(/Firefox\/(\d+)/.exec(yt.userAgent)||[0,0])[1]:0,chrome:!!Bl,chrome_version:Bl?+Bl[1]:0,ios:Nf,android:/Android\b/.test(yt.userAgent),webkit:vf,safari:cp,webkit_version:vf?+(/\bAppleWebKit\/(\d+)/.exec(yt.userAgent)||[0,0])[1]:0,tabSize:Va.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const WS=256;class Jt extends Le{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Jt)||this.length-(t-e)+i.length>WS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Jt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new lt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return GS(this.dom,e,t)}}class vi extends Le{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(ip(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,s,o){return i&&(!(i instanceof vi&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(ap(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new vi(this.mark,t,o)}domAtPos(e){return fp(this,e)}coordsAt(e,t){return dp(this,e,t)}}function GS(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?G.chrome||G.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Sr(r,n,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return G.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?cl(a,o<0):a||null}class Vi extends Le{static create(e,t,i){return new Vi(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Vi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof Vi)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Vi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ne.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Ne.empty}domAtPos(e){return(this.length?e==0:this.side>0)?lt.before(this.dom):lt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),s=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;s=n[l],!(e>0?l==0:l==n.length-1||s.top<s.bottom);l+=o?-1:1);return cl(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zr extends Le{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Zr&&e.side==this.side}split(){return new Zr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?lt.before(this.dom):lt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ne.empty}get isHidden(){return!0}}Jt.prototype.children=Vi.prototype.children=Zr.prototype.children=Hh;function fp(r,e){let t=r.dom,{children:i}=r,n=0;for(let s=0;n<i.length;n++){let o=i[n],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=n;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=n;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new lt(t,0)}function up(r,e,t){let i,{children:n}=r;t>0&&e instanceof vi&&n.length&&(i=n[n.length-1])instanceof vi&&i.mark.eq(e.mark)?up(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function dp(r,e,t){let i=null,n=-1,s=null,o=-1;function l(h,c){for(let u=0,p=0;u<h.children.length&&p<=c;u++){let g=h.children[u],S=p+g.length;S>=c&&(g.children.length?l(g,c-p):(!s||s.isHidden&&t>0)&&(S>c||p==S&&g.getSide()>0)?(s=g,o=c-p):(p<c||p==S&&g.getSide()<0&&!g.isHidden)&&(i=g,n=c-p)),p=S}}l(r,e);let a=(t<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?n:o),t):KS(r)}function KS(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=Jn(e);return t[t.length-1]||null}function Pa(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const bf=Object.create(null);function Lo(r,e,t){if(r==e)return!0;r||(r=bf),e||(e=bf);let i=Object.keys(r),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(n.indexOf(s)==-1||r[s]!==e[s]))return!1;return!0}function _a(r,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?r.style.cssText="":r.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?r.style.cssText=t[n]:r.setAttribute(n,t[n]));return i}function jS(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let i=r.attributes[t];e[i.name]=i.value}return e}class Xi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var pt=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(pt||(pt={}));class Y extends mr{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ds(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ji(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=pp(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new ji(e,i,n,t,e.widget||null,!0)}static line(e){return new ps(e)}static set(e,t=!1){return ye.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Y.none=ye.empty;class ds extends Y{constructor(e){let{start:t,end:i}=pp(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ds&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Lo(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ds.prototype.point=!1;class ps extends Y{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ps&&this.spec.class==e.spec.class&&Lo(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ps.prototype.mapMode=dt.TrackBefore;ps.prototype.point=!0;class ji extends Y{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?dt.TrackBefore:dt.TrackAfter:dt.TrackDel}get type(){return this.startSide!=this.endSide?pt.WidgetRange:this.startSide<=0?pt.WidgetBefore:pt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ji&&$S(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ji.prototype.point=!0;function pp(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t??e,end:i??e}}function $S(r,e){return r==e||!!(r&&e&&r.compare(e))}function Ba(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class qe extends Le{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof qe))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),ap(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new qe;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Lo(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){up(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Pa(t,this.attrs||{})),i&&(this.attrs=Pa({class:i},this.attrs||{}))}domAtPos(e){return fp(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(ip(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(_a(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&Le.get(n)instanceof vi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=Le.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!G.ios||!this.children.some(s=>s instanceof Jt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Jt)||/[^ -~]/.test(i.text))return null;let n=Jn(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=dp(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-n.lineHeight)<2&&n.textHeight<s){let o=(s-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof qe&&this.children.length==0&&e.children.length==0&&Lo(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof qe)return s;if(o>t)break}n=o+s.breakAfter}return null}}class yi extends Le{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof yi)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?lt.before(this.dom):lt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new yi(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Hh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ne.empty}domBoundsAround(){return null}become(e){return e instanceof yi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof Fa?null:cl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class Fa extends Xi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class qn{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof yi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Fs(new Zr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof yi)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Fs(new Jt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ji){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof ji)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new yi(i.widget||en.block,l,i));else{let a=Vi.create(i.widget||en.inline,l,l?0:i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),c=!a.isEditable&&(e<t||s>n.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(u.append(Fs(new Zr(1),n),s),s=n.length+Math.max(0,s-n.length)),u.append(Fs(a,n),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new qn(e,t,i,s);return o.openEnd=ye.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Fs(r,e){for(let t of e)r=new vi(t,[r],r.length);return r}class en extends Xi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}en.inline=new en("span");en.block=new en("div");var Pe=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Pe||(Pe={}));const Tr=Pe.LTR,qh=Pe.RTL;function mp(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const QS=mp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),XS=mp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ha=Object.create(null),ri=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Ha[e]=t,Ha[t]=-e}function gp(r){return r<=247?QS[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?XS[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const JS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ui{get dir(){return this.level%2?qh:Tr}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Sp(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let i=r[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!Sp(i.inner,n.inner))return!1}return!0}const Re=[];function YS(r,e,t,i,n){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:t,a=s?256:n;for(let h=o,c=a,u=a;h<l;h++){let p=gp(r.charCodeAt(h));p==512?p=c:p==8&&u==4&&(p=16),Re[h]=p==4?2:p,p&7&&(u=p),c=p}for(let h=o,c=a,u=a;h<l;h++){let p=Re[h];if(p==128)h<l-1&&c==Re[h+1]&&c&24?p=Re[h]=c:Re[h]=256;else if(p==64){let g=h+1;for(;g<l&&Re[g]==64;)g++;let S=h&&c==8||g<t&&Re[g]==8?u==1?1:8:256;for(let E=h;E<g;E++)Re[E]=S;h=g-1}else p==8&&u==1&&(Re[h]=1);c=p,p&7&&(u=p)}}}function ZS(r,e,t,i,n){let s=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let h=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let u=h,p,g,S;u<c;u++)if(g=Ha[p=r.charCodeAt(u)])if(g<0){for(let E=l-3;E>=0;E-=3)if(ri[E+1]==-g){let y=ri[E+2],I=y&2?n:y&4?y&1?s:n:0;I&&(Re[u]=Re[ri[E]]=I),l=E;break}}else{if(ri.length==189)break;ri[l++]=u,ri[l++]=p,ri[l++]=a}else if((S=Re[u])==2||S==1){let E=S==n;a=E?0:1;for(let y=l-3;y>=0;y-=3){let I=ri[y+2];if(I&2)break;if(E)ri[y+2]|=2;else{if(I&4)break;ri[y+2]|=4}}}}}function eT(r,e,t,i){for(let n=0,s=i;n<=t.length;n++){let o=n?t[n-1].to:r,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let h=Re[a];if(h==256){let c=a+1;for(;;)if(c==l){if(n==t.length)break;c=t[n++].to,l=n<t.length?t[n].from:e}else if(Re[c]==256)c++;else break;let u=s==1,p=(c<e?Re[c]:i)==1,g=u==p?u?1:2:i;for(let S=c,E=n,y=E?t[E-1].to:r;S>a;)S==y&&(S=t[--E].from,y=E?t[E-1].to:r),Re[--S]=g;a=c}else s=h,a++}}}function qa(r,e,t,i,n,s,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,h=0;a<t;){let c=!0,u=!1;if(h==s.length||a<s[h].from){let E=Re[a];E!=l&&(c=!1,u=E==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,S=a;e:for(;;)if(h<s.length&&S==s[h].from){if(u)break e;let E=s[h];if(!c)for(let y=E.to,I=h+1;;){if(y==t)break e;if(I<s.length&&s[I].from==y)y=s[I++].to;else{if(Re[y]==l)break e;break}}if(h++,p)p.push(E);else{E.from>a&&o.push(new Ui(a,E.from,g));let y=E.direction==Tr!=!(g%2);za(r,y?i+1:i,n,E.inner,E.from,E.to,o),a=E.to}S=E.to}else{if(S==t||(c?Re[S]!=l:Re[S]==l))break;S++}p?qa(r,a,S,i+1,n,p,o):a<S&&o.push(new Ui(a,S,g)),a=S}else for(let a=t,h=s.length;a>e;){let c=!0,u=!1;if(!h||a>s[h-1].to){let E=Re[a-1];E!=l&&(c=!1,u=E==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,S=a;e:for(;;)if(h&&S==s[h-1].to){if(u)break e;let E=s[--h];if(!c)for(let y=E.from,I=h;;){if(y==e)break e;if(I&&s[I-1].to==y)y=s[--I].from;else{if(Re[y-1]==l)break e;break}}if(p)p.push(E);else{E.to<a&&o.push(new Ui(E.to,a,g));let y=E.direction==Tr!=!(g%2);za(r,y?i+1:i,n,E.inner,E.from,E.to,o),a=E.from}S=E.from}else{if(S==e||(c?Re[S-1]!=l:Re[S-1]==l))break;S--}p?qa(r,S,a,i+1,n,p,o):S<a&&o.push(new Ui(S,a,g)),a=S}}function za(r,e,t,i,n,s,o){let l=e%2?2:1;YS(r,n,s,i,l),ZS(r,n,s,i,l),eT(n,s,i,l),qa(r,n,s,e,t,i,o)}function tT(r,e,t){if(!r)return[new Ui(0,0,e==qh?1:0)];if(e==Tr&&!t.length&&!JS.test(r))return Tp(r.length);if(t.length)for(;r.length>Re.length;)Re[Re.length]=256;let i=[],n=e==Tr?0:1;return za(r,n,n,t,0,r.length,i),i}function Tp(r){return[new Ui(0,r,0)]}let Ep="";function iT(r,e,t,i,n){var s;let o=i.head-r.from,l=Ui.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],h=a.side(n,t);if(o==h){let p=l+=n?1:-1;if(p<0||p>=e.length)return null;a=e[l=p],o=a.side(!n,t),h=a.side(n,t)}let c=rt(r.text,o,a.forward(n,t));(c<a.from||c>a.to)&&(c=h),Ep=r.text.slice(Math.min(o,c),Math.max(o,c));let u=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return u&&c==h&&u.level+(n?0:1)<a.level?V.cursor(u.side(!n,t)+r.from,u.forward(n,t)?1:-1,u.level):V.cursor(c+r.from,a.forward(n,t)?-1:1,a.level)}function rT(r,e,t){for(let i=e;i<t;i++){let n=gp(r.charCodeAt(i));if(n==1)return Tr;if(n==2||n==4)return qh}return Tr}const Op=W.define(),yp=W.define(),Ip=W.define(),vp=W.define(),Wa=W.define(),Np=W.define(),bp=W.define(),zh=W.define(),Wh=W.define(),Ap=W.define({combine:r=>r.some(e=>e)}),wp=W.define({combine:r=>r.some(e=>e)}),xp=W.define();class $r{constructor(e,t="nearest",i="nearest",n=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new $r(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $r(V.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Hs=ae.define({map:(r,e)=>r.map(e)}),kp=ae.define();function Nt(r,e,t){let i=r.facet(vp);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Li=W.define({combine:r=>r.length?r[0]:!0});let nT=0;const Dn=W.define();class We{constructor(e,t,i,n,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:s,decorations:o}=t||{};return new We(nT++,e,i,n,l=>{let a=[Dn.of(l)];return o&&a.push(Yn.of(h=>{let c=h.plugin(l);return c?o(c):Y.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return We.define(i=>new e(i),t)}}class Fl{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Nt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Nt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Nt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Rp=W.define(),Gh=W.define(),Yn=W.define(),Lp=W.define(),Kh=W.define(),Cp=W.define();function Af(r,e){let t=r.state.facet(Cp);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(r):s),n=[];return ye.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let h=s-e.from,c=o-e.from,u=n;for(let p=l.length-1;p>=0;p--,a--){let g=l[p].spec.bidiIsolate,S;if(g==null&&(g=rT(e.text,h,c)),a>0&&u.length&&(S=u[u.length-1]).to==h&&S.direction==g)S.to=c,u=S.inner;else{let E={from:h,to:c,direction:g,inner:[]};u.push(E),u=E.inner}}}}),n}const Dp=W.define();function Vp(r){let e=0,t=0,i=0,n=0;for(let s of r.state.facet(Dp)){let o=s(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const Vn=W.define();class Ht{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Ht(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,c=a?a.fromB:1e9;for(;s<t.length&&t[s]<c;){let u=t[s],p=t[s+1],g=Math.max(l,u),S=Math.min(c,p);if(g<=S&&new Ht(g+h,S+h,g,S).addToSet(i),p>c)break;s+=2}if(!a)return i;new Ht(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Co{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ke.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,o,l,a)=>n.push(new Ht(s,o,l,a))),this.changedRanges=n}static create(e,t,i){return new Co(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class wf extends Le{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Y.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Ht(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!fT(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let s=n>-1?oT(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:c}=this.hasComposition;i=new Ht(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(G.ie||G.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=hT(o,l,e.changes);return i=Ht.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=G.chrome||G.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof yi&&o.widget instanceof Fa&&s.push(o.dom);n.updateGaps(s)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:h,fromB:c,toB:u}=l,p,g,S,E;if(i&&i.range.fromB<u&&i.range.toB>c){let R=qn.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),L=qn.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);g=R.breakAtStart,S=R.openStart,E=L.openEnd;let x=this.compositionView(i);L.breakAtStart?x.breakAfter=1:L.content.length&&x.merge(x.length,x.length,L.content[0],!1,L.openStart,0)&&(x.breakAfter=L.content[0].breakAfter,L.content.shift()),R.content.length&&x.merge(0,0,R.content[R.content.length-1],!0,0,R.openEnd)&&R.content.pop(),p=R.content.concat(x).concat(L.content)}else({content:p,breakAtStart:g,openStart:S,openEnd:E}=qn.build(this.view.state.doc,c,u,this.decorations,this.dynamicDecorationMap));let{i:y,off:I}=s.findPos(h,1),{i:w,off:A}=s.findPos(a,-1);lp(this,w,A,y,I,p,g,S,E)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(kp)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Jt(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new vi(n,[t],t.length);let i=new qe;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Le.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let s=e.marks.length-1;s>=-1;s--)i=n.childPos(i.off,1),n=n.children[i.i],t(s>=0?e.marks[s].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,s=!n&&co(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(G.gecko&&l.empty&&!this.hasComposition&&sT(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=h=new lt(u,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Hn(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Hn(h.node,h.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{G.android&&G.chrome&&this.dom.contains(c.focusNode)&&cT(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Xn(this.view.root);if(u)if(l.empty){if(G.gecko){let p=lT(a.node,a.offset);if(p&&p!=3){let g=(p==1?np:sp)(a.node,a.offset);g&&(a=new lt(g.node,g.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(h.node,h.offset)}catch{}}else{let p=document.createRange();l.anchor>l.head&&([a,h]=[h,a]),p.setEnd(h.node,h.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,h)),this.impreciseAnchor=a.precise?null:new lt(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new lt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Hn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Xn(e.root),{anchorNode:n,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=qe.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(n,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let s=Le.get(t.childNodes[n]);s instanceof qe&&(i=s.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let s=Le.get(t.childNodes[n]);s instanceof qe&&(i=s.domAtPos(s.length))}return i?new lt(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Le.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof qe)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,h=a-l.length;if(a<e)break;if(h<=e&&(h<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof qe&&!(i instanceof qe&&t>=0)))i=l,n=h;else if(i&&h==e&&a==e&&l instanceof yi&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=h}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof qe))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Jt))return null;let s=rt(n.text,i);if(s==i)return null;let o=Sr(n.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Pe.LTR;for(let h=0,c=0;c<this.children.length;c++){let u=this.children[c],p=h+u.length;if(p>n)break;if(h>=i){let g=u.dom.getBoundingClientRect();if(t.push(g.height),o){let S=u.dom.lastChild,E=S?Jn(S):[];if(E.length){let y=E[E.length-1],I=a?y.right-g.left:g.right-y.left;I>l&&(l=I,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=p)}}}h=p+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Pe.RTL:Pe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qe){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Jn(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,n=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new op(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Y.replace({widget:new Fa(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Y.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Yn).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,n=this.view.state.facet(Lp).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(ye.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(xp))try{if(h(this.view,e.range,e))return!0}catch(c){Nt(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=Vp(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;BS(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Pe.LTR)}}function sT(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function Up(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let i=np(t.focusNode,t.focusOffset),n=sp(t.focusNode,t.focusOffset),s=i||n;if(n&&i&&n.node!=i.node){let l=Le.get(n.node);if(!l||l instanceof Jt&&l.text!=n.node.nodeValue)s=n;else if(r.docView.lastCompositionAfterCursor){let a=Le.get(i.node);!a||a instanceof Jt&&a.text!=i.node.nodeValue||(s=n)}}if(r.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function oT(r,e,t){let i=Up(r,t);if(!i)return null;let{node:n,from:s,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||r.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,h=new Ht(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let u=n.parentNode;;u=u.parentNode){let p=Le.get(u);if(p instanceof vi)c.push({node:u,deco:p.mark});else{if(p instanceof qe||u.nodeName=="DIV"&&u.parentNode==r.contentDOM)return{range:h,text:n,marks:c,line:u};if(u!=r.contentDOM)c.push({node:u,deco:new ds({inclusive:!0,attributes:jS(u),tagName:u.tagName.toLowerCase()})});else return null}}}function lT(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let aT=class{constructor(){this.changes=[]}compareRange(e,t){Ba(e,t,this.changes)}comparePoint(e,t){Ba(e,t,this.changes)}};function hT(r,e,t){let i=new aT;return ye.compare(r,e,t,i),i.changes}function cT(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function fT(r,e){let t=!1;return e&&r.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function uT(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return V.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=rt(n.text,s,!1):l=rt(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=rt(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=rt(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return V.range(o+n.from,l+n.from)}function dT(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function pT(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function Hl(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function xf(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function kf(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Ga(r,e,t){let i,n,s,o,l=!1,a,h,c,u;for(let S=r.firstChild;S;S=S.nextSibling){let E=Jn(S);for(let y=0;y<E.length;y++){let I=E[y];n&&Hl(n,I)&&(I=xf(kf(I,n.bottom),n.top));let w=dT(e,I),A=pT(t,I);if(w==0&&A==0)return S.nodeType==3?Rf(S,e,t):Ga(S,e,t);if(!i||o>A||o==A&&s>w){i=S,n=I,s=w,o=A;let R=A?t<I.top?-1:1:w?e<I.left?-1:1:0;l=!R||(R>0?y<E.length-1:y>0)}w==0?t>I.bottom&&(!c||c.bottom<I.bottom)?(a=S,c=I):t<I.top&&(!u||u.top>I.top)&&(h=S,u=I):c&&Hl(c,I)?c=kf(c,I.bottom):u&&Hl(u,I)&&(u=xf(u,I.top))}}if(c&&c.bottom>=t?(i=a,n=c):u&&u.top<=t&&(i=h,n=u),!i)return{node:r,offset:0};let p=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Rf(i,p,t);if(l&&i.contentEditable!="false")return Ga(i,p,t);let g=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:g}}function Rf(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Sr(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<s){let p=e>=(c.left+c.right)/2,g=p;if((G.chrome||G.gecko)&&Sr(r,l).getBoundingClientRect().left==c.right&&(g=!p),u<=0)return{node:r,offset:l+(g?1:0)};n=l+(g?1:0),s=u}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function Mp(r,e,t,i=-1){var n,s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,{x:c,y:u}=e,p=u-l;if(p<0)return 0;if(p>h)return r.state.doc.length;for(let R=r.viewState.heightOracle.textHeight/2,L=!1;a=r.elementAtHeight(p),a.type!=pt.Text;)for(;p=i>0?a.bottom+R:a.top-R,!(p>=0&&p<=h);){if(L)return t?null:0;L=!0,i=-i}u=l+p;let g=a.from;if(g<r.viewport.from)return r.viewport.from==0?0:t?null:Lf(r,o,a,c,u);if(g>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:Lf(r,o,a,c,u);let S=r.dom.ownerDocument,E=r.root.elementFromPoint?r.root:S,y=E.elementFromPoint(c,u);y&&!r.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=E.elementFromPoint(c,u),y&&!r.contentDOM.contains(y)&&(y=null));let I,w=-1;if(y&&((n=r.docView.nearest(y))===null||n===void 0?void 0:n.isEditable)!=!1){if(S.caretPositionFromPoint){let R=S.caretPositionFromPoint(c,u);R&&({offsetNode:I,offset:w}=R)}else if(S.caretRangeFromPoint){let R=S.caretRangeFromPoint(c,u);R&&({startContainer:I,startOffset:w}=R,(!r.contentDOM.contains(I)||G.safari&&mT(I,w,c)||G.chrome&&gT(I,w,c))&&(I=void 0))}I&&(w=Math.min(pi(I),w))}if(!I||!r.docView.dom.contains(I)){let R=qe.find(r.docView,g);if(!R)return p>a.top+a.height/2?a.to:a.from;({node:I,offset:w}=Ga(R.dom,c,u))}let A=r.docView.nearest(I);if(!A)return null;if(A.isWidget&&((s=A.dom)===null||s===void 0?void 0:s.nodeType)==1){let R=A.dom.getBoundingClientRect();return e.y<R.top||e.y<=R.bottom&&e.x<=(R.left+R.right)/2?A.posAtStart:A.posAtEnd}else return A.localPosFromDOM(I,w)+A.posAtStart}function Lf(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let l=r.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(r.defaultLineHeight-l)*.5)/l);s+=a*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+Ra(o,s,r.state.tabSize)}function mT(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Sr(r,i-1,i).getBoundingClientRect().left>t}function gT(r,e,t){if(e!=0)return!1;for(let n=r;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let i=r.nodeType==1?r.getBoundingClientRect():Sr(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Ka(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==pt.Text))return i}return t}function ST(r,e,t,i){let n=Ka(r,e.head),s=!i||n.type!=pt.Text||!(r.lineWrapping||n.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=r.dom.getBoundingClientRect(),l=r.textDirectionAt(n.from),a=r.posAtCoords({x:t==(l==Pe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return V.cursor(a,t?-1:1)}return V.cursor(t?n.to:n.from,t?-1:1)}function Cf(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=iT(n,s,o,l,t),c=Ep;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;c=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=r.visualLineSide(n,!t)}if(a){if(!a(c))return l}else{if(!i)return h;a=i(c)}l=h}}function TT(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==Be.Space&&(n=o),n==o}}function ET(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return V.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n,e.assoc||-1),c=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let g=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-g.from))),l=(s<0?g.top:g.bottom)+c}let u=a.left+o,p=i??r.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let S=l+(p+g)*s,E=Mp(r,{x:u,y:S},!1,s);if(S<a.top||S>a.bottom||(s<0?E<n:E>n)){let y=r.docView.coordsForChar(E),I=!y||S<y.top?-1:1;return V.cursor(E,I,void 0,o)}}}function fo(r,e,t){for(;;){let i=0;for(let n of r)n.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||t||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function ql(r,e,t){let i=fo(r.state.facet(Kh).map(n=>n(r)),t.from,e.head>t.from?-1:1);return i==t.from?t:V.cursor(i,i<t.from?1:-1)}const Un="";class OT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ie.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Un}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let s=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=Le.get(n),a=Le.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:Ro(n))||Ro(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>s)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Le.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(yT(e,i.node,i.offset)?t:0))}}function yT(r,e,t){for(;;){if(!e||t<pi(e))return!1;if(e==r)return!0;t=gr(e)+1,e=e.parentNode}}class Df{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class IT{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:bT(e),a=new OT(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=AT(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Da(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Da(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((G.ios||G.chrome)&&e.state.selection.main.empty&&a!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(a,h),p=Math.max(a,h),g=c.from-u,S=c.to-p;(g==0||g==1||u==0)&&(S==0||S==-1||p==e.state.doc.length)&&(a=0,h=e.state.doc.length)}this.newSel=V.single(h,a)}}}function Pp(r,e){let t,{newSel:i}=e,n=r.state.selection.main,s=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,h=null;(s===8||G.android&&e.text.length<l-o)&&(a=n.to,h="end");let c=NT(r.state.doc.sliceString(o,l,Un),e.text,a-o,h);c&&(G.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Un+Un&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Ne.of(e.text.slice(c.from,c.toB).split(Un))})}else i&&(!r.hasFocus&&r.state.facet(Li)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,n.to))}:(G.mac||G.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=V.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ne.of([" "])}):G.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=V.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ne.of([" "])}),t)return jh(r,t,i,s);if(i&&!i.main.eq(n)){let o=!1,l="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),l=r.inputState.lastSelectionOrigin),r.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function jh(r,e,t,i=-1){if(G.ios&&r.inputState.flushIOSKey(e))return!0;let n=r.state.selection.main;if(G.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&r.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&jr(r.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&jr(r.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&jr(r.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,l=()=>o||(o=vT(r,e,t));return r.state.facet(Np).some(a=>a(r,e.from,e.to,s,l))||r.dispatch(l()),!0}function vT(r,e,t){let i,n=r.state,s=n.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=s.from<e.from?n.sliceDoc(s.from,e.from):"",a=s.to>e.to?n.sliceDoc(e.to,s.to):"";i=n.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+a))}else{let l=n.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(n.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=r.state.sliceDoc(e.from,e.to),c,u=t&&Up(r,t.main.head);if(u){let S=e.insert.length-(e.to-e.from);c={from:u.from,to:u.to-S}}else c=r.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;i=n.changeByRange(S=>{if(S.from==s.from&&S.to==s.to)return{changes:l,range:a||S.map(l)};let E=S.to-p,y=E-h.length;if(S.to-S.from!=g||r.state.sliceDoc(y,E)!=h||S.to>=c.from&&S.from<=c.to)return{range:S};let I=n.changes({from:y,to:E,insert:e.insert}),w=S.to-s.to;return{changes:I,range:a?V.range(Math.max(0,a.anchor+w),Math.max(0,a.head+w)):S.map(I)}})}else i={changes:l,selection:a&&n.selection.replaceRange(a)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function NT(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&r.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function bT(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new Df(t,i)),(n!=t||s!=i)&&e.push(new Df(n,s))),e}function AT(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?V.single(t+e,i+e):null}class wT{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,G.safari&&e.contentDOM.addEventListener("input",()=>null),G.gecko&&zT(e.contentDOM.ownerDocument)}handleEvent(e){!UT(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=xT(e),i=this.handlers,n=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(n.removeEventListener(s,this.handleEvent),l=null),l||n.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&n.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Bp.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),G.android&&G.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return G.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=_p.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||kT.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,jr(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:G.safari&&!G.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Vf(r,e){return(t,i)=>{try{return e.call(r,i,t)}catch(n){Nt(t.state,n)}}}function xT(r){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of r){let n=i.spec;if(n&&n.domEventHandlers)for(let s in n.domEventHandlers){let o=n.domEventHandlers[s];o&&t(s).handlers.push(Vf(i.value,o))}if(n&&n.domEventObservers)for(let s in n.domEventObservers){let o=n.domEventObservers[s];o&&t(s).observers.push(Vf(i.value,o))}}for(let i in Yt)t(i).handlers.push(Yt[i]);for(let i in zt)t(i).observers.push(zt[i]);return e}const _p=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],kT="dthko",Bp=[16,17,18,20,91,92,224,225],qs=6;function zs(r){return Math.max(0,r)*.7+8}function RT(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class LT{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=FS(e.contentDOM),this.atoms=e.state.facet(Kh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ie.allowMultipleSelections)&&CT(e,t),this.dragging=VT(e,t)&&qp(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&RT(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Vp(this.view);e.clientX-a.left<=n+qs?t=-zs(n-e.clientX):e.clientX+a.right>=o-qs&&(t=zs(e.clientX-o)),e.clientY-a.top<=s+qs?i=-zs(s-e.clientY):e.clientY+a.bottom>=l-qs&&(i=zs(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],s=null;if(n.empty){let o=fo(this.atoms,n.from,0);o!=n.from&&(s=V.cursor(o,-1))}else{let o=fo(this.atoms,n.from,-1),l=fo(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(s=V.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?V.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function CT(r,e){let t=r.state.facet(Op);return t.length?t[0](e):G.mac?e.metaKey:e.ctrlKey}function DT(r,e){let t=r.state.facet(yp);return t.length?t[0](e):G.mac?!e.altKey:!e.ctrlKey}function VT(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=Xn(r.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function UT(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Le.get(t))&&i.ignoreEvent(e))return!1;return!0}const Yt=Object.create(null),zt=Object.create(null),Fp=G.ie&&G.ie_version<15||G.ios&&G.webkit_version<604;function MT(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),Hp(r,t.value)},50)}function ul(r,e,t){for(let i of r.facet(e))t=i(t,r);return t}function Hp(r,e){e=ul(r.state,zh,e);let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ja!=null&&t.selection.ranges.every(a=>a.empty)&&ja==s.toString()){let a=-1;i=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:V.cursor(h.from+u.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:V.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}zt.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};Yt.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);zt.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};zt.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};Yt.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of r.state.facet(Ip))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=BT(r,e)),t){let i=!r.hasFocus;r.inputState.startMouseSelection(new LT(r,e,t,i)),i&&r.observer.ignore(()=>{tp(r.contentDOM);let s=r.root.activeElement;s&&!s.contains(r.contentDOM)&&s.blur()});let n=r.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function Uf(r,e,t,i){if(i==1)return V.cursor(e,t);if(i==2)return uT(r.state,e,t);{let n=qe.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,V.range(o,l)}}let Mf=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function PT(r,e,t,i){let n=qe.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&Mf(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&Mf(t,i,l)?1:o&&o.bottom>=i?-1:1}function Pf(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:PT(r,t,e.clientX,e.clientY)}}const _T=G.ie&&G.ie_version<=11;let _f=null,Bf=0,Ff=0;function qp(r){if(!_T)return r.detail;let e=_f,t=Ff;return _f=r,Ff=Date.now(),Bf=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(Bf+1)%3:1}function BT(r,e){let t=Pf(r,e),i=qp(e),n=r.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),n=n.map(s.changes))},get(s,o,l){let a=Pf(r,s),h,c=Uf(r,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let u=Uf(r,t.pos,t.bias,i),p=Math.min(u.from,c.from),g=Math.max(u.to,c.to);c=p<c.from?V.range(p,g):V.range(g,p)}return o?n.replaceRange(n.main.extend(c.from,c.to)):l&&i==1&&n.ranges.length>1&&(h=FT(n,a.pos))?h:l?n.addRange(c):V.create([c])}}}function FT(r,e){for(let t=0;t<r.ranges.length;t++){let{from:i,to:n}=r.ranges[t];if(i<=e&&n>=e)return V.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}Yt.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let n=r.docView.nearest(e.target);if(n&&n.isWidget){let s=n.posAtStart,o=s+n.length;(s>=t.to||o<=t.from)&&(t=V.range(s,o))}}let{inputState:i}=r;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",ul(r.state,Wh,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Yt.dragend=r=>(r.inputState.draggedContent=null,!1);function Hf(r,e,t,i){if(t=ul(r.state,zh,t),!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=r.inputState,o=i&&s&&DT(r,e)?{from:s.from,to:s.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}Yt.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,s=()=>{++n==t.length&&Hf(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Hf(r,e,i,!0),!0}return!1};Yt.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=Fp?null:e.clipboardData;return t?(Hp(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(MT(r),!1)};function HT(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function qT(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:ul(r,Wh,e.join(r.lineBreak)),ranges:t,linewise:i}}let ja=null;Yt.copy=Yt.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=qT(r.state);if(!t&&!n)return!1;ja=n?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Fp?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(HT(r,t),!1)};const zp=bi.define();function Wp(r,e){let t=[];for(let i of r.facet(bp)){let n=i(r,e);n&&t.push(n)}return t?r.update({effects:t,annotations:zp.of(!0)}):null}function Gp(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=Wp(r.state,e);t?r.dispatch(t):r.update([])}},10)}zt.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),Gp(r)};zt.blur=r=>{r.observer.clearSelectionRange(),Gp(r)};zt.compositionstart=zt.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};zt.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,G.chrome&&G.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};zt.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};Yt.beforeinput=(r,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=r.posAtDOM(l.startContainer,l.startOffset),h=r.posAtDOM(l.endContainer,l.endOffset);return jh(r,{from:a,to:h,insert:r.state.toText(s)},null),!0}}let n;if(G.chrome&&G.android&&(n=_p.find(s=>s.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return G.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),G.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>zt.compositionend(r,e),20),!1};const qf=new Set;function zT(r){qf.has(r)||(qf.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const zf=["pre-wrap","normal","pre-line","break-spaces"];let tn=!1;function Wf(){tn=!1}class WT{constructor(e){this.lineWrapping=e,this.doc=Ne.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return zf.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s,o){let l=zf.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=s,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class GT{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ai{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this._content=s}get type(){return typeof this._content=="number"?pt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ji?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ai(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Me=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(Me||(Me={}));const uo=.001;class mt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>uo&&(tn=!0),this.height=e)}replace(e,t,i){return mt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=n[l],p=s.lineAt(a,Me.ByPosNoHeight,i.setDoc(t),0,0),g=p.to>=h?p:s.lineAt(h,Me.ByPosNoHeight,i,0,0);for(u+=g.to-h,h=g.to;l>0&&p.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<p.from&&(p=s.lineAt(a,Me.ByPosNoHeight,i,0,0));c+=p.from-a,a=p.from;let S=$h.build(i.setDoc(o),e,c,u);s=Do(s,s.replace(a,h,S))}return s.updateHeight(i,0)}static empty(){return new Dt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new KT(mt.of(e.slice(0,t)),o,mt.of(e.slice(i)))}}function Do(r,e){return r==e?r:(r.constructor!=e.constructor&&(tn=!0),e)}mt.prototype.size=1;class Kp extends mt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new ai(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Dt extends Kp{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new ai(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof Dt||n instanceof Ze&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Ze?n=new Dt(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):mt.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ze extends mt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,s=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let h=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(h),u=l+c.length*a,p=Math.max(i,e-u/2);return new ai(c.from,c.length,p,u,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:u}=t.doc.line(s+h);return new ai(c,u,i+l*h,l,0)}}lineAt(e,t,i,n,s){if(t==Me.ByHeight)return this.blockAt(e,i,n,s);if(t==Me.ByPosNoHeight){let{from:g,to:S}=i.doc.lineAt(e);return new ai(g,S-g,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),h=i.doc.lineAt(e),c=l+h.length*a,u=h.number-o,p=n+l*u+a*(h.from-s-u);return new ai(h.from,h.length,Math.max(n,Math.min(p,n+this.height-c)),c,0)}forEachLine(e,t,i,n,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(i,s);for(let c=e,u=n;c<=t;){let p=i.doc.lineAt(c);if(c==e){let S=p.number-l;u+=a*S+h*(e-s-S)}let g=a+h*p.length;o(new ai(p.from,p.length,u,g,0)),u+=g,c=p.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof Ze?i[i.length-1]=new Ze(s.length+n):i.push(null,new Ze(n-1))}if(e>0){let s=i[0];s instanceof Ze?i[0]=new Ze(e+s.length):i.unshift(new Ze(e-1),null)}return mt.of(i)}decomposeLeft(e,t){t.push(new Ze(e-1),null)}decomposeRight(e,t){t.push(null,new Ze(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new Ze(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let u=n.heights[n.index++];a==-1?a=u:Math.abs(u-a)>=uo&&(a=-2);let p=new Dt(c,u);p.outdated=!1,o.push(p),l+=c+1}l<=s&&o.push(null,new Ze(s-l).updateHeight(e,l));let h=mt.of(o);return(a<0||Math.abs(h.height-this.height)>=uo||Math.abs(a-this.heightMetrics(e,t).perLine)>=uo)&&(tn=!0),Do(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class KT extends mt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==Me.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==Me.ByPosNoHeight?Me.ByPosNoHeight:Me.ByPos;return a?h.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,Me.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Gf(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Gf(s,l)}return mt.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?mt.of(this.break?[e,null,t]:[e,t]):(this.left=Do(this.left,e),this.right=Do(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Gf(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof Ze&&(i=r[e+1])instanceof Ze&&r.splice(e-1,3,new Ze(t.length+1+i.length))}const jT=5;class $h{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Dt?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Dt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Kp(o,n,i)):(o||s||n>=jT)&&this.addLineDeco(n,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Dt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Ze(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Dt)return e;let t=new Dt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Dt)&&!this.isCovered?this.nodes.push(new Dt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof Dt&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new $h(i,e);return ye.spans(t,i,n,s,0),s.finish(i)}}function $T(r,e,t){let i=new QT;return ye.compare(r,e,t,i,0),i.changes}class QT{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Ba(e,t,this.changes,5)}}function XT(r,e){let t=r.getBoundingClientRect(),i=r.ownerDocument,n=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let h=r.parentNode;h&&h!=i.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let p=c.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),l=Math.max(l,p.top),a=Math.min(h==r.parentNode?n.innerHeight:a,p.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function JT(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class zl{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e,t){return Y.replace({widget:new YT(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class YT extends Xi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Kf{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=jf,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Pe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Gh).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new WT(t),this.stateDeco=e.facet(Yn).filter(i=>typeof i!="function"),this.heightMap=mt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle.setDoc(e.doc),[new Ht(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Y.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Ws(s,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?jf:new Qh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Mn(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Yn).filter(c=>typeof c!="function");let n=e.changedRanges,s=Ht.extendWithRanges(n,$T(i,this.stateDeco,e?e.changes:Ke.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Wf(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||tn)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(wp)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Pe.RTL:Pe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:R,scaleY:L}=ep(t,l);(R>.005&&Math.abs(this.scaleX-R)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=R,this.scaleY=L,h|=8,o=a=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,p=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=p)&&(this.paddingTop=u,this.paddingBottom=p,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=rp(e.scrollDOM);let S=(this.printing?JT:XT)(t,this.paddingTop),E=S.top-this.pixelViewport.top,y=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let I=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(I!=this.inView&&(this.inView=I,I&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),a){let R=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(R)&&(o=!0),o||n.lineWrapping&&Math.abs(w-this.contentDOMWidth)>n.charWidth){let{lineHeight:L,charWidth:x,textHeight:k}=e.docView.measureTextSize();o=L>0&&n.refresh(s,L,x,k,w/x,R),o&&(e.docView.minWidth=0,h|=8)}E>0&&y>0?c=Math.max(E,y):E<0&&y<0&&(c=Math.min(E,y)),Wf();for(let L of this.viewports){let x=L.from==this.viewport.from?R:e.docView.measureVisibleLineHeights(L);this.heightMap=(o?mt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle,[new Ht(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new GT(L.from,x))}tn&&(h|=2)}let A=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ws(n.lineAt(o-i*1e3,Me.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,Me.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(h,Me.ByPos,s,0,0),p;t.y=="center"?p=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?p=u.top:p=u.bottom-c,a=new Ws(n.lineAt(p-1e3/2,Me.ByHeight,s,0,0).from,n.lineAt(p+c+1e3/2,Me.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ws(this.heightMap.lineAt(i,Me.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Me.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Me.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Me.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new zl(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=Pe.LTR&&!i)return[];let l=[],a=(c,u,p,g)=>{if(u-c<s)return;let S=this.state.selection.main,E=[S.from];S.empty||E.push(S.to);for(let I of E)if(I>c&&I<u){a(c,I-10,p,g),a(I+10,u,p,g);return}let y=eE(e,I=>I.from>=p.from&&I.to<=p.to&&Math.abs(I.from-c)<s&&Math.abs(I.to-u)<s&&!E.some(w=>I.from<w&&I.to>w));if(!y){if(u<p.to&&t&&i&&t.visibleRanges.some(A=>A.from<=u&&A.to>=u)){let A=t.moveToLineBoundary(V.cursor(u),!1,!0).head;A>c&&(u=A)}let I=this.gapSize(p,c,u,g),w=i||I<2e6?I:2e6;y=new zl(c,u,I,w)}l.push(y)},h=c=>{if(c.length<o||c.type!=pt.Text)return;let u=ZT(c.from,c.to,this.stateDeco);if(u.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,g,S;if(i){let E=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,I;if(p!=null){let w=Ks(u,p),A=((this.visibleBottom-this.visibleTop)/2+E)/c.height;y=w-A,I=w+A}else y=(this.visibleTop-c.top-E)/c.height,I=(this.visibleBottom-c.top+E)/c.height;g=Gs(u,y),S=Gs(u,I)}else{let E=u.total*this.heightOracle.charWidth,y=n*this.heightOracle.charWidth,I=0;if(E>2e6)for(let x of e)x.from>=c.from&&x.from<c.to&&x.size!=x.displaySize&&x.from*this.heightOracle.charWidth+I<this.pixelViewport.left&&(I=x.size-x.displaySize);let w=this.pixelViewport.left+I,A=this.pixelViewport.right+I,R,L;if(p!=null){let x=Ks(u,p),k=((A-w)/2+y)/E;R=x-k,L=x+k}else R=(w-y)/E,L=(A+y)/E;g=Gs(u,R),S=Gs(u,L)}g>c.from&&a(c.from,g,c,u),S<c.to&&a(S,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return l}gapSize(e,t,i,n){let s=Ks(n,i)-Ks(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){zl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Y.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];ye.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Mn(this.heightMap.lineAt(e,Me.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Mn(this.heightMap.lineAt(this.scaler.fromDOM(e),Me.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Mn(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ws{constructor(e,t){this.from=e,this.to=t}}function ZT(r,e,t){let i=[],n=r,s=0;return ye.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function Gs({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function Ks(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function eE(r,e){for(let t of r)if(e(t))return t}const jf={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class Qh{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,Me.ByPos,e,0,0).top,c=t.lineAt(a,Me.ByPos,e,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}eq(e){return e instanceof Qh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function Mn(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ai(r.from,r.length,t,i-t,Array.isArray(r._content)?r._content.map(n=>Mn(n,e)):r._content)}const js=W.define({combine:r=>r.join(" ")}),$a=W.define({combine:r=>r.indexOf(!0)>-1}),Qa=Gi.newName(),jp=Gi.newName(),$p=Gi.newName(),Qp={"&light":"."+jp,"&dark":"."+$p};function Xa(r,e,t){return new Gi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const tE=Xa("."+Qa,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Qp),iE={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Wl=G.ie&&G.ie_version<=11;class rE{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new HS,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(G.ie&&G.ie_version<=11||G.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(G.chrome&&G.chrome_version<126)&&(this.editContext=new sE(e),e.state.facet(Li)&&(e.contentDOM.editContext=this.editContext.editContext)),Wl&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Li)?i.root.activeElement!=this.dom:!co(this.dom,n))return;let s=n.anchorNode&&i.docView.nearest(n.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(G.ie&&G.ie_version<=11||G.android&&G.chrome)&&!i.state.selection.main.empty&&n.focusNode&&Hn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Xn(e.root);if(!t)return!1;let i=G.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&nE(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=co(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&zS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,iE),Wl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Wl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&jr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&co(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new IT(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=Pp(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=$f(t,e.previousSibling||e.target.previousSibling,-1),n=$f(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Li)!=e.state.facet(Li)&&(e.view.contentDOM.editContext=e.state.facet(Li)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function $f(r,e,t){for(;e;){let i=Le.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Qf(r,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,s=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return Hn(o.node,o.offset,n,s)&&([t,i,n,s]=[n,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}}function nE(r,e){if(e.getComposedRanges){let n=e.getComposedRanges(r.root)[0];if(n)return Qf(r,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",i,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",i,!0),t?Qf(r,t):null}class sE{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:n}=e.state.selection.main,s={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Ne.of(i.text.split(`
`))};s.from==this.from&&n<this.from?s.from=n:s.to==this.to&&n>this.to&&(s.to=n),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||jh(e,s,V.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let n=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,n.push(s)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;n.push(Y.mark({attributes:{style:a}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:kp.of(Y.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=Xn(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,h)=>{if(i)return;let c=h.length-(o-s);if(n&&o>=n.to)if(n.from==s&&n.to==o&&n.insert.eq(h)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}else n=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class z{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(s=>i(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||qS(e.parent)||document,this.viewState=new Kf(e.state||Ie.create(e)),e.scrollTo&&e.scrollTo.is(Hs)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Dn).map(n=>new Fl(n));for(let n of this.plugins)n.update(this);this.observer=new rE(this),this.inputState=new wT(this),this.inputState.ensureHandlers(this.plugins),this.docView=new wf(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof je?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(p=>p.annotation(zp))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Wp(s,o),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Ie.phrases)!=this.state.facet(Ie.phrases))return this.setState(s);n=Co.create(this,s,e),n.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(u&&(u=u.map(p.changes)),p.scrollIntoView){let{main:g}=p.state.selection;u=new $r(g.empty?g:V.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of p.effects)g.is(Hs)&&(u=g.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=Vo.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Vn)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(js)!=n.state.facet(js)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let p of this.state.facet(Wa))try{p(n)}catch(g){Nt(this.state,g,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Pp(this,c)&&h.force&&jr(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Kf(e),this.plugins=e.facet(Dn).map(i=>new Fl(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new wf(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Dn),i=e.state.facet(Dn);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new Fl(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Nt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(rp(i))s=-1,o=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(n);s=g.from,o=g.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(g=>{try{return g.read(this)}catch(S){return Nt(this.state,S),Xf}}),u=Co.create(this,this.state,[]),p=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),p=this.docView.update(u),p&&this.docViewUpdate());for(let g=0;g<h.length;g++)if(c[g]!=Xf)try{let S=h[g];S.write&&S.write(c[g],this)}catch(S){Nt(this.state,S)}if(p&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let S=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(S>1||S<-1){n=n+S,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(Wa))l(t)}get themeClasses(){return Qa+" "+(this.state.facet($a)?$p:jp)+" "+this.state.facet(js)}updateAttrs(){let e=Jf(this,Rp,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Li)?"true":"false",class:"cm-content",style:`${G.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Jf(this,Gh,t);let i=this.observer.ignore(()=>{let n=_a(this.contentDOM,this.contentAttrs,t),s=_a(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(z.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Vn);let e=this.state.facet(z.cspNonce);Gi.mount(this.root,this.styleModules.concat(tE).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return ql(this,e,Cf(this,e,t,i))}moveByGroup(e,t){return ql(this,e,Cf(this,e,t,i=>TT(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return V.cursor(s.side(t,n)+e.from,s.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return ST(this,e,t,i)}moveVertically(e,t,i){return ql(this,e,ET(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Mp(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[Ui.find(s,e-n.from,-1,t)];return cl(i,o.dir==Pe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ap)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>oE)return Tp(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Sp(s.isolates,i=Af(this,e))))return s.order;i||(i=Af(this,e));let n=tT(e.text,t,i);return this.bidiCache.push(new Vo(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||G.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{tp(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Hs.of(new $r(typeof e=="number"?V.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Hs.of(new $r(V.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return We.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return We.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=Gi.newName(),n=[js.of(i),Vn.of(Xa(`.${i}`,e))];return t&&t.dark&&n.push($a.of(!0)),n}static baseTheme(e){return Ir.lowest(Vn.of(Xa("."+Qa,e,Qp)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&Le.get(i)||Le.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}z.styleModule=Vn;z.inputHandler=Np;z.clipboardInputFilter=zh;z.clipboardOutputFilter=Wh;z.scrollHandler=xp;z.focusChangeEffect=bp;z.perLineTextDirection=Ap;z.exceptionSink=vp;z.updateListener=Wa;z.editable=Li;z.mouseSelectionStyle=Ip;z.dragMovesSelection=yp;z.clickAddsSelectionRange=Op;z.decorations=Yn;z.outerDecorations=Lp;z.atomicRanges=Kh;z.bidiIsolatedRanges=Cp;z.scrollMargins=Dp;z.darkTheme=$a;z.cspNonce=W.define({combine:r=>r.length?r[0]:""});z.contentAttributes=Gh;z.editorAttributes=Rp;z.lineWrapping=z.contentAttributes.of({class:"cm-lineWrapping"});z.announce=ae.define();const oE=4096,Xf={};class Vo{constructor(e,t,i,n,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:Pe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new Vo(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Jf(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Pa(o,t)}return t}const lE=G.mac?"mac":G.windows?"win":G.linux?"linux":"key";function aE(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function $s(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const hE=Ir.default(z.domEventHandlers({keydown(r,e){return Jp(Xp(e.state),r,e,"editor")}})),dl=W.define({enables:hE}),Yf=new WeakMap;function Xp(r){let e=r.facet(dl),t=Yf.get(e);return t||Yf.set(e,t=uE(e.reduce((i,n)=>i.concat(n),[]))),t}function cE(r,e,t){return Jp(Xp(r.state),e,r,t)}let Ci=null;const fE=4e3;function uE(r,e=lE){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h,c)=>{var u,p;let g=t[o]||(t[o]=Object.create(null)),S=l.split(/ (?!$)/).map(I=>aE(I,e));for(let I=1;I<S.length;I++){let w=S.slice(0,I).join(" ");n(w,!0),g[w]||(g[w]={preventDefault:!0,stopPropagation:!1,run:[A=>{let R=Ci={view:A,prefix:w,scope:o};return setTimeout(()=>{Ci==R&&(Ci=null)},fE),!0}]})}let E=S.join(" ");n(E,!1);let y=g[E]||(g[E]={preventDefault:!1,stopPropagation:!1,run:((p=(u=g._any)===null||u===void 0?void 0:u.run)===null||p===void 0?void 0:p.slice())||[]});a&&y.run.push(a),h&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of r){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let p in c)c[p].run.push(g=>u(g,Ja))}let a=o[e]||o.key;if(a)for(let h of l)s(h,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let Ja=null;function Jp(r,e,t,i){Ja=e;let n=PS(e),s=et(n,0),o=Bt(s)==n.length&&n!=" ",l="",a=!1,h=!1,c=!1;Ci&&Ci.view==t&&Ci.scope==i&&(l=Ci.prefix+" ",Bp.indexOf(e.keyCode)<0&&(h=!0,Ci=null));let u=new Set,p=y=>{if(y){for(let I of y.run)if(!u.has(I)&&(u.add(I),I(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),h=!0)}return!1},g=r[i],S,E;return g&&(p(g[l+$s(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(G.windows&&e.ctrlKey&&e.altKey)&&(S=Ki[e.keyCode])&&S!=n?(p(g[l+$s(S,e,!0)])||e.shiftKey&&(E=Qn[e.keyCode])!=n&&E!=S&&p(g[l+$s(E,e,!1)]))&&(a=!0):o&&e.shiftKey&&p(g[l+$s(n,e,!0)])&&(a=!0),!a&&p(g._any)&&(a=!0)),h&&(a=!0),a&&c&&e.stopPropagation(),Ja=null,a}class ms{constructor(e,t,i,n,s){this.className=e,this.left=t,this.top=i,this.width=n,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let s=Yp(e);return[new ms(t,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return dE(e,t,i)}}function Yp(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Pe.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function Zf(r,e,t,i){let n=r.coordsAtPos(e,t*2);if(!n)return i;let s=r.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=r.posAtCoords({x:s.left+1,y:o}),a=r.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function dE(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let i=Math.max(t.from,r.viewport.from),n=Math.min(t.to,r.viewport.to),s=r.textDirection==Pe.LTR,o=r.contentDOM,l=o.getBoundingClientRect(),a=Yp(r),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),p=l.right-(c?parseInt(c.paddingRight):0),g=Ka(r,i),S=Ka(r,n),E=g.type==pt.Text?g:null,y=S.type==pt.Text?S:null;if(E&&(r.lineWrapping||g.widgetLineBreaks)&&(E=Zf(r,i,1,E)),y&&(r.lineWrapping||S.widgetLineBreaks)&&(y=Zf(r,n,-1,y)),E&&y&&E.from==y.from&&E.to==y.to)return w(A(t.from,t.to,E));{let L=E?A(t.from,null,E):R(g,!1),x=y?A(null,t.to,y):R(S,!0),k=[];return(E||g).to<(y||S).from-(E&&y?1:0)||g.widgetLineBreaks>1&&L.bottom+r.defaultLineHeight/2<x.top?k.push(I(u,L.bottom,p,x.top)):L.bottom<x.top&&r.elementAtHeight((L.bottom+x.top)/2).type==pt.Text&&(L.bottom=x.top=(L.bottom+x.top)/2),w(L).concat(k).concat(w(x))}function I(L,x,k,H){return new ms(e,L-a.left,x-a.top-.01,k-L,H-x+.01)}function w({top:L,bottom:x,horizontal:k}){let H=[];for(let B=0;B<k.length;B+=2)H.push(I(k[B],L,k[B+1],x));return H}function A(L,x,k){let H=1e9,B=-1e9,F=[];function $(Z,re,pe,Ee,ve){let le=r.coordsAtPos(Z,Z==k.to?-2:2),se=r.coordsAtPos(pe,pe==k.from?2:-2);!le||!se||(H=Math.min(le.top,se.top,H),B=Math.max(le.bottom,se.bottom,B),ve==Pe.LTR?F.push(s&&re?u:le.left,s&&Ee?p:se.right):F.push(!s&&Ee?u:se.left,!s&&re?p:le.right))}let C=L??k.from,q=x??k.to;for(let Z of r.visibleRanges)if(Z.to>C&&Z.from<q)for(let re=Math.max(Z.from,C),pe=Math.min(Z.to,q);;){let Ee=r.state.doc.lineAt(re);for(let ve of r.bidiSpans(Ee)){let le=ve.from+Ee.from,se=ve.to+Ee.from;if(le>=pe)break;se>re&&$(Math.max(le,re),L==null&&le<=C,Math.min(se,pe),x==null&&se>=q,ve.dir)}if(re=Ee.to+1,re>=pe)break}return F.length==0&&$(C,L==null,q,x==null,r.textDirection),{top:H,bottom:B,horizontal:F}}function R(L,x){let k=l.top+(x?L.top:L.bottom);return{top:k,bottom:k,horizontal:[]}}}function pE(r,e){return r.constructor==e.constructor&&r.eq(e)}class mE{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(po)!=e.state.facet(po)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(po);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!pE(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const po=W.define();function Zp(r){return[We.define(e=>new mE(e,r)),po.of(r)]}const em=!G.ios,Zn=W.define({combine(r){return mi(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function gE(r={}){return[Zn.of(r),SE,TE,EE,wp.of(!0)]}function tm(r){return r.startState.facet(Zn)!=r.state.facet(Zn)}const SE=Zp({above:!0,markers(r){let{state:e}=r,t=e.facet(Zn),i=[];for(let n of e.selection.ranges){let s=n==e.selection.main;if(n.empty?!s||em:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:V.cursor(n.head,n.head>n.anchor?-1:1);for(let a of ms.forRange(r,o,l))i.push(a)}}return i},update(r,e){r.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=tm(r);return t&&eu(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){eu(e.state,r)},class:"cm-cursorLayer"});function eu(r,e){e.style.animationDuration=r.facet(Zn).cursorBlinkRate+"ms"}const TE=Zp({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:ms.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||tm(r)},class:"cm-selectionLayer"}),Ya={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};em&&(Ya[".cm-line"].caretColor=Ya[".cm-content"].caretColor="transparent !important");const EE=Ir.highest(z.theme(Ya)),im=ae.define({map(r,e){return r==null?null:e.mapPos(r)}}),Pn=nt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(im)?i.value:t,r)}}),OE=We.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Pn);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Pn)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(Pn),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let i=r.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-i.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Pn)!=r&&this.view.dispatch({effects:im.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function yE(){return[Pn,OE]}function tu(r,e,t,i,n){e.lastIndex=0;for(let s=r.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(o+l.index,l)}function IE(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:s}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=s:i.push({from:n,to:s});return i}class vE{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,h,c)=>n(c,h,h+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,h,c)=>{let u=i(l,a,h);u&&c(h,h+l[0].length,u)};else if(i)this.addMatch=(l,a,h,c)=>c(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Wi,i=t.add.bind(t);for(let{from:n,to:s}of IE(e,this.maxLength))tu(e.state.doc,this.regexp,n,s,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,n);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let p=[],g,S=(E,y,I)=>p.push(I.range(E,y));if(a==h)for(this.regexp.lastIndex=c-a.from;(g=this.regexp.exec(a.text))&&g.index<u-a.from;)this.addMatch(g,e,g.index+a.from,S);else tu(e.state.doc,this.regexp,c,u,(E,y)=>this.addMatch(y,e,E,S));t=t.update({filterFrom:c,filterTo:u,filter:(E,y)=>E<c||y>u,add:p})}}return t}}const Za=/x/.unicode!=null?"gu":"g",NE=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Za),bE={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Gl=null;function AE(){var r;if(Gl==null&&typeof document<"u"&&document.body){let e=document.body.style;Gl=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return Gl||!1}const mo=W.define({combine(r){let e=mi(r,{render:null,specialChars:NE,addSpecialChars:null});return(e.replaceTabs=!AE())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Za)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Za)),e}});function wE(r={}){return[mo.of(r),xE()]}let iu=null;function xE(){return iu||(iu=We.fromClass(class{constructor(r){this.view=r,this.decorations=Y.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(mo)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new vE({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,s=et(e[0],0);if(s==9){let o=n.lineAt(i),l=t.state.tabSize,a=un(o.text,l,i-o.from);return Y.replace({widget:new CE((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Y.replace({widget:new LE(r,s)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(mo);r.startState.facet(mo)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const kE="";function RE(r){return r>=32?kE:r==10?"":String.fromCharCode(9216+r)}class LE extends Xi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=RE(this.code),i=e.state.phrase("Control character")+" "+(bE[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class CE extends Xi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function DE(){return UE}const VE=Y.line({class:"cm-activeLine"}),UE=We.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){let n=r.lineBlockAt(i.head);n.from>e&&(t.push(VE.range(n.from)),e=n.from)}return Y.set(t)}},{decorations:r=>r.decorations}),eh=2e3;function ME(r,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),s=[];if(e.off>eh||t.off>eh||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let h=r.doc.line(a);h.length<=l&&s.push(V.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let h=r.doc.line(a),c=Ra(h.text,o,r.tabSize,!0);if(c<0)s.push(V.cursor(h.to));else{let u=Ra(h.text,l,r.tabSize);s.push(V.range(h.from+c,h.from+u))}}}return s}function PE(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function ru(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),n=t-i.from,s=n>eh?-1:n==i.length?PE(r,e.clientX):un(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:s,off:n}}function _E(r,e){let t=ru(r,e),i=r.state.selection;return t?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,s,o){let l=ru(r,n);if(!l)return i;let a=ME(r.state,t,l);return a.length?o?V.create(a.concat(i.ranges)):V.create(a):i}}:null}function BE(r){let e=t=>t.altKey&&t.button==0;return z.mouseSelectionStyle.of((t,i)=>e(i)?_E(t,i):null)}const FE={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},HE={style:"cursor: crosshair"};function qE(r={}){let[e,t]=FE[r.key||"Alt"],i=We.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,z.contentAttributes.of(n=>{var s;return!((s=n.plugin(i))===null||s===void 0)&&s.isDown?HE:null})]}const An="-10000px";class rm{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let n=e.state.facet(this.facet),s=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<s.length;a++){let h=s[a],c=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let p=this.tooltips[u];p&&p.create==h.create&&(c=u)}if(c<0)o[a]=this.createTooltipView(h,a?o[a-1]:null),l&&(l[a]=!!h.above);else{let u=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),u.update&&u.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,h)=>t[h]=a),t.length=l.length),this.input=n,this.tooltips=s,this.tooltipViews=o,!0}}function zE(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Kl=W.define({combine:r=>{var e,t,i;return{position:G.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||zE}}}),nu=new WeakMap,Xh=We.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(Kl);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new rm(r,Jh,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(Kl);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=An,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(r=i.destroy)===null||r===void 0||r.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(G.gecko)i=n.offsetParent!=this.container.ownerDocument.body;else if(n.style.top==An&&n.style.left=="0px"){let s=n.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((n,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(Kl).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:n,scaleY:s}=r,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=r.pos[l],p=r.size[l];if(!u||u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1){c.style.top=An;continue}let g=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,S=g?7:0,E=p.right-p.left,y=(e=nu.get(h))!==null&&e!==void 0?e:p.bottom-p.top,I=h.offset||GE,w=this.view.textDirection==Pe.LTR,A=p.width>i.right-i.left?w?i.left:i.right-p.width:w?Math.max(i.left,Math.min(u.left-(g?14:0)+I.x,i.right-E)):Math.min(Math.max(i.left,u.left-E+(g?14:0)-I.x),i.right-E),R=this.above[l];!a.strictSide&&(R?u.top-(p.bottom-p.top)-I.y<i.top:u.bottom+(p.bottom-p.top)+I.y>i.bottom)&&R==i.bottom-u.bottom>u.top-i.top&&(R=this.above[l]=!R);let L=(R?u.top-i.top:i.bottom-u.bottom)-S;if(L<y&&h.resize!==!1){if(L<this.view.defaultLineHeight){c.style.top=An;continue}nu.set(h,y),c.style.height=(y=L)/s+"px"}else c.style.height&&(c.style.height="");let x=R?u.top-y-S-I.y:u.bottom+S+I.y,k=A+E;if(h.overlap!==!0)for(let H of o)H.left<k&&H.right>A&&H.top<x+y&&H.bottom>x&&(x=R?H.top-y-2-S:H.bottom+S+2);if(this.position=="absolute"?(c.style.top=(x-r.parent.top)/s+"px",c.style.left=(A-r.parent.left)/n+"px"):(c.style.top=x/s+"px",c.style.left=A/n+"px"),g){let H=u.left+(w?I.x:-I.x)-(A+14-7);g.style.left=H/n+"px"}h.overlap!==!0&&o.push({left:A,top:x,right:k,bottom:x+y}),c.classList.toggle("cm-tooltip-above",R),c.classList.toggle("cm-tooltip-below",!R),h.positioned&&h.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=An}},{eventObservers:{scroll(){this.maybeMeasure()}}}),WE=z.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),GE={x:0,y:0},Jh=W.define({enables:[Xh,WE]}),Uo=W.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class pl{static create(e){return new pl(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new rm(e,Uo,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const KE=Jh.compute([Uo],r=>{let e=r.facet(Uo);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:pl.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class jE{constructor(e,t,i,n,s){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,s=1;if(i instanceof Vi)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),h=a&&a.dir==Pe.RTL?-1:1;s=t.x<l.left?-h:h}let o=this.source(e,n,s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Nt(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Xh),t=e?e.manager.tooltips.findIndex(i=>i.create==pl.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:s}=this;if(n.length&&s&&!$E(s.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!QE(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Qs=4;function $E(r,e){let{left:t,right:i,top:n,bottom:s}=r.getBoundingClientRect(),o;if(o=r.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),s=Math.max(l.bottom,s)}return e.clientX>=t-Qs&&e.clientX<=i+Qs&&e.clientY>=n-Qs&&e.clientY<=s+Qs}function QE(r,e,t,i,n,s){let o=r.scrollDOM.getBoundingClientRect(),l=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=r.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function XE(r,e={}){let t=ae.define(),i=nt.define({create(){return[]},update(n,s){if(n.length&&(e.hideOnChange&&(s.docChanged||s.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of n){let a=s.changes.mapPos(l.pos,-1,dt.TrackDel);if(a!=null){let h=Object.assign(Object.create(null),l);h.pos=a,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}n=o}for(let o of s.effects)o.is(t)&&(n=o.value),o.is(JE)&&(n=[]);return n},provide:n=>Uo.from(n)});return{active:i,extension:[i,We.define(n=>new jE(n,r,i,t,e.hoverTime||300)),KE]}}function nm(r,e){let t=r.plugin(Xh);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const JE=ae.define(),su=W.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function es(r,e){let t=r.plugin(sm),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const sm=We.fromClass(class{constructor(r){this.input=r.state.facet(ts),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(su);this.top=new Xs(r,!0,e.topContainer),this.bottom=new Xs(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(su);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Xs(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Xs(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(ts);if(t!=this.input){let i=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),c;h<0?(c=a(r.view),l.push(c)):(c=this.panels[h],c.update&&c.update(r)),n.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>z.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Xs{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=ou(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=ou(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ou(r){let e=r.nextSibling;return r.remove(),e}const ts=W.define({enables:sm});class Ni extends mr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ni.prototype.elementClass="";Ni.prototype.toDOM=void 0;Ni.prototype.mapMode=dt.TrackBefore;Ni.prototype.startSide=Ni.prototype.endSide=-1;Ni.prototype.point=!0;const go=W.define(),YE=W.define(),ZE={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ye.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},zn=W.define();function eO(r){return[om(),zn.of(Object.assign(Object.assign({},ZE),r))]}const lu=W.define({combine:r=>r.some(e=>e)});function om(r){return[tO]}const tO=We.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(zn).map(e=>new hu(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(lu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(lu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=ye.iter(this.view.state.facet(go),this.view.viewport.from),i=[],n=this.gutters.map(s=>new iO(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==pt.Text&&o){th(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(s.type==pt.Text){th(t,i,s.from);for(let o of n)o.line(this.view,s,i)}else if(s.widget)for(let o of n)o.widget(this.view,s);for(let s of n)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(zn),t=r.state.facet(zn),i=r.docChanged||r.heightChanged||r.viewportChanged||!ye.eq(r.startState.facet(go),r.state.facet(go),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new hu(this.view,s)):(this.gutters[o].update(r),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>z.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Pe.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function au(r){return Array.isArray(r)?r:[r]}function th(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class iO{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ye.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new lm(e,o,s,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,s,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];th(this.cursor,n,t.from),i.length&&(n=n.concat(i));let s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let s of e.state.facet(YE)){let o=s(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class hu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let s=n.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=au(t.markers(e)),t.initialSpacer&&(this.spacer=new lm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=au(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!ye.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class lm{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),rO(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function rO(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const nO=W.define(),sO=W.define(),_r=W.define({combine(r){return mi(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let s=i[n],o=t[n];i[n]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return i}})}});class jl extends Ni{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $l(r,e){return r.state.facet(_r).formatNumber(e,r.state)}const oO=zn.compute([_r],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(nO)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new jl($l(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(sO)){let s=n(e,t,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(_r)!=e.state.facet(_r),initialSpacer(e){return new jl($l(e,cu(e.state.doc.lines)))},updateSpacer(e,t){let i=$l(t.view,cu(t.view.state.doc.lines));return i==e.number?e:new jl(i)},domEventHandlers:r.facet(_r).domEventHandlers}));function lO(r={}){return[_r.of(r),om(),oO]}function cu(r){let e=9;for(;e<r;)e=e*10+9;return e}const aO=new class extends Ni{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},hO=go.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.head).from;n>t&&(t=n,e.push(aO.range(n)))}return ye.of(e)});function cO(){return hO}const am=1024;let fO=0;class Ql{constructor(e,t){this.from=e,this.to=t}}class de{constructor(e={}){this.id=fO++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=At.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}de.closedBy=new de({deserialize:r=>r.split(" ")});de.openedBy=new de({deserialize:r=>r.split(" ")});de.group=new de({deserialize:r=>r.split(" ")});de.isolate=new de({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});de.contextHash=new de({perNode:!0});de.lookAhead=new de({perNode:!0});de.mounted=new de({perNode:!0});class Mo{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[de.mounted.id]}}const uO=Object.create(null);class At{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):uO,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new At(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(de.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(de.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}At.none=new At("",Object.create(null),0,8);class Yh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new At(i.name,n,i.id,i.flags):i)}return new Yh(t)}}const Js=new WeakMap,fu=new WeakMap;var Je;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Je||(Je={}));class ze{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Mo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new rh(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Js.get(this)||this.topNode,s=new rh(n);return s.moveTo(e,t),Js.set(this,s._tree),s}get topNode(){return new qt(this,0,0,null)}resolve(e,t=0){let i=is(Js.get(this)||this.topNode,e,t,!1);return Js.set(this,i),i}resolveInner(e,t=0){let i=is(fu.get(this)||this.topNode,e,t,!0);return fu.set(this,i),i}resolveStack(e,t=0){return mO(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e,o=e.mode||0,l=(o&Je.IncludeAnonymous)>0;for(let a=this.cursor(o|Je.IncludeAnonymous);;){let h=!1;if(a.from<=s&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:tc(At.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new ze(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new ze(At.none,t,i,n)))}static build(e){return gO(e)}}ze.empty=new ze(At.none,[],[],0);class Zh{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Zh(this.buffer,this.index)}}class $i{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return At.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(hm(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=n[l++],s[a++]=n[l++]-i;let h=s[a++]=n[l++]-i;s[a++]=n[l++]-e,o=Math.max(o,h)}return new $i(s,o,this.set)}}function hm(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function is(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof qt&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Je.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof qt&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class cm{cursor(e=0){return new rh(this,e)}getChild(e,t=null,i=null){let n=uu(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return uu(this,e,t,i)}resolve(e,t=0){return is(this,e,t,!1)}resolveInner(e,t=0){return is(this,e,t,!0)}matchContext(e){return ih(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class qt extends cm{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let c=l[e],u=a[e]+o.from;if(hm(n,i,u,u+c.length)){if(c instanceof $i){if(s&Je.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,t,i-u,n);if(p>-1)return new Mi(new dO(o,c,e,u),null,p)}else if(s&Je.IncludeAnonymous||!c.type.isAnonymous||ec(c)){let p;if(!(s&Je.IgnoreMounts)&&(p=Mo.get(c))&&!p.overlay)return new qt(p.tree,u,e,o);let g=new qt(c,u,e,o);return s&Je.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?c.children.length-1:0,t,i,n)}}}if(s&Je.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Je.IgnoreOverlays)&&(n=Mo.get(this._tree))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new qt(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function uu(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function ih(r,e,t=e.length-1){for(let i=r;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class dO{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Mi extends cm{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Mi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Je.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Mi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Mi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Mi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1];e.push(i.slice(n,s,o)),t.push(0)}return new ze(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function fm(r){if(!r.length)return null;let e=0,t=r[0];for(let s=1;s<r.length;s++){let o=r[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof qt&&t.index<0?null:t.parent,n=r.slice();return i?n[e]=i:n.splice(e,1),new pO(n,t)}class pO{constructor(e,t){this.heads=e,this.node=t}get next(){return fm(this.heads)}}function mO(r,e,t){let i=r.resolveInner(e,t),n=null;for(let s=i instanceof qt?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(n||(n=[i])).push(o.resolve(e,t)),s=o}else{let o=Mo.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new qt(o.tree,o.overlay[0].from+s.from,-1,s);(n||(n=[i])).push(is(l,e,t,!1))}}return n?fm(n):i}class rh{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof qt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof qt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Je.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Je.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Je.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Je.IncludeAnonymous||l instanceof $i||!l.type.isAnonymous||ec(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}for(let n=i;n<this.stack.length;n++)t=new Mi(this.buffer,t,this.stack[n]);return this.bufferNode=new Mi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return ih(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return ih(this._tree,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function ec(r){return r.children.some(e=>e instanceof $i||!e.type.isAnonymous||ec(e))}function gO(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=am,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new Zh(t,t.length):t,a=i.types,h=0,c=0;function u(L,x,k,H,B,F){let{id:$,start:C,end:q,size:Z}=l,re=c,pe=h;for(;Z<0;)if(l.next(),Z==-1){let ee=s[$];k.push(ee),H.push(C-L);return}else if(Z==-3){h=$;return}else if(Z==-4){c=$;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let Ee=a[$],ve,le,se=C-L;if(q-C<=n&&(le=y(l.pos-x,B))){let ee=new Uint16Array(le.size-le.skip),Se=l.pos-le.size,ce=ee.length;for(;l.pos>Se;)ce=I(le.start,ee,ce);ve=new $i(ee,q-le.start,i),se=le.start-L}else{let ee=l.pos-Z;l.next();let Se=[],ce=[],K=$>=o?$:-1,Q=0,me=q;for(;l.pos>ee;)K>=0&&l.id==K&&l.size>=0?(l.end<=me-n&&(S(Se,ce,C,Q,l.end,me,K,re,pe),Q=Se.length,me=l.end),l.next()):F>2500?p(C,ee,Se,ce):u(C,ee,Se,ce,K,F+1);if(K>=0&&Q>0&&Q<Se.length&&S(Se,ce,C,Q,C,me,K,re,pe),Se.reverse(),ce.reverse(),K>-1&&Q>0){let Oe=g(Ee,pe);ve=tc(Ee,Se,ce,0,Se.length,0,q-C,Oe,Oe)}else ve=E(Ee,Se,ce,q-C,re-q,pe)}k.push(ve),H.push(se)}function p(L,x,k,H){let B=[],F=0,$=-1;for(;l.pos>x;){let{id:C,start:q,end:Z,size:re}=l;if(re>4)l.next();else{if($>-1&&q<$)break;$<0&&($=Z-n),B.push(C,q,Z),F++,l.next()}}if(F){let C=new Uint16Array(F*4),q=B[B.length-2];for(let Z=B.length-3,re=0;Z>=0;Z-=3)C[re++]=B[Z],C[re++]=B[Z+1]-q,C[re++]=B[Z+2]-q,C[re++]=re;k.push(new $i(C,B[2]-q,i)),H.push(q-L)}}function g(L,x){return(k,H,B)=>{let F=0,$=k.length-1,C,q;if($>=0&&(C=k[$])instanceof ze){if(!$&&C.type==L&&C.length==B)return C;(q=C.prop(de.lookAhead))&&(F=H[$]+C.length+q)}return E(L,k,H,B,F,x)}}function S(L,x,k,H,B,F,$,C,q){let Z=[],re=[];for(;L.length>H;)Z.push(L.pop()),re.push(x.pop()+k-B);L.push(E(i.types[$],Z,re,F-B,C-F,q)),x.push(B-k)}function E(L,x,k,H,B,F,$){if(F){let C=[de.contextHash,F];$=$?[C].concat($):[C]}if(B>25){let C=[de.lookAhead,B];$=$?[C].concat($):[C]}return new ze(L,x,k,H,$)}function y(L,x){let k=l.fork(),H=0,B=0,F=0,$=k.end-n,C={size:0,start:0,skip:0};e:for(let q=k.pos-L;k.pos>q;){let Z=k.size;if(k.id==x&&Z>=0){C.size=H,C.start=B,C.skip=F,F+=4,H+=4,k.next();continue}let re=k.pos-Z;if(Z<0||re<q||k.start<$)break;let pe=k.id>=o?4:0,Ee=k.start;for(k.next();k.pos>re;){if(k.size<0)if(k.size==-3)pe+=4;else break e;else k.id>=o&&(pe+=4);k.next()}B=Ee,H+=Z,F+=pe}return(x<0||H==L)&&(C.size=H,C.start=B,C.skip=F),C.size>4?C:void 0}function I(L,x,k){let{id:H,start:B,end:F,size:$}=l;if(l.next(),$>=0&&H<o){let C=k;if($>4){let q=l.pos-($-4);for(;l.pos>q;)k=I(L,x,k)}x[--k]=C,x[--k]=F-L,x[--k]=B-L,x[--k]=H}else $==-3?h=H:$==-4&&(c=H);return k}let w=[],A=[];for(;l.pos>0;)u(r.start||0,r.bufferStart||0,w,A,-1,0);let R=(e=r.length)!==null&&e!==void 0?e:w.length?A[0]+w[0].length:0;return new ze(a[r.topID],w.reverse(),A.reverse(),R)}const du=new WeakMap;function So(r,e){if(!r.isAnonymous||e instanceof $i||e.type!=r)return 1;let t=du.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof ze)){t=1;break}t+=So(r,i)}du.set(e,t)}return t}function tc(r,e,t,i,n,s,o,l,a){let h=0;for(let S=i;S<n;S++)h+=So(r,e[S]);let c=Math.ceil(h*1.5/8),u=[],p=[];function g(S,E,y,I,w){for(let A=y;A<I;){let R=A,L=E[A],x=So(r,S[A]);for(A++;A<I;A++){let k=So(r,S[A]);if(x+k>=c)break;x+=k}if(A==R+1){if(x>c){let k=S[R];g(k.children,k.positions,0,k.children.length,E[R]+w);continue}u.push(S[R])}else{let k=E[A-1]+S[A-1].length-L;u.push(tc(r,S,E,R,A,L,k,null,a))}p.push(L+w-s)}}return g(e,t,i,n,0),(l||a)(u,p,o)}class pr{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new pr(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=i)for(;o&&o.from<u;){let p=o;if(a>=p.from||u<=p.to||h){let g=Math.max(p.from,a)-h,S=Math.min(p.to,u)-h;p=g>=S?null:new pr(g,S,p.tree,p.offset+h,l>0,!!c)}if(p&&n.push(p),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return n}}class um{startParse(e,t,i){return typeof e=="string"&&(e=new SO(e)),i=i?i.length?i.map(n=>new Ql(n.from,n.to)):[new Ql(0,0)]:[new Ql(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class SO{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new de({perNode:!0});let TO=0;class _t{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=TO++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof _t&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new _t(i,[],null,[]);if(n.set.push(n),t)for(let s of t.set)n.set.push(s);return n}static defineModifier(e){let t=new Po(e);return i=>i.modified.indexOf(t)>-1?i:Po.get(i.base||i,i.modified.concat(t).sort((n,s)=>n.id-s.id))}}let EO=0;class Po{constructor(e){this.name=e,this.instances=[],this.id=EO++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&OO(t,l.modified));if(i)return i;let n=[],s=new _t(e.name,n,e,t);for(let l of t)l.instances.push(s);let o=yO(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(Po.get(l,a));return s}}function OO(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function yO(r){let e=[[]];for(let t=0;t<r.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(r[t]));return e.sort((t,i)=>i.length-t.length)}function dm(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let u=0;;){if(l=="..."&&u>0&&u+3==n.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!p)throw new RangeError("Invalid path: "+n);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),u+=p[0].length,u==n.length)break;let g=n[u++];if(u==n.length&&g=="!"){o=0;break}if(g!="/")throw new RangeError("Invalid path: "+n);l=n.slice(u)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let c=new _o(i,o,a>0?s.slice(0,a):null);e[h]=c.sort(e[h])}}return pm.add(e)}const pm=new de;class _o{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_o.empty=new _o([],2,null);function mm(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function IO(r,e){let t=null;for(let i of r){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function vO(r,e,t,i=0,n=r.length){let s=new NO(i,Array.isArray(e)?e:[e],t);s.highlightRange(r.cursor(),i,n,"",s.highlighters),s.flush(n)}class NO{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(g=>!g.scope||g.scope(o)));let h=n,c=bO(e)||_o.empty,u=IO(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(Math.max(t,l),h),c.opaque)return;let p=e.tree&&e.tree.prop(de.mounted);if(p&&p.overlay){let g=e.node.enter(p.overlay[0].from+l,1),S=this.highlighters.filter(y=>!y.scope||y.scope(p.tree.type)),E=e.firstChild();for(let y=0,I=l;;y++){let w=y<p.overlay.length?p.overlay[y]:null,A=w?w.from+l:a,R=Math.max(t,I),L=Math.min(i,A);if(R<L&&E)for(;e.from<L&&(this.highlightRange(e,R,L,n,s),this.startSpan(Math.min(L,e.to),h),!(e.to>=A||!e.nextSibling())););if(!w||A>i)break;I=w.to+l,I>t&&(this.highlightRange(g.cursor(),Math.max(t,w.from+l),Math.min(i,I),"",S),this.startSpan(Math.min(i,I),h))}E&&e.parent()}else if(e.firstChild()){p&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,s),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function bO(r){let e=r.type.prop(pm);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const _=_t.define,Ys=_(),ki=_(),pu=_(ki),mu=_(ki),Ri=_(),Zs=_(Ri),Xl=_(Ri),oi=_(),nr=_(oi),ni=_(),si=_(),nh=_(),wn=_(nh),eo=_(),U={comment:Ys,lineComment:_(Ys),blockComment:_(Ys),docComment:_(Ys),name:ki,variableName:_(ki),typeName:pu,tagName:_(pu),propertyName:mu,attributeName:_(mu),className:_(ki),labelName:_(ki),namespace:_(ki),macroName:_(ki),literal:Ri,string:Zs,docString:_(Zs),character:_(Zs),attributeValue:_(Zs),number:Xl,integer:_(Xl),float:_(Xl),bool:_(Ri),regexp:_(Ri),escape:_(Ri),color:_(Ri),url:_(Ri),keyword:ni,self:_(ni),null:_(ni),atom:_(ni),unit:_(ni),modifier:_(ni),operatorKeyword:_(ni),controlKeyword:_(ni),definitionKeyword:_(ni),moduleKeyword:_(ni),operator:si,derefOperator:_(si),arithmeticOperator:_(si),logicOperator:_(si),bitwiseOperator:_(si),compareOperator:_(si),updateOperator:_(si),definitionOperator:_(si),typeOperator:_(si),controlOperator:_(si),punctuation:nh,separator:_(nh),bracket:wn,angleBracket:_(wn),squareBracket:_(wn),paren:_(wn),brace:_(wn),content:oi,heading:nr,heading1:_(nr),heading2:_(nr),heading3:_(nr),heading4:_(nr),heading5:_(nr),heading6:_(nr),contentSeparator:_(oi),list:_(oi),quote:_(oi),emphasis:_(oi),strong:_(oi),link:_(oi),monospace:_(oi),strikethrough:_(oi),inserted:_(),deleted:_(),changed:_(),invalid:_(),meta:eo,documentMeta:_(eo),annotation:_(eo),processingInstruction:_(eo),definition:_t.defineModifier("definition"),constant:_t.defineModifier("constant"),function:_t.defineModifier("function"),standard:_t.defineModifier("standard"),local:_t.defineModifier("local"),special:_t.defineModifier("special")};for(let r in U){let e=U[r];e instanceof _t&&(e.name=r)}mm([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);var Jl;const Br=new de;function AO(r){return W.define({combine:r?e=>e.concat(r):void 0})}const wO=new de;class Xt{constructor(e,t,i=[],n=""){this.data=e,this.name=n,Ie.prototype.hasOwnProperty("tree")||Object.defineProperty(Ie.prototype,"tree",{get(){return Ye(this)}}),this.parser=t,this.extension=[Qi.of(this),Ie.languageData.of((s,o,l)=>{let a=gu(s,o,l),h=a.type.prop(Br);if(!h)return[];let c=s.facet(h),u=a.type.prop(wO);if(u){let p=a.resolve(o-a.from,l);for(let g of u)if(g.test(p,s)){let S=s.facet(g.facet);return g.type=="replace"?S:S.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return gu(e,t,i).type.prop(Br)==this.data}findRegions(e){let t=e.facet(Qi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(Br)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(de.mounted);if(l){if(l.tree.prop(Br)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof ze&&n(h,s.positions[a]+o)}};return n(Ye(e),0),i}get allowsNesting(){return!0}}Xt.setState=ae.define();function gu(r,e,t){let i=r.facet(Qi),n=Ye(r).topNode;if(!i||i.allowsNesting)for(let s=n;s;s=s.enter(e,t,Je.ExcludeBuffers))s.type.isTop&&(n=s);return n}class Bo extends Xt{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=AO(e.languageData);return new Bo(t,e.parser.configure({props:[Br.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new Bo(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ye(r){let e=r.field(Xt.state,!1);return e?e.tree:ze.empty}class xO{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let xn=null;class Fo{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Fo(e,t,[],ze.empty,0,i,[],null)}startParse(){return this.parser.startParse(new xO(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ze.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(pr.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(pr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=xn;xn=this;try{return e()}finally{xn=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Su(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,p)=>a.push({fromA:h,toA:c,fromB:u,toB:p})),i=pr.applyChanges(i,a),n=ze.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new Fo(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=Su(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends um{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=xn;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new ze(At.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return xn}}function Su(r,e,t){return pr.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class rn{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new rn(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Fo.create(e.facet(Qi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new rn(i)}}Xt.state=nt.define({create:rn.init,update(r,e){for(let t of e.effects)if(t.is(Xt.setState))return t.value;return e.startState.facet(Qi)!=e.state.facet(Qi)?rn.init(e.state):r.apply(e)}});let gm=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(gm=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Yl=typeof navigator<"u"&&(!((Jl=navigator.scheduling)===null||Jl===void 0)&&Jl.isInputPending)?()=>navigator.scheduling.isInputPending():null,kO=We.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Xt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Xt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=gm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field(Xt.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Yl?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>Yl&&Yl()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Xt.setState.of(new rn(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Nt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Qi=W.define({combine(r){return r.length?r[0]:null},enables:r=>[Xt.state,kO,z.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class RO{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const LO=W.define(),ic=W.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function Ho(r){let e=r.facet(ic);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function rs(r,e){let t="",i=r.tabSize,n=r.facet(ic)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let s=0;s<e;s++)t+=n;return t}function rc(r,e){r instanceof Ie&&(r=new ml(r));for(let i of r.state.facet(LO)){let n=i(r,e);if(n!==void 0)return n}let t=Ye(r.state);return t.length>=e?CO(r,t,e):null}class ml{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ho(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return un(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Sm=new de;function CO(r,e,t){let i=e.resolveStack(t),n=i.node.enterUnfinishedNodesBefore(t);if(n!=i.node){let s=[];for(let o=n;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Tm(i,r,t)}function Tm(r,e,t){for(let i=r;i;i=i.next){let n=VO(i.node);if(n)return n(nc.create(e,t,i))}return 0}function DO(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function VO(r){let e=r.type.prop(Sm);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(de.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return o=>_O(o,!0,1,void 0,s&&!DO(o)?n.from:void 0)}return r.parent==null?UO:null}function UO(){return 0}class nc extends ml{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new nc(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(MO(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Tm(this.context.next,this.base,this.pos)}}function MO(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function PO(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}l=a.to}}function _O(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=n==r.pos+o,a=PO(r);return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}function BO({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const FO=200;function HO(){return Ie.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,n=t.lineAt(i);if(i>n.from+FO)return r;let s=t.sliceString(n.from,i);if(!e.some(h=>h.test(s)))return r;let{state:o}=r,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let u=rc(o,c.from);if(u==null)continue;let p=/^\s*/.exec(c.text)[0],g=rs(o,u);p!=g&&a.push({from:c.from,to:c.from+p.length,insert:g})}return a.length?[r,{changes:a,sequential:!0}]:r})}const qO=W.define(),Em=new de;function zO(r,e,t){let i=Ye(r);if(i.length<t)return null;let n=i.resolveStack(t,1),s=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let a=l.type.prop(Em);if(a&&(l.to<i.length-50||i.length==r.doc.length||!WO(l))){let h=a(l,r);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function WO(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function qo(r,e,t){for(let i of r.facet(qO)){let n=i(r,e,t);if(n)return n}return zO(r,e,t)}function Om(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const gl=ae.define({map:Om}),gs=ae.define({map:Om});function ym(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const Er=nt.define({create(){return Y.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(gl)&&!GO(r,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Nm),n=i?Y.replace({widget:new YO(i(e.state,t.value))}):Tu;r=r.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(gs)&&(r=r.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(n,s)=>{n<i&&s>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(n,s)=>s<=i||n>=i}))}return r},provide:r=>z.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let i=r[t++],n=r[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(Tu.range(i,n))}return Y.set(e,!0)}});function zo(r,e,t){var i;let n=null;return(i=r.field(Er,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!n||n.from>s)&&(n={from:s,to:o})}),n}function GO(r,e,t){let i=!1;return r.between(e,e,(n,s)=>{n==e&&s==t&&(i=!0)}),i}function Im(r,e){return r.field(Er,!1)?e:e.concat(ae.appendConfig.of(bm()))}const KO=r=>{for(let e of ym(r)){let t=qo(r.state,e.from,e.to);if(t)return r.dispatch({effects:Im(r.state,[gl.of(t),vm(r,t)])}),!0}return!1},jO=r=>{if(!r.state.field(Er,!1))return!1;let e=[];for(let t of ym(r)){let i=zo(r.state,t.from,t.to);i&&e.push(gs.of(i),vm(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function vm(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,n=r.state.doc.lineAt(e.to).number;return z.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${n}.`)}const $O=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let n=r.lineBlockAt(i),s=qo(e,n.from,n.to);s&&t.push(gl.of(s)),i=(s?r.lineBlockAt(s.to):n).to+1}return t.length&&r.dispatch({effects:Im(r.state,t)}),!!t.length},QO=r=>{let e=r.state.field(Er,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,n)=>{t.push(gs.of({from:i,to:n}))}),r.dispatch({effects:t}),!0},XO=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:KO},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:jO},{key:"Ctrl-Alt-[",run:$O},{key:"Ctrl-Alt-]",run:QO}],JO={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Nm=W.define({combine(r){return mi(r,JO)}});function bm(r){return[Er,t2]}function Am(r,e){let{state:t}=r,i=t.facet(Nm),n=o=>{let l=r.lineBlockAt(r.posAtDOM(o.target)),a=zo(r.state,l.from,l.to);a&&r.dispatch({effects:gs.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(r,n,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=n,s}const Tu=Y.replace({widget:new class extends Xi{toDOM(r){return Am(r,null)}}});class YO extends Xi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Am(e,this.value)}}const ZO={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Zl extends Ni{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function e2(r={}){let e=Object.assign(Object.assign({},ZO),r),t=new Zl(e,!0),i=new Zl(e,!1),n=We.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Qi)!=o.state.facet(Qi)||o.startState.field(Er,!1)!=o.state.field(Er,!1)||Ye(o.startState)!=Ye(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Wi;for(let a of o.viewportLineBlocks){let h=zo(o.state,a.from,a.to)?i:qo(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[n,eO({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||ye.empty},initialSpacer(){return new Zl(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=zo(o.state,l.from,l.to);if(h)return o.dispatch({effects:gs.of(h)}),!0;let c=qo(o.state,l.from,l.to);return c?(o.dispatch({effects:gl.of(c)}),!0):!1}})}),bm()]}const t2=z.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ss{constructor(e,t){this.specs=e;let i;function n(l){let a=Gi.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof Xt?l=>l.prop(Br)==o.data:o?l=>l==o:void 0,this.style=mm(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Gi(i):null,this.themeType=t.themeType}static define(e,t){return new Ss(e,t||{})}}const sh=W.define(),wm=W.define({combine(r){return r.length?[r[0]]:null}});function ea(r){let e=r.facet(sh);return e.length?e:r.facet(wm)}function xm(r,e){let t=[r2],i;return r instanceof Ss&&(r.module&&t.push(z.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?t.push(wm.of(r)):i?t.push(sh.computeN([z.darkTheme],n=>n.facet(z.darkTheme)==(i=="dark")?[r]:[])):t.push(sh.of(r)),t}class i2{constructor(e){this.markCache=Object.create(null),this.tree=Ye(e.state),this.decorations=this.buildDeco(e,ea(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ye(e.state),i=ea(e.state),n=i!=ea(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!n&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Y.none;let i=new Wi;for(let{from:n,to:s}of e.visibleRanges)vO(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=Y.mark({class:a})))},n,s);return i.finish()}}const r2=Ir.high(We.fromClass(i2,{decorations:r=>r.decorations})),n2=Ss.define([{tag:U.meta,color:"#404740"},{tag:U.link,textDecoration:"underline"},{tag:U.heading,textDecoration:"underline",fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strong,fontWeight:"bold"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.keyword,color:"#708"},{tag:[U.atom,U.bool,U.url,U.contentSeparator,U.labelName],color:"#219"},{tag:[U.literal,U.inserted],color:"#164"},{tag:[U.string,U.deleted],color:"#a11"},{tag:[U.regexp,U.escape,U.special(U.string)],color:"#e40"},{tag:U.definition(U.variableName),color:"#00f"},{tag:U.local(U.variableName),color:"#30a"},{tag:[U.typeName,U.namespace],color:"#085"},{tag:U.className,color:"#167"},{tag:[U.special(U.variableName),U.macroName],color:"#256"},{tag:U.definition(U.propertyName),color:"#00c"},{tag:U.comment,color:"#940"},{tag:U.invalid,color:"#f00"}]),s2=z.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),km=1e4,Rm="()[]{}",Lm=W.define({combine(r){return mi(r,{afterCursor:!0,brackets:Rm,maxScanDistance:km,renderMatch:a2})}}),o2=Y.mark({class:"cm-matchingBracket"}),l2=Y.mark({class:"cm-nonmatchingBracket"});function a2(r){let e=[],t=r.matched?o2:l2;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const h2=nt.define({create(){return Y.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(Lm);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=hi(e.state,n.head,-1,i)||n.head>0&&hi(e.state,n.head-1,1,i)||i.afterCursor&&(hi(e.state,n.head,1,i)||n.head<e.state.doc.length&&hi(e.state,n.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return Y.set(t,!0)},provide:r=>z.decorations.from(r)}),c2=[h2,s2];function f2(r={}){return[Lm.of(r),c2]}const u2=new de;function oh(r,e,t){let i=r.prop(e<0?de.openedBy:de.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function lh(r){let e=r.type.prop(u2);return e?e(r.node):r}function hi(r,e,t,i={}){let n=i.maxScanDistance||km,s=i.brackets||Rm,o=Ye(r),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=oh(a.type,t,s);if(h&&a.from<a.to){let c=lh(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return d2(r,e,t,a,c,h,s)}}return p2(r,e,t,o,l.type,n,s)}function d2(r,e,t,i,n,s,o){let l=i.parent,a={from:n.from,to:n.to},h=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=lh(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(oh(c.type,t,o))h++;else if(oh(c.type,-t,o)){if(h==0){let u=lh(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function p2(r,e,t,i,n,s,o){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),u=0;for(let p=0;!c.next().done&&p<=s;){let g=c.value;t<0&&(p+=g.length);let S=e+p*t;for(let E=t>0?0:g.length-1,y=t>0?g.length:-1;E!=y;E+=t){let I=o.indexOf(g[E]);if(!(I<0||i.resolveInner(S+E,1).type!=n))if(I%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:S+E,to:S+E+1},matched:I>>1==a>>1};u--}}t>0&&(p+=g.length)}return c.done?{start:h,matched:!1}:null}const m2=Object.create(null),Eu=[At.none],Ou=[],yu=Object.create(null),g2=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])g2[r]=S2(m2,e);function ta(r,e){Ou.indexOf(r)>-1||(Ou.push(r),console.warn(e))}function S2(r,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let c=r[h]||U[h];c?typeof c=="function"?a.length?a=a.map(c):ta(h,`Modifier ${h} used at start of tag`):a.length?ta(h,`Tag ${h} used as modifier`):a=Array.isArray(c)?c:[c]:ta(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),s=yu[n];if(s)return s.id;let o=yu[n]=At.define({id:Eu.length,name:i,props:[dm({[i]:t})]});return Eu.push(o),o.id}Pe.RTL,Pe.LTR;const T2=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),i=oc(r.state,t.from);return i.line?E2(r):i.block?y2(r):!1};function sc(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=r(e,t);return n?(i(t.update(n)),!0):!1}}const E2=sc(N2,0),O2=sc(Cm,0),y2=sc((r,e)=>Cm(r,e,v2(e)),0);function oc(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const kn=50;function I2(r,{open:e,close:t},i,n){let s=r.sliceDoc(i-kn,i),o=r.sliceDoc(n,n+kn),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,u;n-i<=2*kn?c=u=r.sliceDoc(i,n):(c=r.sliceDoc(i,i+kn),u=r.sliceDoc(n-kn,n));let p=/^\s*/.exec(c)[0].length,g=/\s*$/.exec(u)[0].length,S=u.length-g-t.length;return c.slice(p,p+e.length)==e&&u.slice(S,S+t.length)==t?{open:{pos:i+p+e.length,margin:/\s/.test(c.charAt(p+e.length))?1:0},close:{pos:n-g-t.length,margin:/\s/.test(u.charAt(S-1))?1:0}}:null}function v2(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),n=t.to<=i.to?i:r.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:r.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function Cm(r,e,t=e.selection.ranges){let i=t.map(s=>oc(e,s.from).block);if(!i.every(s=>s))return null;let n=t.map((s,o)=>I2(e,i[o],s.from,s.to));if(r!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,o)=>n[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(r!=1&&n.some(s=>s)){let s=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:h,close:c}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function N2(r,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9,h=oc(e,s).line;if(h){for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>n&&(s==o||o>u.from)){n=u.from;let p=/^\s*/.exec(u.text)[0].length,g=p==u.length,S=u.text.slice(p,p+h.length)==h?p:-1;p<u.text.length&&p<a&&(a=p),i.push({line:u,comment:S,token:h,indent:p,empty:g,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(r!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of i)(u||!c)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}const ah=bi.define(),b2=bi.define(),A2=W.define(),Dm=W.define({combine(r){return mi(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),Vm=nt.define({create(){return ci.empty},update(r,e){let t=e.state.facet(Dm),i=e.annotation(ah);if(i){let a=bt.fromTransaction(e,i.selection),h=i.side,c=h==0?r.undone:r.done;return a?c=Wo(c,c.length,t.minDepth,a):c=Pm(c,e.startState.selection),new ci(h==0?i.rest:c,h==0?c:i.rest)}let n=e.annotation(b2);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(je.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=bt.fromTransaction(e),o=e.annotation(je.time),l=e.annotation(je.userEvent);return s?r=r.addChanges(s,o,l,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new ci(r.done.map(bt.fromJSON),r.undone.map(bt.fromJSON))}});function w2(r={}){return[Vm,Dm.of(r),z.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Um:e.inputType=="historyRedo"?hh:null;return i?(e.preventDefault(),i(t)):!1}})]}function Sl(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(Vm,!1);if(!n)return!1;let s=n.pop(r,t,e);return s?(i(s),!0):!1}}const Um=Sl(0,!1),hh=Sl(1,!1),x2=Sl(0,!0),k2=Sl(1,!0);class bt{constructor(e,t,i,n,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new bt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new bt(e.changes&&Ke.fromJSON(e.changes),[],e.mapped&&ui.fromJSON(e.mapped),e.startSelection&&V.fromJSON(e.startSelection),e.selectionsAfter.map(V.fromJSON))}static fromTransaction(e,t){let i=Ft;for(let n of e.startState.facet(A2)){let s=n(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new bt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ft)}static selection(e){return new bt(void 0,Ft,void 0,void 0,e)}}function Wo(r,e,t,i){let n=e+1>t+20?e-t-1:0,s=r.slice(n,e);return s.push(i),s}function R2(r,e){let t=[],i=!1;return r.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(i=!0)}}),i}function L2(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function Mm(r,e){return r.length?e.length?r.concat(e):r:e}const Ft=[],C2=200;function Pm(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-C2));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),Wo(r,r.length-1,1e9,t.setSelAfter(i)))}else return[bt.selection([e])]}function D2(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ia(r,e){if(!r.length)return r;let t=r.length,i=Ft;for(;t;){let n=V2(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let s=r.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[bt.selection(i)]:Ft}function V2(r,e,t){let i=Mm(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):Ft,t);if(!r.changes)return bt.selection(i);let n=r.changes.map(e),s=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(s):s;return new bt(n,ae.mapEffects(r.effects,e),o,r.startSelection.map(s),i)}const U2=/^(input\.type|delete)($|\.)/;class ci{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new ci(this.done,this.undone):this}addChanges(e,t,i,n,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||U2.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(s,R2(l.changes,e.changes))||i=="input.type.compose")?o=Wo(o,o.length-1,n.minDepth,new bt(e.changes.compose(l.changes),Mm(ae.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Ft)):o=Wo(o,o.length,n.minDepth,e),new ci(o,Ft,t,i)}addSelection(e,t,i,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ft;return s.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&L2(s[s.length-1],e)?this:new ci(Pm(this.done,e),this.undone,t,i)}addMapping(e){return new ci(ia(this.done,e),ia(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1],o=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ah.of({side:e,rest:D2(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=n.length==1?Ft:n.slice(0,n.length-1);return s.mapped&&(l=ia(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ah.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ci.empty=new ci(Ft,Ft);const M2=[{key:"Mod-z",run:Um,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:hh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:hh,preventDefault:!0},{key:"Mod-u",run:x2,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:k2,preventDefault:!0}];function dn(r,e){return V.create(r.ranges.map(e),r.mainIndex)}function gi(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ti({state:r,dispatch:e},t){let i=dn(r.selection,t);return i.eq(r.selection,!0)?!1:(e(gi(r,i)),!0)}function Tl(r,e){return V.cursor(e?r.to:r.from)}function _m(r,e){return ti(r,t=>t.empty?r.moveByChar(t,e):Tl(t,e))}function at(r){return r.textDirectionAt(r.state.selection.main.head)==Pe.LTR}const Bm=r=>_m(r,!at(r)),Fm=r=>_m(r,at(r));function Hm(r,e){return ti(r,t=>t.empty?r.moveByGroup(t,e):Tl(t,e))}const P2=r=>Hm(r,!at(r)),_2=r=>Hm(r,at(r));function B2(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function El(r,e,t){let i=Ye(r).resolveInner(e.head),n=t?de.closedBy:de.openedBy;for(let a=e.head;;){let h=t?i.childAfter(a):i.childBefore(a);if(!h)break;B2(r,h,n)?i=h:a=t?h.to:h.from}let s=i.type.prop(n),o,l;return s&&(o=t?hi(r,i.from,1):hi(r,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,V.cursor(l,t?-1:1)}const F2=r=>ti(r,e=>El(r.state,e,!at(r))),H2=r=>ti(r,e=>El(r.state,e,at(r)));function qm(r,e){return ti(r,t=>{if(!t.empty)return Tl(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const zm=r=>qm(r,!1),Wm=r=>qm(r,!0);function Gm(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let s of r.state.facet(z.scrollMargins)){let o=s(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=r.scrollDOM.clientHeight-t-i}else n=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(r.defaultLineHeight,n-5)}}function Km(r,e){let t=Gm(r),{state:i}=r,n=dn(i.selection,o=>o.empty?r.moveVertically(o,e,t.height):Tl(o,e));if(n.eq(i.selection))return!1;let s;if(t.selfScroll){let o=r.coordsAtPos(i.selection.main.head),l=r.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<h&&(s=z.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return r.dispatch(gi(i,n),{effects:s}),!0}const Iu=r=>Km(r,!1),ch=r=>Km(r,!0);function Ji(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let s=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(n=V.cursor(i.from+s))}return n}const q2=r=>ti(r,e=>Ji(r,e,!0)),z2=r=>ti(r,e=>Ji(r,e,!1)),W2=r=>ti(r,e=>Ji(r,e,!at(r))),G2=r=>ti(r,e=>Ji(r,e,at(r))),K2=r=>ti(r,e=>V.cursor(r.lineBlockAt(e.head).from,1)),j2=r=>ti(r,e=>V.cursor(r.lineBlockAt(e.head).to,-1));function $2(r,e,t){let i=!1,n=dn(r.selection,s=>{let o=hi(r,s.head,-1)||hi(r,s.head,1)||s.head>0&&hi(r,s.head-1,1)||s.head<r.doc.length&&hi(r,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return V.cursor(l)});return i?(e(gi(r,n)),!0):!1}const Q2=({state:r,dispatch:e})=>$2(r,e);function Wt(r,e){let t=dn(r.state.selection,i=>{let n=e(i);return V.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(gi(r.state,t)),!0)}function jm(r,e){return Wt(r,t=>r.moveByChar(t,e))}const $m=r=>jm(r,!at(r)),Qm=r=>jm(r,at(r));function Xm(r,e){return Wt(r,t=>r.moveByGroup(t,e))}const X2=r=>Xm(r,!at(r)),J2=r=>Xm(r,at(r)),Y2=r=>Wt(r,e=>El(r.state,e,!at(r))),Z2=r=>Wt(r,e=>El(r.state,e,at(r)));function Jm(r,e){return Wt(r,t=>r.moveVertically(t,e))}const Ym=r=>Jm(r,!1),Zm=r=>Jm(r,!0);function e0(r,e){return Wt(r,t=>r.moveVertically(t,e,Gm(r).height))}const vu=r=>e0(r,!1),Nu=r=>e0(r,!0),ey=r=>Wt(r,e=>Ji(r,e,!0)),ty=r=>Wt(r,e=>Ji(r,e,!1)),iy=r=>Wt(r,e=>Ji(r,e,!at(r))),ry=r=>Wt(r,e=>Ji(r,e,at(r))),ny=r=>Wt(r,e=>V.cursor(r.lineBlockAt(e.head).from)),sy=r=>Wt(r,e=>V.cursor(r.lineBlockAt(e.head).to)),bu=({state:r,dispatch:e})=>(e(gi(r,{anchor:0})),!0),Au=({state:r,dispatch:e})=>(e(gi(r,{anchor:r.doc.length})),!0),wu=({state:r,dispatch:e})=>(e(gi(r,{anchor:r.selection.main.anchor,head:0})),!0),xu=({state:r,dispatch:e})=>(e(gi(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),oy=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),ly=({state:r,dispatch:e})=>{let t=Ol(r).map(({from:i,to:n})=>V.range(i,Math.min(n+1,r.doc.length)));return e(r.update({selection:V.create(t),userEvent:"select"})),!0},ay=({state:r,dispatch:e})=>{let t=dn(r.selection,i=>{let n=Ye(r),s=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return V.range(l.to,l.from)}return i});return t.eq(r.selection)?!1:(e(gi(r,t)),!0)},hy=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=V.create([t.main]):t.main.empty||(i=V.create([V.cursor(t.main.head)])),i?(e(gi(r,i)),!0):!1};function Ts(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:i}=r,n=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=to(r,a,!1)):a>o&&(t="delete.forward",a=to(r,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=to(r,o,!1),l=to(r,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:V.cursor(o,o<s.head?-1:1)}});return n.changes.empty?!1:(r.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?z.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function to(r,e,t){if(r instanceof z)for(let i of r.state.facet(z.atomicRanges).map(n=>n(r)))i.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}const t0=(r,e,t)=>Ts(r,i=>{let n=i.from,{state:s}=r,o=s.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let h=un(l,s.tabSize),c=h%Ho(s)||Ho(s);for(let u=0;u<c&&l[l.length-1-u]==" ";u++)n--;a=n}else a=rt(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=rt(o.text,a-o.from,!1,!1)+o.from);return a}),fh=r=>t0(r,!1,!0),i0=r=>t0(r,!0,!1),r0=(r,e)=>Ts(r,t=>{let i=t.head,{state:n}=r,s=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=rt(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||i!=t.head)&&(l=c),i=a}return i}),n0=r=>r0(r,!1),cy=r=>r0(r,!0),fy=r=>Ts(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),uy=r=>Ts(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),dy=r=>Ts(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),py=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ne.of(["",""])},range:V.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},my=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,s=r.doc.lineAt(n),o=n==s.from?n-1:rt(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:rt(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:r.doc.slice(n,l).append(r.doc.slice(o,n))},range:V.cursor(l)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ol(r){let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),s=r.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=r.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:n.from,to:s.to,ranges:[i]});t=s.number+1}return e}function s0(r,e,t){if(r.readOnly)return!1;let i=[],n=[];for(let s of Ol(r)){if(t?s.to==r.doc.length:s.from==0)continue;let o=r.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+r.lineBreak});for(let a of s.ranges)n.push(V.range(Math.min(r.doc.length,a.anchor+l),Math.min(r.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:r.lineBreak+o.text});for(let a of s.ranges)n.push(V.range(a.anchor-l,a.head-l))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:V.create(n,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const gy=({state:r,dispatch:e})=>s0(r,e,!1),Sy=({state:r,dispatch:e})=>s0(r,e,!0);function o0(r,e,t){if(r.readOnly)return!1;let i=[];for(let n of Ol(r))t?i.push({from:n.from,insert:r.doc.slice(n.from,n.to)+r.lineBreak}):i.push({from:n.to,insert:r.lineBreak+r.doc.slice(n.from,n.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ty=({state:r,dispatch:e})=>o0(r,e,!1),Ey=({state:r,dispatch:e})=>o0(r,e,!0),Oy=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(Ol(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),i=dn(e.selection,n=>{let s;if(r.lineWrapping){let o=r.lineBlockAt(n.head),l=r.coordsAtPos(n.head,n.assoc||1);l&&(s=o.bottom+r.documentTop-l.bottom+r.defaultLineHeight/2)}return r.moveVertically(n,!0,s)}).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function yy(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ye(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),s;return i&&n&&i.to<=e&&n.from>=e&&(s=i.type.prop(de.closedBy))&&s.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from&&!/\S/.test(r.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const ku=l0(!1),Iy=l0(!0);function l0(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:s,to:o}=n,l=e.doc.lineAt(s),a=!r&&s==o&&yy(e,s);r&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new ml(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=rc(h,s);for(c==null&&(c=un(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",rs(e,c)];return a&&u.push(rs(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:Ne.of(u)},range:V.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function lc(r,e){let t=-1;return r.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=r.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let s=r.changes(n);return{changes:n,range:V.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const vy=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new ml(r,{overrideIndentation:s=>{let o=t[s];return o??-1}}),n=lc(r,(s,o,l)=>{let a=rc(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],c=rs(r,a);(h!=c||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:c}))});return n.changes.empty||e(r.update(n,{userEvent:"indent"})),!0},a0=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(lc(r,(t,i)=>{i.push({from:t.from,insert:r.facet(ic)})}),{userEvent:"input.indent"})),!0),h0=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(lc(r,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=un(n,r.tabSize),o=0,l=rs(r,Math.max(0,s-Ho(r)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),Ny=r=>(r.setTabFocusMode(),!0),by=[{key:"Ctrl-b",run:Bm,shift:$m,preventDefault:!0},{key:"Ctrl-f",run:Fm,shift:Qm},{key:"Ctrl-p",run:zm,shift:Ym},{key:"Ctrl-n",run:Wm,shift:Zm},{key:"Ctrl-a",run:K2,shift:ny},{key:"Ctrl-e",run:j2,shift:sy},{key:"Ctrl-d",run:i0},{key:"Ctrl-h",run:fh},{key:"Ctrl-k",run:fy},{key:"Ctrl-Alt-h",run:n0},{key:"Ctrl-o",run:py},{key:"Ctrl-t",run:my},{key:"Ctrl-v",run:ch}],Ay=[{key:"ArrowLeft",run:Bm,shift:$m,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:P2,shift:X2,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:W2,shift:iy,preventDefault:!0},{key:"ArrowRight",run:Fm,shift:Qm,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_2,shift:J2,preventDefault:!0},{mac:"Cmd-ArrowRight",run:G2,shift:ry,preventDefault:!0},{key:"ArrowUp",run:zm,shift:Ym,preventDefault:!0},{mac:"Cmd-ArrowUp",run:bu,shift:wu},{mac:"Ctrl-ArrowUp",run:Iu,shift:vu},{key:"ArrowDown",run:Wm,shift:Zm,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Au,shift:xu},{mac:"Ctrl-ArrowDown",run:ch,shift:Nu},{key:"PageUp",run:Iu,shift:vu},{key:"PageDown",run:ch,shift:Nu},{key:"Home",run:z2,shift:ty,preventDefault:!0},{key:"Mod-Home",run:bu,shift:wu},{key:"End",run:q2,shift:ey,preventDefault:!0},{key:"Mod-End",run:Au,shift:xu},{key:"Enter",run:ku,shift:ku},{key:"Mod-a",run:oy},{key:"Backspace",run:fh,shift:fh},{key:"Delete",run:i0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:n0},{key:"Mod-Delete",mac:"Alt-Delete",run:cy},{mac:"Mod-Backspace",run:uy},{mac:"Mod-Delete",run:dy}].concat(by.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),wy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:F2,shift:Y2},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:H2,shift:Z2},{key:"Alt-ArrowUp",run:gy},{key:"Shift-Alt-ArrowUp",run:Ty},{key:"Alt-ArrowDown",run:Sy},{key:"Shift-Alt-ArrowDown",run:Ey},{key:"Escape",run:hy},{key:"Mod-Enter",run:Iy},{key:"Alt-l",mac:"Ctrl-l",run:ly},{key:"Mod-i",run:ay,preventDefault:!0},{key:"Mod-[",run:h0},{key:"Mod-]",run:a0},{key:"Mod-Alt-\\",run:vy},{key:"Shift-Mod-k",run:Oy},{key:"Shift-Mod-\\",run:Q2},{key:"Mod-/",run:T2},{key:"Alt-A",run:O2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Ny}].concat(Ay),xy={key:"Tab",run:a0,shift:h0};function Ve(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?r.setAttribute(i,n):n!=null&&(r[i]=n)}e++}for(;e<arguments.length;e++)c0(r,arguments[e]);return r}function c0(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)c0(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Ru=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class nn{constructor(e,t,i=0,n=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=s?l=>s(Ru(l)):Ru,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return et(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Ph(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Bt(e);let n=this.normalize(t);for(let s=0,o=i;;s++){let l=n.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==n.length-1){if(a)return this.value=a,this;break}o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,i){let n=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(nn.prototype[Symbol.iterator]=function(){return this});const f0={from:-1,to:-1,match:/.*/.exec("")},ac="gm"+(/x/.unicode==null?"":"u");class u0{constructor(e,t,i,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=f0,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new d0(e,t,i,n,s);this.re=new RegExp(t,ac+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Go(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Go(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const ra=new WeakMap;class Qr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=ra.get(e);if(!n||n.from>=i||n.to<=t){let l=new Qr(t,e.sliceString(t,i));return ra.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:s,from:o}=n;return o>t&&(s=e.sliceString(t,o)+s,o=t),n.to<i&&(s+=e.sliceString(n.to,i)),ra.set(e,new Qr(o,s)),new Qr(t,s.slice(t-o,i-o))}}class d0{constructor(e,t,i,n,s){this.text=e,this.to=s,this.done=!1,this.value=f0,this.matchPos=Go(e,n),this.re=new RegExp(t,ac+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Qr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Go(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Qr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(u0.prototype[Symbol.iterator]=d0.prototype[Symbol.iterator]=function(){return this});function ky(r){try{return new RegExp(r,ac),!0}catch{return!1}}function Go(r,e){if(e>=r.length)return e;let t=r.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function uh(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=Ve("input",{class:"cm-textfield",name:"line",value:e}),i=Ve("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),r.dispatch({effects:Ko.of(!1)}),r.focus()):s.keyCode==13&&(s.preventDefault(),n())},onsubmit:s=>{s.preventDefault(),n()}},Ve("label",r.state.phrase("Go to line"),": ",t)," ",Ve("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function n(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=r,l=o.doc.lineAt(o.selection.main.head),[,a,h,c,u]=s,p=c?+c.slice(1):0,g=h?+h:l.number;if(h&&u){let y=g/100;a&&(y=y*(a=="-"?-1:1)+l.number/o.doc.lines),g=Math.round(o.doc.lines*y)}else h&&a&&(g=g*(a=="-"?-1:1)+l.number);let S=o.doc.line(Math.max(1,Math.min(o.doc.lines,g))),E=V.cursor(S.from+Math.max(0,Math.min(p,S.length)));r.dispatch({effects:[Ko.of(!1),z.scrollIntoView(E.from,{y:"center"})],selection:E}),r.focus()}return{dom:i}}const Ko=ae.define(),Lu=nt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(Ko)&&(r=t.value);return r},provide:r=>ts.from(r,e=>e?uh:null)}),Ry=r=>{let e=es(r,uh);if(!e){let t=[Ko.of(!0)];r.state.field(Lu,!1)==null&&t.push(ae.appendConfig.of([Lu,Ly])),r.dispatch({effects:t}),e=es(r,uh)}return e&&e.dom.querySelector("input").select(),!0},Ly=z.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Cy={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Dy=W.define({combine(r){return mi(r,Cy,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function Vy(r){return[By,_y]}const Uy=Y.mark({class:"cm-selectionMatch"}),My=Y.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Cu(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=Be.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Be.Word)}function Py(r,e,t,i){return r(e.sliceDoc(t,t+1))==Be.Word&&r(e.sliceDoc(i-1,i))==Be.Word}const _y=We.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(Dy),{state:t}=r,i=t.selection;if(i.ranges.length>1)return Y.none;let n=i.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return Y.none;let a=t.wordAt(n.head);if(!a)return Y.none;o=t.charCategorizer(n.head),s=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return Y.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Cu(o,t,n.from,n.to)&&Py(o,t,n.from,n.to)))return Y.none}else if(s=t.sliceDoc(n.from,n.to),!s)return Y.none}let l=[];for(let a of r.visibleRanges){let h=new nn(t.doc,s,a.from,a.to);for(;!h.next().done;){let{from:c,to:u}=h.value;if((!o||Cu(o,t,c,u))&&(n.empty&&c<=n.from&&u>=n.to?l.push(My.range(c,u)):(c>=n.to||u<=n.from)&&l.push(Uy.range(c,u)),l.length>e.maxMatches))return Y.none}}return Y.set(l)}},{decorations:r=>r.decorations}),By=z.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Fy=({state:r,dispatch:e})=>{let{selection:t}=r,i=V.create(t.ranges.map(n=>r.wordAt(n.head)||V.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function Hy(r,e){let{main:t,ranges:i}=r.selection,n=r.wordAt(t.head),s=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new nn(r.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new nn(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=r.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const qy=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(s=>s.from===s.to))return Fy({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(s=>r.sliceDoc(s.from,s.to)!=i))return!1;let n=Hy(r,i);return n?(e(r.update({selection:r.selection.addRange(V.range(n.from,n.to),!1),effects:z.scrollIntoView(n.to)})),!0):!1},pn=W.define({combine(r){return mi(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new eI(e),scrollToMatch:e=>z.scrollIntoView(e)})}});class p0{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ky(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Ky(this):new Wy(this)}getCursor(e,t=0,i){let n=e.doc?e:Ie.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Mr(this,n,t,i):Ur(this,n,t,i)}}class m0{constructor(e){this.spec=e}}function Ur(r,e,t,i){return new nn(e.doc,r.unquoted,t,i,r.caseSensitive?void 0:n=>n.toLowerCase(),r.wholeWord?zy(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function zy(r,e){return(t,i,n,s)=>((s>t||s+n.length<i)&&(s=Math.max(0,t-2),n=r.sliceString(s,Math.min(r.length,i+2))),(e(jo(n,t-s))!=Be.Word||e($o(n,t-s))!=Be.Word)&&(e($o(n,i-s))!=Be.Word||e(jo(n,i-s))!=Be.Word))}class Wy extends m0{constructor(e){super(e)}nextMatch(e,t,i){let n=Ur(this.spec,e,i,e.doc.length).nextOverlapping();return n.done&&(n=Ur(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let s=Math.max(t,n-1e4-this.spec.unquoted.length),o=Ur(this.spec,e,s,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Ur(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Ur(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}function Mr(r,e,t,i){return new u0(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?Gy(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function jo(r,e){return r.slice(rt(r,e,!1),e)}function $o(r,e){return r.slice(e,rt(r,e))}function Gy(r){return(e,t,i)=>!i[0].length||(r(jo(i.input,i.index))!=Be.Word||r($o(i.input,i.index))!=Be.Word)&&(r($o(i.input,i.index+i[0].length))!=Be.Word||r(jo(i.input,i.index+i[0].length))!=Be.Word)}class Ky extends m0{nextMatch(e,t,i){let n=Mr(this.spec,e,i,e.doc.length).next();return n.done&&(n=Mr(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let s=Math.max(t,i-n*1e4),o=Mr(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Mr(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Mr(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}const ns=ae.define(),hc=ae.define(),Bi=nt.define({create(r){return new na(dh(r).create(),null)},update(r,e){for(let t of e.effects)t.is(ns)?r=new na(t.value.create(),r.panel):t.is(hc)&&(r=new na(r.query,t.value?cc:null));return r},provide:r=>ts.from(r,e=>e.panel)});class na{constructor(e,t){this.query=e,this.panel=t}}const jy=Y.mark({class:"cm-searchMatch"}),$y=Y.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Qy=We.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Bi))}update(r){let e=r.state.field(Bi);(e!=r.startState.field(Bi)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return Y.none;let{view:t}=this,i=new Wi;for(let n=0,s=t.visibleRanges,o=s.length;n<o;n++){let{from:l,to:a}=s[n];for(;n<o-1&&a>s[n+1].from-2*250;)a=s[++n].to;r.highlight(t.state,l,a,(h,c)=>{let u=t.state.selection.ranges.some(p=>p.from==h&&p.to==c);i.add(h,c,u?$y:jy)})}return i.finish()}},{decorations:r=>r.decorations});function Es(r){return e=>{let t=e.state.field(Bi,!1);return t&&t.query.spec.valid?r(e,t):T0(e)}}const Qo=Es((r,{query:e})=>{let{to:t}=r.state.selection.main,i=e.nextMatch(r.state,t,t);if(!i)return!1;let n=V.single(i.from,i.to),s=r.state.facet(pn);return r.dispatch({selection:n,effects:[fc(r,i),s.scrollToMatch(n.main,r)],userEvent:"select.search"}),S0(r),!0}),Xo=Es((r,{query:e})=>{let{state:t}=r,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let s=V.single(n.from,n.to),o=r.state.facet(pn);return r.dispatch({selection:s,effects:[fc(r,n),o.scrollToMatch(s.main,r)],userEvent:"select.search"}),S0(r),!0}),Xy=Es((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:V.create(t.map(i=>V.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Jy=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,s=[],o=0;for(let l=new nn(r.doc,r.sliceDoc(i,n));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(V.range(l.value.from,l.value.to))}return e(r.update({selection:V.create(s,o),userEvent:"select.search.matches"})),!0},Du=Es((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=[],l,a,h=[];if(s.from==i&&s.to==n&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t,s.from,s.to),h.push(z.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=V.single(s.from-c,s.to-c),h.push(fc(r,s)),h.push(t.facet(pn).scrollToMatch(l.main,r))}return r.dispatch({changes:o,selection:l,effects:h,userEvent:"input.replace"}),!0}),Yy=Es((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(n=>{let{from:s,to:o}=n;return{from:s,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:z.announce.of(i),userEvent:"input.replace.all"}),!0});function cc(r){return r.state.facet(pn).createPanel(r)}function dh(r,e){var t,i,n,s,o;let l=r.selection.main,a=l.empty||l.to>l.from+100?"":r.sliceDoc(l.from,l.to);if(e&&!a)return e;let h=r.facet(pn);return new p0({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:h.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function g0(r){let e=es(r,cc);return e&&e.dom.querySelector("[main-field]")}function S0(r){let e=g0(r);e&&e==r.root.activeElement&&e.select()}const T0=r=>{let e=r.state.field(Bi,!1);if(e&&e.panel){let t=g0(r);if(t&&t!=r.root.activeElement){let i=dh(r.state,e.query.spec);i.valid&&r.dispatch({effects:ns.of(i)}),t.focus(),t.select()}}else r.dispatch({effects:[hc.of(!0),e?ns.of(dh(r.state,e.query.spec)):ae.appendConfig.of(iI)]});return!0},E0=r=>{let e=r.state.field(Bi,!1);if(!e||!e.panel)return!1;let t=es(r,cc);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:hc.of(!1)}),!0},Zy=[{key:"Mod-f",run:T0,scope:"editor search-panel"},{key:"F3",run:Qo,shift:Xo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Qo,shift:Xo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:E0,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Jy},{key:"Mod-Alt-g",run:Ry},{key:"Mod-d",run:qy,preventDefault:!0}];class eI{constructor(e){this.view=e;let t=this.query=e.state.field(Bi).query.spec;this.commit=this.commit.bind(this),this.searchField=Ve("input",{value:t.search,placeholder:Rt(e,"Find"),"aria-label":Rt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ve("input",{value:t.replace,placeholder:Rt(e,"Replace"),"aria-label":Rt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ve("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ve("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ve("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,s,o){return Ve("button",{class:"cm-button",name:n,onclick:s,type:"button"},o)}this.dom=Ve("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Qo(e),[Rt(e,"next")]),i("prev",()=>Xo(e),[Rt(e,"previous")]),i("select",()=>Xy(e),[Rt(e,"all")]),Ve("label",null,[this.caseField,Rt(e,"match case")]),Ve("label",null,[this.reField,Rt(e,"regexp")]),Ve("label",null,[this.wordField,Rt(e,"by word")]),...e.state.readOnly?[]:[Ve("br"),this.replaceField,i("replace",()=>Du(e),[Rt(e,"replace")]),i("replaceAll",()=>Yy(e),[Rt(e,"replace all")])],Ve("button",{name:"close",onclick:()=>E0(e),"aria-label":Rt(e,"close"),type:"button"},[""])])}commit(){let e=new p0({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:ns.of(e)}))}keydown(e){cE(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Xo:Qo)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Du(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(ns)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(pn).top}}function Rt(r,e){return r.state.phrase(e)}const io=30,ro=/[\s\.,:;?!]/;function fc(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),n=r.state.doc.lineAt(t).to,s=Math.max(i.from,e-io),o=Math.min(n,t+io),l=r.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<io;a++)if(!ro.test(l[a+1])&&ro.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-io;a--)if(!ro.test(l[a-1])&&ro.test(l[a])){l=l.slice(0,a);break}}return z.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${i.number}.`)}const tI=z.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),iI=[Bi,Ir.low(Qy),tI];class O0{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ye(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),s=n.search(I0(e,!1));return s<0?null:{from:i+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Vu(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function rI(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=Vu(e)+Vu(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function y0(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:rI(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}function nI(r,e){return t=>{for(let i=Ye(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(r.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class Uu{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function Fi(r){return r.selection.main.from}function I0(r,e){var t;let{source:i}=r,n=e&&i[0]!="^",s=i[i.length-1]!="$";return!n&&!s?r:new RegExp(`${n?"^":""}(?:${i})${s?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const v0=bi.define();function sI(r,e,t,i){let{main:n}=r.selection,s=t-n.from,o=i-n.from;return Object.assign(Object.assign({},r.changeByRange(l=>{if(l!=n&&t!=i&&r.sliceDoc(l.from+s,l.from+o)!=r.sliceDoc(t,i))return{range:l};let a=r.toText(e);return{changes:{from:l.from+s,to:i==n.from?l.to:l.from+o,insert:a},range:V.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Mu=new WeakMap;function oI(r){if(!Array.isArray(r))return r;let e=Mu.get(r);return e||Mu.set(r,e=y0(r)),e}const Jo=ae.define(),ss=ae.define();class lI{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=et(e,t),n=Bt(i);this.chars.push(i);let s=e.slice(t,t+n),o=s.toUpperCase();this.folded.push(et(o==s?s.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:s,byWord:o}=this;if(t.length==1){let w=et(e,0),A=Bt(w),R=A==e.length?0:-100;if(w!=t[0])if(w==i[0])R+=-200;else return null;return this.ret(R,[0,A])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,h=0;if(l<0){for(let w=0,A=Math.min(e.length,200);w<A&&h<a;){let R=et(e,w);(R==t[h]||R==i[h])&&(n[h++]=w),w+=Bt(R)}if(h<a)return null}let c=0,u=0,p=!1,g=0,S=-1,E=-1,y=/[a-z]/.test(e),I=!0;for(let w=0,A=Math.min(e.length,200),R=0;w<A&&u<a;){let L=et(e,w);l<0&&(c<a&&L==t[c]&&(s[c++]=w),g<a&&(L==t[g]||L==i[g]?(g==0&&(S=w),E=w+1,g++):g=0));let x,k=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(x=Ph(L))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!w||k==1&&y||R==0&&k!=0)&&(t[u]==L||i[u]==L&&(p=!0)?o[u++]=w:o.length&&(I=!1)),R=k,w+=Bt(L)}return u==a&&o[0]==0&&I?this.result(-100+(p?-200:0),o,e):g==a&&S==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==a?this.ret(-900-e.length,[S,E]):u==a?this.result(-100+(p?-200:0)+-700+(I?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],s=0;for(let o of t){let l=o+(this.astral?Bt(et(i,o)):1);s&&n[s-1]==o?n[s-1]=l:(n[s++]=o,n[s++]=l)}return this.ret(e-i.length,n)}}class aI{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const it=W.define({combine(r){return mi(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:hI,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Pu(e(i),t(i)),optionClass:(e,t)=>i=>Pu(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Pu(r,e){return r?e?r+" "+e:r:e}function hI(r,e,t,i,n,s){let o=r.textDirection==Pe.RTL,l=o,a=!1,h="top",c,u,p=e.left-n.left,g=n.right-e.right,S=i.right-i.left,E=i.bottom-i.top;if(l&&p<Math.min(S,g)?l=!1:!l&&g<Math.min(S,p)&&(l=!0),S<=(l?p:g))c=Math.max(n.top,Math.min(t.top,n.bottom-E))-e.top,u=Math.min(400,l?p:g);else{a=!0,u=Math.min(400,(o?e.right:n.right-e.left)-30);let w=n.bottom-e.bottom;w>=E||w>e.top?c=t.bottom-e.top:(h="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/s.offsetHeight,I=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${c/y}px; max-width: ${u/I}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function cI(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let h=0;h<s.length;){let c=s[h++],u=s[h++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(l.slice(c,u))),p.className="cm-completionMatchedText",a=u}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function sa(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class fI{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:s,selected:o}=n.open,l=e.state.facet(it);this.optionContent=cI(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=sa(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:h}=e.state.field(t).open;for(let c=a.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(it).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:ss.of(null)})}),this.showOptions(s,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:s,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=s)&&(this.range=sa(s.length,o,e.state.facet(it).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=sa(t.options.length,t.selected,this.view.state.facet(it).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Nt(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:s}=e;i.appendChild(n),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&dI(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return n.top>Math.min(s.bottom,t.bottom)-10||n.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(it).positionInfo(this.view,t,n,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:h}=l;if(h){let p=typeof h=="string"?h:h.name;if(p!=s&&(o>i.from||i.from==0))if(s=p,typeof h!="string"&&h.header)n.appendChild(h.header(h));else{let g=n.appendChild(document.createElement("completion-section"));g.textContent=p}}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(l);u&&(c.className=u);for(let p of this.optionContent){let g=p(l,this.view.state,this.view,a);g&&c.appendChild(g)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function uI(r,e){return t=>new fI(t,r,e)}function dI(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/r.offsetHeight;i.top<t.top?r.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(r.scrollTop+=(i.bottom-t.bottom)/n)}function _u(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function pI(r,e){let t=[],i=null,n=h=>{t.push(h);let{section:c}=h.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(p=>p.name==u)||i.push(typeof c=="string"?{name:u}:c)}},s=e.facet(it);for(let h of r)if(h.hasResult()){let c=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)n(new Uu(u,h.source,c?c(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),p,g=s.filterStrict?new aI(u):new lI(u);for(let S of h.result.options)if(p=g.match(S.label)){let E=S.displayLabel?c?c(S,p.matched):[]:p.matched;n(new Uu(S,h.source,E,p.score+(S.boost||0)))}}}if(i){let h=Object.create(null),c=0,u=(p,g)=>{var S,E;return((S=p.rank)!==null&&S!==void 0?S:1e9)-((E=g.rank)!==null&&E!==void 0?E:1e9)||(p.name<g.name?-1:1)};for(let p of i.sort(u))c-=1e5,h[p.name]=c;for(let p of t){let{section:g}=p.completion;g&&(p.score+=h[typeof g=="string"?g:g.name])}}let o=[],l=null,a=s.compareCompletions;for(let h of t.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=h.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?o.push(h):_u(h.completion)>_u(l)&&(o[o.length-1]=h),l=h.completion}return o}class Fr{constructor(e,t,i,n,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Fr(this.options,Bu(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,s){let o=pI(e,t);if(!o.length)return n&&e.some(a=>a.state==1)?new Fr(n.options,n.attrs,n.tooltip,n.timestamp,n.selected,!0):null;let l=t.facet(it).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let a=n.options[n.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==a){l=h;break}}return new Fr(o,Bu(i,l),{pos:e.reduce((a,h)=>h.hasResult()?Math.min(a,h.from):a,1e8),create:OI,above:s.aboveCursor},n?n.timestamp:Date.now(),l,!1)}map(e){return new Fr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Yo{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Yo(TI,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(it),s=(i.override||t.languageDataAt("autocomplete",Fi(t)).map(oI)).map(l=>(this.active.find(h=>h.source==l)||new Vt(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!mI(s,this.active)?o=Fr.build(s,t,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Vt(l.source,0):l));for(let l of e.effects)l.is(A0)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Yo(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?gI:SI}}function mI(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==r.length,s=i==e.length;if(n||s)return n==s;if(r[t++].result!=e[i++].result)return!1}}const gI={"aria-autocomplete":"list"},SI={};function Bu(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const TI=[];function N0(r,e){if(r.isUserEvent("input.complete")){let i=r.annotation(v0);if(i&&e.activateOnCompletion(i))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class Vt{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=N0(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new Vt(n.source,0)),i&4&&n.state==0&&(n=new Vt(this.source,1)),n=n.updateFor(e,i);for(let s of e.effects)if(s.is(Jo))n=new Vt(n.source,1,s.value?Fi(e.state):-1);else if(s.is(ss))n=new Vt(n.source,0);else if(s.is(b0))for(let o of s.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Vt(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Fi(e.state))}}class Xr extends Vt{constructor(e,t,i,n,s){super(e,2,t),this.result=i,this.from=n,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=Fi(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||!n||t&2&&Fi(e.startState)==this.from)return new Vt(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return EI(n.validFor,e.state,s,o)?new Xr(this.source,a,n,s,o):n.update&&(n=n.update(n,s,o,new O0(e.state,l,a>=0)))?new Xr(this.source,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:Fi(e.state)):new Vt(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Xr(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Vt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function EI(r,e,t,i){if(!r)return!1;let n=e.sliceDoc(t,i);return typeof r=="function"?r(n,t,i,e):I0(r,!0).test(n)}const b0=ae.define({map(r,e){return r.map(t=>t.map(e))}}),A0=ae.define(),It=nt.define({create(){return Yo.start()},update(r,e){return r.update(e)},provide:r=>[Jh.from(r,e=>e.tooltip),z.contentAttributes.from(r,e=>e.attrs)]});function uc(r,e){const t=e.completion.apply||e.completion.label;let i=r.state.field(It).active.find(n=>n.source==e.source);return i instanceof Xr?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},sI(r.state,t,i.from,i.to)),{annotations:v0.of(e.completion)})):t(r,e.completion,i.from,i.to),!0):!1}const OI=uI(It,uc);function no(r,e="option"){return t=>{let i=t.state.field(It,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(it).interactionDelay)return!1;let n=1,s;e=="page"&&(s=nm(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(r?1:-1):r?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:A0.of(l)}),!0}}const yI=r=>{let e=r.state.field(It,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(it).interactionDelay?!1:uc(r,e.open.options[e.open.selected])},Fu=r=>r.state.field(It,!1)?(r.dispatch({effects:Jo.of(!0)}),!0):!1,II=r=>{let e=r.state.field(It,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:ss.of(null)}),!0)};class vI{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const NI=50,bI=1e3,AI=We.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(It).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(It),t=r.state.facet(it);if(!r.selectionSet&&!r.docChanged&&r.startState.field(It)==e)return;let i=r.transactions.some(s=>{let o=N0(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&r.docChanged||o.updates.length+r.transactions.length>NI&&Date.now()-o.time>bI){for(let l of o.context.abortListeners)try{l()}catch(a){Nt(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(s=>s.effects.some(o=>o.is(Jo)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let s of r.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(It);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Fi(e),i=new O0(e,t,r.explicitPos==t,this.view),n=new vI(r,i);this.running.push(n),Promise.resolve(r.source(i)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:ss.of(null)}),Nt(this.view.state,s)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(it).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(it);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new Xr(n.active.source,n.active.explicitPos,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:Fi(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(It).active.find(o=>o.source==n.active.source);if(s&&s.state==1)if(n.done==null){let o=new Vt(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:b0.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(It,!1);if(e&&e.tooltip&&this.view.state.facet(it).closeOnBlur){let t=e.open&&nm(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ss.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Jo.of(!1)}),20),this.composing=0}}}),wI=typeof navigator=="object"&&/Win/.test(navigator.platform),xI=Ir.highest(z.domEventHandlers({keydown(r,e){let t=e.state.field(It,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(wI&&r.altKey)||r.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||n.result.commitCharacters;return s&&s.indexOf(r.key)>-1&&uc(e,i),!1}})),kI=z.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),os={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},cr=ae.define({map(r,e){let t=e.mapPos(r,-1,dt.TrackAfter);return t??void 0}}),dc=new class extends mr{};dc.startSide=1;dc.endSide=-1;const w0=nt.define({create(){return ye.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(cr)&&(r=r.update({add:[dc.range(t.value,t.value+1)]}));return r}});function RI(){return[CI,w0]}const oa="()[]{}<>";function x0(r){for(let e=0;e<oa.length;e+=2)if(oa.charCodeAt(e)==r)return oa.charAt(e+1);return Ph(r<128?r:r+1)}function k0(r,e){return r.languageDataAt("closeBrackets",e)[0]||os}const LI=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),CI=z.inputHandler.of((r,e,t,i)=>{if((LI?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let n=r.state.selection.main;if(i.length>2||i.length==2&&Bt(et(i,0))==1||e!=n.from||t!=n.to)return!1;let s=UI(r.state,i);return s?(r.dispatch(s),!0):!1}),DI=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=k0(r,r.selection.main.head).brackets||os.brackets,n=null,s=r.changeByRange(o=>{if(o.empty){let l=MI(r.doc,o.head);for(let a of i)if(a==l&&yl(r.doc,o.head)==x0(et(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:V.cursor(o.head-a.length)}}return{range:n=o}});return n||e(r.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},VI=[{key:"Backspace",run:DI}];function UI(r,e){let t=k0(r,r.selection.main.head),i=t.brackets||os.brackets;for(let n of i){let s=x0(et(n,0));if(e==n)return s==n?BI(r,n,i.indexOf(n+n+n)>-1,t):PI(r,n,s,t.before||os.before);if(e==s&&R0(r,r.selection.main.from))return _I(r,n,s)}return null}function R0(r,e){let t=!1;return r.field(w0).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function yl(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Bt(et(t,0)))}function MI(r,e){let t=r.sliceString(e-2,e);return Bt(et(t,0))==t.length?t:t.slice(1)}function PI(r,e,t,i){let n=null,s=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:cr.of(o.to+e.length),range:V.range(o.anchor+e.length,o.head+e.length)};let l=yl(r.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:cr.of(o.head+e.length),range:V.cursor(o.head+e.length)}:{range:n=o}});return n?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function _I(r,e,t){let i=null,n=r.changeByRange(s=>s.empty&&yl(r.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:V.cursor(s.head+t.length)}:i={range:s});return i?null:r.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function BI(r,e,t,i){let n=i.stringPrefixes||os.stringPrefixes,s=null,o=r.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:cr.of(l.to+e.length),range:V.range(l.anchor+e.length,l.head+e.length)};let a=l.head,h=yl(r.doc,a),c;if(h==e){if(Hu(r,a))return{changes:{insert:e+e,from:a},effects:cr.of(a+e.length),range:V.cursor(a+e.length)};if(R0(r,a)){let p=t&&r.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+p.length,insert:p},range:V.cursor(a+p.length)}}}else{if(t&&r.sliceDoc(a-2*e.length,a)==e+e&&(c=qu(r,a-2*e.length,n))>-1&&Hu(r,c))return{changes:{insert:e+e+e+e,from:a},effects:cr.of(a+e.length),range:V.cursor(a+e.length)};if(r.charCategorizer(a)(h)!=Be.Word&&qu(r,a,n)>-1&&!FI(r,a,e,n))return{changes:{insert:e+e,from:a},effects:cr.of(a+e.length),range:V.cursor(a+e.length)}}return{range:s=l}});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Hu(r,e){let t=Ye(r).resolveInner(e+1);return t.parent&&t.from==e}function FI(r,e,t,i){let n=Ye(r).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=r.sliceDoc(n.from,Math.min(n.to,n.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+a;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=n.to==e&&n.parent;if(!h)break;n=h}return!1}function qu(r,e,t){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=Be.Word)return e;for(let n of t){let s=e-n.length;if(r.sliceDoc(s,e)==n&&i(r.sliceDoc(s-1,s))!=Be.Word)return s}return-1}function L0(r={}){return[xI,It,it.of(r),AI,HI,kI]}const C0=[{key:"Ctrl-Space",run:Fu},{mac:"Alt-`",run:Fu},{key:"Escape",run:II},{key:"ArrowDown",run:no(!0)},{key:"ArrowUp",run:no(!1)},{key:"PageDown",run:no(!0,"page")},{key:"PageUp",run:no(!1,"page")},{key:"Enter",run:yI}],HI=Ir.highest(dl.computeN([it],r=>r.facet(it).defaultKeymap?[C0]:[]));class qI{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class ar{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,s=i.facet(ls).markerFilter;s&&(n=s(n,i));let o=Y.set(n.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?Y.widget({widget:new JI(l),diagnostic:l}).range(l.from):Y.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new ar(o,t,sn(o))}}function sn(r,e=null,t=0){let i=null;return r.between(t,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new qI(n,s,o.diagnostic),!1}),i}function zI(r,e){let t=e.pos,i=e.end||t,n=r.state.facet(ls).hideOn(r,t,i);if(n!=null)return n;let s=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(o=>o.is(D0))||r.changes.touchesRange(s.from,Math.max(s.to,i)))}function WI(r,e){return r.field(Ut,!1)?e:e.concat(ae.appendConfig.of(ev))}const D0=ae.define(),pc=ae.define(),V0=ae.define(),Ut=nt.define({create(){return new ar(Y.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),i=null,n=r.panel;if(r.selected){let s=e.changes.mapPos(r.selected.from,1);i=sn(t,r.selected.diagnostic,s)||sn(t,null,s)}!t.size&&n&&e.state.facet(ls).autoPanel&&(n=null),r=new ar(t,n,i)}for(let t of e.effects)if(t.is(D0)){let i=e.state.facet(ls).autoPanel?t.value.length?as.open:null:r.panel;r=ar.init(t.value,i,e.state)}else t.is(pc)?r=new ar(r.diagnostics,t.value?as.open:null,r.selected):t.is(V0)&&(r=new ar(r.diagnostics,r.panel,t.value));return r},provide:r=>[ts.from(r,e=>e.panel),z.decorations.from(r,e=>e.diagnostics)]}),GI=Y.mark({class:"cm-lintRange cm-lintRange-active"});function KI(r,e,t){let{diagnostics:i}=r.state.field(Ut),n=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:c})=>{e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0))&&(n.push(c.diagnostic),s=Math.min(a,s),o=Math.max(h,o))});let l=r.state.facet(ls).tooltipFilter;return l&&(n=l(n,r.state)),n.length?{pos:s,end:o,above:r.state.doc.lineAt(s).to<o,create(){return{dom:jI(r,n)}}}:null}function jI(r,e){return Ve("ul",{class:"cm-tooltip-lint"},e.map(t=>M0(r,t,!1)))}const $I=r=>{let e=r.state.field(Ut,!1);(!e||!e.panel)&&r.dispatch({effects:WI(r.state,[pc.of(!0)])});let t=es(r,as.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},zu=r=>{let e=r.state.field(Ut,!1);return!e||!e.panel?!1:(r.dispatch({effects:pc.of(!1)}),!0)},QI=r=>{let e=r.state.field(Ut,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},XI=[{key:"Mod-Shift-m",run:$I,preventDefault:!0},{key:"F8",run:QI}],ls=W.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},mi(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function U0(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function M0(r,e,t){var i;let n=t?U0(e.actions):[];return Ve("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ve("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=sn(r.state.field(Ut).diagnostics,e);g&&s.apply(r,g.from,g.to)},{name:h}=s,c=n[o]?h.indexOf(n[o]):-1,u=c<0?h:[h.slice(0,c),Ve("u",h.slice(c,c+1)),h.slice(c+1)];return Ve("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${n[o]})"`}.`},u)}),e.source&&Ve("div",{class:"cm-diagnosticSource"},e.source))}class JI extends Xi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ve("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Wu{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=M0(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class as{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)zu(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=U0(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=sn(this.view.state.field(Ut).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=Ve("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ve("div",{class:"cm-panel-lint"},this.list,Ve("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>zu(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ut).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ut),i=0,n=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,c;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){h=u;break}h<0?(c=new Wu(this.view,a.diagnostic),this.items.splice(i,0,c),n=!0):(c=this.items[h],h>i&&(this.items.splice(i,h-i),n=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new Wu(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let a=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/a:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ut),i=sn(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:V0.of(i)})}static open(e){return new as(e)}}function YI(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function so(r){return YI(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ZI=z.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:so("#d11")},".cm-lintRange-warning":{backgroundImage:so("orange")},".cm-lintRange-info":{backgroundImage:so("#999")},".cm-lintRange-hint":{backgroundImage:so("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),ev=[Ut,z.decorations.compute([Ut],r=>{let{selected:e,panel:t}=r.field(Ut);return!e||!t||e.from==e.to?Y.none:Y.set([GI.range(e.from,e.to)])}),XE(KI,{hideOn:zI}),ZI],tv=[lO(),cO(),wE(),w2(),e2(),gE(),yE(),Ie.allowMultipleSelections.of(!0),HO(),xm(n2,{fallback:!0}),f2(),RI(),L0(),BE(),qE(),DE(),Vy(),dl.of([...VI,...wy,...Zy,...M2,...XO,...C0,...XI])];var Gu={};class Zo{constructor(e,t,i,n,s,o,l,a,h,c=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Zo(e,[],t,i,i,0,[],0,n?new Ku(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(n);if(l&&(this.score+=l),i==0){this.pushState(s.getGoto(this.state,n,!0),this.reducePos),n<s.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),h=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[n])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,p=this.bufferBase+this.buffer.length-u;if(n<s.minRepeatTerm||e&131072){let g=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,h,g,p+4,!0)}if(e&262144)this.state=this.stack[a];else{let g=this.stack[a-3];this.state=s.getGoto(g,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,h)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i,n){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4);else{let s=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(s,1)||(this.reducePos=n)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}}apply(e,t,i,n){e&65536?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Zo(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new iv(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<8&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,s)=>{if(!t.includes(n))return t.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Ku(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Ku{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class iv{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class el{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new el(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new el(this.stack,this.pos,this.index)}}function oo(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}class To{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ju=new To;class rv{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ju,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ju,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Jr{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;sv(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Jr.prototype.contextual=Jr.prototype.fallback=Jr.prototype.extend=!1;Jr.prototype.fallback=Jr.prototype.extend=!1;class nv{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function sv(r,e,t,i,n,s){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&r[o];){let h=r[o+1];for(let g=o+3;g<h;g+=2)if((r[g+1]&l)>0){let S=r[g];if(a.allows(S)&&(e.token.value==-1||e.token.value==S||ov(S,e.token.value,n,s))){e.acceptToken(S);break}}let c=e.next,u=0,p=r[o+2];if(e.next<0&&p>u&&r[h+p*3-3]==65535){o=r[h+p*3-1];continue e}for(;u<p;){let g=u+p>>1,S=h+g+(g<<1),E=r[S],y=r[S+1]||65536;if(c<E)p=g;else if(c>=y)u=g+1;else{o=r[S+2],e.advance();continue e}}break}}function $u(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function ov(r,e,t,i){let n=$u(t,i,e);return n<0||$u(t,i,r)<n}const Lt=typeof process<"u"&&Gu&&/\bparse\b/.test(Gu.LOG);let la=null;function Qu(r,e,t){let i=r.cursor(Je.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class lv{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Qu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Qu(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof ze){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(de.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class av{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new To)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if(!(1<<h&o))continue;let c=s[h],u=this.tokens[h];if(!(i&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let p=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(i=u,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new To,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new To,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=Ei(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(Ei(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(Ei(l,h+1),t,i,n))}return n}}class hv{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new rv(t,n),this.tokens=new av(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[Zo.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new lv(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&fv(n);if(o)return Lt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Lt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return Lt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=Lt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(n);u;){let p=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(p>-1&&u.length&&(!h||(u.prop(de.contextHash)||0)==c))return e.useNode(u,p),Lt&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof ze)||u.children.length==0||u.positions[0]>0)break;let g=u.children[0];if(g instanceof ze&&u.positions[0]==0)u=g;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Lt&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let c=a[h++],u=a[h++],p=a[h++],g=h==a.length||!i,S=g?e:e.split(),E=this.tokens.mainToken;if(S.apply(c,u,E?E.start:S.pos,p),Lt&&console.log(o+this.stackID(S)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(u)} @ ${n}${S==e?"":", split"})`),g)return!0;S.pos>n?t.push(S):i.push(S)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Xu(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],c=Lt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Lt&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),p=c;for(let g=0;u.forceReduce()&&g<10&&(Lt&&console.log(p+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));g++)Lt&&(p=this.stackID(u)+" -> ");for(let g of l.recoverByInsert(a))Lt&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),Lt&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),Xu(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),ze.build({buffer:el.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(la||(la=new WeakMap)).get(e);return t||la.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Xu(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class cv{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class tl extends um{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=de[a]);for(let h=1;h<l.length;){let c=l[h++];if(c>=0)s(c,a,l[h++]);else{let u=l[h+-c];for(let p=-c;p>0;p--)s(l[h++],a,u);h++}}}this.nodeSet=new Yh(t.map((l,a)=>At.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=am;let o=oo(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Ju),this.states=oo(e.states,Uint32Array),this.data=oo(e.stateData),this.goto=oo(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Jr(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new hv(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=Ei(i,s+2)];else{if(i[s+1]==2)return Ei(i,s+2);break}if(o==t||o==0)return Ei(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let s=this.stateSlot(e,1);n==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Ei(this.data,s+2);else break;n=t(Ei(this.data,s+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Ei(this.data,i+2);else break;if(!(this.data[i+2]&1)){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}configure(e){let t=Object.assign(Object.create(tl.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[n]=Ju(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new cv(e,i,n)}static deserialize(e){return new tl(e)}}function Ei(r,e){return r[e]|r[e+1]<<16}function fv(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Ju(r){if(r.external){let e=r.extend?1:0;return(t,i)=>r.external(t,i)<<1|e}return r.get}const uv=36,Yu=1,dv=2,Dr=3,aa=4,pv=5,mv=6,gv=7,Sv=8,Tv=9,Ev=10,Ov=11,yv=12,Iv=13,vv=14,Nv=15,bv=16,Av=17,Zu=18,wv=19,P0=20,_0=21,ed=22,xv=23,kv=24;function ph(r){return r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57}function Rv(r){return r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70}function or(r,e,t){for(let i=!1;;){if(r.next<0)return;if(r.next==e&&!i){r.advance();return}i=t&&!i&&r.next==92,r.advance()}}function Lv(r,e){e:for(;;){if(r.next<0)return;if(r.next==36){r.advance();for(let t=0;t<e.length;t++){if(r.next!=e.charCodeAt(t))continue e;r.advance()}if(r.next==36){r.advance();return}}else r.advance()}}function Cv(r,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(r.next<0)return;if(r.next==i&&r.peek(1)==39){r.advance(2);return}r.advance()}}function mh(r,e){for(;!(r.next!=95&&!ph(r.next));)e!=null&&(e+=String.fromCharCode(r.next)),r.advance();return e}function Dv(r){if(r.next==39||r.next==34||r.next==96){let e=r.next;r.advance(),or(r,e,!1)}else mh(r)}function td(r,e){for(;r.next==48||r.next==49;)r.advance();e&&r.next==e&&r.advance()}function id(r,e){for(;;){if(r.next==46){if(e)break;e=!0}else if(r.next<48||r.next>57)break;r.advance()}if(r.next==69||r.next==101)for(r.advance(),(r.next==43||r.next==45)&&r.advance();r.next>=48&&r.next<=57;)r.advance()}function rd(r){for(;!(r.next<0||r.next==10);)r.advance()}function sr(r,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==r)return!0;return!1}const ha=` 	\r
`;function B0(r,e,t){let i=Object.create(null);i.true=i.false=pv,i.null=i.unknown=mv;for(let n of r.split(" "))n&&(i[n]=P0);for(let n of e.split(" "))n&&(i[n]=_0);for(let n of(t||"").split(" "))n&&(i[n]=kv);return i}const Vv="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Uv="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",gh={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:B0(Uv,Vv)};function Mv(r,e,t,i){let n={};for(let s in gh)n[s]=(r.hasOwnProperty(s)?r:gh)[s];return e&&(n.words=B0(e,t||"",i)),n}function F0(r){return new nv(e=>{var t;let{next:i}=e;if(e.advance(),sr(i,ha)){for(;sr(e.next,ha);)e.advance();e.acceptToken(uv)}else if(i==36&&r.doubleDollarQuotedStrings){let n=mh(e,"");e.next==36&&(e.advance(),Lv(e,n),e.acceptToken(Dr))}else if(i==39||i==34&&r.doubleQuotedStrings)or(e,i,r.backslashEscapes),e.acceptToken(Dr);else if(i==35&&r.hashComments||i==47&&e.next==47&&r.slashComments)rd(e),e.acceptToken(Yu);else if(i==45&&e.next==45&&(!r.spaceAfterDashes||e.peek(1)==32))rd(e),e.acceptToken(Yu);else if(i==47&&e.next==42){e.advance();for(let n=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(n--,e.advance(),!n)break}else s==47&&e.next==42&&(n++,e.advance())}e.acceptToken(dv)}else if((i==101||i==69)&&e.next==39)e.advance(),or(e,39,!0),e.acceptToken(Dr);else if((i==110||i==78)&&e.next==39&&r.charSetCasts)e.advance(),or(e,39,r.backslashEscapes),e.acceptToken(Dr);else if(i==95&&r.charSetCasts)for(let n=0;;n++){if(e.next==39&&n>1){e.advance(),or(e,39,r.backslashEscapes),e.acceptToken(Dr);break}if(!ph(e.next))break;e.advance()}else if(r.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!sr(e.peek(1),ha)){let n=e.peek(1);e.advance(2),Cv(e,n),e.acceptToken(Dr)}else if(i==40)e.acceptToken(gv);else if(i==41)e.acceptToken(Sv);else if(i==123)e.acceptToken(Tv);else if(i==125)e.acceptToken(Ev);else if(i==91)e.acceptToken(Ov);else if(i==93)e.acceptToken(yv);else if(i==59)e.acceptToken(Iv);else if(r.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),td(e),e.acceptToken(ed);else if((i==98||i==66)&&(e.next==39||e.next==34)){const n=e.next;e.advance(),r.treatBitsAsBytes?(or(e,n,r.backslashEscapes),e.acceptToken(xv)):(td(e,n),e.acceptToken(ed))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let n=e.next==39;for(e.advance();Rv(e.next);)e.advance();n&&e.next==39&&e.advance(),e.acceptToken(aa)}else if(i==46&&e.next>=48&&e.next<=57)id(e,!0),e.acceptToken(aa);else if(i==46)e.acceptToken(vv);else if(i>=48&&i<=57)id(e,!1),e.acceptToken(aa);else if(sr(i,r.operatorChars)){for(;sr(e.next,r.operatorChars);)e.advance();e.acceptToken(Nv)}else if(sr(i,r.specialVar))e.next==i&&e.advance(),Dv(e),e.acceptToken(Av);else if(sr(i,r.identifierQuotes))or(e,i,!1),e.acceptToken(wv);else if(i==58||i==44)e.acceptToken(bv);else if(ph(i)){let n=mh(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-n.length-1)==46?Zu:(t=r.words[n.toLowerCase()])!==null&&t!==void 0?t:Zu)}})}const H0=F0(gh),Pv=tl.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:" LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,H0],topRules:{Script:[0,25]},tokenPrec:0});function Sh(r){let e=r.cursor().moveTo(r.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function hs(r,e){let t=r.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function il(r){return r&&(r.name=="Identifier"||r.name=="QuotedIdentifier")}function _v(r,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)il(i)&&t.push(hs(r,i));return t}return[hs(r,e)]}function nd(r,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=Sh(e);if(!il(i))return t;t.unshift(hs(r,i)),e=Sh(i)}}function Bv(r,e){let t=Ye(r).resolveInner(e,-1),i=Hv(r.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?r.doc.sliceString(t.from,t.from+1):null,parents:nd(r.doc,Sh(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:nd(r.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const Fv=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function Hv(r,e){let t;for(let n=e;!t;n=n.parent){if(!n)return null;n.name=="Statement"&&(t=n)}let i=null;for(let n=t.firstChild,s=!1,o=null;n;n=n.nextSibling){let l=n.name=="Keyword"?r.sliceString(n.from,n.to).toLowerCase():null,a=null;if(!s)s=l=="from";else if(l=="as"&&o&&il(n.nextSibling))a=hs(r,n.nextSibling);else{if(l&&Fv.has(l))break;o&&il(n)&&(a=hs(r,n))}a&&(i||(i=Object.create(null)),i[a]=_v(r,o)),o=/Identifier$/.test(n.name)?n:null}return i}function qv(r,e){return r?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==r?t.label:r+t.label+r,apply:void 0})):e}const zv=/^\w*$/,Wv=/^[`'"]?\w*[`'"]?$/;function sd(r){return r.self&&typeof r.self.label=="string"}class mc{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(n=>n.label==e)&&this.list.push(od(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new mc(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?od(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):sd(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],n=null,s=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),o=this;sd(i)&&(n=i.self,i=i.children);for(let l=0;l<s.length;l++)n&&l==s.length-1&&o.addCompletion(n),o=o.child(s[l].replace(/\\\./g,"."));o.addNamespace(i)}}}function od(r,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(r)?{label:r,type:e}:{label:r,type:e,apply:t+r+t}}function Gv(r,e,t,i,n,s){var o;let l=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',a=new mc(l,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),h=n?a.child(n):null;return a.addNamespace(r),e&&(h||a).addCompletions(e),t&&a.addCompletions(t),h&&a.addCompletions(h.list),i&&a.addCompletions((h||a).child(i).list),c=>{let{parents:u,from:p,quoted:g,empty:S,aliases:E}=Bv(c.state,c.pos);if(S&&!c.explicit)return null;E&&u.length==1&&(u=E[u[0]]||u);let y=a;for(let A of u){for(;!y.children||!y.children[A];)if(y==a&&h)y=h;else if(y==h&&i)y=y.child(i);else return null;let R=y.maybeChild(A);if(!R)return null;y=R}let I=g&&c.state.sliceDoc(c.pos,c.pos+1)==g,w=y.list;return y==a&&E&&(w=w.concat(Object.keys(E).map(A=>({label:A,type:"constant"})))),{from:p,to:I?c.pos+1:void 0,options:qv(g,w),validFor:g?Wv:zv}}}function Kv(r){return r==_0?"type":r==P0?"keyword":"variable"}function jv(r,e,t){let i=Object.keys(r).map(n=>t(e?n.toUpperCase():n,Kv(r[n])));return nI(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],y0(i))}let $v=Pv.configure({props:[Sm.add({Statement:BO()}),Em.add({Statement(r,e){return{from:Math.min(r.from+100,e.doc.lineAt(r.from).to),to:r.to}},BlockComment(r){return{from:r.from+2,to:r.to-2}}}),dm({Keyword:U.keyword,Type:U.typeName,Builtin:U.standard(U.name),Bits:U.number,Bytes:U.string,Bool:U.bool,Null:U.null,Number:U.number,String:U.string,Identifier:U.name,QuotedIdentifier:U.special(U.string),SpecialVar:U.special(U.name),LineComment:U.lineComment,BlockComment:U.blockComment,Operator:U.operator,"Semi Punctuation":U.punctuation,"( )":U.paren,"{ }":U.brace,"[ ]":U.squareBracket})]});class gc{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=Mv(e,e.keywords,e.types,e.builtin),i=Bo.define({name:"sql",parser:$v.configure({tokenizers:[{from:H0,to:F0(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new gc(t,i,e)}}function Qv(r,e){return{label:r,type:e,boost:-1}}function Xv(r,e=!1,t){return jv(r.dialect.words,e,t||Qv)}function Jv(r){return r.schema?Gv(r.schema,r.tables,r.schemas,r.defaultTable,r.defaultSchema,r.dialect||Sc):()=>null}function Yv(r){return r.schema?(r.dialect||Sc).language.data.of({autocomplete:Jv(r)}):[]}function Zv(r={}){let e=r.dialect||Sc;return new RO(e.language,[Yv(r),e.language.data.of({autocomplete:Xv(e,r.upperCaseKeywords,r.keywordCompletion)})])}const Sc=gc.define({}),Eo="#d2d8d9",ld="#1e1e1e",eN="#2a2f3a",tN="#e4c07a",ad="#2a2f3a",iN="#2BA6FF",rN="#f08d49",nN="#f08d49",Th="#666666",sN="#d2d8d9",oN="#d2d8d9",lN=Ss.define([{tag:U.keyword,color:iN},{tag:U.string,color:rN},{tag:U.number,color:nN},{tag:U.comment,color:Th,fontStyle:"italic"},{tag:U.operator,color:sN},{tag:U.punctuation,color:oN},{tag:U.variableName,color:Eo},{tag:U.propertyName,color:Eo},{tag:U.function(U.variableName),color:Eo}]),aN=[z.theme({"&":{color:Eo,backgroundColor:ld,fontSize:"13px",height:"100%"},".cm-content":{fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',padding:"10px 0"},".cm-line":{padding:"0 10px"},".cm-activeLine":{backgroundColor:ad},".cm-selectionBackground":{backgroundColor:eN},".cm-cursor":{borderLeftColor:tN},".cm-gutters":{backgroundColor:ld,color:Th,border:"none",borderRight:`1px solid ${Th}`,minWidth:"40px"},".cm-activeLineGutter":{backgroundColor:ad},".cm-scroller":{overflow:"auto",fontFamily:"inherit"},".cm-matchingBracket":{backgroundColor:"#3a3f4b",outline:"none"},".cm-nonmatchingBracket":{color:"#f08d49"}},{dark:!0}),xm(lN)];var hN=Ae('<div class="editor-container svelte-e2fvt0"><div class="toolbar svelte-e2fvt0"><button class="run-btn svelte-e2fvt0"><i class="fas fa-play svelte-e2fvt0"></i> Run</button> <div class="shortcut-hint svelte-e2fvt0">Execute the query by pressing [Run]</div></div> <div class="editor svelte-e2fvt0"></div></div>');function cN(r,e){cn(e,!0);let t,i;const s=["SELECT","FROM","WHERE","GROUP BY","ORDER BY","HAVING","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","AND","OR","NOT","NULL","IS NULL","IS NOT NULL","ASC","DESC","DISTINCT","BETWEEN","IN","LIKE","COUNT","SUM","AVG","MIN","MAX","UNION","UNION ALL","INTERSECT","EXCEPT","LIMIT","OFFSET","TOP"].map(c=>({label:c,type:"keyword"}));Uh(()=>{i=new z({doc:e.query,extensions:[tv,Zv(),aN,dl.of([xy]),L0({override:[c=>{let u=c.matchBefore(/\w*/);return u?{from:u.from,options:s.filter(p=>p.label.toLowerCase().startsWith((u==null?void 0:u.text.toLowerCase())||""))}:null}]}),z.updateListener.of(c=>{if(c.docChanged){const u=c.state.doc.toString();u!==e.query&&e.onQueryChange(u)}})],parent:t}),i.dom.addEventListener("keydown",c=>{(c.ctrlKey||c.metaKey)&&c.key==="Enter"&&(c.preventDefault(),e.onRun())})}),_1(()=>{i&&i.destroy()}),No(()=>{i&&i.state.doc.toString()!==e.query&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:e.query}})});var o=hN(),l=oe(o),a=oe(l),h=ke(l,2);M1(h,c=>t=c,()=>t),Ge("click",a,function(...c){var u;(u=e.onRun)==null||u.apply(this,c)}),ge(r,o),fn()}var fN=Ae('<div class="error-message svelte-tu01r1"><div class="error-header svelte-tu01r1"><span class="error-icon"></span> <span>SQL Error<!></span></div> <pre class="error-details svelte-tu01r1"> </pre></div>'),uN=Ae('<div class="modification-message svelte-tu01r1"><i class="fas fa-check-circle success-icon svelte-tu01r1"></i> Query executed successfully</div>'),dN=Ae('<th class="svelte-tu01r1"><div class="th-content svelte-tu01r1"><span class="th-text svelte-tu01r1"> </span> <div class="resize-handle svelte-tu01r1"></div></div></th>'),pN=Ae('<td class="svelte-tu01r1"> </td>'),mN=Ae('<tr class="svelte-tu01r1"></tr>'),gN=Ae('<div class="table-wrapper svelte-tu01r1"><table class="svelte-tu01r1"><thead class="svelte-tu01r1"><tr class="svelte-tu01r1"></tr></thead><tbody></tbody></table></div>'),SN=Ae('<div class="results-container svelte-tu01r1"><!></div>');function TN(r,e){cn(e,!1);let t=Ot(e,"results",24,()=>[]),i=Ot(e,"columns",24,()=>[]),n=Ot(e,"queryExecuted",8,!1),s=Ot(e,"error",8,null),o=Ot(e,"errorLine",8,null);Ot(e,"affectedRows",8,void 0);let l=Ot(e,"isModificationQuery",8,!1),a=Qe({}),h=!1,c=Qe(null),u,p,g=Qe(!1);const S=100,E=800,y=120,I=32,w=8,A={number:.7,date:1.2,string:1.5};function R(C){return typeof C=="number"?"number":C instanceof Date?"date":"string"}function L(C){if(!t().length)return!1;const q=t()[0][C];return q?C.toLowerCase().includes("date")||C.toLowerCase().includes("time")||typeof q=="string"&&/^\d{4}-\d{2}-\d{2}/.test(q):!1}function x(){if(!i().length||!t().length||N(g))return;const C=document.querySelector(".table-wrapper");if(!C)return;const q=Math.max(800,C.clientWidth-I),Z=i().filter(L),re=Z.length*y,pe=q-re,Ee=i().filter(se=>!L(se)),ve=Ee.reduce((se,ee)=>{const Se=t().map(Oe=>Oe[ee]),ce=Se.map(Oe=>((Oe==null?void 0:Oe.toString())||"").length),K=Math.max(ee.length,...ce),Q=ce.reduce((Oe,ht)=>Oe+ht,0)/ce.length,me=R(Se[0]);return se[ee]={maxLength:K,avgLength:Q,type:me,weight:A[me]},se},{}),le=Object.values(ve).reduce((se,ee)=>se+ee.avgLength*ee.weight,0);Z.forEach(se=>{Pi(a,N(a)[se]=y)}),Ee.forEach(se=>{if(N(a)[se])return;const ee=ve[se],Se=ee.avgLength*ee.weight/le;let ce=Math.floor(pe*Se);ee.type==="number"?ce=Math.min(ce,ee.maxLength*w+I):ee.maxLength>ee.avgLength*2&&(ce=Math.max(ce,ee.avgLength*w*1.5)),Pi(a,N(a)[se]=Math.max(S,Math.min(E,ce)))}),ie(a,{...N(a)}),ie(g,!0)}function k(C,q){h=!0,ie(c,q),u=C.pageX,p=N(a)[q]||S,window.addEventListener("mousemove",H),window.addEventListener("mouseup",B),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}function H(C){if(!h||!N(c))return;const q=C.pageX-u,Z=Math.max(S,Math.min(E,p+q));Pi(a,N(a)[N(c)]=Z),ie(a,{...N(a)})}function B(){h=!1,ie(c,null),window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",B),document.body.style.cursor="",document.body.style.userSelect=""}a1(()=>(Rn(n()),Rn(s()),Rn(l()),Rn(t())),()=>{n()&&!s()&&!l()&&t().length>0&&(ie(g,!1),setTimeout(x,0))}),h1(),al();var F=SN(),$=oe(F);ut($,n,C=>{var q=Kn(),Z=fr(q);ut(Z,s,re=>{var pe=fN(),Ee=oe(pe),ve=ke(oe(Ee),2),le=ke(oe(ve));ut(le,o,Se=>{var ce=N1();Xe(()=>vt(ce,`on line ${o()??""}`)),ge(Se,ce)});var se=ke(Ee,2),ee=oe(se);Xe(()=>vt(ee,s())),ge(re,pe)},re=>{var pe=Kn(),Ee=fr(pe);ut(Ee,l,ve=>{var le=uN();ge(ve,le)},ve=>{var le=gN(),se=oe(le),ee=oe(se),Se=oe(ee);dr(Se,5,i,ur,(K,Q)=>{var me=dN(),Oe=oe(me),ht=oe(Oe),ct=oe(ht),Si=ke(ht,2);Xe(()=>{Wr(me,"style",`width: ${(N(a)[N(Q)]||S)??""}px`),vt(ct,N(Q)),Qt(Si,"resizing",N(c)===N(Q))}),Ge("mousedown",Si,Cn(J=>k(J,N(Q)))),ge(K,me)});var ce=ke(ee);dr(ce,5,t,ur,(K,Q)=>{var me=mN();dr(me,5,i,ur,(Oe,ht)=>{var ct=pN(),Si=oe(ct);Xe(()=>{Wr(ct,"style",`width: ${(N(a)[N(ht)]||S)??""}px`),vt(Si,N(Q)[N(ht)])}),ge(Oe,ct)}),ge(K,me)}),ge(ve,le)},!0),ge(re,pe)}),ge(C,q)}),Xe(()=>Qt(F,"visible",n())),ge(r,F),fn()}var EN=Ae('<div class="progress svelte-txm7b2"> </div>'),ON=Ae('<div class="loader svelte-txm7b2"><div class="spinner svelte-txm7b2"></div> <div class="text svelte-txm7b2"> </div> <!></div>');function yN(r,e){let t=Ot(e,"message",8,"Loading..."),i=Ot(e,"progress",8,null);var n=ON(),s=ke(oe(n),2),o=oe(s),l=ke(s,2);ut(l,i,a=>{var h=EN(),c=oe(h);Xe(()=>vt(c,i())),ge(a,h)}),Xe(()=>vt(o,t())),ge(r,n)}var IN=Ae('<div class="loading-container svelte-5n605g"><!></div>'),vN=Ae('<div class="error-container svelte-5n605g"><h2 class="svelte-5n605g">Failed to initialize database</h2> <p> </p></div>'),NN=Ae('<div class="tab-content svelte-5n605g"><div class="editor-section svelte-5n605g"><!></div> <div class="resize-handle svelte-5n605g"></div> <div class="results-section svelte-5n605g"><!></div> <div class="status-bar svelte-5n605g"><span>Ready</span> <span class="status-message svelte-5n605g"> </span></div></div>'),bN=Ae('<div class="empty-state svelte-5n605g"><button class="new-query-btn svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> New Query</button></div>'),AN=Ae('<div class="app svelte-5n605g"><!> <div class="main svelte-5n605g"><div class="tabs svelte-5n605g"><div class="tabs-container svelte-5n605g"><!> <button class="add-tab svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> <span class="tooltip svelte-5n605g">New Query</span></button></div></div> <!></div></div>');function wN(r,e){cn(e,!1);let t=1,i=Qe(-1),n=Qe([]),s=Qe(!1),o=Qe("60%"),l=Qe(!0),a=Qe(null),h=Qe(null);Uh(async()=>{try{const k=setInterval(()=>{const H=X1();if(H.sqlJsLoaded&&ie(h,"Initializing database..."),H.error){ie(a,H.error),ie(l,!1);return}},100);await Vd(),clearInterval(k),ie(l,!1)}catch(x){ie(a,x.message),ie(l,!1)}});function c(x=""){ie(n,[...N(n),{id:(t+=1)-1,query:x,results:[],columns:[],queryExecuted:!1,error:null,isModificationQuery:!1}]),ie(i,N(n).length-1)}function u(x){ie(n,N(n).filter((k,H)=>H!==x)),N(i)>=N(n).length&&ie(i,Math.max(-1,N(n).length-1))}function p(x){ie(i,x)}function g(x){N(i)>=0&&(Pi(n,N(n)[N(i)].query=x),ie(n,[...N(n)]))}function S(){if(N(i)>=0){const{results:x,columns:k,error:H,isModificationQuery:B,affectedRows:F}=tS(N(n)[N(i)].query);Pi(n,N(n)[N(i)]={...N(n)[N(i)],results:x,columns:k,queryExecuted:!0,error:H,affectedRows:F,isModificationQuery:B}),ie(n,[...N(n)])}}function E(x){const k=`SELECT * FROM ${x.detail.tableName}`;c(k),S()}function y(x){return x.queryExecuted?x.error?"Error in SQL statement":x.isModificationQuery?`${x.affectedRows} row${x.affectedRows===1?"":"s"} affected`:`Showing [${x.results.length}] rows`:"Write your SQL query and click Run"}function I(x){ie(s,!0),x.clientY,window.addEventListener("mousemove",w),window.addEventListener("mouseup",A),document.body.style.cursor="row-resize",document.body.style.userSelect="none"}function w(x){if(!N(s))return;const k=document.querySelector(".tab-content");if(!k)return;const H=k.getBoundingClientRect(),B=(x.clientY-H.top)/H.height*100;ie(o,Math.max(20,Math.min(80,B))+"%")}function A(){ie(s,!1),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",A),document.body.style.cursor="",document.body.style.userSelect=""}al();var R=Kn(),L=fr(R);ut(L,()=>N(l),x=>{var k=IN(),H=oe(k);yN(H,{message:"Loading application...",get progress(){return N(h)}}),ge(x,k)},x=>{var k=Kn(),H=fr(k);ut(H,()=>N(a),B=>{var F=vN(),$=ke(oe(F),2),C=oe($);Xe(()=>vt(C,N(a))),ge(B,F)},B=>{var F=AN(),$=oe(F);mS($,{$$events:{showTableData:E}});var C=ke($,2),q=oe(C),Z=oe(q),re=oe(Z);dr(re,1,()=>N(n),ur,(ve,le,se)=>{var ee=Ah(()=>se===N(i));SS(ve,{get query(){return N(le).query},index:se,get active(){return N(ee)},onClose:()=>u(se),onClick:()=>p(se)})});var pe=ke(re,2),Ee=ke(q,2);ut(Ee,()=>N(i)>=0,ve=>{var le=NN(),se=oe(le),ee=oe(se);cN(ee,{get query(){return N(n)[N(i)].query},onQueryChange:g,onRun:S,get queryExecuted(){return N(n)[N(i)].queryExecuted}});var Se=ke(se,2),ce=ke(Se,2),K=oe(ce);TN(K,{get results(){return N(n)[N(i)].results},get columns(){return N(n)[N(i)].columns},get queryExecuted(){return N(n)[N(i)].queryExecuted},get error(){return N(n)[N(i)].error},get affectedRows(){return N(n)[N(i)].affectedRows},get isModificationQuery(){return N(n)[N(i)].isModificationQuery}});var Q=ke(ce,2),me=ke(oe(Q),2),Oe=oe(me);Xe(()=>vt(Oe,y(N(n)[N(i)]))),Xe(()=>{Wr(se,"style",`height: ${N(o)??""}`),Qt(Se,"resizing",N(s))}),Ge("mousedown",Se,I),ge(ve,le)},ve=>{var le=bN(),se=oe(le);Ge("click",se,()=>c()),ge(ve,le)}),Ge("click",pe,()=>c()),ge(B,F)},!0),ge(x,k)}),ge(r,R),fn()}const hd=document.querySelector(".initial-loader");hd&&hd.remove();w1(wN,{target:document.getElementById("app")});
