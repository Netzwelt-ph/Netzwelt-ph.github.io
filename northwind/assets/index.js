var Lg=Object.defineProperty;var Cg=(r,e,t)=>e in r?Lg(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var xi=(r,e,t)=>Cg(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const Dg=!1;var il=Array.isArray,yh=Array.from,Vg=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,ud=Object.getOwnPropertyDescriptors,Ug=Object.prototype,Mg=Array.prototype,Eo=Object.getPrototypeOf;function Pg(r){return r()}function fa(r){for(var e=0;e<r.length;e++)r[e]()}const Oi=2,dd=4,us=8,Ih=16,Qt=32,ds=64,vr=128,Oo=256,pt=512,qi=1024,sn=2048,Ti=4096,on=8192,_g=16384,vh=32768,Bg=65536,Fg=1<<18,pd=1<<19,zr=Symbol("$state");function md(r){return r===this.v}function zg(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Nh(r){return!zg(r,this.v)}function qg(r){throw new Error("effect_in_teardown")}function Hg(){throw new Error("effect_in_unowned_derived")}function Wg(r){throw new Error("effect_orphan")}function jg(){throw new Error("effect_update_depth_exceeded")}function $g(r){throw new Error("props_invalid_value")}function Kg(){throw new Error("state_descriptors_fixed")}function Gg(){throw new Error("state_prototype_fixed")}function Qg(){throw new Error("state_unsafe_local_read")}function Xg(){throw new Error("state_unsafe_mutation")}function Ut(r){return{f:0,v:r,reactions:null,equals:md,version:0}}function bh(r,e=!1){var i;const t=Ut(r);return e||(t.equals=Nh),Le!==null&&Le.l!==null&&((i=Le.l).s??(i.s=[])).push(t),t}function $e(r,e=!1){return Yg(bh(r,e))}function Yg(r){return we!==null&&we.f&Oi&&(ai===null?S1([r]):ai.push(r)),r}function _i(r,e){return re(r,Wi(()=>b(r))),e}function re(r,e){return we!==null&&Mh()&&we.f&(Oi|Ih)&&(ai===null||!ai.includes(r))&&Xg(),ua(r,e)}function ua(r,e){return r.equals(e)||(r.v=e,r.version=Cd(),gd(r,qi),Mh()&&Oe!==null&&Oe.f&pt&&!(Oe.f&Qt)&&(rt!==null&&rt.includes(r)?(Xt(Oe,qi),ol(Oe)):Bi===null?T1([r]):Bi.push(r))),e}function gd(r,e){var t=r.reactions;if(t!==null)for(var i=Mh(),n=t.length,s=0;s<n;s++){var o=t[s],l=o.f;l&qi||!i&&o===Oe||(Xt(o,e),l&(pt|vr)&&(l&Oi?gd(o,sn):ol(o)))}}const Ah=1,wh=2,Sd=4,Jg=8,Zg=16,e1=1,t1=2,i1=4,r1=8,n1=16,s1=1,o1=2,bt=Symbol();let Td=!1;function Dr(r,e=null,t){if(typeof r!="object"||r===null||zr in r)return r;const i=Eo(r);if(i!==Ug&&i!==Mg)return r;var n=new Map,s=il(r),o=Ut(0);s&&n.set("length",Ut(r.length));var l;return new Proxy(r,{defineProperty(a,h,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Kg();var u=n.get(h);return u===void 0?(u=Ut(c.value),n.set(h,u)):re(u,Dr(c.value,l)),!0},deleteProperty(a,h){var c=n.get(h);if(c===void 0)h in a&&n.set(h,Ut(bt));else{if(s&&typeof h=="string"){var u=n.get("length"),p=Number(h);Number.isInteger(p)&&p<u.v&&re(u,p)}re(c,bt),Yc(o)}return!0},get(a,h,c){var T;if(h===zr)return r;var u=n.get(h),p=h in a;if(u===void 0&&(!p||(T=Fr(a,h))!=null&&T.writable)&&(u=Ut(Dr(p?a[h]:bt,l)),n.set(h,u)),u!==void 0){var g=b(u);return g===bt?void 0:g}return Reflect.get(a,h,c)},getOwnPropertyDescriptor(a,h){var c=Reflect.getOwnPropertyDescriptor(a,h);if(c&&"value"in c){var u=n.get(h);u&&(c.value=b(u))}else if(c===void 0){var p=n.get(h),g=p==null?void 0:p.v;if(p!==void 0&&g!==bt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(a,h){var g;if(h===zr)return!0;var c=n.get(h),u=c!==void 0&&c.v!==bt||Reflect.has(a,h);if(c!==void 0||Oe!==null&&(!u||(g=Fr(a,h))!=null&&g.writable)){c===void 0&&(c=Ut(u?Dr(a[h],l):bt),n.set(h,c));var p=b(c);if(p===bt)return!1}return u},set(a,h,c,u){var A;var p=n.get(h),g=h in a;if(s&&h==="length")for(var T=c;T<p.v;T+=1){var E=n.get(T+"");E!==void 0?re(E,bt):T in a&&(E=Ut(bt),n.set(T+"",E))}p===void 0?(!g||(A=Fr(a,h))!=null&&A.writable)&&(p=Ut(void 0),re(p,Dr(c,l)),n.set(h,p)):(g=p.v!==bt,re(p,Dr(c,l)));var y=Reflect.getOwnPropertyDescriptor(a,h);if(y!=null&&y.set&&y.set.call(u,c),!g){if(s&&typeof h=="string"){var I=n.get("length"),w=Number(h);Number.isInteger(w)&&w>=I.v&&re(I,w+1)}Yc(o)}return!0},ownKeys(a){b(o);var h=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==bt});for(var[c,u]of n)u.v!==bt&&!(c in a)&&h.push(c);return h},setPrototypeOf(){Gg()}})}function Yc(r,e=1){re(r,r.v+e)}var da,Ed,Od;function l1(){if(da===void 0){da=window;var r=Element.prototype,e=Node.prototype;Ed=Fr(e,"firstChild").get,Od=Fr(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function rl(r=""){return document.createTextNode(r)}function yo(r){return Ed.call(r)}function nl(r){return Od.call(r)}function oe(r,e){return yo(r)}function pr(r,e){{var t=yo(r);return t instanceof Comment&&t.data===""?nl(t):t}}function xe(r,e=1,t=!1){let i=r;for(;e--;)i=nl(i);return i}function a1(r){r.textContent=""}function Io(r){var e=Oi|qi;Oe===null?e|=vr:Oe.f|=pd;const t={children:null,ctx:Le,deps:null,equals:md,f:e,fn:r,reactions:null,v:null,version:0,parent:Oe};if(we!==null&&we.f&Oi){var i=we;(i.children??(i.children=[])).push(t)}return t}function xh(r){const e=Io(r);return e.equals=Nh,e}function yd(r){var e=r.children;if(e!==null){r.children=null;for(var t=0;t<e.length;t+=1){var i=e[t];i.f&Oi?kh(i):Nr(i)}}}function Id(r){var e,t=Oe;ci(r.parent);try{yd(r),e=Dd(r)}finally{ci(t)}return e}function vd(r){var e=Id(r),t=(Mr||r.f&vr)&&r.deps!==null?sn:pt;Xt(r,t),r.equals(e)||(r.v=e,r.version=Cd())}function kh(r){yd(r),Kn(r,0),Xt(r,on),r.v=r.children=r.deps=r.ctx=r.reactions=null}function Nd(r){Oe===null&&we===null&&Wg(),we!==null&&we.f&vr&&Hg(),Uh&&qg()}function h1(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function ln(r,e,t,i=!0){var n=(r&ds)!==0,s=Oe,o={ctx:Le,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:r|qi,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(t){var l=qr;try{Jc(!0),ps(o),o.f|=_g}catch(c){throw Nr(o),c}finally{Jc(l)}}else e!==null&&ol(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&pd)===0;if(!a&&!n&&i&&(s!==null&&h1(o,s),we!==null&&we.f&Oi)){var h=we;(h.children??(h.children=[])).push(o)}return o}function c1(r){const e=ln(us,null,!1);return Xt(e,pt),e.teardown=r,e}function vo(r){Nd();var e=Oe!==null&&(Oe.f&Qt)!==0&&Le!==null&&!Le.m;if(e){var t=Le;(t.e??(t.e=[])).push({fn:r,effect:Oe,reaction:we})}else{var i=Rh(r);return i}}function f1(r){return Nd(),sl(r)}function u1(r){const e=ln(ds,r,!0);return()=>{Nr(e)}}function Rh(r){return ln(dd,r,!1)}function d1(r,e){var t=Le,i={effect:null,ran:!1};t.l.r1.push(i),i.effect=sl(()=>{r(),!i.ran&&(i.ran=!0,re(t.l.r2,!0),Wi(e))})}function p1(){var r=Le;sl(()=>{if(b(r.l.r2)){for(var e of r.l.r1){var t=e.effect;t.f&pt&&Xt(t,sn),an(t)&&ps(t),e.ran=!1}r.l.r2.v=!1}})}function sl(r){return ln(us,r,!0)}function Ke(r){return Lh(r)}function Lh(r,e=0){return ln(us|Ih|e,r,!0)}function $n(r,e=!0){return ln(us|Qt,r,!0,e)}function bd(r){var e=r.teardown;if(e!==null){const t=Uh,i=we;Zc(!0),Hi(null);try{e.call(null)}finally{Zc(t),Hi(i)}}}function Ad(r){var e=r.deriveds;if(e!==null){r.deriveds=null;for(var t=0;t<e.length;t+=1)kh(e[t])}}function wd(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var i=t.next;Nr(t,e),t=i}}function m1(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Qt||Nr(e),e=t}}function Nr(r,e=!0){var t=!1;if((e||r.f&Fg)&&r.nodes_start!==null){for(var i=r.nodes_start,n=r.nodes_end;i!==null;){var s=i===n?null:nl(i);i.remove(),i=s}t=!0}Ad(r),wd(r,e&&!t),Kn(r,0),Xt(r,on);var o=r.transitions;if(o!==null)for(const a of o)a.stop();bd(r);var l=r.parent;l!==null&&l.first!==null&&xd(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.parent=r.fn=r.nodes_start=r.nodes_end=null}function xd(r){var e=r.parent,t=r.prev,i=r.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===r&&(e.first=i),e.last===r&&(e.last=t))}function pa(r,e){var t=[];Ch(r,t,!0),kd(t,()=>{Nr(r),e&&e()})}function kd(r,e){var t=r.length;if(t>0){var i=()=>--t||e();for(var n of r)n.out(i)}else e()}function Ch(r,e,t){if(!(r.f&Ti)){if(r.f^=Ti,r.transitions!==null)for(const o of r.transitions)(o.is_global||t)&&e.push(o);for(var i=r.first;i!==null;){var n=i.next,s=(i.f&vh)!==0||(i.f&Qt)!==0;Ch(i,e,s?t:!1),i=n}}}function No(r){Rd(r,!0)}function Rd(r,e){if(r.f&Ti){r.f^=Ti,an(r)&&ps(r);for(var t=r.first;t!==null;){var i=t.next,n=(t.f&vh)!==0||(t.f&Qt)!==0;Rd(t,n?e:!1),t=i}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||e)&&s.in()}}let ma=!1,ga=[];function g1(){ma=!1;const r=ga.slice();ga=[],fa(r)}function Dh(r){ma||(ma=!0,queueMicrotask(g1)),ga.push(r)}function Vh(r){throw new Error("lifecycle_outside_component")}let bo=!1,qr=!1,Uh=!1;function Jc(r){qr=r}function Zc(r){Uh=r}let Sa=[],Fn=0;let we=null;function Hi(r){we=r}let Oe=null;function ci(r){Oe=r}let ai=null;function S1(r){ai=r}let rt=null,xt=0,Bi=null;function T1(r){Bi=r}let Ld=0,Mr=!1,Le=null;function Cd(){return++Ld}function Mh(){return Le!==null&&Le.l===null}function an(r){var o,l;var e=r.f;if(e&qi)return!0;if(e&sn){var t=r.deps,i=(e&vr)!==0;if(t!==null){var n;if(e&Oo){for(n=0;n<t.length;n++)((o=t[n]).reactions??(o.reactions=[])).push(r);r.f^=Oo}for(n=0;n<t.length;n++){var s=t[n];if(an(s)&&vd(s),i&&Oe!==null&&!Mr&&!((l=s==null?void 0:s.reactions)!=null&&l.includes(r))&&(s.reactions??(s.reactions=[])).push(r),s.version>r.version)return!0}}i||Xt(r,pt)}return!1}function E1(r,e,t){throw r}function Dd(r){var p;var e=rt,t=xt,i=Bi,n=we,s=Mr,o=ai,l=Le,a=r.f;rt=null,xt=0,Bi=null,we=a&(Qt|ds)?null:r,Mr=!qr&&(a&vr)!==0,ai=null,Le=r.ctx;try{var h=(0,r.fn)(),c=r.deps;if(rt!==null){var u;if(Kn(r,xt),c!==null&&xt>0)for(c.length=xt+rt.length,u=0;u<rt.length;u++)c[xt+u]=rt[u];else r.deps=c=rt;if(!Mr)for(u=xt;u<c.length;u++)((p=c[u]).reactions??(p.reactions=[])).push(r)}else c!==null&&xt<c.length&&(Kn(r,xt),c.length=xt);return h}finally{rt=e,xt=t,Bi=i,we=n,Mr=s,ai=o,Le=l}}function O1(r,e){let t=e.reactions;if(t!==null){var i=t.indexOf(r);if(i!==-1){var n=t.length-1;n===0?t=e.reactions=null:(t[i]=t[n],t.pop())}}t===null&&e.f&Oi&&(rt===null||!rt.includes(e))&&(Xt(e,sn),e.f&(vr|Oo)||(e.f^=Oo),Kn(e,0))}function Kn(r,e){var t=r.deps;if(t!==null)for(var i=e;i<t.length;i++)O1(r,t[i])}function ps(r){var e=r.f;if(!(e&on)){Xt(r,pt);var t=Oe;Oe=r;try{Ad(r),e&Ih?m1(r):wd(r),bd(r);var i=Dd(r);r.teardown=typeof i=="function"?i:null,r.version=Ld}catch(n){E1(n)}finally{Oe=t}}}function y1(){Fn>1e3&&(Fn=0,jg()),Fn++}function I1(r){var e=r.length;if(e!==0){y1();var t=qr;qr=!0;try{for(var i=0;i<e;i++){var n=r[i];n.f&pt||(n.f^=pt);var s=[];Vd(n,s),v1(s)}}finally{qr=t}}}function v1(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var i=r[t];!(i.f&(on|Ti))&&an(i)&&(ps(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?xd(i):i.fn=null))}}function N1(){if(bo=!1,Fn>1001)return;const r=Sa;Sa=[],I1(r),bo||(Fn=0)}function ol(r){bo||(bo=!0,queueMicrotask(N1));for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(ds|Qt)){if(!(t&pt))return;e.f^=pt}}Sa.push(e)}function Vd(r,e){var t=r.first,i=[];e:for(;t!==null;){var n=t.f,s=(n&Qt)!==0,o=s&&(n&pt)!==0;if(!o&&!(n&Ti))if(n&us){s?t.f^=pt:an(t)&&ps(t);var l=t.first;if(l!==null){t=l;continue}}else n&dd&&i.push(t);var a=t.next;if(a===null){let u=t.parent;for(;u!==null;){if(r===u)break e;var h=u.next;if(h!==null){t=h;continue e}u=u.parent}}t=a}for(var c=0;c<i.length;c++)l=i[c],e.push(l),Vd(l,e)}function b(r){var l;var e=r.f,t=(e&Oi)!==0;if(t&&e&on){var i=Id(r);return kh(r),i}if(we!==null){ai!==null&&ai.includes(r)&&Qg();var n=we.deps;rt===null&&n!==null&&n[xt]===r?xt++:rt===null?rt=[r]:rt.push(r),Bi!==null&&Oe!==null&&Oe.f&pt&&!(Oe.f&Qt)&&Bi.includes(r)&&(Xt(Oe,qi),ol(Oe))}else if(t&&r.deps===null){var s=r,o=s.parent;o!==null&&!((l=o.deriveds)!=null&&l.includes(s))&&(o.deriveds??(o.deriveds=[])).push(s)}return t&&(s=r,an(s)&&vd(s)),r.v}function Wi(r){const e=we;try{return we=null,r()}finally{we=e}}const b1=~(qi|sn|pt);function Xt(r,e){r.f=r.f&b1|e}function hn(r,e=!1,t){Le={p:Le,c:null,e:null,m:!1,s:r,x:null,l:null},e||(Le.l={s:null,u:null,r1:[],r2:Ut(!1)})}function cn(r){const e=Le;if(e!==null){const o=e.e;if(o!==null){var t=Oe,i=we;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];ci(s.effect),Hi(s.reaction),Rh(s.fn)}}finally{ci(t),Hi(i)}}Le=e.p,e.m=!0}return{}}function Cn(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(zr in r)Ta(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&zr in t&&Ta(t)}}}function Ta(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let i in r)try{Ta(r[i],e)}catch{}const t=Eo(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=ud(t);for(let n in i){const s=i[n].get;if(s)try{s.call(r)}catch{}}}}}const A1=new Set,ef=new Set;function w1(r,e,t,i){function n(s){if(i.capture||Dn.call(e,s),!s.cancelBubble){var o=we,l=Oe;Hi(null),ci(null);try{return t.call(this,s)}finally{Hi(o),ci(l)}}}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Dh(()=>{e.addEventListener(r,n,i)}):e.addEventListener(r,n,i),n}function He(r,e,t,i,n){var s={capture:i,passive:n},o=w1(r,e,t,s);(e===document.body||e===window||e===document)&&c1(()=>{e.removeEventListener(r,o,s)})}function Dn(r){var w;var e=this,t=e.ownerDocument,i=r.type,n=((w=r.composedPath)==null?void 0:w.call(r))||[],s=n[0]||r.target,o=0,l=r.__root;if(l){var a=n.indexOf(l);if(a!==-1&&(e===document||e===window)){r.__root=e;return}var h=n.indexOf(e);if(h===-1)return;a<=h&&(o=a)}if(s=n[o]||r.target,s!==e){Vg(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=we,u=Oe;Hi(null),ci(null);try{for(var p,g=[];s!==null;){var T=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+i];if(E!==void 0&&!s.disabled)if(il(E)){var[y,...I]=E;y.apply(s,[r,...I])}else E.call(s,r)}catch(A){p?g.push(A):p=A}if(r.cancelBubble||T===e||T===null)break;s=T}if(p){for(let A of g)queueMicrotask(()=>{throw A});throw p}}finally{r.__root=e,delete r.currentTarget,Hi(c),ci(u)}}}function x1(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Ao(r,e){var t=Oe;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function Ae(r,e){var t=(e&s1)!==0,i=(e&o1)!==0,n,s=!r.startsWith("<!>");return()=>{n===void 0&&(n=x1(s?r:"<!>"+r),t||(n=yo(n)));var o=i?document.importNode(n,!0):n.cloneNode(!0);if(t){var l=yo(o),a=o.lastChild;Ao(l,a)}else Ao(o,o);return o}}function k1(r=""){{var e=rl(r+"");return Ao(e,e),e}}function Gn(){var r=document.createDocumentFragment(),e=document.createComment(""),t=rl();return r.append(e,t),Ao(e,t),r}function me(r,e){r!==null&&r.before(e)}const R1=["touchstart","touchmove"];function L1(r){return R1.includes(r)}function Ot(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t==null?"":t+"")}function C1(r,e){return D1(r,e)}const Rr=new Map;function D1(r,{target:e,anchor:t,props:i={},events:n,context:s,intro:o=!0}){l1();var l=new Set,a=u=>{for(var p=0;p<u.length;p++){var g=u[p];if(!l.has(g)){l.add(g);var T=L1(g);e.addEventListener(g,Dn,{passive:T});var E=Rr.get(g);E===void 0?(document.addEventListener(g,Dn,{passive:T}),Rr.set(g,1)):Rr.set(g,E+1)}}};a(yh(A1)),ef.add(a);var h=void 0,c=u1(()=>{var u=t??e.appendChild(rl());return $n(()=>{if(s){hn({});var p=Le;p.c=s}n&&(i.$$events=n),h=r(u,i)||{},s&&cn()}),()=>{var T;for(var p of l){e.removeEventListener(p,Dn);var g=Rr.get(p);--g===0?(document.removeEventListener(p,Dn),Rr.delete(p)):Rr.set(p,g)}ef.delete(a),tf.delete(h),u!==t&&((T=u.parentNode)==null||T.removeChild(u))}});return tf.set(h,c),h}let tf=new WeakMap;function ct(r,e,t,i=null,n=!1){var s=r,o=null,l=null,a=null,h=n?vh:0;Lh(()=>{a!==(a=!!e())&&(a?(o?No(o):o=$n(()=>t(s)),l&&pa(l,()=>{l=null})):(l?No(l):i&&(l=$n(()=>i(s))),o&&pa(o,()=>{o=null})))},h)}let Pl=null;function mr(r,e){return e}function V1(r,e,t,i){for(var n=[],s=e.length,o=0;o<s;o++)Ch(e[o].e,n,!0);var l=s>0&&n.length===0&&t!==null;if(l){var a=t.parentNode;a1(a),a.append(t),i.clear(),ki(r,e[0].prev,e[s-1].next)}kd(n,()=>{for(var h=0;h<s;h++){var c=e[h];l||(i.delete(c.k),ki(r,c.prev,c.next)),Nr(c.e,!l)}})}function gr(r,e,t,i,n,s=null){var o=r,l={flags:e,items:new Map,first:null},a=(e&Sd)!==0;if(a){var h=r;o=h.appendChild(rl())}var c=null,u=!1;Lh(()=>{var p=t(),g=il(p)?p:p==null?[]:yh(p),T=g.length;u&&T===0||(u=T===0,U1(g,l,o,n,e,i),s!==null&&(T===0?c?No(c):c=$n(()=>s(o)):c!==null&&pa(c,()=>{c=null})),t())})}function U1(r,e,t,i,n,s){var P,W,ne,se;var o=(n&Jg)!==0,l=(n&(Ah|wh))!==0,a=r.length,h=e.items,c=e.first,u=c,p,g=null,T,E=[],y=[],I,w,A,L;if(o)for(L=0;L<a;L+=1)I=r[L],w=s(I,L),A=h.get(w),A!==void 0&&((P=A.a)==null||P.measure(),(T??(T=new Set)).add(A));for(L=0;L<a;L+=1){if(I=r[L],w=s(I,L),A=h.get(w),A===void 0){var C=u?u.e.nodes_start:t;g=P1(C,e,g,g===null?e.first:g.next,I,w,L,i,n),h.set(w,g),E=[],y=[],u=g.next;continue}if(l&&M1(A,I,L,n),A.e.f&Ti&&(No(A.e),o&&((W=A.a)==null||W.unfix(),(T??(T=new Set)).delete(A))),A!==u){if(p!==void 0&&p.has(A)){if(E.length<y.length){var x=y[0],k;g=x.prev;var z=E[0],K=E[E.length-1];for(k=0;k<E.length;k+=1)rf(E[k],x,t);for(k=0;k<y.length;k+=1)p.delete(y[k]);ki(e,z.prev,K.next),ki(e,g,z),ki(e,K,x),u=x,g=K,L-=1,E=[],y=[]}else p.delete(A),rf(A,u,t),ki(e,A.prev,A.next),ki(e,A,g===null?e.first:g.next),ki(e,g,A),g=A;continue}for(E=[],y=[];u!==null&&u.k!==w;)u.e.f&Ti||(p??(p=new Set)).add(u),y.push(u),u=u.next;if(u===null)continue;A=u}E.push(A),g=A,u=A.next}if(u!==null||p!==void 0){for(var $=p===void 0?[]:yh(p);u!==null;)u.e.f&Ti||$.push(u),u=u.next;var M=$.length;if(M>0){var _=n&Sd&&a===0?t:null;if(o){for(L=0;L<M;L+=1)(ne=$[L].a)==null||ne.measure();for(L=0;L<M;L+=1)(se=$[L].a)==null||se.fix()}V1(e,$,_,h)}}o&&Dh(()=>{var ge;if(T!==void 0)for(A of T)(ge=A.a)==null||ge.apply()}),Oe.first=e.first&&e.first.e,Oe.last=g&&g.e}function M1(r,e,t,i){i&Ah&&ua(r.v,e),i&wh?ua(r.i,t):r.i=t}function P1(r,e,t,i,n,s,o,l,a){var h=Pl;try{var c=(a&Ah)!==0,u=(a&Zg)===0,p=c?u?bh(n):Ut(n):n,g=a&wh?Ut(o):o,T={i:g,v:p,k:s,a:null,e:null,prev:t,next:i};return Pl=T,T.e=$n(()=>l(r,p,g),Td),T.e.prev=t&&t.e,T.e.next=i&&i.e,t===null?e.first=T:(t.next=T,t.e.next=T.e),i!==null&&(i.prev=T,i.e.prev=T.e),T}finally{Pl=h}}function rf(r,e,t){for(var i=r.next?r.next.e.nodes_start:t,n=e?e.e.nodes_start:t,s=r.e.nodes_start;s!==i;){var o=nl(s);n.before(s),s=o}}function ki(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Hr(r,e,t,i){var n=r.__attributes??(r.__attributes={});n[e]!==(n[e]=t)&&("__styles"in r&&(r.__styles={}),t==null?r.removeAttribute(e):typeof t!="string"&&_1(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var nf=new Map;function _1(r){var e=nf.get(r.nodeName);if(e)return e;nf.set(r.nodeName,e=[]);for(var t,i=Eo(r),n=Element.prototype;n!==i;){t=ud(i);for(var s in t)t[s].set&&e.push(s);i=Eo(i)}return e}function B1(r,e){var t=r.__className,i=F1(e);(t!==i||Td)&&(e==null?r.removeAttribute("class"):r.className=i,r.__className=i)}function F1(r){return r??""}function jt(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}function sf(r,e){return r===e||(r==null?void 0:r[zr])===e}function z1(r={},e,t,i){return Rh(()=>{var n,s;return sl(()=>{n=s,s=[],Wi(()=>{r!==t(...s)&&(e(r,...s),n&&sf(t(...n),r)&&e(null,...n))})}),()=>{Dh(()=>{s&&sf(t(...s),r)&&e(null,...s)})}}),r}function Vn(r){return function(...e){var t=e[0];return t.preventDefault(),r==null?void 0:r.apply(this,e)}}function ll(r=!1){const e=Le,t=e.l.u;if(!t)return;let i=()=>Cn(e.s);if(r){let n=0,s={};const o=Io(()=>{let l=!1;const a=e.s;for(const h in a)a[h]!==s[h]&&(s[h]=a[h],l=!0);return l&&n++,n});i=()=>b(o)}t.b.length&&f1(()=>{of(e,i),fa(t.b)}),vo(()=>{const n=Wi(()=>t.m.map(Pg));return()=>{for(const s of n)typeof s=="function"&&s()}}),t.a.length&&vo(()=>{of(e,i),fa(t.a)})}function of(r,e){if(r.l.s)for(const t of r.l.s)b(t);e()}let Ps=!1;function q1(r){var e=Ps;try{return Ps=!1,[r(),Ps]}finally{Ps=e}}function lf(r){for(var e=Oe,t=Oe;e!==null&&!(e.f&(Qt|ds));)e=e.parent;try{return ci(e),r()}finally{ci(t)}}function St(r,e,t,i){var x;var n=(t&e1)!==0,s=(t&t1)!==0,o=(t&r1)!==0,l=(t&n1)!==0,a=!1,h;o?[h,a]=q1(()=>r[e]):h=r[e];var c=(x=Fr(r,e))==null?void 0:x.set,u=i,p=!0,g=!1,T=()=>(g=!0,p&&(p=!1,l?u=Wi(i):u=i),u);h===void 0&&i!==void 0&&(c&&s&&$g(),h=T(),c&&c(h));var E;if(s)E=()=>{var k=r[e];return k===void 0?T():(p=!0,g=!1,k)};else{var y=lf(()=>(n?Io:xh)(()=>r[e]));y.f|=Bg,E=()=>{var k=b(y);return k!==void 0&&(u=void 0),k===void 0?u:k}}if(!(t&i1))return E;if(c){var I=r.$$legacy;return function(k,z){return arguments.length>0?((!s||!z||I||a)&&c(z?E():k),k):E()}}var w=!1,A=!1,L=bh(h),C=lf(()=>Io(()=>{var k=E(),z=b(L),K=we;return w||k===void 0&&K.f&on?(w=!1,A=!0,z):(A=!1,L.v=k)}));return n||(C.equals=Nh),function(k,z){if(arguments.length>0){const K=z?b(C):s&&o?Dr(k):k;return C.equals(K)||(w=!0,re(L,K),g&&u!==void 0&&(u=K),Wi(()=>b(C))),k}return b(C)}}function Ph(r){Le===null&&Vh(),Le.l!==null?$1(Le).m.push(r):vo(()=>{const e=Wi(r);if(typeof e=="function")return e})}function H1(r){Le===null&&Vh(),Ph(()=>()=>Wi(r))}function W1(r,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:i})}function j1(){const r=Le;return r===null&&Vh(),(e,t,i)=>{var s;const n=(s=r.s.$$events)==null?void 0:s[e];if(n){const o=il(n)?n.slice():[n],l=W1(e,t,i);for(const a of o)a.call(r.x,l);return!l.defaultPrevented}return!0}}function $1(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const K1="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(K1);function G1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Q1(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var Ud={exports:{}};const X1={},Y1=Object.freeze(Object.defineProperty({__proto__:null,default:X1},Symbol.toStringTag,{value:"Module"})),af=Q1(Y1);(function(r,e){var t=void 0,i=function(n){return t||(t=new Promise(function(s,o){var l=typeof n<"u"?n:{},a=l.onAbort;l.onAbort=function(f){o(new Error(f)),a&&a(f)},l.postRun=l.postRun||[],l.postRun.push(function(){s(l)}),r=void 0;var h;h||(h=typeof l<"u"?l:{});var c=typeof window=="object",u=typeof WorkerGlobalScope<"u",p=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";h.onRuntimeInitialized=function(){function f(v,V){switch(typeof V){case"boolean":kg(v,V?1:0);break;case"number":Ag(v,V);break;case"string":wg(v,V,-1,-1);break;case"object":if(V===null)Kc(v);else if(V.length!=null){var Q=Vs(V,Ds);xg(v,Q,V.length,-1),Us(Q)}else Ms(v,"Wrong API use : tried to return a value of an unknown type ("+V+").",-1);break;default:Kc(v)}}function d(v,V){for(var Q=[],te=0;te<v;te+=1){var le=Ct(V+4*te,"i32"),be=yg(le);if(be===1||be===2)le=bg(le);else if(be===3)le=vg(le);else if(be===4){be=le,le=Ig(be),be=Ng(be);for(var Ht=new Uint8Array(le),Vt=0;Vt<le;Vt+=1)Ht[Vt]=$[be+Vt];le=Ht}else le=null;Q.push(le)}return Q}function m(v,V){this.Qa=v,this.db=V,this.Oa=1,this.lb=[]}function S(v,V){if(this.db=V,V=tr(v)+1,this.eb=Vl(V),this.eb===null)throw Error("Unable to allocate memory for the SQL string");at(v,M,this.eb,V),this.kb=this.eb,this.Za=this.pb=null}function O(v){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),v!=null){var V=this.filename,Q="/",te=V;if(Q&&(Q=typeof Q=="string"?Q:Il(Q),te=V?Sn(Q+"/"+V):Q),V=Oc(!0,!0),te=Y0(te,V),v){if(typeof v=="string"){Q=Array(v.length);for(var le=0,be=v.length;le<be;++le)Q[le]=v.charCodeAt(le);v=Q}ks(te,V|146),Q=kr(te,577),Pc(Q,v,0,v.length,0),xl(Q),ks(te,V)}}this.handleError(X(this.filename,N)),this.db=Ct(N,"i32"),Qc(this.db),this.fb={},this.Sa={}}var N=wi(4),R=h.cwrap,X=R("sqlite3_open","number",["string","number"]),ue=R("sqlite3_close_v2","number",["number"]),fe=R("sqlite3_exec","number",["number","string","number","number","number"]),_e=R("sqlite3_changes","number",["number"]),gt=R("sqlite3_prepare_v2","number",["number","string","number","number","number"]),qc=R("sqlite3_sql","string",["number"]),ng=R("sqlite3_normalized_sql","string",["number"]),Hc=R("sqlite3_prepare_v2","number",["number","number","number","number","number"]),sg=R("sqlite3_bind_text","number",["number","number","number","number","number"]),Wc=R("sqlite3_bind_blob","number",["number","number","number","number","number"]),og=R("sqlite3_bind_double","number",["number","number","number"]),lg=R("sqlite3_bind_int","number",["number","number","number"]),ag=R("sqlite3_bind_parameter_index","number",["number","string"]),hg=R("sqlite3_step","number",["number"]),cg=R("sqlite3_errmsg","string",["number"]),fg=R("sqlite3_column_count","number",["number"]),ug=R("sqlite3_data_count","number",["number"]),dg=R("sqlite3_column_double","number",["number","number"]),jc=R("sqlite3_column_text","string",["number","number"]),pg=R("sqlite3_column_blob","number",["number","number"]),mg=R("sqlite3_column_bytes","number",["number","number"]),gg=R("sqlite3_column_type","number",["number","number"]),Sg=R("sqlite3_column_name","string",["number","number"]),Tg=R("sqlite3_reset","number",["number"]),Eg=R("sqlite3_clear_bindings","number",["number"]),Og=R("sqlite3_finalize","number",["number"]),$c=R("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),yg=R("sqlite3_value_type","number",["number"]),Ig=R("sqlite3_value_bytes","number",["number"]),vg=R("sqlite3_value_text","string",["number"]),Ng=R("sqlite3_value_blob","number",["number"]),bg=R("sqlite3_value_double","number",["number"]),Ag=R("sqlite3_result_double","",["number","number"]),Kc=R("sqlite3_result_null","",["number"]),wg=R("sqlite3_result_text","",["number","string","number","number"]),xg=R("sqlite3_result_blob","",["number","number","number","number"]),kg=R("sqlite3_result_int","",["number","number"]),Ms=R("sqlite3_result_error","",["number","string","number"]),Gc=R("sqlite3_aggregate_context","number",["number","number"]),Qc=R("RegisterExtensionFunctions","number",["number"]),Xc=R("sqlite3_update_hook","number",["number","number","number"]);m.prototype.bind=function(v){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(v)?this.Cb(v):v!=null&&typeof v=="object"?this.Db(v):!0},m.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var v=hg(this.Qa);switch(v){case 100:return!0;case 101:return!1;default:throw this.db.handleError(v)}},m.prototype.wb=function(v){return v==null&&(v=this.Oa,this.Oa+=1),dg(this.Qa,v)},m.prototype.Gb=function(v){if(v==null&&(v=this.Oa,this.Oa+=1),v=jc(this.Qa,v),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(v)},m.prototype.Hb=function(v){return v==null&&(v=this.Oa,this.Oa+=1),jc(this.Qa,v)},m.prototype.getBlob=function(v){v==null&&(v=this.Oa,this.Oa+=1);var V=mg(this.Qa,v);v=pg(this.Qa,v);for(var Q=new Uint8Array(V),te=0;te<V;te+=1)Q[te]=$[v+te];return Q},m.prototype.get=function(v,V){V=V||{},v!=null&&this.bind(v)&&this.step(),v=[];for(var Q=ug(this.Qa),te=0;te<Q;te+=1)switch(gg(this.Qa,te)){case 1:var le=V.useBigInt?this.Gb(te):this.wb(te);v.push(le);break;case 2:v.push(this.wb(te));break;case 3:v.push(this.Hb(te));break;case 4:v.push(this.getBlob(te));break;default:v.push(null)}return v},m.prototype.getColumnNames=function(){for(var v=[],V=fg(this.Qa),Q=0;Q<V;Q+=1)v.push(Sg(this.Qa,Q));return v},m.prototype.getAsObject=function(v,V){v=this.get(v,V),V=this.getColumnNames();for(var Q={},te=0;te<V.length;te+=1)Q[V[te]]=v[te];return Q},m.prototype.getSQL=function(){return qc(this.Qa)},m.prototype.getNormalizedSQL=function(){return ng(this.Qa)},m.prototype.run=function(v){return v!=null&&this.bind(v),this.step(),this.reset()},m.prototype.sb=function(v,V){V==null&&(V=this.Oa,this.Oa+=1),v=ir(v);var Q=Vs(v,Ds);this.lb.push(Q),this.db.handleError(sg(this.Qa,V,Q,v.length-1,0))},m.prototype.Bb=function(v,V){V==null&&(V=this.Oa,this.Oa+=1);var Q=Vs(v,Ds);this.lb.push(Q),this.db.handleError(Wc(this.Qa,V,Q,v.length,0))},m.prototype.rb=function(v,V){V==null&&(V=this.Oa,this.Oa+=1),this.db.handleError((v===(v|0)?lg:og)(this.Qa,V,v))},m.prototype.Eb=function(v){v==null&&(v=this.Oa,this.Oa+=1),Wc(this.Qa,v,0,0,0)},m.prototype.tb=function(v,V){switch(V==null&&(V=this.Oa,this.Oa+=1),typeof v){case"string":this.sb(v,V);return;case"number":this.rb(v,V);return;case"bigint":this.sb(v.toString(),V);return;case"boolean":this.rb(v+0,V);return;case"object":if(v===null){this.Eb(V);return}if(v.length!=null){this.Bb(v,V);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+v+")."},m.prototype.Db=function(v){var V=this;return Object.keys(v).forEach(function(Q){var te=ag(V.Qa,Q);te!==0&&V.tb(v[Q],te)}),!0},m.prototype.Cb=function(v){for(var V=0;V<v.length;V+=1)this.tb(v[V],V+1);return!0},m.prototype.reset=function(){return this.freemem(),Eg(this.Qa)===0&&Tg(this.Qa)===0},m.prototype.freemem=function(){for(var v;(v=this.lb.pop())!==void 0;)Us(v)},m.prototype.free=function(){this.freemem();var v=Og(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,v},S.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var v=bn(),V=wi(4);Zi(N),Zi(V);try{this.db.handleError(Hc(this.db.db,this.kb,-1,N,V)),this.kb=Ct(V,"i32");var Q=Ct(N,"i32");return Q===0?(this.mb(),{done:!0}):(this.Za=new m(Q,this.db),this.db.fb[Q]=this.Za,{value:this.Za,done:!1})}catch(te){throw this.pb=er(this.kb),this.mb(),te}finally{Nn(v)}},S.prototype.mb=function(){Us(this.eb),this.eb=null},S.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:er(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(S.prototype[Symbol.iterator]=function(){return this}),O.prototype.run=function(v,V){if(!this.db)throw"Database closed";if(V){v=this.prepare(v,V);try{v.step()}finally{v.free()}}else this.handleError(fe(this.db,v,0,0,N));return this},O.prototype.exec=function(v,V,Q){if(!this.db)throw"Database closed";var te=bn(),le=null;try{var be=Cl(v),Ht=wi(4);for(v=[];Ct(be,"i8")!==0;){Zi(N),Zi(Ht),this.handleError(Hc(this.db,be,-1,N,Ht));var Vt=Ct(N,"i32");if(be=Ct(Ht,"i32"),Vt!==0){var Nt=null;for(le=new m(Vt,this),V!=null&&le.bind(V);le.step();)Nt===null&&(Nt={columns:le.getColumnNames(),values:[]},v.push(Nt)),Nt.values.push(le.get(null,Q));le.free()}}return v}catch(Wt){throw le&&le.free(),Wt}finally{Nn(te)}},O.prototype.each=function(v,V,Q,te,le){typeof V=="function"&&(te=Q,Q=V,V=void 0),v=this.prepare(v,V);try{for(;v.step();)Q(v.getAsObject(null,le))}finally{v.free()}if(typeof te=="function")return te()},O.prototype.prepare=function(v,V){if(Zi(N),this.handleError(gt(this.db,v,-1,N,0)),v=Ct(N,"i32"),v===0)throw"Nothing to prepare";var Q=new m(v,this);return V!=null&&Q.bind(V),this.fb[v]=Q},O.prototype.iterateStatements=function(v){return new S(v,this)},O.prototype.export=function(){Object.values(this.fb).forEach(function(V){V.free()}),Object.values(this.Sa).forEach(Ai),this.Sa={},this.handleError(ue(this.db));var v=J0(this.filename);return this.handleError(X(this.filename,N)),this.db=Ct(N,"i32"),Qc(this.db),v},O.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(v){v.free()}),Object.values(this.Sa).forEach(Ai),this.Sa={},this.Ya&&(Ai(this.Ya),this.Ya=void 0),this.handleError(ue(this.db)),Cc("/"+this.filename),this.db=null)},O.prototype.handleError=function(v){if(v===0)return null;throw v=cg(this.db),Error(v)},O.prototype.getRowsModified=function(){return _e(this.db)},O.prototype.create_function=function(v,V){Object.prototype.hasOwnProperty.call(this.Sa,v)&&(Ai(this.Sa[v]),delete this.Sa[v]);var Q=vn(function(te,le,be){le=d(le,be);try{var Ht=V.apply(null,le)}catch(Vt){Ms(te,Vt,-1);return}f(te,Ht)},"viii");return this.Sa[v]=Q,this.handleError($c(this.db,v,V.length,1,0,Q,0,0,0)),this},O.prototype.create_aggregate=function(v,V){var Q=V.init||function(){return null},te=V.finalize||function(Nt){return Nt},le=V.step;if(!le)throw"An aggregate function must have a step function in "+v;var be={};Object.hasOwnProperty.call(this.Sa,v)&&(Ai(this.Sa[v]),delete this.Sa[v]),V=v+"__finalize",Object.hasOwnProperty.call(this.Sa,V)&&(Ai(this.Sa[V]),delete this.Sa[V]);var Ht=vn(function(Nt,Wt,Ml){var or=Gc(Nt,1);Object.hasOwnProperty.call(be,or)||(be[or]=Q()),Wt=d(Wt,Ml),Wt=[be[or]].concat(Wt);try{be[or]=le.apply(null,Wt)}catch(Rg){delete be[or],Ms(Nt,Rg,-1)}},"viii"),Vt=vn(function(Nt){var Wt=Gc(Nt,1);try{var Ml=te(be[Wt])}catch(or){delete be[Wt],Ms(Nt,or,-1);return}f(Nt,Ml),delete be[Wt]},"vi");return this.Sa[v]=Ht,this.Sa[V]=Vt,this.handleError($c(this.db,v,le.length-1,1,0,0,Ht,Vt,0)),this},O.prototype.updateHook=function(v){this.Ya&&(Xc(this.db,0,0),Ai(this.Ya),this.Ya=void 0),v&&(this.Ya=vn(function(V,Q,te,le,be){switch(Q){case 18:V="insert";break;case 23:V="update";break;case 9:V="delete";break;default:throw"unknown operationCode in updateHook callback: "+Q}if(te=te?Me(M,te):"",le=le?Me(M,le):"",be>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";v(V,te,le,Number(be))},"viiiij"),Xc(this.db,this.Ya,0))},h.Database=O};var g={...h},T="./this.program",E=(f,d)=>{throw d},y="",I,w;if(p){var A=af;y=__dirname+"/",w=f=>(f=Ie(f)?new URL(f):f,A.readFileSync(f)),I=async f=>(f=Ie(f)?new URL(f):f,A.readFileSync(f,void 0)),!h.thisProgram&&1<process.argv.length&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),r.exports=h,E=(f,d)=>{throw process.exitCode=f,d}}else(c||u)&&(u?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),y=y.startsWith("blob:")?"":y.slice(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1),u&&(w=f=>{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.responseType="arraybuffer",d.send(null),new Uint8Array(d.response)}),I=async f=>{if(Ie(f))return new Promise((m,S)=>{var O=new XMLHttpRequest;O.open("GET",f,!0),O.responseType="arraybuffer",O.onload=()=>{O.status==200||O.status==0&&O.response?m(O.response):S(O.status)},O.onerror=S,O.send(null)});var d=await fetch(f,{credentials:"same-origin"});if(d.ok)return d.arrayBuffer();throw Error(d.status+" : "+d.url)});var L=h.print||console.log.bind(console),C=h.printErr||console.error.bind(console);Object.assign(h,g),g=null,h.thisProgram&&(T=h.thisProgram);var x=h.wasmBinary,k,z=!1,K,$,M,_,P,W,ne,se,ge,Ie=f=>f.startsWith("file://");function ae(){var f=k.buffer;h.HEAP8=$=new Int8Array(f),h.HEAP16=_=new Int16Array(f),h.HEAPU8=M=new Uint8Array(f),h.HEAPU16=new Uint16Array(f),h.HEAP32=P=new Int32Array(f),h.HEAPU32=W=new Uint32Array(f),h.HEAPF32=ne=new Float32Array(f),h.HEAPF64=ge=new Float64Array(f),h.HEAP64=se=new BigInt64Array(f),h.HEAPU64=new BigUint64Array(f)}var Z=0,ie=null;function pe(f){var d;throw(d=h.onAbort)==null||d.call(h,f),f="Aborted("+f+")",C(f),z=!0,new WebAssembly.RuntimeError(f+". Build with -sASSERTIONS for more info.")}var Se;async function G(f){if(!x)try{var d=await I(f);return new Uint8Array(d)}catch{}if(f==Se&&x)f=new Uint8Array(x);else if(w)f=w(f);else throw"both async and sync fetching of the wasm failed";return f}async function ee(f,d){try{var m=await G(f);return await WebAssembly.instantiate(m,d)}catch(S){C(`failed to asynchronously prepare wasm: ${S}`),pe(S)}}async function Te(f){var d=Se;if(!x&&typeof WebAssembly.instantiateStreaming=="function"&&!Ie(d)&&!p)try{var m=fetch(d,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(m,f)}catch(S){C(`wasm streaming compile failed: ${S}`),C("falling back to ArrayBuffer instantiation")}return ee(d,f)}class Ee{constructor(d){xi(this,"name","ExitStatus");this.message=`Program terminated with exit(${d})`,this.status=d}}var it=f=>{for(;0<f.length;)f.shift()(h)},lt=[],Jt=[],pn=()=>{var f=h.preRun.shift();Jt.unshift(f)};function Ct(f,d="i8"){switch(d.endsWith("*")&&(d="*"),d){case"i1":return $[f];case"i8":return $[f];case"i16":return _[f>>1];case"i32":return P[f>>2];case"i64":return se[f>>3];case"float":return ne[f>>2];case"double":return ge[f>>3];case"*":return W[f>>2];default:pe(`invalid type for getValue: ${d}`)}}var mn=h.noExitRuntime||!0;function Zi(f){var d="i32";switch(d.endsWith("*")&&(d="*"),d){case"i1":$[f]=0;break;case"i8":$[f]=0;break;case"i16":_[f>>1]=0;break;case"i32":P[f>>2]=0;break;case"i64":se[f>>3]=BigInt(0);break;case"float":ne[f>>2]=0;break;case"double":ge[f>>3]=0;break;case"*":W[f>>2]=0;break;default:pe(`invalid type for setValue: ${d}`)}}var Is=typeof TextDecoder<"u"?new TextDecoder:void 0,Me=(f,d=0,m=NaN)=>{var S=d+m;for(m=d;f[m]&&!(m>=S);)++m;if(16<m-d&&f.buffer&&Is)return Is.decode(f.subarray(d,m));for(S="";d<m;){var O=f[d++];if(O&128){var N=f[d++]&63;if((O&224)==192)S+=String.fromCharCode((O&31)<<6|N);else{var R=f[d++]&63;O=(O&240)==224?(O&15)<<12|N<<6|R:(O&7)<<18|N<<12|R<<6|f[d++]&63,65536>O?S+=String.fromCharCode(O):(O-=65536,S+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else S+=String.fromCharCode(O)}return S},er=(f,d)=>f?Me(M,f,d):"",gn=(f,d)=>{for(var m=0,S=f.length-1;0<=S;S--){var O=f[S];O==="."?f.splice(S,1):O===".."?(f.splice(S,1),m++):m&&(f.splice(S,1),m--)}if(d)for(;m;m--)f.unshift("..");return f},Sn=f=>{var d=f.charAt(0)==="/",m=f.slice(-1)==="/";return(f=gn(f.split("/").filter(S=>!!S),!d).join("/"))||d||(f="."),f&&m&&(f+="/"),(d?"/":"")+f},pi=f=>{var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(f).slice(1);return f=d[0],d=d[1],!f&&!d?".":(d&&(d=d.slice(0,-1)),f+d)},mi=f=>f&&f.match(/([^\/]+|\/)\/*$/)[1],vs=()=>{if(p){var f=af;return d=>f.randomFillSync(d)}return d=>crypto.getRandomValues(d)},Tn=f=>{(Tn=vs())(f)},Ns=(...f)=>{for(var d="",m=!1,S=f.length-1;-1<=S&&!m;S--){if(m=0<=S?f[S]:"/",typeof m!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!m)return"";d=m+"/"+d,m=m.charAt(0)==="/"}return d=gn(d.split("/").filter(O=>!!O),!m).join("/"),(m?"/":"")+d||"."},En=[],tr=f=>{for(var d=0,m=0;m<f.length;++m){var S=f.charCodeAt(m);127>=S?d++:2047>=S?d+=2:55296<=S&&57343>=S?(d+=4,++m):d+=3}return d},at=(f,d,m,S)=>{if(!(0<S))return 0;var O=m;S=m+S-1;for(var N=0;N<f.length;++N){var R=f.charCodeAt(N);if(55296<=R&&57343>=R){var X=f.charCodeAt(++N);R=65536+((R&1023)<<10)|X&1023}if(127>=R){if(m>=S)break;d[m++]=R}else{if(2047>=R){if(m+1>=S)break;d[m++]=192|R>>6}else{if(65535>=R){if(m+2>=S)break;d[m++]=224|R>>12}else{if(m+3>=S)break;d[m++]=240|R>>18,d[m++]=128|R>>12&63}d[m++]=128|R>>6&63}d[m++]=128|R&63}}return d[m]=0,m-O},ir=(f,d)=>{var m=Array(tr(f)+1);return f=at(f,m,0,m.length),d&&(m.length=f),m},bs=[];function Ar(f,d){bs[f]={input:[],output:[],cb:d},Al(f,On)}var On={open(f){var d=bs[f.node.rdev];if(!d)throw new F(43);f.tty=d,f.seekable=!1},close(f){f.tty.cb.fsync(f.tty)},fsync(f){f.tty.cb.fsync(f.tty)},read(f,d,m,S){if(!f.tty||!f.tty.cb.xb)throw new F(60);for(var O=0,N=0;N<S;N++){try{var R=f.tty.cb.xb(f.tty)}catch{throw new F(29)}if(R===void 0&&O===0)throw new F(6);if(R==null)break;O++,d[m+N]=R}return O&&(f.node.atime=Date.now()),O},write(f,d,m,S){if(!f.tty||!f.tty.cb.qb)throw new F(60);try{for(var O=0;O<S;O++)f.tty.cb.qb(f.tty,d[m+O])}catch{throw new F(29)}return S&&(f.node.mtime=f.node.ctime=Date.now()),O}},W0={xb(){e:{if(!En.length){var f=null;if(p){var d=Buffer.alloc(256),m=0,S=process.stdin.fd;try{m=A.readSync(S,d,0,256)}catch(O){if(O.toString().includes("EOF"))m=0;else throw O}0<m&&(f=d.slice(0,m).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(f=window.prompt("Input: "),f!==null&&(f+=`
`));if(!f){f=null;break e}En=ir(f,!0)}f=En.shift()}return f},qb(f,d){d===null||d===10?(L(Me(f.output)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){var d;0<((d=f.output)==null?void 0:d.length)&&(L(Me(f.output)),f.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},j0={qb(f,d){d===null||d===10?(C(Me(f.output)),f.output=[]):d!=0&&f.output.push(d)},fsync(f){var d;0<((d=f.output)==null?void 0:d.length)&&(C(Me(f.output)),f.output=[])}},he={Wa:null,Xa(){return he.createNode(null,"/",16895,0)},createNode(f,d,m,S){if((m&61440)===24576||(m&61440)===4096)throw new F(63);return he.Wa||(he.Wa={dir:{node:{Ta:he.La.Ta,Ua:he.La.Ua,lookup:he.La.lookup,hb:he.La.hb,rename:he.La.rename,unlink:he.La.unlink,rmdir:he.La.rmdir,readdir:he.La.readdir,symlink:he.La.symlink},stream:{Va:he.Ma.Va}},file:{node:{Ta:he.La.Ta,Ua:he.La.Ua},stream:{Va:he.Ma.Va,read:he.Ma.read,write:he.Ma.write,ib:he.Ma.ib,jb:he.Ma.jb}},link:{node:{Ta:he.La.Ta,Ua:he.La.Ua,readlink:he.La.readlink},stream:{}},ub:{node:{Ta:he.La.Ta,Ua:he.La.Ua},stream:X0}}),m=bc(f,d,m,S),mt(m.mode)?(m.La=he.Wa.dir.node,m.Ma=he.Wa.dir.stream,m.Na={}):(m.mode&61440)===32768?(m.La=he.Wa.file.node,m.Ma=he.Wa.file.stream,m.Ra=0,m.Na=null):(m.mode&61440)===40960?(m.La=he.Wa.link.node,m.Ma=he.Wa.link.stream):(m.mode&61440)===8192&&(m.La=he.Wa.ub.node,m.Ma=he.Wa.ub.stream),m.atime=m.mtime=m.ctime=Date.now(),f&&(f.Na[d]=m,f.atime=f.mtime=f.ctime=m.atime),m},Sb(f){return f.Na?f.Na.subarray?f.Na.subarray(0,f.Ra):new Uint8Array(f.Na):new Uint8Array(0)},La:{Ta(f){var d={};return d.dev=(f.mode&61440)===8192?f.id:1,d.ino=f.id,d.mode=f.mode,d.nlink=1,d.uid=0,d.gid=0,d.rdev=f.rdev,mt(f.mode)?d.size=4096:(f.mode&61440)===32768?d.size=f.Ra:(f.mode&61440)===40960?d.size=f.link.length:d.size=0,d.atime=new Date(f.atime),d.mtime=new Date(f.mtime),d.ctime=new Date(f.ctime),d.blksize=4096,d.blocks=Math.ceil(d.size/d.blksize),d},Ua(f,d){for(var m of["mode","atime","mtime","ctime"])d[m]!=null&&(f[m]=d[m]);d.size!==void 0&&(d=d.size,f.Ra!=d&&(d==0?(f.Na=null,f.Ra=0):(m=f.Na,f.Na=new Uint8Array(d),m&&f.Na.set(m.subarray(0,Math.min(d,f.Ra))),f.Ra=d)))},lookup(){throw he.vb},hb(f,d,m,S){return he.createNode(f,d,m,S)},rename(f,d,m){try{var S=rr(d,m)}catch{}if(S){if(mt(f.mode))for(var O in S.Na)throw new F(55);Nl(S)}delete f.parent.Na[f.name],d.Na[m]=f,f.name=m,d.ctime=d.mtime=f.parent.ctime=f.parent.mtime=Date.now()},unlink(f,d){delete f.Na[d],f.ctime=f.mtime=Date.now()},rmdir(f,d){var m=rr(f,d),S;for(S in m.Na)throw new F(55);delete f.Na[d],f.ctime=f.mtime=Date.now()},readdir(f){return[".","..",...Object.keys(f.Na)]},symlink(f,d,m){return f=he.createNode(f,d,41471,0),f.link=m,f},readlink(f){if((f.mode&61440)!==40960)throw new F(28);return f.link}},Ma:{read(f,d,m,S,O){var N=f.node.Na;if(O>=f.node.Ra)return 0;if(f=Math.min(f.node.Ra-O,S),8<f&&N.subarray)d.set(N.subarray(O,O+f),m);else for(S=0;S<f;S++)d[m+S]=N[O+S];return f},write(f,d,m,S,O,N){if(d.buffer===$.buffer&&(N=!1),!S)return 0;if(f=f.node,f.mtime=f.ctime=Date.now(),d.subarray&&(!f.Na||f.Na.subarray)){if(N)return f.Na=d.subarray(m,m+S),f.Ra=S;if(f.Ra===0&&O===0)return f.Na=d.slice(m,m+S),f.Ra=S;if(O+S<=f.Ra)return f.Na.set(d.subarray(m,m+S),O),S}N=O+S;var R=f.Na?f.Na.length:0;if(R>=N||(N=Math.max(N,R*(1048576>R?2:1.125)>>>0),R!=0&&(N=Math.max(N,256)),R=f.Na,f.Na=new Uint8Array(N),0<f.Ra&&f.Na.set(R.subarray(0,f.Ra),0)),f.Na.subarray&&d.subarray)f.Na.set(d.subarray(m,m+S),O);else for(N=0;N<S;N++)f.Na[O+N]=d[m+N];return f.Ra=Math.max(f.Ra,O+S),S},Va(f,d,m){if(m===1?d+=f.position:m===2&&(f.node.mode&61440)===32768&&(d+=f.node.Ra),0>d)throw new F(28);return d},ib(f,d,m,S,O){if((f.node.mode&61440)!==32768)throw new F(43);if(f=f.node.Na,O&2||!f||f.buffer!==$.buffer){O=!0,S=65536*Math.ceil(d/65536);var N=Fc(65536,S);if(N&&M.fill(0,N,N+S),S=N,!S)throw new F(48);f&&((0<m||m+d<f.length)&&(f.subarray?f=f.subarray(m,m+d):f=Array.prototype.slice.call(f,m,m+d)),$.set(f,S))}else O=!1,S=f.byteOffset;return{Kb:S,Ab:O}},jb(f,d,m,S){return he.Ma.write(f,d,0,S,m,!1),0}}},Oc=(f,d)=>{var m=0;return f&&(m|=365),d&&(m|=146),m},yl=null,yc={},wr=[],$0=1,Ni=null,Ic=!1,vc=!0,Nc={},F=class{constructor(f){xi(this,"name","ErrnoError");this.Pa=f}},K0=class{constructor(){xi(this,"gb",{});xi(this,"node",null)}get flags(){return this.gb.flags}set flags(f){this.gb.flags=f}get position(){return this.gb.position}set position(f){this.gb.position=f}},G0=class{constructor(f,d,m,S){xi(this,"La",{});xi(this,"Ma",{});xi(this,"ab",null);f||(f=this),this.parent=f,this.Xa=f.Xa,this.id=$0++,this.name=d,this.mode=m,this.rdev=S,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(f){f?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(f){f?this.mode|=146:this.mode&=-147}};function Dt(f,d={}){if(!f)throw new F(44);d.nb??(d.nb=!0),f.charAt(0)==="/"||(f="//"+f);var m=0;e:for(;40>m;m++){f=f.split("/").filter(X=>!!X);for(var S=yl,O="/",N=0;N<f.length;N++){var R=N===f.length-1;if(R&&d.parent)break;if(f[N]!==".")if(f[N]==="..")O=pi(O),S=S.parent;else{O=Sn(O+"/"+f[N]);try{S=rr(S,f[N])}catch(X){if((X==null?void 0:X.Pa)===44&&R&&d.Jb)return{path:O};throw X}if(!S.ab||R&&!d.nb||(S=S.ab.root),(S.mode&61440)===40960&&(!R||d.$a)){if(!S.La.readlink)throw new F(52);S=S.La.readlink(S),S.charAt(0)==="/"||(S=pi(O)+"/"+S),f=S+"/"+f.slice(N+1).join("/");continue e}}}return{path:O,node:S}}throw new F(32)}function Il(f){for(var d;;){if(f===f.parent)return f=f.Xa.zb,d?f[f.length-1]!=="/"?`${f}/${d}`:f+d:f;d=d?`${f.name}/${d}`:f.name,f=f.parent}}function vl(f,d){for(var m=0,S=0;S<d.length;S++)m=(m<<5)-m+d.charCodeAt(S)|0;return(f+m>>>0)%Ni.length}function Nl(f){var d=vl(f.parent.id,f.name);if(Ni[d]===f)Ni[d]=f.bb;else for(d=Ni[d];d;){if(d.bb===f){d.bb=f.bb;break}d=d.bb}}function rr(f,d){var m=mt(f.mode)?(m=xr(f,"x"))?m:f.La.lookup?0:2:54;if(m)throw new F(m);for(m=Ni[vl(f.id,d)];m;m=m.bb){var S=m.name;if(m.parent.id===f.id&&S===d)return m}return f.La.lookup(f,d)}function bc(f,d,m,S){return f=new G0(f,d,m,S),d=vl(f.parent.id,f.name),f.bb=Ni[d],Ni[d]=f}function mt(f){return(f&61440)===16384}function Ac(f){var d=["r","w","rw"][f&3];return f&512&&(d+="w"),d}function xr(f,d){if(vc)return 0;if(!d.includes("r")||f.mode&292){if(d.includes("w")&&!(f.mode&146)||d.includes("x")&&!(f.mode&73))return 2}else return 2;return 0}function wc(f,d){if(!mt(f.mode))return 54;try{return rr(f,d),20}catch{}return xr(f,"wx")}function xc(f,d,m){try{var S=rr(f,d)}catch(O){return O.Pa}if(f=xr(f,"wx"))return f;if(m){if(!mt(S.mode))return 54;if(S===S.parent||Il(S)==="/")return 10}else if(mt(S.mode))return 31;return 0}function As(f){if(!f)throw new F(63);return f}function ht(f){if(f=wr[f],!f)throw new F(8);return f}function kc(f,d=-1){if(f=Object.assign(new K0,f),d==-1)e:{for(d=0;4096>=d;d++)if(!wr[d])break e;throw new F(33)}return f.fd=d,wr[d]=f}function Q0(f,d=-1){var m,S;return f=kc(f,d),(S=(m=f.Ma)==null?void 0:m.Rb)==null||S.call(m,f),f}function bl(f,d,m){var S=f==null?void 0:f.Ma.Ua;f=S?f:d,S??(S=d.La.Ua),As(S),S(f,m)}var X0={open(f){var d,m;f.Ma=yc[f.node.rdev].Ma,(m=(d=f.Ma).open)==null||m.call(d,f)},Va(){throw new F(70)}};function Al(f,d){yc[f]={Ma:d}}function Rc(f,d){var m=d==="/";if(m&&yl)throw new F(10);if(!m&&d){var S=Dt(d,{nb:!1});if(d=S.path,S=S.node,S.ab)throw new F(10);if(!mt(S.mode))throw new F(54)}d={type:f,Wb:{},zb:d,Ib:[]},f=f.Xa(d),f.Xa=d,d.root=f,m?yl=f:S&&(S.ab=d,S.Xa&&S.Xa.Ib.push(d))}function ws(f,d,m){var S=Dt(f,{parent:!0}).node;if(f=mi(f),!f)throw new F(28);if(f==="."||f==="..")throw new F(20);var O=wc(S,f);if(O)throw new F(O);if(!S.La.hb)throw new F(63);return S.La.hb(S,f,d,m)}function Y0(f,d=438){return ws(f,d&4095|32768,0)}function Zt(f,d=511){return ws(f,d&1023|16384,0)}function xs(f,d,m){typeof m>"u"&&(m=d,d=438),ws(f,d|8192,m)}function wl(f,d){if(!Ns(f))throw new F(44);var m=Dt(d,{parent:!0}).node;if(!m)throw new F(44);d=mi(d);var S=wc(m,d);if(S)throw new F(S);if(!m.La.symlink)throw new F(63);m.La.symlink(m,d,f)}function Lc(f){var d=Dt(f,{parent:!0}).node;f=mi(f);var m=rr(d,f),S=xc(d,f,!0);if(S)throw new F(S);if(!d.La.rmdir)throw new F(63);if(m.ab)throw new F(10);d.La.rmdir(d,f),Nl(m)}function Cc(f){var d=Dt(f,{parent:!0}).node;if(!d)throw new F(44);f=mi(f);var m=rr(d,f),S=xc(d,f,!1);if(S)throw new F(S);if(!d.La.unlink)throw new F(63);if(m.ab)throw new F(10);d.La.unlink(d,f),Nl(m)}function yn(f,d){return f=Dt(f,{$a:!d}).node,As(f.La.Ta)(f)}function Dc(f,d,m,S){bl(f,d,{mode:m&4095|d.mode&-4096,ctime:Date.now(),Fb:S})}function ks(f,d){f=typeof f=="string"?Dt(f,{$a:!0}).node:f,Dc(null,f,d)}function Vc(f,d,m){if(mt(d.mode))throw new F(31);if((d.mode&61440)!==32768)throw new F(28);var S=xr(d,"w");if(S)throw new F(S);bl(f,d,{size:m,timestamp:Date.now()})}function kr(f,d,m=438){if(f==="")throw new F(44);if(typeof d=="string"){var S={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[d];if(typeof S>"u")throw Error(`Unknown file open mode: ${d}`);d=S}if(m=d&64?m&4095|32768:0,typeof f=="object")S=f;else{var O=f.endsWith("/");f=Dt(f,{$a:!(d&131072),Jb:!0}),S=f.node,f=f.path}var N=!1;if(d&64)if(S){if(d&128)throw new F(20)}else{if(O)throw new F(31);S=ws(f,m|511,0),N=!0}if(!S)throw new F(44);if((S.mode&61440)===8192&&(d&=-513),d&65536&&!mt(S.mode))throw new F(54);if(!N&&(O=S?(S.mode&61440)===40960?32:mt(S.mode)&&(Ac(d)!=="r"||d&576)?31:xr(S,Ac(d)):44))throw new F(O);return d&512&&!N&&(O=S,O=typeof O=="string"?Dt(O,{$a:!0}).node:O,Vc(null,O,0)),d&=-131713,O=kc({node:S,path:Il(S),flags:d,seekable:!0,position:0,Ma:S.Ma,Lb:[],error:!1}),O.Ma.open&&O.Ma.open(O),N&&ks(S,m&511),!h.logReadFiles||d&1||f in Nc||(Nc[f]=1),O}function xl(f){if(f.fd===null)throw new F(8);f.ob&&(f.ob=null);try{f.Ma.close&&f.Ma.close(f)}catch(d){throw d}finally{wr[f.fd]=null}f.fd=null}function Uc(f,d,m){if(f.fd===null)throw new F(8);if(!f.seekable||!f.Ma.Va)throw new F(70);if(m!=0&&m!=1&&m!=2)throw new F(28);f.position=f.Ma.Va(f,d,m),f.Lb=[]}function Mc(f,d,m,S,O){if(0>S||0>O)throw new F(28);if(f.fd===null)throw new F(8);if((f.flags&2097155)===1)throw new F(8);if(mt(f.node.mode))throw new F(31);if(!f.Ma.read)throw new F(28);var N=typeof O<"u";if(!N)O=f.position;else if(!f.seekable)throw new F(70);return d=f.Ma.read(f,d,m,S,O),N||(f.position+=d),d}function Pc(f,d,m,S,O){if(0>S||0>O)throw new F(28);if(f.fd===null)throw new F(8);if(!(f.flags&2097155))throw new F(8);if(mt(f.node.mode))throw new F(31);if(!f.Ma.write)throw new F(28);f.seekable&&f.flags&1024&&Uc(f,0,2);var N=typeof O<"u";if(!N)O=f.position;else if(!f.seekable)throw new F(70);return d=f.Ma.write(f,d,m,S,O,void 0),N||(f.position+=d),d}function J0(f){var d,m=kr(f,m||0);f=yn(f).size;var S=new Uint8Array(f);return Mc(m,S,0,f,0),d=S,xl(m),d}function bi(f,d,m){f=Sn("/dev/"+f);var S=Oc(!!d,!!m);bi.yb??(bi.yb=64);var O=bi.yb++<<8|0;Al(O,{open(N){N.seekable=!1},close(){var N;(N=m==null?void 0:m.buffer)!=null&&N.length&&m(10)},read(N,R,X,ue){for(var fe=0,_e=0;_e<ue;_e++){try{var gt=d()}catch{throw new F(29)}if(gt===void 0&&fe===0)throw new F(6);if(gt==null)break;fe++,R[X+_e]=gt}return fe&&(N.node.atime=Date.now()),fe},write(N,R,X,ue){for(var fe=0;fe<ue;fe++)try{m(R[X+fe])}catch{throw new F(29)}return ue&&(N.node.mtime=N.node.ctime=Date.now()),fe}}),xs(f,S,O)}var De={};function nr(f,d,m){if(d.charAt(0)==="/")return d;if(f=f===-100?"/":ht(f).path,d.length==0){if(!m)throw new F(44);return f}return f+"/"+d}function Rs(f,d){P[f>>2]=d.dev,P[f+4>>2]=d.mode,W[f+8>>2]=d.nlink,P[f+12>>2]=d.uid,P[f+16>>2]=d.gid,P[f+20>>2]=d.rdev,se[f+24>>3]=BigInt(d.size),P[f+32>>2]=4096,P[f+36>>2]=d.blocks;var m=d.atime.getTime(),S=d.mtime.getTime(),O=d.ctime.getTime();return se[f+40>>3]=BigInt(Math.floor(m/1e3)),W[f+48>>2]=m%1e3*1e6,se[f+56>>3]=BigInt(Math.floor(S/1e3)),W[f+64>>2]=S%1e3*1e6,se[f+72>>3]=BigInt(Math.floor(O/1e3)),W[f+80>>2]=O%1e3*1e6,se[f+88>>3]=BigInt(d.ino),0}var Ls=void 0,Cs=()=>{var f=P[+Ls>>2];return Ls+=4,f},kl=0,Z0=[0,31,60,91,121,152,182,213,244,274,305,335],eg=[0,31,59,90,120,151,181,212,243,273,304,334],In={},_c=f=>{var d;K=f,mn||0<kl||((d=h.onExit)==null||d.call(h,f),z=!0),E(f,new Ee(f))},tg=f=>{if(!z)try{if(f(),!(mn||0<kl))try{K=f=K,_c(f)}catch(d){d instanceof Ee||d=="unwind"||E(1,d)}}catch(d){d instanceof Ee||d=="unwind"||E(1,d)}},Rl={},Bc=()=>{if(!Ll){var f={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:T||"./this.program"},d;for(d in Rl)Rl[d]===void 0?delete f[d]:f[d]=Rl[d];var m=[];for(d in f)m.push(`${d}=${f[d]}`);Ll=m}return Ll},Ll,Cl=f=>{var d=tr(f)+1,m=wi(d);return at(f,M,m,d),m},ig=(f,d,m,S)=>{var O={string:fe=>{var _e=0;return fe!=null&&fe!==0&&(_e=Cl(fe)),_e},array:fe=>{var _e=wi(fe.length);return $.set(fe,_e),_e}};f=h["_"+f];var N=[],R=0;if(S)for(var X=0;X<S.length;X++){var ue=O[m[X]];ue?(R===0&&(R=bn()),N[X]=ue(S[X])):N[X]=S[X]}return m=f(...N),m=function(fe){return R!==0&&Nn(R),d==="string"?fe?Me(M,fe):"":d==="boolean"?!!fe:fe}(m)},Ds=0,Vs=(f,d)=>(d=d==1?wi(f.length):Vl(f.length),f.subarray||f.slice||(f=new Uint8Array(f)),M.set(f,d),d),sr,Dl=[],gi,Ai=f=>{sr.delete(gi.get(f)),gi.set(f,null),Dl.push(f)},vn=(f,d)=>{if(!sr){sr=new WeakMap;var m=gi.length;if(sr)for(var S=0;S<0+m;S++){var O=gi.get(S);O&&sr.set(O,S)}}if(m=sr.get(f)||0)return m;if(Dl.length)m=Dl.pop();else{try{gi.grow(1)}catch(ue){throw ue instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ue}m=gi.length-1}try{gi.set(m,f)}catch(ue){if(!(ue instanceof TypeError))throw ue;if(typeof WebAssembly.Function=="function"){var N=WebAssembly.Function;S={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},O={parameters:[],results:d[0]=="v"?[]:[S[d[0]]]};for(var R=1;R<d.length;++R)O.parameters.push(S[d[R]]);d=new N(O,f)}else{S=[1],O=d.slice(0,1),d=d.slice(1),R={i:127,p:127,j:126,f:125,d:124,e:111},S.push(96);var X=d.length;128>X?S.push(X):S.push(X%128|128,X>>7);for(N of d)S.push(R[N]);O=="v"?S.push(0):S.push(1,R[O]),d=[0,97,115,109,1,0,0,0,1],N=S.length,128>N?d.push(N):d.push(N%128|128,N>>7),d.push(...S),d.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),d=new WebAssembly.Module(new Uint8Array(d)),d=new WebAssembly.Instance(d,{e:{f}}).exports.f}gi.set(m,d)}return sr.set(f,m),m};Ni=Array(4096),Rc(he,"/"),Zt("/tmp"),Zt("/home"),Zt("/home/web_user"),function(){Zt("/dev"),Al(259,{read:()=>0,write:(S,O,N,R)=>R,Va:()=>0}),xs("/dev/null",259),Ar(1280,W0),Ar(1536,j0),xs("/dev/tty",1280),xs("/dev/tty1",1536);var f=new Uint8Array(1024),d=0,m=()=>(d===0&&(Tn(f),d=f.byteLength),f[--d]);bi("random",m),bi("urandom",m),Zt("/dev/shm"),Zt("/dev/shm/tmp")}(),function(){Zt("/proc");var f=Zt("/proc/self");Zt("/proc/self/fd"),Rc({Xa(){var d=bc(f,"fd",16895,73);return d.Ma={Va:he.Ma.Va},d.La={lookup(m,S){m=+S;var O=ht(m);return m={parent:null,Xa:{zb:"fake"},La:{readlink:()=>O.path},id:m+1},m.parent=m},readdir(){return Array.from(wr.entries()).filter(([,m])=>m).map(([m])=>m.toString())}},d}},"/proc/self/fd")}(),he.vb=new F(44),he.vb.stack="<generic error, no stack>";var rg={a:(f,d,m,S)=>pe(`Assertion failed: ${f?Me(M,f):""}, at: `+[d?d?Me(M,d):"":"unknown filename",m,S?S?Me(M,S):"":"unknown function"]),i:function(f,d){try{return f=f?Me(M,f):"",ks(f,d),0}catch(m){if(typeof De>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},L:function(f,d,m){try{if(d=d?Me(M,d):"",d=nr(f,d),m&-8)return-28;var S=Dt(d,{$a:!0}).node;return S?(f="",m&4&&(f+="r"),m&2&&(f+="w"),m&1&&(f+="x"),f&&xr(S,f)?-2:0):-44}catch(O){if(typeof De>"u"||O.name!=="ErrnoError")throw O;return-O.Pa}},j:function(f,d){try{var m=ht(f);return Dc(m,m.node,d,!1),0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},h:function(f){try{var d=ht(f);return bl(d,d.node,{timestamp:Date.now(),Fb:!1}),0}catch(m){if(typeof De>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},b:function(f,d,m){Ls=m;try{var S=ht(f);switch(d){case 0:var O=Cs();if(0>O)break;for(;wr[O];)O++;return Q0(S,O).fd;case 1:case 2:return 0;case 3:return S.flags;case 4:return O=Cs(),S.flags|=O,0;case 12:return O=Cs(),_[O+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(N){if(typeof De>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},g:function(f,d){try{var m=ht(f),S=m.node,O=m.Ma.Ta;f=O?m:S,O??(O=S.La.Ta),As(O);var N=O(f);return Rs(d,N)}catch(R){if(typeof De>"u"||R.name!=="ErrnoError")throw R;return-R.Pa}},H:function(f,d){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d);try{if(isNaN(d))return 61;var m=ht(f);if(0>d||!(m.flags&2097155))throw new F(28);return Vc(m,m.node,d),0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},G:function(f,d){try{if(d===0)return-28;var m=tr("/")+1;return d<m?-68:(at("/",M,f,d),m)}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},K:function(f,d){try{return f=f?Me(M,f):"",Rs(d,yn(f,!0))}catch(m){if(typeof De>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},C:function(f,d,m){try{return d=d?Me(M,d):"",d=nr(f,d),Zt(d,m),0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},J:function(f,d,m,S){try{d=d?Me(M,d):"";var O=S&256;return d=nr(f,d,S&4096),Rs(m,O?yn(d,!0):yn(d))}catch(N){if(typeof De>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},x:function(f,d,m,S){Ls=S;try{d=d?Me(M,d):"",d=nr(f,d);var O=S?Cs():0;return kr(d,m,O).fd}catch(N){if(typeof De>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},v:function(f,d,m,S){try{if(d=d?Me(M,d):"",d=nr(f,d),0>=S)return-28;var O=Dt(d).node;if(!O)throw new F(44);if(!O.La.readlink)throw new F(28);var N=O.La.readlink(O),R=Math.min(S,tr(N)),X=$[m+R];return at(N,M,m,S+1),$[m+R]=X,R}catch(ue){if(typeof De>"u"||ue.name!=="ErrnoError")throw ue;return-ue.Pa}},u:function(f){try{return f=f?Me(M,f):"",Lc(f),0}catch(d){if(typeof De>"u"||d.name!=="ErrnoError")throw d;return-d.Pa}},f:function(f,d){try{return f=f?Me(M,f):"",Rs(d,yn(f))}catch(m){if(typeof De>"u"||m.name!=="ErrnoError")throw m;return-m.Pa}},r:function(f,d,m){try{return d=d?Me(M,d):"",d=nr(f,d),m===0?Cc(d):m===512?Lc(d):pe("Invalid flags passed to unlinkat"),0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return-S.Pa}},q:function(f,d,m){try{d=d?Me(M,d):"",d=nr(f,d,!0);var S=Date.now(),O,N;if(m){var R=W[m>>2]+4294967296*P[m+4>>2],X=P[m+8>>2];X==1073741823?O=S:X==1073741822?O=null:O=1e3*R+X/1e6,m+=16,R=W[m>>2]+4294967296*P[m+4>>2],X=P[m+8>>2],X==1073741823?N=S:X==1073741822?N=null:N=1e3*R+X/1e6}else N=O=S;if((N??O)!==null){f=O;var ue=Dt(d,{$a:!0}).node;As(ue.La.Ua)(ue,{atime:f,mtime:N})}return 0}catch(fe){if(typeof De>"u"||fe.name!=="ErrnoError")throw fe;return-fe.Pa}},m:()=>pe(""),l:()=>{mn=!1,kl=0},A:function(f,d){f=-9007199254740992>f||9007199254740992<f?NaN:Number(f),f=new Date(1e3*f),P[d>>2]=f.getSeconds(),P[d+4>>2]=f.getMinutes(),P[d+8>>2]=f.getHours(),P[d+12>>2]=f.getDate(),P[d+16>>2]=f.getMonth(),P[d+20>>2]=f.getFullYear()-1900,P[d+24>>2]=f.getDay();var m=f.getFullYear();P[d+28>>2]=(m%4!==0||m%100===0&&m%400!==0?eg:Z0)[f.getMonth()]+f.getDate()-1|0,P[d+36>>2]=-(60*f.getTimezoneOffset()),m=new Date(f.getFullYear(),6,1).getTimezoneOffset();var S=new Date(f.getFullYear(),0,1).getTimezoneOffset();P[d+32>>2]=(m!=S&&f.getTimezoneOffset()==Math.min(S,m))|0},y:function(f,d,m,S,O,N,R){O=-9007199254740992>O||9007199254740992<O?NaN:Number(O);try{if(isNaN(O))return 61;var X=ht(S);if(d&2&&!(m&2)&&(X.flags&2097155)!==2)throw new F(2);if((X.flags&2097155)===1)throw new F(2);if(!X.Ma.ib)throw new F(43);if(!f)throw new F(28);var ue=X.Ma.ib(X,f,O,d,m),fe=ue.Kb;return P[N>>2]=ue.Ab,W[R>>2]=fe,0}catch(_e){if(typeof De>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Pa}},z:function(f,d,m,S,O,N){N=-9007199254740992>N||9007199254740992<N?NaN:Number(N);try{var R=ht(O);if(m&2){if(m=N,(R.node.mode&61440)!==32768)throw new F(43);if(!(S&2)){var X=M.slice(f,f+d);R.Ma.jb&&R.Ma.jb(R,X,m,d,S)}}}catch(ue){if(typeof De>"u"||ue.name!=="ErrnoError")throw ue;return-ue.Pa}},n:(f,d)=>{if(In[f]&&(clearTimeout(In[f].id),delete In[f]),!d)return 0;var m=setTimeout(()=>{delete In[f],tg(()=>zc(f,performance.now()))},d);return In[f]={id:m,Xb:d},0},B:(f,d,m,S)=>{var O=new Date().getFullYear(),N=new Date(O,0,1).getTimezoneOffset();O=new Date(O,6,1).getTimezoneOffset(),W[f>>2]=60*Math.max(N,O),P[d>>2]=+(N!=O),d=R=>{var X=Math.abs(R);return`UTC${0<=R?"-":"+"}${String(Math.floor(X/60)).padStart(2,"0")}${String(X%60).padStart(2,"0")}`},f=d(N),d=d(O),O<N?(at(f,M,m,17),at(d,M,S,17)):(at(f,M,S,17),at(d,M,m,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:f=>{var d=M.length;if(f>>>=0,2147483648<f)return!1;for(var m=1;4>=m;m*=2){var S=d*(1+.2/m);S=Math.min(S,f+100663296);e:{S=(Math.min(2147483648,65536*Math.ceil(Math.max(f,S)/65536))-k.buffer.byteLength+65535)/65536|0;try{k.grow(S),ae();var O=1;break e}catch{}O=void 0}if(O)return!0}return!1},E:(f,d)=>{var m=0;return Bc().forEach((S,O)=>{var N=d+m;for(O=W[f+4*O>>2]=N,N=0;N<S.length;++N)$[O++]=S.charCodeAt(N);$[O]=0,m+=S.length+1}),0},F:(f,d)=>{var m=Bc();W[f>>2]=m.length;var S=0;return m.forEach(O=>S+=O.length+1),W[d>>2]=S,0},e:function(f){try{var d=ht(f);return xl(d),0}catch(m){if(typeof De>"u"||m.name!=="ErrnoError")throw m;return m.Pa}},p:function(f,d){try{var m=ht(f);return $[d]=m.tty?2:mt(m.mode)?3:(m.mode&61440)===40960?7:4,_[d+2>>1]=0,se[d+8>>3]=BigInt(0),se[d+16>>3]=BigInt(0),0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return S.Pa}},w:function(f,d,m,S){try{e:{var O=ht(f);f=d;for(var N,R=d=0;R<m;R++){var X=W[f>>2],ue=W[f+4>>2];f+=8;var fe=Mc(O,$,X,ue,N);if(0>fe){var _e=-1;break e}if(d+=fe,fe<ue)break;typeof N<"u"&&(N+=fe)}_e=d}return W[S>>2]=_e,0}catch(gt){if(typeof De>"u"||gt.name!=="ErrnoError")throw gt;return gt.Pa}},D:function(f,d,m,S){d=-9007199254740992>d||9007199254740992<d?NaN:Number(d);try{if(isNaN(d))return 61;var O=ht(f);return Uc(O,d,m),se[S>>3]=BigInt(O.position),O.ob&&d===0&&m===0&&(O.ob=null),0}catch(N){if(typeof De>"u"||N.name!=="ErrnoError")throw N;return N.Pa}},I:function(f){var m;try{var d=ht(f);return(m=d.Ma)!=null&&m.fsync?d.Ma.fsync(d):0}catch(S){if(typeof De>"u"||S.name!=="ErrnoError")throw S;return S.Pa}},t:function(f,d,m,S){try{e:{var O=ht(f);f=d;for(var N,R=d=0;R<m;R++){var X=W[f>>2],ue=W[f+4>>2];f+=8;var fe=Pc(O,$,X,ue,N);if(0>fe){var _e=-1;break e}if(d+=fe,fe<ue)break;typeof N<"u"&&(N+=fe)}_e=d}return W[S>>2]=_e,0}catch(gt){if(typeof De>"u"||gt.name!=="ErrnoError")throw gt;return gt.Pa}},k:_c},Y;(async function(){var m;function f(S){var O;return Y=S.exports,k=Y.M,ae(),gi=Y.O,Z--,(O=h.monitorRunDependencies)==null||O.call(h,Z),Z==0&&ie&&(S=ie,ie=null,S()),Y}Z++,(m=h.monitorRunDependencies)==null||m.call(h,Z);var d={a:rg};return h.instantiateWasm?new Promise(S=>{h.instantiateWasm(d,(O,N)=>{f(O),S(O.exports)})}):(Se??(Se=h.locateFile?h.locateFile("sql-wasm.wasm",y):y+"sql-wasm.wasm"),f((await Te(d)).instance))})(),h._sqlite3_free=f=>(h._sqlite3_free=Y.P)(f),h._sqlite3_value_text=f=>(h._sqlite3_value_text=Y.Q)(f),h._sqlite3_prepare_v2=(f,d,m,S,O)=>(h._sqlite3_prepare_v2=Y.R)(f,d,m,S,O),h._sqlite3_step=f=>(h._sqlite3_step=Y.S)(f),h._sqlite3_reset=f=>(h._sqlite3_reset=Y.T)(f),h._sqlite3_exec=(f,d,m,S,O)=>(h._sqlite3_exec=Y.U)(f,d,m,S,O),h._sqlite3_finalize=f=>(h._sqlite3_finalize=Y.V)(f),h._sqlite3_column_name=(f,d)=>(h._sqlite3_column_name=Y.W)(f,d),h._sqlite3_column_text=(f,d)=>(h._sqlite3_column_text=Y.X)(f,d),h._sqlite3_column_type=(f,d)=>(h._sqlite3_column_type=Y.Y)(f,d),h._sqlite3_errmsg=f=>(h._sqlite3_errmsg=Y.Z)(f),h._sqlite3_clear_bindings=f=>(h._sqlite3_clear_bindings=Y._)(f),h._sqlite3_value_blob=f=>(h._sqlite3_value_blob=Y.$)(f),h._sqlite3_value_bytes=f=>(h._sqlite3_value_bytes=Y.aa)(f),h._sqlite3_value_double=f=>(h._sqlite3_value_double=Y.ba)(f),h._sqlite3_value_int=f=>(h._sqlite3_value_int=Y.ca)(f),h._sqlite3_value_type=f=>(h._sqlite3_value_type=Y.da)(f),h._sqlite3_result_blob=(f,d,m,S)=>(h._sqlite3_result_blob=Y.ea)(f,d,m,S),h._sqlite3_result_double=(f,d)=>(h._sqlite3_result_double=Y.fa)(f,d),h._sqlite3_result_error=(f,d,m)=>(h._sqlite3_result_error=Y.ga)(f,d,m),h._sqlite3_result_int=(f,d)=>(h._sqlite3_result_int=Y.ha)(f,d),h._sqlite3_result_int64=(f,d)=>(h._sqlite3_result_int64=Y.ia)(f,d),h._sqlite3_result_null=f=>(h._sqlite3_result_null=Y.ja)(f),h._sqlite3_result_text=(f,d,m,S)=>(h._sqlite3_result_text=Y.ka)(f,d,m,S),h._sqlite3_aggregate_context=(f,d)=>(h._sqlite3_aggregate_context=Y.la)(f,d),h._sqlite3_column_count=f=>(h._sqlite3_column_count=Y.ma)(f),h._sqlite3_data_count=f=>(h._sqlite3_data_count=Y.na)(f),h._sqlite3_column_blob=(f,d)=>(h._sqlite3_column_blob=Y.oa)(f,d),h._sqlite3_column_bytes=(f,d)=>(h._sqlite3_column_bytes=Y.pa)(f,d),h._sqlite3_column_double=(f,d)=>(h._sqlite3_column_double=Y.qa)(f,d),h._sqlite3_bind_blob=(f,d,m,S,O)=>(h._sqlite3_bind_blob=Y.ra)(f,d,m,S,O),h._sqlite3_bind_double=(f,d,m)=>(h._sqlite3_bind_double=Y.sa)(f,d,m),h._sqlite3_bind_int=(f,d,m)=>(h._sqlite3_bind_int=Y.ta)(f,d,m),h._sqlite3_bind_text=(f,d,m,S,O)=>(h._sqlite3_bind_text=Y.ua)(f,d,m,S,O),h._sqlite3_bind_parameter_index=(f,d)=>(h._sqlite3_bind_parameter_index=Y.va)(f,d),h._sqlite3_sql=f=>(h._sqlite3_sql=Y.wa)(f),h._sqlite3_normalized_sql=f=>(h._sqlite3_normalized_sql=Y.xa)(f),h._sqlite3_changes=f=>(h._sqlite3_changes=Y.ya)(f),h._sqlite3_close_v2=f=>(h._sqlite3_close_v2=Y.za)(f),h._sqlite3_create_function_v2=(f,d,m,S,O,N,R,X,ue)=>(h._sqlite3_create_function_v2=Y.Aa)(f,d,m,S,O,N,R,X,ue),h._sqlite3_update_hook=(f,d,m)=>(h._sqlite3_update_hook=Y.Ba)(f,d,m),h._sqlite3_open=(f,d)=>(h._sqlite3_open=Y.Ca)(f,d);var Vl=h._malloc=f=>(Vl=h._malloc=Y.Da)(f),Us=h._free=f=>(Us=h._free=Y.Ea)(f);h._RegisterExtensionFunctions=f=>(h._RegisterExtensionFunctions=Y.Fa)(f);var Fc=(f,d)=>(Fc=Y.Ga)(f,d),zc=(f,d)=>(zc=Y.Ha)(f,d),Nn=f=>(Nn=Y.Ia)(f),wi=f=>(wi=Y.Ja)(f),bn=()=>(bn=Y.Ka)();h.stackSave=()=>bn(),h.stackRestore=f=>Nn(f),h.stackAlloc=f=>wi(f),h.cwrap=(f,d,m,S)=>{var O=!m||m.every(N=>N==="number"||N==="boolean");return d!=="string"&&O&&!S?h["_"+f]:(...N)=>ig(f,d,m,N)},h.addFunction=vn,h.removeFunction=Ai,h.UTF8ToString=er,h.ALLOC_NORMAL=Ds,h.allocate=Vs,h.allocateUTF8OnStack=Cl;function Ul(){function f(){var O;if(h.calledRun=!0,!z){if(!h.noFSInit&&!Ic){var d,m;Ic=!0,S??(S=h.stdin),d??(d=h.stdout),m??(m=h.stderr),S?bi("stdin",S):wl("/dev/tty","/dev/stdin"),d?bi("stdout",null,d):wl("/dev/tty","/dev/stdout"),m?bi("stderr",null,m):wl("/dev/tty1","/dev/stderr"),kr("/dev/stdin",0),kr("/dev/stdout",1),kr("/dev/stderr",1)}if(Y.N(),vc=!1,(O=h.onRuntimeInitialized)==null||O.call(h),h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;){var S=h.postRun.shift();lt.unshift(S)}it(lt)}}if(0<Z)ie=Ul;else{if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)pn();it(Jt),0<Z?ie=Ul:h.setStatus?(h.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>h.setStatus(""),1),f()},1)):f()}}if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);0<h.preInit.length;)h.preInit.pop()();return Ul(),l}),t)};r.exports=i,r.exports.default=i})(Ud);var J1=Ud.exports;const Z1=G1(J1),Ea={sqlJsLoaded:!1,databaseInitialized:!1,error:null};let hf=null;async function eS(){try{const r=await Z1({locateFile:e=>`https://sql.js.org/dist/${e}`});return Ea.sqlJsLoaded=!0,hf=new r.Database,Ea.databaseInitialized=!0,hf}catch(r){throw r}}function tS(){return{...Ea}}const iS=`
DROP TABLE IF EXISTS OrderDetails;
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS Products;
DROP TABLE IF EXISTS Categories;
DROP TABLE IF EXISTS Customers;
DROP TABLE IF EXISTS Employees;
DROP TABLE IF EXISTS Shippers;
DROP TABLE IF EXISTS Suppliers;

CREATE TABLE Categories
(      
    CategoryID INTEGER PRIMARY KEY AUTOINCREMENT,
    CategoryName TEXT,
    Description TEXT
);

CREATE TABLE Customers
(      
    CustomerID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT
);

CREATE TABLE Employees
(
    EmployeeID INTEGER PRIMARY KEY AUTOINCREMENT,
    LastName TEXT,
    FirstName TEXT,
    BirthDate DATE,
    Photo TEXT,
    Notes TEXT
);

CREATE TABLE Shippers(
    ShipperID INTEGER PRIMARY KEY AUTOINCREMENT,
    ShipperName TEXT,
    Phone TEXT
);

CREATE TABLE Suppliers(
    SupplierID INTEGER PRIMARY KEY AUTOINCREMENT,
    SupplierName TEXT,
    ContactName TEXT,
    Address TEXT,
    City TEXT,
    PostalCode TEXT,
    Country TEXT,
    Phone TEXT
);

CREATE TABLE Products(
    ProductID INTEGER PRIMARY KEY AUTOINCREMENT,
    ProductName TEXT,
    SupplierID INTEGER,
    CategoryID INTEGER,
    Unit TEXT,
    Price NUMERIC DEFAULT 0,
	FOREIGN KEY (CategoryID) REFERENCES Categories (CategoryID),
	FOREIGN KEY (SupplierID) REFERENCES Suppliers (SupplierID)
);

CREATE TABLE Orders(
    OrderID INTEGER PRIMARY KEY AUTOINCREMENT,
    CustomerID INTEGER,
    EmployeeID INTEGER,
    OrderDate DATETIME,
    ShipperID INTEGER,
    FOREIGN KEY (EmployeeID) REFERENCES Employees (EmployeeID),
    FOREIGN KEY (CustomerID) REFERENCES Customers (CustomerID),
    FOREIGN KEY (ShipperID) REFERENCES Shippers (ShipperID)
);

CREATE TABLE OrderDetails(
    OrderDetailID INTEGER PRIMARY KEY AUTOINCREMENT,
    OrderID INTEGER,
    ProductID INTEGER,
    Quantity INTEGER,
	FOREIGN KEY (OrderID) REFERENCES Orders (OrderID),
	FOREIGN KEY (ProductID) REFERENCES Products (ProductID)
);

INSERT INTO Categories VALUES(1,'Beverages','Soft drinks, coffees, teas, beers, and ales');
INSERT INTO Categories VALUES(2,'Condiments','Sweet and savory sauces, relishes, spreads, and seasonings');
INSERT INTO Categories VALUES(3,'Confections','Desserts, candies, and sweet breads');
INSERT INTO Categories VALUES(4,'Dairy Products','Cheeses');
INSERT INTO Categories VALUES(5,'Grains/Cereals','Breads, crackers, pasta, and cereal');
INSERT INTO Categories VALUES(6,'Meat/Poultry','Prepared meats');
INSERT INTO Categories VALUES(7,'Produce','Dried fruit and bean curd');
INSERT INTO Categories VALUES(8,'Seafood','Seaweed and fish');

INSERT INTO Customers VALUES(1,'Alfreds Futterkiste','Maria Anders','Obere Str. 57','Berlin','12209','Germany');
INSERT INTO Customers VALUES(2,'Ana Trujillo Emparedados y helados','Ana Trujillo','Avda. de la Constitución 2222','México D.F.','5021','Mexico');
INSERT INTO Customers VALUES(3,'Antonio Moreno Taquería','Antonio Moreno','Mataderos 2312','México D.F.','5023','Mexico');
INSERT INTO Customers VALUES(4,'Around the Horn','Thomas Hardy','120 Hanover Sq.','London','WA1 1DP','UK');
INSERT INTO Customers VALUES(5,'Berglunds snabbköp','Christina Berglund','Berguvsvägen 8','Luleå','S-958 22','Sweden');
INSERT INTO Customers VALUES(6,'Blauer See Delikatessen','Hanna Moos','Forsterstr. 57','Mannheim','68306','Germany');
INSERT INTO Customers VALUES(7,'Blondel père et fils','Frédérique Citeaux','24, place Kléber','Strasbourg','67000','France');
INSERT INTO Customers VALUES(8,'Bólido Comidas preparadas','Martín Sommer','C/ Araquil, 67','Madrid','28023','Spain');
INSERT INTO Customers VALUES(9,'Bon app''''','Laurence Lebihans','12, rue des Bouchers','Marseille','13008','France');
INSERT INTO Customers VALUES(10,'Bottom-Dollar Marketse','Elizabeth Lincoln','23 Tsawassen Blvd.','Tsawassen','T2F 8M4','Canada');
INSERT INTO Customers VALUES(11,'B''''s Beverages','Victoria Ashworth','Fauntleroy Circus','London','EC2 5NT','UK');
INSERT INTO Customers VALUES(12,'Cactus Comidas para llevar','Patricio Simpson','Cerrito 333','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(13,'Centro comercial Moctezuma','Francisco Chang','Sierras de Granada 9993','México D.F.','5022','Mexico');
INSERT INTO Customers VALUES(14,'Chop-suey Chinese','Yang Wang','Hauptstr. 29','Bern','3012','Switzerland');
INSERT INTO Customers VALUES(15,'Comércio Mineiro','Pedro Afonso','Av. dos Lusíadas, 23','São Paulo','05432-043','Brazil');
INSERT INTO Customers VALUES(16,'Consolidated Holdings','Elizabeth Brown','Berkeley Gardens 12 Brewery','London','WX1 6LT','UK');
INSERT INTO Customers VALUES(17,'Drachenblut Delikatessend','Sven Ottlieb','Walserweg 21','Aachen','52066','Germany');
INSERT INTO Customers VALUES(18,'Du monde entier','Janine Labrune','67, rue des Cinquante Otages','Nantes','44000','France');
INSERT INTO Customers VALUES(19,'Eastern Connection','Ann Devon','35 King George','London','WX3 6FW','UK');
INSERT INTO Customers VALUES(20,'Ernst Handel','Roland Mendel','Kirchgasse 6','Graz','8010','Austria');
INSERT INTO Customers VALUES(21,'Familia Arquibaldo','Aria Cruz','Rua Orós, 92','São Paulo','05442-030','Brazil');
INSERT INTO Customers VALUES(22,'FISSA Fabrica Inter. Salchichas S.A.','Diego Roel','C/ Moralzarzal, 86','Madrid','28034','Spain');
INSERT INTO Customers VALUES(23,'Folies gourmandes','Martine Rancé','184, chaussée de Tournai','Lille','59000','France');
INSERT INTO Customers VALUES(24,'Folk och fä HB','Maria Larsson','Åkergatan 24','Bräcke','S-844 67','Sweden');
INSERT INTO Customers VALUES(25,'Frankenversand','Peter Franken','Berliner Platz 43','München','80805','Germany');
INSERT INTO Customers VALUES(26,'France restauration','Carine Schmitt','54, rue Royale','Nantes','44000','France');
INSERT INTO Customers VALUES(27,'Franchi S.p.A.','Paolo Accorti','Via Monte Bianco 34','Torino','10100','Italy');
INSERT INTO Customers VALUES(28,'Furia Bacalhau e Frutos do Mar','Lino Rodriguez','Jardim das rosas n. 32','Lisboa','1675','Portugal');
INSERT INTO Customers VALUES(29,'Galería del gastrónomo','Eduardo Saavedra','Rambla de Cataluña, 23','Barcelona','8022','Spain');
INSERT INTO Customers VALUES(30,'Godos Cocina Típica','José Pedro Freyre','C/ Romero, 33','Sevilla','41101','Spain');
INSERT INTO Customers VALUES(31,'Gourmet Lanchonetes','André Fonseca','Av. Brasil, 442','Campinas','04876-786','Brazil');
INSERT INTO Customers VALUES(32,'Great Lakes Food Market','Howard Snyder','2732 Baker Blvd.','Eugene','97403','USA');
INSERT INTO Customers VALUES(33,'GROSELLA-Restaurante','Manuel Pereira','5ª Ave. Los Palos Grandes','Caracas','1081','Venezuela');
INSERT INTO Customers VALUES(34,'Hanari Carnes','Mario Pontes','Rua do Paço, 67','Rio de Janeiro','05454-876','Brazil');
INSERT INTO Customers VALUES(35,'HILARIÓN-Abastos','Carlos Hernández','Carrera 22 con Ave. Carlos Soublette #8-35','San Cristóbal','5022','Venezuela');
INSERT INTO Customers VALUES(36,'Hungry Coyote Import Store','Yoshi Latimer','City Center Plaza 516 Main St.','Elgin','97827','USA');
INSERT INTO Customers VALUES(37,'Hungry Owl All-Night Grocers','Patricia McKenna','8 Johnstown Road','Cork','','Ireland');
INSERT INTO Customers VALUES(38,'Island Trading','Helen Bennett','Garden House Crowther Way','Cowes','PO31 7PJ','UK');
INSERT INTO Customers VALUES(39,'Königlich Essen','Philip Cramer','Maubelstr. 90','Brandenburg','14776','Germany');
INSERT INTO Customers VALUES(40,'La corne d''''abondance','Daniel Tonini','67, avenue de l''''Europe','Versailles','78000','France');
INSERT INTO Customers VALUES(41,'La maison d''''Asie','Annette Roulet','1 rue Alsace-Lorraine','Toulouse','31000','France');
INSERT INTO Customers VALUES(42,'Laughing Bacchus Wine Cellars','Yoshi Tannamuri','1900 Oak St.','Vancouver','V3F 2K1','Canada');
INSERT INTO Customers VALUES(43,'Lazy K Kountry Store','John Steel','12 Orchestra Terrace','Walla Walla','99362','USA');
INSERT INTO Customers VALUES(44,'Lehmanns Marktstand','Renate Messner','Magazinweg 7','Frankfurt a.M.','60528','Germany');
INSERT INTO Customers VALUES(45,'Let''''s Stop N Shop','Jaime Yorres','87 Polk St. Suite 5','San Francisco','94117','USA');
INSERT INTO Customers VALUES(46,'LILA-Supermercado','Carlos González','Carrera 52 con Ave. Bolívar #65-98 Llano Largo','Barquisimeto','3508','Venezuela');
INSERT INTO Customers VALUES(47,'LINO-Delicateses','Felipe Izquierdo','Ave. 5 de Mayo Porlamar','I. de Margarita','4980','Venezuela');
INSERT INTO Customers VALUES(48,'Lonesome Pine Restaurant','Fran Wilson','89 Chiaroscuro Rd.','Portland','97219','USA');
INSERT INTO Customers VALUES(49,'Magazzini Alimentari Riuniti','Giovanni Rovelli','Via Ludovico il Moro 22','Bergamo','24100','Italy');
INSERT INTO Customers VALUES(50,'Maison Dewey','Catherine Dewey','Rue Joseph-Bens 532','Bruxelles','B-1180','Belgium');
INSERT INTO Customers VALUES(51,'Mère Paillarde','Jean Fresnière','43 rue St. Laurent','Montréal','H1J 1C3','Canada');
INSERT INTO Customers VALUES(52,'Morgenstern Gesundkost','Alexander Feuer','Heerstr. 22','Leipzig','4179','Germany');
INSERT INTO Customers VALUES(53,'North/South','Simon Crowther','South House 300 Queensbridge','London','SW7 1RZ','UK');
INSERT INTO Customers VALUES(54,'Océano Atlántico Ltda.','Yvonne Moncada','Ing. Gustavo Moncada 8585 Piso 20-A','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(55,'Old World Delicatessen','Rene Phillips','2743 Bering St.','Anchorage','99508','USA');
INSERT INTO Customers VALUES(56,'Ottilies Käseladen','Henriette Pfalzheim','Mehrheimerstr. 369','Köln','50739','Germany');
INSERT INTO Customers VALUES(57,'Paris spécialités','Marie Bertrand','265, boulevard Charonne','Paris','75012','France');
INSERT INTO Customers VALUES(58,'Pericles Comidas clásicas','Guillermo Fernández','Calle Dr. Jorge Cash 321','México D.F.','5033','Mexico');
INSERT INTO Customers VALUES(59,'Piccolo und mehr','Georg Pipps','Geislweg 14','Salzburg','5020','Austria');
INSERT INTO Customers VALUES(60,'Princesa Isabel Vinhoss','Isabel de Castro','Estrada da saúde n. 58','Lisboa','1756','Portugal');
INSERT INTO Customers VALUES(61,'Que Delícia','Bernardo Batista','Rua da Panificadora, 12','Rio de Janeiro','02389-673','Brazil');
INSERT INTO Customers VALUES(62,'Queen Cozinha','Lúcia Carvalho','Alameda dos Canàrios, 891','São Paulo','05487-020','Brazil');
INSERT INTO Customers VALUES(63,'QUICK-Stop','Horst Kloss','Taucherstraße 10','Cunewalde','1307','Germany');
INSERT INTO Customers VALUES(64,'Rancho grande','Sergio Gutiérrez','Av. del Libertador 900','Buenos Aires','1010','Argentina');
INSERT INTO Customers VALUES(65,'Rattlesnake Canyon Grocery','Paula Wilson','2817 Milton Dr.','Albuquerque','87110','USA');
INSERT INTO Customers VALUES(66,'Reggiani Caseifici','Maurizio Moroni','Strada Provinciale 124','Reggio Emilia','42100','Italy');
INSERT INTO Customers VALUES(67,'Ricardo Adocicados','Janete Limeira','Av. Copacabana, 267','Rio de Janeiro','02389-890','Brazil');
INSERT INTO Customers VALUES(68,'Richter Supermarkt','Michael Holz','Grenzacherweg 237','Genève','1203','Switzerland');
INSERT INTO Customers VALUES(69,'Romero y tomillo','Alejandra Camino','Gran Vía, 1','Madrid','28001','Spain');
INSERT INTO Customers VALUES(70,'Santé Gourmet','Jonas Bergulfsen','Erling Skakkes gate 78','Stavern','4110','Norway');
INSERT INTO Customers VALUES(71,'Save-a-lot Markets','Jose Pavarotti','187 Suffolk Ln.','Boise','83720','USA');
INSERT INTO Customers VALUES(72,'Seven Seas Imports','Hari Kumar','90 Wadhurst Rd.','London','OX15 4NB','UK');
INSERT INTO Customers VALUES(73,'Simons bistro','Jytte Petersen','Vinbæltet 34','København','1734','Denmark');
INSERT INTO Customers VALUES(74,'Spécialités du monde','Dominique Perrier','25, rue Lauriston','Paris','75016','France');
INSERT INTO Customers VALUES(75,'Split Rail Beer & Ale','Art Braunschweiger','P.O. Box 555','Lander','82520','USA');
INSERT INTO Customers VALUES(76,'Suprêmes délices','Pascale Cartrain','Boulevard Tirou, 255','Charleroi','B-6000','Belgium');
INSERT INTO Customers VALUES(77,'The Big Cheese','Liz Nixon','89 Jefferson Way Suite 2','Portland','97201','USA');
INSERT INTO Customers VALUES(78,'The Cracker Box','Liu Wong','55 Grizzly Peak Rd.','Butte','59801','USA');
INSERT INTO Customers VALUES(79,'Toms Spezialitäten','Karin Josephs','Luisenstr. 48','Münster','44087','Germany');
INSERT INTO Customers VALUES(80,'Tortuga Restaurante','Miguel Angel Paolino','Avda. Azteca 123','México D.F.','5033','Mexico');
INSERT INTO Customers VALUES(81,'Tradição Hipermercados','Anabela Domingues','Av. Inês de Castro, 414','São Paulo','05634-030','Brazil');
INSERT INTO Customers VALUES(82,'Trail''''s Head Gourmet Provisioners','Helvetius Nagy','722 DaVinci Blvd.','Kirkland','98034','USA');
INSERT INTO Customers VALUES(83,'Vaffeljernet','Palle Ibsen','Smagsløget 45','Århus','8200','Denmark');
INSERT INTO Customers VALUES(84,'Victuailles en stock','Mary Saveley','2, rue du Commerce','Lyon','69004','France');
INSERT INTO Customers VALUES(85,'Vins et alcools Chevalier','Paul Henriot','59 rue de l''''Abbaye','Reims','51100','France');
INSERT INTO Customers VALUES(86,'Die Wandernde Kuh','Rita Müller','Adenauerallee 900','Stuttgart','70563','Germany');
INSERT INTO Customers VALUES(87,'Wartian Herkku','Pirkko Koskitalo','Torikatu 38','Oulu','90110','Finland');
INSERT INTO Customers VALUES(88,'Wellington Importadora','Paula Parente','Rua do Mercado, 12','Resende','08737-363','Brazil');
INSERT INTO Customers VALUES(89,'White Clover Markets','Karl Jablonski','305 - 14th Ave. S. Suite 3B','Seattle','98128','USA');
INSERT INTO Customers VALUES(90,'Wilman Kala','Matti Karttunen','Keskuskatu 45','Helsinki','21240','Finland');
INSERT INTO Customers VALUES(91,'Wolski','Zbyszek','ul. Filtrowa 68','Walla','01-012','Poland');

INSERT INTO Employees VALUES(1,'Davolio','Nancy','1968-12-08','EmpID1.pic','Education includes a BA in psychology from Colorado State University. She also completed (The Art of the Cold Call). Nancy is a member of ''Toastmasters International''.');
INSERT INTO Employees VALUES(2,'Fuller','Andrew','1952-02-19','EmpID2.pic','Andrew received his BTS commercial and a Ph.D. in international marketing from the University of Dallas. He is fluent in French and Italian and reads German. He joined the company as a sales representative, was promoted to sales manager and was then named vice president of sales. Andrew is a member of the Sales Management Roundtable, the Seattle Chamber of Commerce, and the Pacific Rim Importers Association.');
INSERT INTO Employees VALUES(3,'Leverling','Janet','1963-08-30','EmpID3.pic','Janet has a BS degree in chemistry from Boston College). She has also completed a certificate program in food retailing management. Janet was hired as a sales associate and was promoted to sales representative.');
INSERT INTO Employees VALUES(4,'Peacock','Margaret','1958-09-19','EmpID4.pic','Margaret holds a BA in English literature from Concordia College and an MA from the American Institute of Culinary Arts. She was temporarily assigned to the London office before returning to her permanent post in Seattle.');
INSERT INTO Employees VALUES(5,'Buchanan','Steven','1955-03-04','EmpID5.pic','Steven Buchanan graduated from St. Andrews University, Scotland, with a BSC degree. Upon joining the company as a sales representative, he spent 6 months in an orientation program at the Seattle office and then returned to his permanent post in London, where he was promoted to sales manager. Mr. Buchanan has completed the courses ''Successful Telemarketing'' and ''International Sales Management''. He is fluent in French.');
INSERT INTO Employees VALUES(6,'Suyama','Michael','1963-07-02','EmpID6.pic','Michael is a graduate of Sussex University (MA, economics) and the University of California at Los Angeles (MBA, marketing). He has also taken the courses ''Multi-Cultural Selling'' and ''Time Management for the Sales Professional''. He is fluent in Japanese and can read and write French, Portuguese, and Spanish.');
INSERT INTO Employees VALUES(7,'King','Robert','1960-05-29','EmpID7.pic','Robert King served in the Peace Corps and traveled extensively before completing his degree in English at the University of Michigan and then joining the company. After completing a course entitled ''Selling in Europe'', he was transferred to the London office.');
INSERT INTO Employees VALUES(8,'Callahan','Laura','1958-01-09','EmpID8.pic','Laura received a BA in psychology from the University of Washington. She has also completed a course in business French. She reads and writes French.');
INSERT INTO Employees VALUES(9,'Dodsworth','Anne','1969-07-02','EmpID9.pic','Anne has a BA degree in English from St. Lawrence College. She is fluent in French and German.');
INSERT INTO Employees VALUES(10,'West','Adam','1928-09-19','EmpID10.pic','An old chum.');

INSERT INTO Shippers VALUES(1, 'Speedy Express', '(503) 555-9831');
INSERT INTO Shippers VALUES(2, 'United Package', '(503) 555-3199');
INSERT INTO Shippers VALUES(3, 'Federal Shipping', '(503) 555-9931');

INSERT INTO Suppliers VALUES(1,'Exotic Liquid','Charlotte Cooper','49 Gilbert St.','Londona','EC1 4SD','UK','(171) 555-2222');
INSERT INTO Suppliers VALUES(2,'New Orleans Cajun Delights','Shelley Burke','P.O. Box 78934','New Orleans','70117','USA','(100) 555-4822');
INSERT INTO Suppliers VALUES(3,'Grandma Kelly''s Homestead','Regina Murphy','707 Oxford Rd.','Ann Arbor','48104','USA','(313) 555-5735');
INSERT INTO Suppliers VALUES(4,'Tokyo Traders','Yoshi Nagase','9-8 Sekimai Musashino-shi','Tokyo','100','Japan','(03) 3555-5011');
INSERT INTO Suppliers VALUES(5,'Cooperativa de Quesos ''Las Cabras''','Antonio del Valle Saavedra','Calle del Rosal 4','Oviedo','33007','Spain','(98) 598 76 54');
INSERT INTO Suppliers VALUES(6,'Mayumi''s','Mayumi Ohno','92 Setsuko Chuo-ku','Osaka','545','Japan','(06) 431-7877');
INSERT INTO Suppliers VALUES(7,'Pavlova, Ltd.','Ian Devling','74 Rose St. Moonie Ponds','Melbourne','3058','Australia','(03) 444-2343');
INSERT INTO Suppliers VALUES(8,'Specialty Biscuits, Ltd.','Peter Wilson','29 King''s Way','Manchester','M14 GSD','UK','(161) 555-4448');
INSERT INTO Suppliers VALUES(9,'PB Knäckebröd AB','Lars Peterson','Kaloadagatan 13','Göteborg','S-345 67','Sweden','031-987 65 43');
INSERT INTO Suppliers VALUES(10,'Refrescos Americanas LTDA','Carlos Diaz','Av. das Americanas 12.890','São Paulo','5442','Brazil','(11) 555 4640');
INSERT INTO Suppliers VALUES(11,'Heli Süßwaren GmbH & Co. KG','Petra Winkler','Tiergartenstraße 5','Berlin','10785','Germany','(010) 9984510');
INSERT INTO Suppliers VALUES(12,'Plutzer Lebensmittelgroßmärkte AG','Martin Bein','Bogenallee 51','Frankfurt','60439','Germany','(069) 992755');
INSERT INTO Suppliers VALUES(13,'Nord-Ost-Fisch Handelsgesellschaft mbH','Sven Petersen','Frahmredder 112a','Cuxhaven','27478','Germany','(04721) 8713');
INSERT INTO Suppliers VALUES(14,'Formaggi Fortini s.r.l.','Elio Rossi','Viale Dante, 75','Ravenna','48100','Italy','(0544) 60323');
INSERT INTO Suppliers VALUES(15,'Norske Meierier','Beate Vileid','Hatlevegen 5','Sandvika','1320','Norway','(0)2-953010');
INSERT INTO Suppliers VALUES(16,'Bigfoot Breweries','Cheryl Saylor','3400 - 8th Avenue Suite 210','Bend','97101','USA','(503) 555-9931');
INSERT INTO Suppliers VALUES(17,'Svensk Sjöföda AB','Michael Björn','Brovallavägen 231','Stockholm','S-123 45','Sweden','08-123 45 67');
INSERT INTO Suppliers VALUES(18,'Aux joyeux ecclésiastiques','Guylène Nodier','203, Rue des Francs-Bourgeois','Paris','75004','France','(1) 03.83.00.68');
INSERT INTO Suppliers VALUES(19,'New England Seafood Cannery','Robb Merchant','Order Processing Dept. 2100 Paul Revere Blvd.','Boston','2134','USA','(617) 555-3267');
INSERT INTO Suppliers VALUES(20,'Leka Trading','Chandra Leka','471 Serangoon Loop, Suite #402','Singapore','512','Singapore','555-8787');
INSERT INTO Suppliers VALUES(21,'Lyngbysild','Niels Petersen','Lyngbysild Fiskebakken 10','Lyngby','2800','Denmark','43844108');
INSERT INTO Suppliers VALUES(22,'Zaanse Snoepfabriek','Dirk Luchte','Verkoop Rijnweg 22','Zaandam','9999 ZZ','Netherlands','(12345) 1212');
INSERT INTO Suppliers VALUES(23,'Karkki Oy','Anne Heikkonen','Valtakatu 12','Lappeenranta','53120','Finland','(953) 10956');
INSERT INTO Suppliers VALUES(24,'G''day, Mate','Wendy Mackenzie','170 Prince Edward Parade Hunter''s Hill','Sydney','2042','Australia','(02) 555-5914');
INSERT INTO Suppliers VALUES(25,'Ma Maison','Jean-Guy Lauzon','2960 Rue St. Laurent','Montréal','H1J 1C3','Canada','(514) 555-9022');
INSERT INTO Suppliers VALUES(26,'Pasta Buttini s.r.l.','Giovanni Giudici','Via dei Gelsomini, 153','Salerno','84100','Italy','(089) 6547665');
INSERT INTO Suppliers VALUES(27,'Escargots Nouveaux','Marie Delamare','22, rue H. Voiron','Montceau','71300','France','85.57.00.07');
INSERT INTO Suppliers VALUES(28,'Gai pâturage','Eliane Noz','Bat. B 3, rue des Alpes','Annecy','74000','France','38.76.98.06');
INSERT INTO Suppliers VALUES(29,'Forêts d''érables','Chantal Goulet','148 rue Chasseur','Ste-Hyacinthe','J2S 7S8','Canada','(514) 555-2955');

INSERT INTO Products VALUES(1,'Chais',1,1,'10 boxes x 20 bags',18.00);
INSERT INTO Products VALUES(2,'Chang',1,1,'24 - 12 oz bottles',19.00);
INSERT INTO Products VALUES(3,'Aniseed Syrup',1,2,'12 - 550 ml bottles',10.00);
INSERT INTO Products VALUES(4,'Chef Anton''s Cajun Seasoning',2,2,'48 - 6 oz jars',22.00);
INSERT INTO Products VALUES(5,'Chef Anton''s Gumbo Mix',2,2,'36 boxes',21.35);
INSERT INTO Products VALUES(6,'Grandma''s Boysenberry Spread',3,2,'12 - 8 oz jars',25.00);
INSERT INTO Products VALUES(7,'Uncle Bob''s Organic Dried Pears',3,7,'12 - 1 lb pkgs.',30.00);
INSERT INTO Products VALUES(8,'Northwoods Cranberry Sauce',3,2,'12 - 12 oz jars',40.00);
INSERT INTO Products VALUES(9,'Mishi Kobe Niku',4,6,'18 - 500 g pkgs.',97.00);
INSERT INTO Products VALUES(10,'Ikura',4,8,'12 - 200 ml jars',31.00);
INSERT INTO Products VALUES(11,'Queso Cabrales',5,4,'1 kg pkg.',21.00);
INSERT INTO Products VALUES(12,'Queso Manchego La Pastora',5,4,'10 - 500 g pkgs.',38.00);
INSERT INTO Products VALUES(13,'Konbu',6,8,'2 kg box',6.00);
INSERT INTO Products VALUES(14,'Tofu',6,7,'40 - 100 g pkgs.',23.25);
INSERT INTO Products VALUES(15,'Genen Shouyu',6,2,'24 - 250 ml bottles',15.50);
INSERT INTO Products VALUES(16,'Pavlova',7,3,'32 - 500 g boxes',17.45);
INSERT INTO Products VALUES(17,'Alice Mutton',7,6,'20 - 1 kg tins',39);
INSERT INTO Products VALUES(18,'Carnarvon Tigers',7,8,'16 kg pkg.',62.50);
INSERT INTO Products VALUES(19,'Teatime Chocolate Biscuits',8,3,'10 boxes x 12 pieces',9.20);
INSERT INTO Products VALUES(20,'Sir Rodney''s Marmalade',8,3,'30 gift boxes',81.00);
INSERT INTO Products VALUES(21,'Sir Rodney''s Scones',8,3,'24 pkgs. x 4 pieces',10.00);
INSERT INTO Products VALUES(22,'Gustaf''s Knäckebröd',9,5,'24 - 500 g pkgs.',21.00);
INSERT INTO Products VALUES(23,'Tunnbröd',9,5,'12 - 250 g pkgs.',9.00);
INSERT INTO Products VALUES(24,'Guaraná Fantástica',10,1,'12 - 355 ml cans',4.50);
INSERT INTO Products VALUES(25,'NuNuCa Nuß-Nougat-Creme',11,3,'20 - 450 g glasses',14.00);
INSERT INTO Products VALUES(26,'Gumbär Gummibärchen',11,3,'100 - 250 g bags',31.23);
INSERT INTO Products VALUES(27,'Schoggi Schokolade',11,3,'100 - 100 g pieces',43.90);
INSERT INTO Products VALUES(28,'Rössle Sauerkraut',12,7,'25 - 825 g cans',45.60);
INSERT INTO Products VALUES(29,'Thüringer Rostbratwurst',12,6,'50 bags x 30 sausgs.',123.79);
INSERT INTO Products VALUES(30,'Nord-Ost Matjeshering',13,8,'10 - 200 g glasses',25.89);
INSERT INTO Products VALUES(31,'Gorgonzola Telino',14,4,'12 - 100 g pkgs',12.50);
INSERT INTO Products VALUES(32,'Mascarpone Fabioli',14,4,'24 - 200 g pkgs.',32.00);
INSERT INTO Products VALUES(33,'Geitost',15,4,'500 g',2.50);
INSERT INTO Products VALUES(34,'Sasquatch Ale',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(35,'Steeleye Stout',16,1,'24 - 12 oz bottles',18.00);
INSERT INTO Products VALUES(36,'Inlagd Sill',17,8,'24 - 250 g jars',19.00);
INSERT INTO Products VALUES(37,'Gravad lax',17,8,'12 - 500 g pkgs.',26.00);
INSERT INTO Products VALUES(38,'Côte de Blaye',18,1,'12 - 75 cl bottles',263.50);
INSERT INTO Products VALUES(39,'Chartreuse verte',18,1,'750 cc per bottle',18.00);
INSERT INTO Products VALUES(40,'Boston Crab Meat',19,8,'24 - 4 oz tins',18.40);
INSERT INTO Products VALUES(41,'Jack''s New England Clam Chowder',19,8,'12 - 12 oz cans',9.65);
INSERT INTO Products VALUES(42,'Singaporean Hokkien Fried Mee',20,5,'32 - 1 kg pkgs.',14.00);
INSERT INTO Products VALUES(43,'Ipoh Coffee',20,1,'16 - 500 g tins',46.00);
INSERT INTO Products VALUES(44,'Gula Malacca',20,2,'20 - 2 kg bags',19.45);
INSERT INTO Products VALUES(45,'Røgede sild',21,8,'1k pkg.',9.50);
INSERT INTO Products VALUES(46,'Spegesild',21,8,'4 - 450 g glasses',12.00);
INSERT INTO Products VALUES(47,'Zaanse koeken',22,3,'10 - 4 oz boxes',9.50);
INSERT INTO Products VALUES(48,'Chocolade',22,3,'10 pkgs.',12.75);
INSERT INTO Products VALUES(49,'Maxilaku',23,3,'24 - 50 g pkgs.',20.00);
INSERT INTO Products VALUES(50,'Valkoinen suklaa',23,3,'12 - 100 g bars',16.25);
INSERT INTO Products VALUES(51,'Manjimup Dried Apples',24,7,'50 - 300 g pkgs.',53.00);
INSERT INTO Products VALUES(52,'Filo Mix',24,5,'16 - 2 kg boxes',7.00);
INSERT INTO Products VALUES(53,'Perth Pasties',24,6,'48 pieces',32.80);
INSERT INTO Products VALUES(54,'Tourtière',25,6,'16 pies',7.45);
INSERT INTO Products VALUES(55,'Pâté chinois',25,6,'24 boxes x 2 pies',24.00);
INSERT INTO Products VALUES(56,'Gnocchi di nonna Alice',26,5,'24 - 250 g pkgs.',38.00);
INSERT INTO Products VALUES(57,'Ravioli Angelo',26,5,'24 - 250 g pkgs.',19.50);
INSERT INTO Products VALUES(58,'Escargots de Bourgogne',27,8,'24 pieces',13.25);
INSERT INTO Products VALUES(59,'Raclette Courdavault',28,4,'5 kg pkg.',55.00);
INSERT INTO Products VALUES(60,'Camembert Pierrot',28,4,'15 - 300 g rounds',34.00);
INSERT INTO Products VALUES(61,'Sirop d''érable',29,2,'24 - 500 ml bottles',28.50);
INSERT INTO Products VALUES(62,'Tarte au sucre',29,3,'48 pies',49.30);
INSERT INTO Products VALUES(63,'Vegie-spread',7,2,'15 - 625 g jars',43.90);
INSERT INTO Products VALUES(64,'Wimmers gute Semmelknödel',12,5,'20 bags x 4 pieces',33.25);
INSERT INTO Products VALUES(65,'Louisiana Fiery Hot Pepper Sauce',2,2,'32 - 8 oz bottles',21.05);
INSERT INTO Products VALUES(66,'Louisiana Hot Spiced Okra',2,2,'24 - 8 oz jars',17.00);
INSERT INTO Products VALUES(67,'Laughing Lumberjack Lager',16,1,'24 - 12 oz bottles',14.00);
INSERT INTO Products VALUES(68,'Scottish Longbreads',8,3,'10 boxes x 8 pieces',12.50);
INSERT INTO Products VALUES(69,'Gudbrandsdalsost',15,4,'10 kg pkg.',36.00);
INSERT INTO Products VALUES(70,'Outback Lager',7,1,'24 - 355 ml bottles',15.00);
INSERT INTO Products VALUES(71,'Fløtemysost',15,4,'10 - 500 g pkgs.',21.50);
INSERT INTO Products VALUES(72,'Mozzarella di Giovanni',14,4,'24 - 200 g pkgs.',34.80);
INSERT INTO Products VALUES(73,'Röd Kaviar',17,8,'24 - 150 g jars',15.00);
INSERT INTO Products VALUES(74,'Longlife Tofu',4,7,'5 kg pkg.',10.00);
INSERT INTO Products VALUES(75,'Rhönbräu Klosterbier',12,1,'24 - 0.5 l bottles',7.75);
INSERT INTO Products VALUES(76,'Lakkalikööri',23,1,'500 ml',18.00);
INSERT INTO Products VALUES(77,'Original Frankfurter grüne Soße',12,2,'12 boxes',13.00);

INSERT INTO Orders VALUES(10248,90,5,'1996-07-04',3);
INSERT INTO Orders VALUES(10249,81,6,'1996-07-05',1);
INSERT INTO Orders VALUES(10250,34,4,'1996-07-08',2);
INSERT INTO Orders VALUES(10251,84,3,'1996-07-08',1);
INSERT INTO Orders VALUES(10252,76,4,'1996-07-09',2);
INSERT INTO Orders VALUES(10253,34,3,'1996-07-10',2);
INSERT INTO Orders VALUES(10254,14,5,'1996-07-11',2);
INSERT INTO Orders VALUES(10255,68,9,'1996-07-12',3);
INSERT INTO Orders VALUES(10256,88,3,'1996-07-15',2);
INSERT INTO Orders VALUES(10257,35,4,'1996-07-16',3);
INSERT INTO Orders VALUES(10258,20,1,'1996-07-17',1);
INSERT INTO Orders VALUES(10259,13,4,'1996-07-18',3);
INSERT INTO Orders VALUES(10260,55,4,'1996-07-19',1);
INSERT INTO Orders VALUES(10261,61,4,'1996-07-19',2);
INSERT INTO Orders VALUES(10262,65,8,'1996-07-22',3);
INSERT INTO Orders VALUES(10263,20,9,'1996-07-23',3);
INSERT INTO Orders VALUES(10264,24,6,'1996-07-24',3);
INSERT INTO Orders VALUES(10265,7,2,'1996-07-25',1);
INSERT INTO Orders VALUES(10266,87,3,'1996-07-26',3);
INSERT INTO Orders VALUES(10267,25,4,'1996-07-29',1);
INSERT INTO Orders VALUES(10268,33,8,'1996-07-30',3);
INSERT INTO Orders VALUES(10269,89,5,'1996-07-31',1);
INSERT INTO Orders VALUES(10270,87,1,'1996-08-01',1);
INSERT INTO Orders VALUES(10271,75,6,'1996-08-01',2);
INSERT INTO Orders VALUES(10272,65,6,'1996-08-02',2);
INSERT INTO Orders VALUES(10273,63,3,'1996-08-05',3);
INSERT INTO Orders VALUES(10274,85,6,'1996-08-06',1);
INSERT INTO Orders VALUES(10275,49,1,'1996-08-07',1);
INSERT INTO Orders VALUES(10276,80,8,'1996-08-08',3);
INSERT INTO Orders VALUES(10277,52,2,'1996-08-09',3);
INSERT INTO Orders VALUES(10278,5,8,'1996-08-12',2);
INSERT INTO Orders VALUES(10279,44,8,'1996-08-13',2);
INSERT INTO Orders VALUES(10280,5,2,'1996-08-14',1);
INSERT INTO Orders VALUES(10281,69,4,'1996-08-14',1);
INSERT INTO Orders VALUES(10282,69,4,'1996-08-15',1);
INSERT INTO Orders VALUES(10283,46,3,'1996-08-16',3);
INSERT INTO Orders VALUES(10284,44,4,'1996-08-19',1);
INSERT INTO Orders VALUES(10285,63,1,'1996-08-20',2);
INSERT INTO Orders VALUES(10286,63,8,'1996-08-21',3);
INSERT INTO Orders VALUES(10287,67,8,'1996-08-22',3);
INSERT INTO Orders VALUES(10288,66,4,'1996-08-23',1);
INSERT INTO Orders VALUES(10289,11,7,'1996-08-26',3);
INSERT INTO Orders VALUES(10290,15,8,'1996-08-27',1);
INSERT INTO Orders VALUES(10291,61,6,'1996-08-27',2);
INSERT INTO Orders VALUES(10292,81,1,'1996-08-28',2);
INSERT INTO Orders VALUES(10293,80,1,'1996-08-29',3);
INSERT INTO Orders VALUES(10294,65,4,'1996-08-30',2);
INSERT INTO Orders VALUES(10295,85,2,'1996-09-02',2);
INSERT INTO Orders VALUES(10296,46,6,'1996-09-03',1);
INSERT INTO Orders VALUES(10297,7,5,'1996-09-04',2);
INSERT INTO Orders VALUES(10298,37,6,'1996-09-05',2);
INSERT INTO Orders VALUES(10299,67,4,'1996-09-06',2);
INSERT INTO Orders VALUES(10300,49,2,'1996-09-09',2);
INSERT INTO Orders VALUES(10301,86,8,'1996-09-09',2);
INSERT INTO Orders VALUES(10302,76,4,'1996-09-10',2);
INSERT INTO Orders VALUES(10303,30,7,'1996-09-11',2);
INSERT INTO Orders VALUES(10304,80,1,'1996-09-12',2);
INSERT INTO Orders VALUES(10305,55,8,'1996-09-13',3);
INSERT INTO Orders VALUES(10306,69,1,'1996-09-16',3);
INSERT INTO Orders VALUES(10307,48,2,'1996-09-17',2);
INSERT INTO Orders VALUES(10308,2,7,'1996-09-18',3);
INSERT INTO Orders VALUES(10309,37,3,'1996-09-19',1);
INSERT INTO Orders VALUES(10310,77,8,'1996-09-20',2);
INSERT INTO Orders VALUES(10311,18,1,'1996-09-20',3);
INSERT INTO Orders VALUES(10312,86,2,'1996-09-23',2);
INSERT INTO Orders VALUES(10313,63,2,'1996-09-24',2);
INSERT INTO Orders VALUES(10314,65,1,'1996-09-25',2);
INSERT INTO Orders VALUES(10315,38,4,'1996-09-26',2);
INSERT INTO Orders VALUES(10316,65,1,'1996-09-27',3);
INSERT INTO Orders VALUES(10317,48,6,'1996-09-30',1);
INSERT INTO Orders VALUES(10318,38,8,'1996-10-01',2);
INSERT INTO Orders VALUES(10319,80,7,'1996-10-02',3);
INSERT INTO Orders VALUES(10320,87,5,'1996-10-03',3);
INSERT INTO Orders VALUES(10321,38,3,'1996-10-03',2);
INSERT INTO Orders VALUES(10322,58,7,'1996-10-04',3);
INSERT INTO Orders VALUES(10323,39,4,'1996-10-07',1);
INSERT INTO Orders VALUES(10324,71,9,'1996-10-08',1);
INSERT INTO Orders VALUES(10325,39,1,'1996-10-09',3);
INSERT INTO Orders VALUES(10326,8,4,'1996-10-10',2);
INSERT INTO Orders VALUES(10327,24,2,'1996-10-11',1);
INSERT INTO Orders VALUES(10328,28,4,'1996-10-14',3);
INSERT INTO Orders VALUES(10329,75,4,'1996-10-15',2);
INSERT INTO Orders VALUES(10330,46,3,'1996-10-16',1);
INSERT INTO Orders VALUES(10331,9,9,'1996-10-16',1);
INSERT INTO Orders VALUES(10332,51,3,'1996-10-17',2);
INSERT INTO Orders VALUES(10333,87,5,'1996-10-18',3);
INSERT INTO Orders VALUES(10334,84,8,'1996-10-21',2);
INSERT INTO Orders VALUES(10335,37,7,'1996-10-22',2);
INSERT INTO Orders VALUES(10336,60,7,'1996-10-23',2);
INSERT INTO Orders VALUES(10337,25,4,'1996-10-24',3);
INSERT INTO Orders VALUES(10338,55,4,'1996-10-25',3);
INSERT INTO Orders VALUES(10339,51,2,'1996-10-28',2);
INSERT INTO Orders VALUES(10340,9,1,'1996-10-29',3);
INSERT INTO Orders VALUES(10341,73,7,'1996-10-29',3);
INSERT INTO Orders VALUES(10342,25,4,'1996-10-30',2);
INSERT INTO Orders VALUES(10343,44,4,'1996-10-31',1);
INSERT INTO Orders VALUES(10344,89,4,'1996-11-01',2);
INSERT INTO Orders VALUES(10345,63,2,'1996-11-04',2);
INSERT INTO Orders VALUES(10346,65,3,'1996-11-05',3);
INSERT INTO Orders VALUES(10347,21,4,'1996-11-06',3);
INSERT INTO Orders VALUES(10348,86,4,'1996-11-07',2);
INSERT INTO Orders VALUES(10349,75,7,'1996-11-08',1);
INSERT INTO Orders VALUES(10350,41,6,'1996-11-11',2);
INSERT INTO Orders VALUES(10351,20,1,'1996-11-11',1);
INSERT INTO Orders VALUES(10352,28,3,'1996-11-12',3);
INSERT INTO Orders VALUES(10353,59,7,'1996-11-13',3);
INSERT INTO Orders VALUES(10354,58,8,'1996-11-14',3);
INSERT INTO Orders VALUES(10355,4,6,'1996-11-15',1);
INSERT INTO Orders VALUES(10356,86,6,'1996-11-18',2);
INSERT INTO Orders VALUES(10357,46,1,'1996-11-19',3);
INSERT INTO Orders VALUES(10358,41,5,'1996-11-20',1);
INSERT INTO Orders VALUES(10359,72,5,'1996-11-21',3);
INSERT INTO Orders VALUES(10360,7,4,'1996-11-22',3);
INSERT INTO Orders VALUES(10361,63,1,'1996-11-22',2);
INSERT INTO Orders VALUES(10362,9,3,'1996-11-25',1);
INSERT INTO Orders VALUES(10363,17,4,'1996-11-26',3);
INSERT INTO Orders VALUES(10364,19,1,'1996-11-26',1);
INSERT INTO Orders VALUES(10365,3,3,'1996-11-27',2);
INSERT INTO Orders VALUES(10366,29,8,'1996-11-28',2);
INSERT INTO Orders VALUES(10367,83,7,'1996-11-28',3);
INSERT INTO Orders VALUES(10368,20,2,'1996-11-29',2);
INSERT INTO Orders VALUES(10369,75,8,'1996-12-02',2);
INSERT INTO Orders VALUES(10370,14,6,'1996-12-03',2);
INSERT INTO Orders VALUES(10371,41,1,'1996-12-03',1);
INSERT INTO Orders VALUES(10372,62,5,'1996-12-04',2);
INSERT INTO Orders VALUES(10373,37,4,'1996-12-05',3);
INSERT INTO Orders VALUES(10374,91,1,'1996-12-05',3);
INSERT INTO Orders VALUES(10375,36,3,'1996-12-06',2);
INSERT INTO Orders VALUES(10376,51,1,'1996-12-09',2);
INSERT INTO Orders VALUES(10377,72,1,'1996-12-09',3);
INSERT INTO Orders VALUES(10378,24,5,'1996-12-10',3);
INSERT INTO Orders VALUES(10379,61,2,'1996-12-11',1);
INSERT INTO Orders VALUES(10380,37,8,'1996-12-12',3);
INSERT INTO Orders VALUES(10381,46,3,'1996-12-12',3);
INSERT INTO Orders VALUES(10382,20,4,'1996-12-13',1);
INSERT INTO Orders VALUES(10383,4,8,'1996-12-16',3);
INSERT INTO Orders VALUES(10384,5,3,'1996-12-16',3);
INSERT INTO Orders VALUES(10385,75,1,'1996-12-17',2);
INSERT INTO Orders VALUES(10386,21,9,'1996-12-18',3);
INSERT INTO Orders VALUES(10387,70,1,'1996-12-18',2);
INSERT INTO Orders VALUES(10388,72,2,'1996-12-19',1);
INSERT INTO Orders VALUES(10389,10,4,'1996-12-20',2);
INSERT INTO Orders VALUES(10390,20,6,'1996-12-23',1);
INSERT INTO Orders VALUES(10391,17,3,'1996-12-23',3);
INSERT INTO Orders VALUES(10392,59,2,'1996-12-24',3);
INSERT INTO Orders VALUES(10393,71,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10394,36,1,'1996-12-25',3);
INSERT INTO Orders VALUES(10395,35,6,'1996-12-26',1);
INSERT INTO Orders VALUES(10396,25,1,'1996-12-27',3);
INSERT INTO Orders VALUES(10397,60,5,'1996-12-27',1);
INSERT INTO Orders VALUES(10398,71,2,'1996-12-30',3);
INSERT INTO Orders VALUES(10399,83,8,'1996-12-31',3);
INSERT INTO Orders VALUES(10400,19,1,'1997-01-01',3);
INSERT INTO Orders VALUES(10401,65,1,'1997-01-01',1);
INSERT INTO Orders VALUES(10402,20,8,'1997-01-02',2);
INSERT INTO Orders VALUES(10403,20,4,'1997-01-03',3);
INSERT INTO Orders VALUES(10404,49,2,'1997-01-03',1);
INSERT INTO Orders VALUES(10405,47,1,'1997-01-06',1);
INSERT INTO Orders VALUES(10406,62,7,'1997-01-07',1);
INSERT INTO Orders VALUES(10407,56,2,'1997-01-07',2);
INSERT INTO Orders VALUES(10408,23,8,'1997-01-08',1);
INSERT INTO Orders VALUES(10409,54,3,'1997-01-09',1);
INSERT INTO Orders VALUES(10410,10,3,'1997-01-10',3);
INSERT INTO Orders VALUES(10411,10,9,'1997-01-10',3);
INSERT INTO Orders VALUES(10412,87,8,'1997-01-13',2);
INSERT INTO Orders VALUES(10413,41,3,'1997-01-14',2);
INSERT INTO Orders VALUES(10414,21,2,'1997-01-14',3);
INSERT INTO Orders VALUES(10415,36,3,'1997-01-15',1);
INSERT INTO Orders VALUES(10416,87,8,'1997-01-16',3);
INSERT INTO Orders VALUES(10417,73,4,'1997-01-16',3);
INSERT INTO Orders VALUES(10418,63,4,'1997-01-17',1);
INSERT INTO Orders VALUES(10419,68,4,'1997-01-20',2);
INSERT INTO Orders VALUES(10420,88,3,'1997-01-21',1);
INSERT INTO Orders VALUES(10421,61,8,'1997-01-21',1);
INSERT INTO Orders VALUES(10422,27,2,'1997-01-22',1);
INSERT INTO Orders VALUES(10423,31,6,'1997-01-23',3);
INSERT INTO Orders VALUES(10424,51,7,'1997-01-23',2);
INSERT INTO Orders VALUES(10425,41,6,'1997-01-24',2);
INSERT INTO Orders VALUES(10426,29,4,'1997-01-27',1);
INSERT INTO Orders VALUES(10427,59,4,'1997-01-27',2);
INSERT INTO Orders VALUES(10428,66,7,'1997-01-28',1);
INSERT INTO Orders VALUES(10429,37,3,'1997-01-29',2);
INSERT INTO Orders VALUES(10430,20,4,'1997-01-30',1);
INSERT INTO Orders VALUES(10431,10,4,'1997-01-30',2);
INSERT INTO Orders VALUES(10432,75,3,'1997-01-31',2);
INSERT INTO Orders VALUES(10433,60,3,'1997-02-03',3);
INSERT INTO Orders VALUES(10434,24,3,'1997-02-03',2);
INSERT INTO Orders VALUES(10435,16,8,'1997-02-04',2);
INSERT INTO Orders VALUES(10436,7,3,'1997-02-05',2);
INSERT INTO Orders VALUES(10437,87,8,'1997-02-05',1);
INSERT INTO Orders VALUES(10438,79,3,'1997-02-06',2);
INSERT INTO Orders VALUES(10439,51,6,'1997-02-07',3);
INSERT INTO Orders VALUES(10440,71,4,'1997-02-10',2);
INSERT INTO Orders VALUES(10441,55,3,'1997-02-10',2);
INSERT INTO Orders VALUES(10442,20,3,'1997-02-11',2);
INSERT INTO Orders VALUES(10443,66,8,'1997-02-12',1);

INSERT INTO OrderDetails VALUES(1,10248,11,12);
INSERT INTO OrderDetails VALUES(2,10248,42,10);
INSERT INTO OrderDetails VALUES(3,10248,72,5);
INSERT INTO OrderDetails VALUES(4,10249,14,9);
INSERT INTO OrderDetails VALUES(5,10249,51,40);
INSERT INTO OrderDetails VALUES(6,10250,41,10);
INSERT INTO OrderDetails VALUES(7,10250,51,35);
INSERT INTO OrderDetails VALUES(8,10250,65,15);
INSERT INTO OrderDetails VALUES(9,10251,22,6);
INSERT INTO OrderDetails VALUES(10,10251,57,15);
INSERT INTO OrderDetails VALUES(11,10251,65,20);
INSERT INTO OrderDetails VALUES(12,10252,20,40);
INSERT INTO OrderDetails VALUES(13,10252,33,25);
INSERT INTO OrderDetails VALUES(14,10252,60,40);
INSERT INTO OrderDetails VALUES(15,10253,31,20);
INSERT INTO OrderDetails VALUES(16,10253,39,42);
INSERT INTO OrderDetails VALUES(17,10253,49,40);
INSERT INTO OrderDetails VALUES(18,10254,24,15);
INSERT INTO OrderDetails VALUES(19,10254,55,21);
INSERT INTO OrderDetails VALUES(20,10254,74,21);
INSERT INTO OrderDetails VALUES(21,10255,2,20);
INSERT INTO OrderDetails VALUES(22,10255,16,35);
INSERT INTO OrderDetails VALUES(23,10255,36,25);
INSERT INTO OrderDetails VALUES(24,10255,59,30);
INSERT INTO OrderDetails VALUES(25,10256,53,15);
INSERT INTO OrderDetails VALUES(26,10256,77,12);
INSERT INTO OrderDetails VALUES(27,10257,27,25);
INSERT INTO OrderDetails VALUES(28,10257,39,6);
INSERT INTO OrderDetails VALUES(29,10257,77,15);
INSERT INTO OrderDetails VALUES(30,10258,2,50);
INSERT INTO OrderDetails VALUES(31,10258,5,65);
INSERT INTO OrderDetails VALUES(32,10258,32,6);
INSERT INTO OrderDetails VALUES(33,10259,21,10);
INSERT INTO OrderDetails VALUES(34,10259,37,1);
INSERT INTO OrderDetails VALUES(35,10260,41,16);
INSERT INTO OrderDetails VALUES(36,10260,57,50);
INSERT INTO OrderDetails VALUES(37,10260,62,15);
INSERT INTO OrderDetails VALUES(38,10260,70,21);
INSERT INTO OrderDetails VALUES(39,10261,21,20);
INSERT INTO OrderDetails VALUES(40,10261,35,20);
INSERT INTO OrderDetails VALUES(41,10262,5,12);
INSERT INTO OrderDetails VALUES(42,10262,7,15);
INSERT INTO OrderDetails VALUES(43,10262,56,2);
INSERT INTO OrderDetails VALUES(44,10263,16,60);
INSERT INTO OrderDetails VALUES(45,10263,24,28);
INSERT INTO OrderDetails VALUES(46,10263,30,60);
INSERT INTO OrderDetails VALUES(47,10263,74,36);
INSERT INTO OrderDetails VALUES(48,10264,2,35);
INSERT INTO OrderDetails VALUES(49,10264,41,25);
INSERT INTO OrderDetails VALUES(50,10265,17,30);
INSERT INTO OrderDetails VALUES(51,10265,70,20);
INSERT INTO OrderDetails VALUES(52,10266,12,12);
INSERT INTO OrderDetails VALUES(53,10267,40,50);
INSERT INTO OrderDetails VALUES(54,10267,59,70);
INSERT INTO OrderDetails VALUES(55,10267,76,15);
INSERT INTO OrderDetails VALUES(56,10268,29,10);
INSERT INTO OrderDetails VALUES(57,10268,72,4);
INSERT INTO OrderDetails VALUES(58,10269,33,60);
INSERT INTO OrderDetails VALUES(59,10269,72,20);
INSERT INTO OrderDetails VALUES(60,10270,36,30);
INSERT INTO OrderDetails VALUES(61,10270,43,25);
INSERT INTO OrderDetails VALUES(62,10271,33,24);
INSERT INTO OrderDetails VALUES(63,10272,20,6);
INSERT INTO OrderDetails VALUES(64,10272,31,40);
INSERT INTO OrderDetails VALUES(65,10272,72,24);
INSERT INTO OrderDetails VALUES(66,10273,10,24);
INSERT INTO OrderDetails VALUES(67,10273,31,15);
INSERT INTO OrderDetails VALUES(68,10273,33,20);
INSERT INTO OrderDetails VALUES(69,10273,40,60);
INSERT INTO OrderDetails VALUES(70,10273,76,33);
INSERT INTO OrderDetails VALUES(71,10274,71,20);
INSERT INTO OrderDetails VALUES(72,10274,72,7);
INSERT INTO OrderDetails VALUES(73,10275,24,12);
INSERT INTO OrderDetails VALUES(74,10275,59,6);
INSERT INTO OrderDetails VALUES(75,10276,10,15);
INSERT INTO OrderDetails VALUES(76,10276,13,10);
INSERT INTO OrderDetails VALUES(77,10277,28,20);
INSERT INTO OrderDetails VALUES(78,10277,62,12);
INSERT INTO OrderDetails VALUES(79,10278,44,16);
INSERT INTO OrderDetails VALUES(80,10278,59,15);
INSERT INTO OrderDetails VALUES(81,10278,63,8);
INSERT INTO OrderDetails VALUES(82,10278,73,25);
INSERT INTO OrderDetails VALUES(83,10279,17,15);
INSERT INTO OrderDetails VALUES(84,10280,24,12);
INSERT INTO OrderDetails VALUES(85,10280,55,20);
INSERT INTO OrderDetails VALUES(86,10280,75,30);
INSERT INTO OrderDetails VALUES(87,10281,19,1);
INSERT INTO OrderDetails VALUES(88,10281,24,6);
INSERT INTO OrderDetails VALUES(89,10281,35,4);
INSERT INTO OrderDetails VALUES(90,10282,30,6);
INSERT INTO OrderDetails VALUES(91,10282,57,2);
INSERT INTO OrderDetails VALUES(92,10283,15,20);
INSERT INTO OrderDetails VALUES(93,10283,19,18);
INSERT INTO OrderDetails VALUES(94,10283,60,35);
INSERT INTO OrderDetails VALUES(95,10283,72,3);
INSERT INTO OrderDetails VALUES(96,10284,27,15);
INSERT INTO OrderDetails VALUES(97,10284,44,21);
INSERT INTO OrderDetails VALUES(98,10284,60,20);
INSERT INTO OrderDetails VALUES(99,10284,67,5);
INSERT INTO OrderDetails VALUES(100,10285,1,45);
INSERT INTO OrderDetails VALUES(101,10285,40,40);
INSERT INTO OrderDetails VALUES(102,10285,53,36);
INSERT INTO OrderDetails VALUES(103,10286,35,100);
INSERT INTO OrderDetails VALUES(104,10286,62,40);
INSERT INTO OrderDetails VALUES(105,10287,16,40);
INSERT INTO OrderDetails VALUES(106,10287,34,20);
INSERT INTO OrderDetails VALUES(107,10287,46,15);
INSERT INTO OrderDetails VALUES(108,10288,54,10);
INSERT INTO OrderDetails VALUES(109,10288,68,3);
INSERT INTO OrderDetails VALUES(110,10289,3,30);
INSERT INTO OrderDetails VALUES(111,10289,64,9);
INSERT INTO OrderDetails VALUES(112,10290,5,20);
INSERT INTO OrderDetails VALUES(113,10290,29,15);
INSERT INTO OrderDetails VALUES(114,10290,49,15);
INSERT INTO OrderDetails VALUES(115,10290,77,10);
INSERT INTO OrderDetails VALUES(116,10291,13,20);
INSERT INTO OrderDetails VALUES(117,10291,44,24);
INSERT INTO OrderDetails VALUES(118,10291,51,2);
INSERT INTO OrderDetails VALUES(119,10292,20,20);
INSERT INTO OrderDetails VALUES(120,10293,18,12);
INSERT INTO OrderDetails VALUES(121,10293,24,10);
INSERT INTO OrderDetails VALUES(122,10293,63,5);
INSERT INTO OrderDetails VALUES(123,10293,75,6);
INSERT INTO OrderDetails VALUES(124,10294,1,18);
INSERT INTO OrderDetails VALUES(125,10294,17,15);
INSERT INTO OrderDetails VALUES(126,10294,43,15);
INSERT INTO OrderDetails VALUES(127,10294,60,21);
INSERT INTO OrderDetails VALUES(128,10294,75,6);
INSERT INTO OrderDetails VALUES(129,10295,56,4);
INSERT INTO OrderDetails VALUES(130,10296,11,12);
INSERT INTO OrderDetails VALUES(131,10296,16,30);
INSERT INTO OrderDetails VALUES(132,10296,69,15);
INSERT INTO OrderDetails VALUES(133,10297,39,60);
INSERT INTO OrderDetails VALUES(134,10297,72,20);
INSERT INTO OrderDetails VALUES(135,10298,2,40);
INSERT INTO OrderDetails VALUES(136,10298,36,40);
INSERT INTO OrderDetails VALUES(137,10298,59,30);
INSERT INTO OrderDetails VALUES(138,10298,62,15);
INSERT INTO OrderDetails VALUES(139,10299,19,15);
INSERT INTO OrderDetails VALUES(140,10299,70,20);
INSERT INTO OrderDetails VALUES(141,10300,66,30);
INSERT INTO OrderDetails VALUES(142,10300,68,20);
INSERT INTO OrderDetails VALUES(143,10301,40,10);
INSERT INTO OrderDetails VALUES(144,10301,56,20);
INSERT INTO OrderDetails VALUES(145,10302,17,40);
INSERT INTO OrderDetails VALUES(146,10302,28,28);
INSERT INTO OrderDetails VALUES(147,10302,43,12);
INSERT INTO OrderDetails VALUES(148,10303,40,40);
INSERT INTO OrderDetails VALUES(149,10303,65,30);
INSERT INTO OrderDetails VALUES(150,10303,68,15);
INSERT INTO OrderDetails VALUES(151,10304,49,30);
INSERT INTO OrderDetails VALUES(152,10304,59,10);
INSERT INTO OrderDetails VALUES(153,10304,71,2);
INSERT INTO OrderDetails VALUES(154,10305,18,25);
INSERT INTO OrderDetails VALUES(155,10305,29,25);
INSERT INTO OrderDetails VALUES(156,10305,39,30);
INSERT INTO OrderDetails VALUES(157,10306,30,10);
INSERT INTO OrderDetails VALUES(158,10306,53,10);
INSERT INTO OrderDetails VALUES(159,10306,54,5);
INSERT INTO OrderDetails VALUES(160,10307,62,10);
INSERT INTO OrderDetails VALUES(161,10307,68,3);
INSERT INTO OrderDetails VALUES(162,10308,69,1);
INSERT INTO OrderDetails VALUES(163,10308,70,5);
INSERT INTO OrderDetails VALUES(164,10309,4,20);
INSERT INTO OrderDetails VALUES(165,10309,6,30);
INSERT INTO OrderDetails VALUES(166,10309,42,2);
INSERT INTO OrderDetails VALUES(167,10309,43,20);
INSERT INTO OrderDetails VALUES(168,10309,71,3);
INSERT INTO OrderDetails VALUES(169,10310,16,10);
INSERT INTO OrderDetails VALUES(170,10310,62,5);
INSERT INTO OrderDetails VALUES(171,10311,42,6);
INSERT INTO OrderDetails VALUES(172,10311,69,7);
INSERT INTO OrderDetails VALUES(173,10312,28,4);
INSERT INTO OrderDetails VALUES(174,10312,43,24);
INSERT INTO OrderDetails VALUES(175,10312,53,20);
INSERT INTO OrderDetails VALUES(176,10312,75,10);
INSERT INTO OrderDetails VALUES(177,10313,36,12);
INSERT INTO OrderDetails VALUES(178,10314,32,40);
INSERT INTO OrderDetails VALUES(179,10314,58,30);
INSERT INTO OrderDetails VALUES(180,10314,62,25);
INSERT INTO OrderDetails VALUES(181,10315,34,14);
INSERT INTO OrderDetails VALUES(182,10315,70,30);
INSERT INTO OrderDetails VALUES(183,10316,41,10);
INSERT INTO OrderDetails VALUES(184,10316,62,70);
INSERT INTO OrderDetails VALUES(185,10317,1,20);
INSERT INTO OrderDetails VALUES(186,10318,41,20);
INSERT INTO OrderDetails VALUES(187,10318,76,6);
INSERT INTO OrderDetails VALUES(188,10319,17,8);
INSERT INTO OrderDetails VALUES(189,10319,28,14);
INSERT INTO OrderDetails VALUES(190,10319,76,30);
INSERT INTO OrderDetails VALUES(191,10320,71,30);
INSERT INTO OrderDetails VALUES(192,10321,35,10);
INSERT INTO OrderDetails VALUES(193,10322,52,20);
INSERT INTO OrderDetails VALUES(194,10323,15,5);
INSERT INTO OrderDetails VALUES(195,10323,25,4);
INSERT INTO OrderDetails VALUES(196,10323,39,4);
INSERT INTO OrderDetails VALUES(197,10324,16,21);
INSERT INTO OrderDetails VALUES(198,10324,35,70);
INSERT INTO OrderDetails VALUES(199,10324,46,30);
INSERT INTO OrderDetails VALUES(200,10324,59,40);
INSERT INTO OrderDetails VALUES(201,10324,63,80);
INSERT INTO OrderDetails VALUES(202,10325,6,6);
INSERT INTO OrderDetails VALUES(203,10325,13,12);
INSERT INTO OrderDetails VALUES(204,10325,14,9);
INSERT INTO OrderDetails VALUES(205,10325,31,4);
INSERT INTO OrderDetails VALUES(206,10325,72,40);
INSERT INTO OrderDetails VALUES(207,10326,4,24);
INSERT INTO OrderDetails VALUES(208,10326,57,16);
INSERT INTO OrderDetails VALUES(209,10326,75,50);
INSERT INTO OrderDetails VALUES(210,10327,2,25);
INSERT INTO OrderDetails VALUES(211,10327,11,50);
INSERT INTO OrderDetails VALUES(212,10327,30,35);
INSERT INTO OrderDetails VALUES(213,10327,58,30);
INSERT INTO OrderDetails VALUES(214,10328,59,9);
INSERT INTO OrderDetails VALUES(215,10328,65,40);
INSERT INTO OrderDetails VALUES(216,10328,68,10);
INSERT INTO OrderDetails VALUES(217,10329,19,10);
INSERT INTO OrderDetails VALUES(218,10329,30,8);
INSERT INTO OrderDetails VALUES(219,10329,38,20);
INSERT INTO OrderDetails VALUES(220,10329,56,12);
INSERT INTO OrderDetails VALUES(221,10330,26,50);
INSERT INTO OrderDetails VALUES(222,10330,72,25);
INSERT INTO OrderDetails VALUES(223,10331,54,15);
INSERT INTO OrderDetails VALUES(224,10332,18,40);
INSERT INTO OrderDetails VALUES(225,10332,42,10);
INSERT INTO OrderDetails VALUES(226,10332,47,16);
INSERT INTO OrderDetails VALUES(227,10333,14,10);
INSERT INTO OrderDetails VALUES(228,10333,21,10);
INSERT INTO OrderDetails VALUES(229,10333,71,40);
INSERT INTO OrderDetails VALUES(230,10334,52,8);
INSERT INTO OrderDetails VALUES(231,10334,68,10);
INSERT INTO OrderDetails VALUES(232,10335,2,7);
INSERT INTO OrderDetails VALUES(233,10335,31,25);
INSERT INTO OrderDetails VALUES(234,10335,32,6);
INSERT INTO OrderDetails VALUES(235,10335,51,48);
INSERT INTO OrderDetails VALUES(236,10336,4,18);
INSERT INTO OrderDetails VALUES(237,10337,23,40);
INSERT INTO OrderDetails VALUES(238,10337,26,24);
INSERT INTO OrderDetails VALUES(239,10337,36,20);
INSERT INTO OrderDetails VALUES(240,10337,37,28);
INSERT INTO OrderDetails VALUES(241,10337,72,25);
INSERT INTO OrderDetails VALUES(242,10338,17,20);
INSERT INTO OrderDetails VALUES(243,10338,30,15);
INSERT INTO OrderDetails VALUES(244,10339,4,10);
INSERT INTO OrderDetails VALUES(245,10339,17,70);
INSERT INTO OrderDetails VALUES(246,10339,62,28);
INSERT INTO OrderDetails VALUES(247,10340,18,20);
INSERT INTO OrderDetails VALUES(248,10340,41,12);
INSERT INTO OrderDetails VALUES(249,10340,43,40);
INSERT INTO OrderDetails VALUES(250,10341,33,8);
INSERT INTO OrderDetails VALUES(251,10341,59,9);
INSERT INTO OrderDetails VALUES(252,10342,2,24);
INSERT INTO OrderDetails VALUES(253,10342,31,56);
INSERT INTO OrderDetails VALUES(254,10342,36,40);
INSERT INTO OrderDetails VALUES(255,10342,55,40);
INSERT INTO OrderDetails VALUES(256,10343,64,50);
INSERT INTO OrderDetails VALUES(257,10343,68,4);
INSERT INTO OrderDetails VALUES(258,10343,76,15);
INSERT INTO OrderDetails VALUES(259,10344,4,35);
INSERT INTO OrderDetails VALUES(260,10344,8,70);
INSERT INTO OrderDetails VALUES(261,10345,8,70);
INSERT INTO OrderDetails VALUES(262,10345,19,80);
INSERT INTO OrderDetails VALUES(263,10345,42,9);
INSERT INTO OrderDetails VALUES(264,10346,17,36);
INSERT INTO OrderDetails VALUES(265,10346,56,20);
INSERT INTO OrderDetails VALUES(266,10347,25,10);
INSERT INTO OrderDetails VALUES(267,10347,39,50);
INSERT INTO OrderDetails VALUES(268,10347,40,4);
INSERT INTO OrderDetails VALUES(269,10347,75,6);
INSERT INTO OrderDetails VALUES(270,10348,1,15);
INSERT INTO OrderDetails VALUES(271,10348,23,25);
INSERT INTO OrderDetails VALUES(272,10349,54,24);
INSERT INTO OrderDetails VALUES(273,10350,50,15);
INSERT INTO OrderDetails VALUES(274,10350,69,18);
INSERT INTO OrderDetails VALUES(275,10351,38,20);
INSERT INTO OrderDetails VALUES(276,10351,41,13);
INSERT INTO OrderDetails VALUES(277,10351,44,77);
INSERT INTO OrderDetails VALUES(278,10351,65,10);
INSERT INTO OrderDetails VALUES(279,10352,24,10);
INSERT INTO OrderDetails VALUES(280,10352,54,20);
INSERT INTO OrderDetails VALUES(281,10353,11,12);
INSERT INTO OrderDetails VALUES(282,10353,38,50);
INSERT INTO OrderDetails VALUES(283,10354,1,12);
INSERT INTO OrderDetails VALUES(284,10354,29,4);
INSERT INTO OrderDetails VALUES(285,10355,24,25);
INSERT INTO OrderDetails VALUES(286,10355,57,25);
INSERT INTO OrderDetails VALUES(287,10356,31,30);
INSERT INTO OrderDetails VALUES(288,10356,55,12);
INSERT INTO OrderDetails VALUES(289,10356,69,20);
INSERT INTO OrderDetails VALUES(290,10357,10,30);
INSERT INTO OrderDetails VALUES(291,10357,26,16);
INSERT INTO OrderDetails VALUES(292,10357,60,8);
INSERT INTO OrderDetails VALUES(293,10358,24,10);
INSERT INTO OrderDetails VALUES(294,10358,34,10);
INSERT INTO OrderDetails VALUES(295,10358,36,20);
INSERT INTO OrderDetails VALUES(296,10359,16,56);
INSERT INTO OrderDetails VALUES(297,10359,31,70);
INSERT INTO OrderDetails VALUES(298,10359,60,80);
INSERT INTO OrderDetails VALUES(299,10360,28,30);
INSERT INTO OrderDetails VALUES(300,10360,29,35);
INSERT INTO OrderDetails VALUES(301,10360,38,10);
INSERT INTO OrderDetails VALUES(302,10360,49,35);
INSERT INTO OrderDetails VALUES(303,10360,54,28);
INSERT INTO OrderDetails VALUES(304,10361,39,54);
INSERT INTO OrderDetails VALUES(305,10361,60,55);
INSERT INTO OrderDetails VALUES(306,10362,25,50);
INSERT INTO OrderDetails VALUES(307,10362,51,20);
INSERT INTO OrderDetails VALUES(308,10362,54,24);
INSERT INTO OrderDetails VALUES(309,10363,31,20);
INSERT INTO OrderDetails VALUES(310,10363,75,12);
INSERT INTO OrderDetails VALUES(311,10363,76,12);
INSERT INTO OrderDetails VALUES(312,10364,69,30);
INSERT INTO OrderDetails VALUES(313,10364,71,5);
INSERT INTO OrderDetails VALUES(314,10365,11,24);
INSERT INTO OrderDetails VALUES(315,10366,65,5);
INSERT INTO OrderDetails VALUES(316,10366,77,5);
INSERT INTO OrderDetails VALUES(317,10367,34,36);
INSERT INTO OrderDetails VALUES(318,10367,54,18);
INSERT INTO OrderDetails VALUES(319,10367,65,15);
INSERT INTO OrderDetails VALUES(320,10367,77,7);
INSERT INTO OrderDetails VALUES(321,10368,21,5);
INSERT INTO OrderDetails VALUES(322,10368,28,13);
INSERT INTO OrderDetails VALUES(323,10368,57,25);
INSERT INTO OrderDetails VALUES(324,10368,64,35);
INSERT INTO OrderDetails VALUES(325,10369,29,20);
INSERT INTO OrderDetails VALUES(326,10369,56,18);
INSERT INTO OrderDetails VALUES(327,10370,1,15);
INSERT INTO OrderDetails VALUES(328,10370,64,30);
INSERT INTO OrderDetails VALUES(329,10370,74,20);
INSERT INTO OrderDetails VALUES(330,10371,36,6);
INSERT INTO OrderDetails VALUES(331,10372,20,12);
INSERT INTO OrderDetails VALUES(332,10372,38,40);
INSERT INTO OrderDetails VALUES(333,10372,60,70);
INSERT INTO OrderDetails VALUES(334,10372,72,42);
INSERT INTO OrderDetails VALUES(335,10373,58,80);
INSERT INTO OrderDetails VALUES(336,10373,71,50);
INSERT INTO OrderDetails VALUES(337,10374,31,30);
INSERT INTO OrderDetails VALUES(338,10374,58,15);
INSERT INTO OrderDetails VALUES(339,10375,14,15);
INSERT INTO OrderDetails VALUES(340,10375,54,10);
INSERT INTO OrderDetails VALUES(341,10376,31,42);
INSERT INTO OrderDetails VALUES(342,10377,28,20);
INSERT INTO OrderDetails VALUES(343,10377,39,20);
INSERT INTO OrderDetails VALUES(344,10378,71,6);
INSERT INTO OrderDetails VALUES(345,10379,41,8);
INSERT INTO OrderDetails VALUES(346,10379,63,16);
INSERT INTO OrderDetails VALUES(347,10379,65,20);
INSERT INTO OrderDetails VALUES(348,10380,30,18);
INSERT INTO OrderDetails VALUES(349,10380,53,20);
INSERT INTO OrderDetails VALUES(350,10380,60,6);
INSERT INTO OrderDetails VALUES(351,10380,70,30);
INSERT INTO OrderDetails VALUES(352,10381,74,14);
INSERT INTO OrderDetails VALUES(353,10382,5,32);
INSERT INTO OrderDetails VALUES(354,10382,18,9);
INSERT INTO OrderDetails VALUES(355,10382,29,14);
INSERT INTO OrderDetails VALUES(356,10382,33,60);
INSERT INTO OrderDetails VALUES(357,10382,74,50);
INSERT INTO OrderDetails VALUES(358,10383,13,20);
INSERT INTO OrderDetails VALUES(359,10383,50,15);
INSERT INTO OrderDetails VALUES(360,10383,56,20);
INSERT INTO OrderDetails VALUES(361,10384,20,28);
INSERT INTO OrderDetails VALUES(362,10384,60,15);
INSERT INTO OrderDetails VALUES(363,10385,7,10);
INSERT INTO OrderDetails VALUES(364,10385,60,20);
INSERT INTO OrderDetails VALUES(365,10385,68,8);
INSERT INTO OrderDetails VALUES(366,10386,24,15);
INSERT INTO OrderDetails VALUES(367,10386,34,10);
INSERT INTO OrderDetails VALUES(368,10387,24,15);
INSERT INTO OrderDetails VALUES(369,10387,28,6);
INSERT INTO OrderDetails VALUES(370,10387,59,12);
INSERT INTO OrderDetails VALUES(371,10387,71,15);
INSERT INTO OrderDetails VALUES(372,10388,45,15);
INSERT INTO OrderDetails VALUES(373,10388,52,20);
INSERT INTO OrderDetails VALUES(374,10388,53,40);
INSERT INTO OrderDetails VALUES(375,10389,10,16);
INSERT INTO OrderDetails VALUES(376,10389,55,15);
INSERT INTO OrderDetails VALUES(377,10389,62,20);
INSERT INTO OrderDetails VALUES(378,10389,70,30);
INSERT INTO OrderDetails VALUES(379,10390,31,60);
INSERT INTO OrderDetails VALUES(380,10390,35,40);
INSERT INTO OrderDetails VALUES(381,10390,46,45);
INSERT INTO OrderDetails VALUES(382,10390,72,24);
INSERT INTO OrderDetails VALUES(383,10391,13,18);
INSERT INTO OrderDetails VALUES(384,10392,69,50);
INSERT INTO OrderDetails VALUES(385,10393,2,25);
INSERT INTO OrderDetails VALUES(386,10393,14,42);
INSERT INTO OrderDetails VALUES(387,10393,25,7);
INSERT INTO OrderDetails VALUES(388,10393,26,70);
INSERT INTO OrderDetails VALUES(389,10393,31,32);
INSERT INTO OrderDetails VALUES(390,10394,13,10);
INSERT INTO OrderDetails VALUES(391,10394,62,10);
INSERT INTO OrderDetails VALUES(392,10395,46,28);
INSERT INTO OrderDetails VALUES(393,10395,53,70);
INSERT INTO OrderDetails VALUES(394,10395,69,8);
INSERT INTO OrderDetails VALUES(395,10396,23,40);
INSERT INTO OrderDetails VALUES(396,10396,71,60);
INSERT INTO OrderDetails VALUES(397,10396,72,21);
INSERT INTO OrderDetails VALUES(398,10397,21,10);
INSERT INTO OrderDetails VALUES(399,10397,51,18);
INSERT INTO OrderDetails VALUES(400,10398,35,30);
INSERT INTO OrderDetails VALUES(401,10398,55,120);
INSERT INTO OrderDetails VALUES(402,10399,68,60);
INSERT INTO OrderDetails VALUES(403,10399,71,30);
INSERT INTO OrderDetails VALUES(404,10399,76,35);
INSERT INTO OrderDetails VALUES(405,10399,77,14);
INSERT INTO OrderDetails VALUES(406,10400,29,21);
INSERT INTO OrderDetails VALUES(407,10400,35,35);
INSERT INTO OrderDetails VALUES(408,10400,49,30);
INSERT INTO OrderDetails VALUES(409,10401,30,18);
INSERT INTO OrderDetails VALUES(410,10401,56,70);
INSERT INTO OrderDetails VALUES(411,10401,65,20);
INSERT INTO OrderDetails VALUES(412,10401,71,60);
INSERT INTO OrderDetails VALUES(413,10402,23,60);
INSERT INTO OrderDetails VALUES(414,10402,63,65);
INSERT INTO OrderDetails VALUES(415,10403,16,21);
INSERT INTO OrderDetails VALUES(416,10403,48,70);
INSERT INTO OrderDetails VALUES(417,10404,26,30);
INSERT INTO OrderDetails VALUES(418,10404,42,40);
INSERT INTO OrderDetails VALUES(419,10404,49,30);
INSERT INTO OrderDetails VALUES(420,10405,3,50);
INSERT INTO OrderDetails VALUES(421,10406,1,10);
INSERT INTO OrderDetails VALUES(422,10406,21,30);
INSERT INTO OrderDetails VALUES(423,10406,28,42);
INSERT INTO OrderDetails VALUES(424,10406,36,5);
INSERT INTO OrderDetails VALUES(425,10406,40,2);
INSERT INTO OrderDetails VALUES(426,10407,11,30);
INSERT INTO OrderDetails VALUES(427,10407,69,15);
INSERT INTO OrderDetails VALUES(428,10407,71,15);
INSERT INTO OrderDetails VALUES(429,10408,37,10);
INSERT INTO OrderDetails VALUES(430,10408,54,6);
INSERT INTO OrderDetails VALUES(431,10408,62,35);
INSERT INTO OrderDetails VALUES(432,10409,14,12);
INSERT INTO OrderDetails VALUES(433,10409,21,12);
INSERT INTO OrderDetails VALUES(434,10410,33,49);
INSERT INTO OrderDetails VALUES(435,10410,59,16);
INSERT INTO OrderDetails VALUES(436,10411,41,25);
INSERT INTO OrderDetails VALUES(437,10411,44,40);
INSERT INTO OrderDetails VALUES(438,10411,59,9);
INSERT INTO OrderDetails VALUES(439,10412,14,20);
INSERT INTO OrderDetails VALUES(440,10413,1,24);
INSERT INTO OrderDetails VALUES(441,10413,62,40);
INSERT INTO OrderDetails VALUES(442,10413,76,14);
INSERT INTO OrderDetails VALUES(443,10414,19,18);
INSERT INTO OrderDetails VALUES(444,10414,33,50);
INSERT INTO OrderDetails VALUES(445,10415,17,2);
INSERT INTO OrderDetails VALUES(446,10415,33,20);
INSERT INTO OrderDetails VALUES(447,10416,19,20);
INSERT INTO OrderDetails VALUES(448,10416,53,10);
INSERT INTO OrderDetails VALUES(449,10416,57,20);
INSERT INTO OrderDetails VALUES(450,10417,38,50);
INSERT INTO OrderDetails VALUES(451,10417,46,2);
INSERT INTO OrderDetails VALUES(452,10417,68,36);
INSERT INTO OrderDetails VALUES(453,10417,77,35);
INSERT INTO OrderDetails VALUES(454,10418,2,60);
INSERT INTO OrderDetails VALUES(455,10418,47,55);
INSERT INTO OrderDetails VALUES(456,10418,61,16);
INSERT INTO OrderDetails VALUES(457,10418,74,15);
INSERT INTO OrderDetails VALUES(458,10419,60,60);
INSERT INTO OrderDetails VALUES(459,10419,69,20);
INSERT INTO OrderDetails VALUES(460,10420,9,20);
INSERT INTO OrderDetails VALUES(461,10420,13,2);
INSERT INTO OrderDetails VALUES(462,10420,70,8);
INSERT INTO OrderDetails VALUES(463,10420,73,20);
INSERT INTO OrderDetails VALUES(464,10421,19,4);
INSERT INTO OrderDetails VALUES(465,10421,26,30);
INSERT INTO OrderDetails VALUES(466,10421,53,15);
INSERT INTO OrderDetails VALUES(467,10421,77,10);
INSERT INTO OrderDetails VALUES(468,10422,26,2);
INSERT INTO OrderDetails VALUES(469,10423,31,14);
INSERT INTO OrderDetails VALUES(470,10423,59,20);
INSERT INTO OrderDetails VALUES(471,10424,35,60);
INSERT INTO OrderDetails VALUES(472,10424,38,49);
INSERT INTO OrderDetails VALUES(473,10424,68,30);
INSERT INTO OrderDetails VALUES(474,10425,55,10);
INSERT INTO OrderDetails VALUES(475,10425,76,20);
INSERT INTO OrderDetails VALUES(476,10426,56,5);
INSERT INTO OrderDetails VALUES(477,10426,64,7);
INSERT INTO OrderDetails VALUES(478,10427,14,35);
INSERT INTO OrderDetails VALUES(479,10428,46,20);
INSERT INTO OrderDetails VALUES(480,10429,50,40);
INSERT INTO OrderDetails VALUES(481,10429,63,35);
INSERT INTO OrderDetails VALUES(482,10430,17,45);
INSERT INTO OrderDetails VALUES(483,10430,21,50);
INSERT INTO OrderDetails VALUES(484,10430,56,30);
INSERT INTO OrderDetails VALUES(485,10430,59,70);
INSERT INTO OrderDetails VALUES(486,10431,17,50);
INSERT INTO OrderDetails VALUES(487,10431,40,50);
INSERT INTO OrderDetails VALUES(488,10431,47,30);
INSERT INTO OrderDetails VALUES(489,10432,26,10);
INSERT INTO OrderDetails VALUES(490,10432,54,40);
INSERT INTO OrderDetails VALUES(491,10433,56,28);
INSERT INTO OrderDetails VALUES(492,10434,11,6);
INSERT INTO OrderDetails VALUES(493,10434,76,18);
INSERT INTO OrderDetails VALUES(494,10435,2,10);
INSERT INTO OrderDetails VALUES(495,10435,22,12);
INSERT INTO OrderDetails VALUES(496,10435,72,10);
INSERT INTO OrderDetails VALUES(497,10436,46,5);
INSERT INTO OrderDetails VALUES(498,10436,56,40);
INSERT INTO OrderDetails VALUES(499,10436,64,30);
INSERT INTO OrderDetails VALUES(500,10436,75,24);
INSERT INTO OrderDetails VALUES(501,10437,53,15);
INSERT INTO OrderDetails VALUES(502,10438,19,15);
INSERT INTO OrderDetails VALUES(503,10438,34,20);
INSERT INTO OrderDetails VALUES(504,10438,57,15);
INSERT INTO OrderDetails VALUES(505,10439,12,15);
INSERT INTO OrderDetails VALUES(506,10439,16,16);
INSERT INTO OrderDetails VALUES(507,10439,64,6);
INSERT INTO OrderDetails VALUES(508,10439,74,30);
INSERT INTO OrderDetails VALUES(509,10440,2,45);
INSERT INTO OrderDetails VALUES(510,10440,16,49);
INSERT INTO OrderDetails VALUES(511,10440,29,24);
INSERT INTO OrderDetails VALUES(512,10440,61,90);
INSERT INTO OrderDetails VALUES(513,10441,27,50);
INSERT INTO OrderDetails VALUES(514,10442,11,30);
INSERT INTO OrderDetails VALUES(515,10442,54,80);
INSERT INTO OrderDetails VALUES(516,10442,66,60);
INSERT INTO OrderDetails VALUES(517,10443,11,6);
INSERT INTO OrderDetails VALUES(518,10443,28,12);
`;let Oa=null;function _h(){return Oa}async function Md(){try{Oa=await eS(),Oa.run(iS),console.log("Database initialized successfully")}catch(r){throw console.error("database.initDatabase: Failed to initialize database: ",r),r}}function rS(r){const e=_h(),t=`
    SELECT 
      p."from" as from_col,
      p."table" as to_table,
      p."to" as to_col
    FROM pragma_foreign_key_list('${r}') p
  `;try{const i=e.exec(t)[0];if(!i)return{};const n={};return i.values.forEach(s=>{n[s[0]]={table:s[1],column:s[2]}}),n}catch(i){return console.error("Error getting foreign keys:",i),{}}}function nS(){const r=_h();return{name:"Northwind",tables:r.exec(`
    SELECT name 
    FROM sqlite_master 
    WHERE type='table' 
    AND name NOT LIKE 'sqlite_%'
    ORDER BY name
  `)[0].values.map(t=>t[0]).map(t=>{const i=r.exec(`PRAGMA table_info([${t}])`)[0],n=rS(t),s=i.values.map(o=>({name:o[1],type:o[2],notnull:o[3],pk:o[5],fk:n[o[1]]}));return{name:t,columns:s}})}}function sS(r,e){const t=[/near "([^"]+)": syntax error/,/no such table: ([^\s]+)/,/no such column: ([^\s]+)/];for(const i of t){const n=e.match(i);if(n){const s=n[1],o=r.split(`
`);for(let l=0;l<o.length;l++)if(o[l].includes(s))return l+1}}return null}function oS(r){try{const e=_h();if(r.trim().toLowerCase().startsWith("select")){const i=e.exec(r)[0];return i?{results:i.values.map(s=>{const o={};return i.columns.forEach((l,a)=>{o[l]=s[a]}),o}),columns:i.columns,error:null,isModificationQuery:!1}:{results:[],columns:[],error:null,isModificationQuery:!1}}else return e.run(r),{results:[],columns:[],error:null,isModificationQuery:!0,affectedRows:e.getRowsModified()}}catch(e){const t=e.message,i=sS(r,t);return{results:[],columns:[],error:t,errorLine:i,isModificationQuery:!1}}}var lS=Ae('<button class="toggle-btn collapsed svelte-3ad19a" title="Expand sidebar"><i class="fas fa-database"></i></button>'),aS=Ae('<i class="fas fa-database database-icon svelte-3ad19a"></i> <span class="title-text svelte-3ad19a">Northwind</span> <button class="toggle-btn svelte-3ad19a" title="Collapse sidebar"><i class="fas fa-chevron-left"></i></button>',1),hS=Ae('<i class="fas fa-key icon key-icon svelte-3ad19a"></i>'),cS=Ae('<i class="fas fa-key icon fk-icon svelte-3ad19a"></i>'),fS=Ae('<i class="fas fa-columns icon column-icon svelte-3ad19a"></i>'),uS=Ae('<div class="tree-node column svelte-3ad19a"><!> <span class="label svelte-3ad19a"> <span class="metadata svelte-3ad19a"> </span></span></div>'),dS=Ae('<div class="tree-children svelte-3ad19a"></div>'),pS=Ae('<div class="tree-item svelte-3ad19a"><button class="tree-node svelte-3ad19a"><i></i> <i class="fas fa-table icon table-icon svelte-3ad19a"></i> <span class="label svelte-3ad19a"> </span> <span class="count svelte-3ad19a"> </span></button> <!></div>'),mS=Ae('<div class="tree-view svelte-3ad19a"></div>'),gS=Ae('<div class="context-menu svelte-3ad19a"><button class="menu-item svelte-3ad19a"><i class="fas fa-table svelte-3ad19a"></i> Show Data</button></div>'),SS=Ae('<div class="tooltip-line svelte-3ad19a"> </div>'),TS=Ae('<div class="tooltip svelte-3ad19a"></div>'),ES=Ae('<div class="sidebar svelte-3ad19a"><div class="title svelte-3ad19a"><!></div> <div class="content svelte-3ad19a"><!></div> <div class="resize-handle svelte-3ad19a"><div class="resize-indicator svelte-3ad19a"><div class="resize-line svelte-3ad19a"></div> <div class="resize-dots svelte-3ad19a"><div class="resize-dot svelte-3ad19a"></div> <div class="resize-dot svelte-3ad19a"></div> <div class="resize-dot svelte-3ad19a"></div></div> <div class="resize-line svelte-3ad19a"></div></div></div></div> <!> <!>',1);function OS(r,e){hn(e,!1);const t=j1();let i=$e(300),n=$e(!1),s=$e(!1),o,l,a=null,h=$e(null),c=$e(new Set),u=$e(!1),p=$e({visible:!1,x:0,y:0,tableName:""}),g=$e({visible:!1,x:0,y:0,content:"",timer:null});async function T(){try{await Md(),re(h,nS())}catch(G){console.error("Failed to initialize database:",G)}}T();function E(){re(u,!b(u)),b(u)?re(i,50):re(i,300)}function y(G){b(c).has(G)?b(c).delete(G):b(c).add(G),re(c,new Set(b(c)))}function I(G){const ee=[];G.notnull&&ee.push("NOT NULL");let Te=`Type: ${G.type}`;return ee.length&&(Te+=`
Constraints: ${ee.join(", ")}`),G.fk&&(Te+=`
Foreign Key: References ${G.fk.table}(${G.fk.column})`),Te}function w(G){return`(${G.type})`}function A(G,ee){G.preventDefault(),re(p,{visible:!0,x:G.pageX,y:G.pageY,tableName:ee})}function L(){_i(p,b(p).visible=!1)}function C(){t("showTableData",{tableName:b(p).tableName}),L()}function x(G){b(p).visible&&!G.target.closest(".context-menu")&&L()}function k(G,ee){const Ee=G.currentTarget.getBoundingClientRect();_i(g,b(g).timer=setTimeout(()=>{re(g,{...b(g),visible:!0,x:Ee.right+10,y:Ee.top,content:I(ee)})},1e3))}function z(){b(g).timer&&clearTimeout(b(g).timer),_i(g,b(g).visible=!1)}function K(G){if(b(u))return;const ee=G.touches[0];a=window.setTimeout(()=>{re(s,!0),o=ee.pageX,l=b(i),G.target.classList.add("touch-active")},1e3),G.target.classList.add("touch-highlight")}function $(G){if(!b(s)){a!==null&&(clearTimeout(a),a=null);return}G.preventDefault();const Te=G.touches[0].pageX-o;re(i,Math.max(200,Math.min(600,l+Te)))}function M(G){a!==null&&(clearTimeout(a),a=null),b(s)&&re(s,!1),G.target.classList.remove("touch-active","touch-highlight")}function _(G){b(u)||(re(n,!0),o=G.pageX,l=b(i),window.addEventListener("mousemove",P),window.addEventListener("mouseup",W),document.body.style.cursor="col-resize",document.body.style.userSelect="none")}function P(G){if(!b(n))return;const ee=G.pageX-o;re(i,Math.max(200,Math.min(600,l+ee)))}function W(){re(n,!1),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",W),document.body.style.cursor="",document.body.style.userSelect=""}ll();var ne=ES();He("click",da,x);var se=pr(ne),ge=oe(se),Ie=oe(ge);ct(Ie,()=>b(u),G=>{var ee=lS();He("click",ee,E),me(G,ee)},G=>{var ee=aS(),Te=xe(pr(ee),4);He("click",Te,E),me(G,ee)});var ae=xe(ge,2),Z=oe(ae);ct(Z,()=>b(h)&&!b(u),G=>{var ee=mS();gr(ee,5,()=>b(h).tables,mr,(Te,Ee)=>{var it=pS(),lt=oe(it),Jt=oe(lt);const pn=xh(()=>`fas fa-chevron-${(b(c).has(b(Ee).name)?"down":"right")??""} chevron svelte-3ad19a`);var Ct=xe(Jt,4),mn=oe(Ct),Zi=xe(Ct,2),Is=oe(Zi),Me=xe(lt,2);ct(Me,()=>b(c).has(b(Ee).name),er=>{var gn=dS();gr(gn,5,()=>b(Ee).columns,mr,(Sn,pi)=>{var mi=uS(),vs=oe(mi);ct(vs,()=>b(pi).pk,at=>{var ir=hS();me(at,ir)},at=>{var ir=Gn(),bs=pr(ir);ct(bs,()=>b(pi).fk,Ar=>{var On=cS();me(Ar,On)},Ar=>{var On=fS();me(Ar,On)},!0),me(at,ir)});var Tn=xe(vs,2),Ns=oe(Tn),En=xe(Ns),tr=oe(En);Ke(()=>Ot(tr,w(b(pi)))),Ke(()=>{jt(Tn,"required",b(pi).notnull),Ot(Ns,`${b(pi).name??""} `)}),He("mouseenter",mi,at=>k(at,b(pi))),He("mouseleave",mi,z),me(Sn,mi)}),me(er,gn)}),Ke(()=>{B1(Jt,b(pn)),Ot(mn,b(Ee).name),Ot(Is,b(Ee).columns.length)}),He("click",lt,()=>y(b(Ee).name)),He("contextmenu",lt,Vn(er=>A(er,b(Ee).name))),me(Te,it)}),me(G,ee)});var ie=xe(ae,2),pe=xe(se,2);ct(pe,()=>b(p).visible,G=>{var ee=gS(),Te=oe(ee);Ke(()=>Hr(ee,"style",`left: ${b(p).x??""}px; top: ${b(p).y??""}px`)),He("click",Te,C),me(G,ee)});var Se=xe(pe,2);ct(Se,()=>b(g).visible,G=>{var ee=TS();gr(ee,5,()=>b(g).content.split(`
`),mr,(Te,Ee)=>{var it=SS(),lt=oe(it);Ke(()=>Ot(lt,b(Ee))),me(Te,it)}),Ke(()=>Hr(ee,"style",`left: ${b(g).x??""}px; top: ${b(g).y??""}px`)),me(G,ee)}),Ke(()=>{Hr(se,"style",`width: ${b(i)??""}px`),jt(se,"collapsed",b(u)),jt(ge,"collapsed",b(u)),jt(ae,"collapsed",b(u)),jt(ie,"resizing",b(n)),jt(ie,"touch-resizing",b(s)),jt(ie,"hidden",b(u))}),He("mousedown",ie,_),He("touchstart",ie,Vn(K)),He("touchmove",ie,Vn($)),He("touchend",ie,Vn(M)),me(r,ne),cn()}var yS=Ae('<div class="tab svelte-1k0t1jg"><span> </span> <button class="close-btn svelte-1k0t1jg">×</button></div>');function IS(r,e){hn(e,!1),St(e,"query",8,"");let t=St(e,"active",8,!1),i=St(e,"onClose",8),n=St(e,"onClick",8),s=St(e,"index",8);function o(u){u.target.closest(".close-btn")||n()()}ll();var l=yS(),a=oe(l),h=oe(a),c=xe(a,2);Ke(()=>{jt(l,"active",t()),Ot(h,`Query ${s()+1}`)}),He("click",c,function(...u){var p;(p=i())==null||p.apply(this,u)}),He("click",l,o),me(r,l),cn()}let Ne=class Pd{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=Yr(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),ni.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Yr(this,e,t);let i=[];return this.decompose(e,t,i,0),ni.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new zn(this),s=new zn(e);for(let o=t,l=t;;){if(n.next(o),s.next(o),o=0,n.lineBreak!=s.lineBreak||n.done!=s.done||n.value!=s.value)return!1;if(l+=n.value.length,n.done||l>=i)return!0}}iter(e=1){return new zn(this,e)}iterRange(e,t=this.length){return new _d(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Bd(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Pd.empty:e.length<=32?new Be(e):ni.from(Be.split(e,[]))}};class Be extends Ne{constructor(e,t=vS(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.text[s],l=n+o.length;if((t?i:l)>=e)return new NS(n,l,i,o);n=l+1,i++}}decompose(e,t,i,n){let s=e<=0&&t>=this.length?this:new Be(cf(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(n&1){let o=i.pop(),l=lo(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new Be(l,o.length+s.length));else{let a=l.length>>1;i.push(new Be(l.slice(0,a)),new Be(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Be))return super.replace(e,t,i);[e,t]=Yr(this,e,t);let n=lo(this.text,lo(i.text,cf(this.text,0,e)),t),s=this.length+i.length-(t-e);return n.length<=32?new Be(n,s):ni.from(Be.split(n,[]),s)}sliceString(e,t=this.length,i=`
`){[e,t]=Yr(this,e,t);let n="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(n+=i),e<a&&t>s&&(n+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let s of e)i.push(s),n+=s.length+1,i.length==32&&(t.push(new Be(i,n)),i=[],n=-1);return n>-1&&t.push(new Be(i,n)),t}}class ni extends Ne{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,n){for(let s=0;;s++){let o=this.children[s],l=n+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,n);n=l+1,i=a+1}}decompose(e,t,i,n){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=n&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?i.push(l):l.decompose(e-o,t-o,i,h)}o=a+1}}replace(e,t,i){if([e,t]=Yr(this,e,t),i.lines<this.lines)for(let n=0,s=0;n<this.children.length;n++){let o=this.children[n],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[n]=a,new ni(c,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=Yr(this,e,t);let n="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(n+=i),e<a&&t>o&&(n+=l.sliceString(e-o,t-o,i)),o=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ni))return 0;let i=0,[n,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,s+=t){if(n==o||s==l)return i;let a=this.children[n],h=e.children[s];if(a!=h)return i+a.scanIdentical(h,t);i+=a.length+1}}static from(e,t=e.reduce((i,n)=>i+n.length+1,-1)){let i=0;for(let g of e)i+=g.lines;if(i<32){let g=[];for(let T of e)T.flatten(g);return new Be(g,t)}let n=Math.max(32,i>>5),s=n<<1,o=n>>1,l=[],a=0,h=-1,c=[];function u(g){let T;if(g.lines>s&&g instanceof ni)for(let E of g.children)u(E);else g.lines>o&&(a>o||!a)?(p(),l.push(g)):g instanceof Be&&a&&(T=c[c.length-1])instanceof Be&&g.lines+T.lines<=32?(a+=g.lines,h+=g.length+1,c[c.length-1]=new Be(T.text.concat(g.text),T.length+1+g.length)):(a+g.lines>n&&p(),a+=g.lines,h+=g.length+1,c.push(g))}function p(){a!=0&&(l.push(c.length==1?c[0]:ni.from(c,h)),h=-1,a=c.length=0)}for(let g of e)u(g);return p(),l.length==1?l[0]:new ni(l,t)}}Ne.empty=new Be([""],0);function vS(r){let e=-1;for(let t of r)e+=t.length+1;return e}function lo(r,e,t=0,i=1e9){for(let n=0,s=0,o=!0;s<r.length&&n<=i;s++){let l=r[s],a=n+l.length;a>=t&&(a>i&&(l=l.slice(0,i-n)),n<t&&(l=l.slice(t-n)),o?(e[e.length-1]+=l,o=!1):e.push(l)),n=a+1}return e}function cf(r,e,t){return lo(r,[""],e,t)}class zn{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Be?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],s=this.offsets[i],o=s>>1,l=n instanceof Be?n.text.length:n.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(n instanceof Be){let a=n.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=n.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Be?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _d{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new zn(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Bd{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ne.prototype[Symbol.iterator]=function(){return this.iter()},zn.prototype[Symbol.iterator]=_d.prototype[Symbol.iterator]=Bd.prototype[Symbol.iterator]=function(){return this});class NS{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function Yr(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}let Wr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Wr.length;r++)Wr[r]+=Wr[r-1];function bS(r){for(let e=1;e<Wr.length;e+=2)if(Wr[e]>r)return Wr[e-1]<=r;return!1}function ff(r){return r>=127462&&r<=127487}const uf=8205;function et(r,e,t=!0,i=!0){return(t?Fd:AS)(r,e,i)}function Fd(r,e,t){if(e==r.length)return e;e&&zd(r.charCodeAt(e))&&qd(r.charCodeAt(e-1))&&e--;let i=Ye(r,e);for(e+=Pt(i);e<r.length;){let n=Ye(r,e);if(i==uf||n==uf||t&&bS(n))e+=Pt(n),i=n;else if(ff(n)){let s=0,o=e-2;for(;o>=0&&ff(Ye(r,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function AS(r,e,t){for(;e>0;){let i=Fd(r,e-2,t);if(i<e)return i;e--}return 0}function zd(r){return r>=56320&&r<57344}function qd(r){return r>=55296&&r<56320}function Ye(r,e){let t=r.charCodeAt(e);if(!qd(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return zd(i)?(t-55296<<10)+(i-56320)+65536:t}function Bh(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Pt(r){return r<65536?1:2}const ya=/\r\n?|\n/;var ft=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(ft||(ft={}));class hi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,n,s),n+=s):n+=o,i+=s}}iterChangedRanges(e,t=!1){Ia(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new hi(e)}composeDesc(e){return this.empty?e:e.empty?this:Hd(this,e)}mapDesc(e,t=!1){return e.empty?this:va(this,e,t)}mapPos(e,t=-1,i=ft.Simple){let n=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return s+(e-n);s+=l}else{if(i!=ft.Simple&&h>=e&&(i==ft.TrackDel&&n<e&&h>e||i==ft.TrackBefore&&n<e||i==ft.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?s:s+a;s+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return s}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let s=this.sections[i++],o=this.sections[i++],l=n+s;if(o>=0&&n<=t&&l>=e)return n<e&&l>t?"cover":!0;n=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new hi(e)}static create(e){return new hi(e)}}class We extends hi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Ia(this,(t,i,n,s,o)=>e=e.replace(n,n+(i-t),o),!1),e}mapDesc(e,t=!1){return va(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,s=0;n<t.length;n+=2){let o=t[n],l=t[n+1];if(l>=0){t[n]=l,t[n+1]=o;let a=n>>1;for(;i.length<a;)i.push(Ne.empty);i.push(o?e.slice(s,s+o):Ne.empty)}s+=o}return new We(t,i)}compose(e){return this.empty?e:e.empty?this:Hd(this,e,!0)}map(e,t=!1){return e.empty?this:va(this,e,t,!0)}iterChanges(e,t=!1){Ia(this,e,t)}get desc(){return hi.create(this.sections)}filter(e){let t=[],i=[],n=[],s=new Qn(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);nt(n,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;nt(t,c,u),u>0&&Vi(i,t,s.text),s.forward(c),l+=c}let h=e[o++];for(;l<h;){if(s.done)break e;let c=Math.min(s.len,h-l);nt(t,c,-1),nt(n,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new We(t,i),filtered:hi.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):n==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!n.length)return;o<t&&nt(n,t-o,-1);let u=new We(n,s);l=l?l.compose(u.map(l)):u,n=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof We){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:p=u,insert:g}=c;if(u>p||u<0||p>t)throw new RangeError(`Invalid change range ${u} to ${p} (in doc of length ${t})`);let T=g?typeof g=="string"?Ne.of(g.split(i||ya)):g:Ne.empty,E=T.length;if(u==p&&E==0)return;u<o&&a(),u>o&&nt(n,u-o,-1),nt(n,p-u,E),Vi(s,n,T),o=p}}return h(e),a(!l),l}static empty(e){return new We(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let s=e[n];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<n;)i.push(Ne.empty);i[n]=Ne.of(s.slice(1)),t.push(s[0],i[n].length)}}}return new We(t,i)}static createSet(e,t){return new We(e,t)}}function nt(r,e,t,i=!1){if(e==0&&t<=0)return;let n=r.length-2;n>=0&&t<=0&&t==r[n+1]?r[n]+=e:e==0&&r[n]==0?r[n+1]+=t:i?(r[n]+=e,r[n+1]+=t):r.push(e,t)}function Vi(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Ne.empty);r.push(t)}}function Ia(r,e,t){let i=r.inserted;for(let n=0,s=0,o=0;o<r.sections.length;){let l=r.sections[o++],a=r.sections[o++];if(a<0)n+=l,s+=l;else{let h=n,c=s,u=Ne.empty;for(;h+=l,c+=a,a&&i&&(u=u.append(i[o-2>>1])),!(t||o==r.sections.length||r.sections[o+1]<0);)l=r.sections[o++],a=r.sections[o++];e(n,h,s,c,u),n=h,s=c}}}function va(r,e,t,i=!1){let n=[],s=i?[]:null,o=new Qn(r),l=new Qn(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);nt(n,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(nt(n,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&(nt(n,0,o.ins),s&&Vi(s,n,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;nt(n,h,a<o.i?o.ins:0),s&&a<o.i&&Vi(s,n,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?We.createSet(n,s):hi.create(n);throw new Error("Mismatched change set lengths")}}function Hd(r,e,t=!1){let i=[],n=t?[]:null,s=new Qn(r),o=new Qn(e);for(let l=!1;;){if(s.done&&o.done)return n?We.createSet(i,n):hi.create(i);if(s.ins==0)nt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)nt(i,0,o.ins,l),n&&Vi(n,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;nt(i,a,c,l),n&&c&&Vi(n,i,o.text)}else o.ins==-1?(nt(i,s.off?0:s.len,a,l),n&&Vi(n,i,s.textBit(a))):(nt(i,s.off?0:s.len,o.off?0:o.ins,l),n&&!o.off&&Vi(n,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>h),s.forward2(a),o.forward(a)}}}}class Qn{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ne.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Ne.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ur{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new ur(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return D.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return D.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return D.range(e.anchor,e.head)}static create(e,t,i){return new ur(e,t,i)}}class D{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:D.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new D([this.main],0)}addRange(e,t=!0){return D.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,D.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new D(e.ranges.map(t=>ur.fromJSON(t)),e.main)}static single(e,t=e){return new D([D.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let s=e[n];if(s.empty?s.from<=i:s.from<i)return D.normalized(e.slice(),t);i=s.to}return new D(e,t)}static cursor(e,t=0,i,n){return ur.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(n??16777215)<<6)}static range(e,t,i,n){let s=(i??16777215)<<6|(n==null?7:Math.min(6,n));return t<e?ur.create(t,e,48|s):ur.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let i=e[t];e.sort((n,s)=>n.from-s.from),t=e.indexOf(i);for(let n=1;n<e.length;n++){let s=e[n],o=e[n-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);n<=t&&t--,e.splice(--n,2,s.anchor>s.head?D.range(a,l):D.range(l,a))}}return new D(e,t)}}function Wd(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Fh=0;class H{constructor(e,t,i,n,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=Fh++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new H(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:zh),!!e.static,e.enables)}of(e){return new ao([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ao(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ao(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function zh(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class ao{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Fh++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,p){if(a&&p.docChanged||h&&(p.docChanged||p.selection)||Na(u,c)){let g=i(u);if(l?!df(g,u.values[o],n):!n(g,u.values[o]))return u.values[o]=g,1}return 0},reconfigure:(u,p)=>{let g,T=p.config.address[s];if(T!=null){let E=xo(p,T);if(this.dependencies.every(y=>y instanceof H?p.facet(y)===u.facet(y):y instanceof tt?p.field(y,!1)==u.field(y,!1):!0)||(l?df(g=i(u),E,n):n(g=i(u),E)))return u.values[o]=E,0}else g=i(u);return u.values[o]=g,1}}}}function df(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Na(r,e){let t=!1;for(let i of e)qn(r,i)&1&&(t=!0);return t}function wS(r,e,t){let i=t.map(a=>r[a.id]),n=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=r[e.id]>>1;function l(a){let h=[];for(let c=0;c<i.length;c++){let u=xo(a,i[c]);if(n[c]==2)for(let p of u)h.push(p);else h.push(u)}return e.combine(h)}return{create(a){for(let h of i)qn(a,h);return a.values[o]=l(a),1},update(a,h){if(!Na(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=Na(a,i),u=h.config.facets[e.id],p=h.facet(e);if(u&&!c&&zh(t,u))return a.values[o]=p,0;let g=l(a);return e.compare(g,p)?(a.values[o]=p,0):(a.values[o]=g,1)}}}const pf=H.define({static:!0});class tt{constructor(e,t,i,n,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=s,this.provides=void 0}static define(e){let t=new tt(Fh++,e.create,e.update,e.compare||((i,n)=>i===n),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(pf).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,n)=>{let s=i.values[t],o=this.updateF(s,n);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,n)=>n.config.address[this.id]!=null?(i.values[t]=n.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,pf.of({field:this,create:e})]}get extension(){return this}}const cr={lowest:4,low:3,default:2,high:1,highest:0};function An(r){return e=>new jd(e,r)}const br={highest:An(cr.highest),high:An(cr.high),default:An(cr.default),low:An(cr.low),lowest:An(cr.lowest)};class jd{constructor(e,t){this.inner=e,this.prec=t}}class al{of(e){return new ba(this,e)}reconfigure(e){return al.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ba{constructor(e,t){this.compartment=e,this.inner=t}}class wo{constructor(e,t,i,n,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],s=Object.create(null),o=new Map;for(let p of xS(e,t,o))p instanceof tt?n.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let l=Object.create(null),a=[],h=[];for(let p of n)l[p.id]=h.length<<1,h.push(g=>p.slot(g));let c=i==null?void 0:i.config.facets;for(let p in s){let g=s[p],T=g[0].facet,E=c&&c[p]||[];if(g.every(y=>y.type==0))if(l[T.id]=a.length<<1|1,zh(E,g))a.push(i.facet(T));else{let y=T.combine(g.map(I=>I.value));a.push(i&&T.compare(y,i.facet(T))?i.facet(T):y)}else{for(let y of g)y.type==0?(l[y.id]=a.length<<1|1,a.push(y.value)):(l[y.id]=h.length<<1,h.push(I=>y.dynamicSlot(I)));l[T.id]=h.length<<1,h.push(y=>wS(y,T,g))}}let u=h.map(p=>p(l));return new wo(e,o,u,l,a,s)}}function xS(r,e,t){let i=[[],[],[],[],[]],n=new Map;function s(o,l){let a=n.get(o);if(a!=null){if(a<=l)return;let h=i[a].indexOf(o);h>-1&&i[a].splice(h,1),o instanceof ba&&t.delete(o.compartment)}if(n.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof ba){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof jd)s(o.inner,o.prec);else if(o instanceof tt)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof ao)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,cr.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(r,cr.default),i.reduce((o,l)=>o.concat(l))}function qn(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let n=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|n}function xo(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const $d=H.define(),Aa=H.define({combine:r=>r.some(e=>e),static:!0}),Kd=H.define({combine:r=>r.length?r[0]:void 0,static:!0}),Gd=H.define(),Qd=H.define(),Xd=H.define(),Yd=H.define({combine:r=>r.length?r[0]:!1});class vi{constructor(e,t){this.type=e,this.value=t}static define(){return new kS}}class kS{of(e){return new vi(this,e)}}class RS{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ce(this.type,t)}is(e){return this.type==e}static define(e={}){return new RS(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let s=n.map(t);s&&i.push(s)}return i}}ce.reconfigure=ce.define();ce.appendConfig=ce.define();class je{constructor(e,t,i,n,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&Wd(i,t.newLength),s.some(l=>l.type==je.time)||(this.annotations=s.concat(je.time.of(Date.now())))}static create(e,t,i,n,s,o){return new je(e,t,i,n,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(je.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}je.time=vi.define();je.userEvent=vi.define();je.addToHistory=vi.define();je.remote=vi.define();function LS(r,e){let t=[];for(let i=0,n=0;;){let s,o;if(i<r.length&&(n==e.length||e[n]>=r[i]))s=r[i++],o=r[i++];else if(n<e.length)s=e[n++],o=e[n++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function Jd(r,e,t){var i;let n,s,o;return t?(n=e.changes,s=We.empty(e.changes.length),o=r.changes.compose(e.changes)):(n=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),o=r.changes.compose(n)),{changes:o,selection:e.selection?e.selection.map(s):(i=r.selection)===null||i===void 0?void 0:i.map(n),effects:ce.mapEffects(r.effects,n).concat(ce.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function wa(r,e,t){let i=e.selection,n=jr(e.annotations);return e.userEvent&&(n=n.concat(je.userEvent.of(e.userEvent))),{changes:e.changes instanceof We?e.changes:We.of(e.changes||[],t,r.facet(Kd)),selection:i&&(i instanceof D?i:D.single(i.anchor,i.head)),effects:jr(e.effects),annotations:n,scrollIntoView:!!e.scrollIntoView}}function Zd(r,e,t){let i=wa(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=Jd(i,wa(r,e[s],o?i.changes.newLength:r.doc.length),o)}let n=je.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return DS(t?CS(n):n)}function CS(r){let e=r.startState,t=!0;for(let n of e.facet(Gd)){let s=n(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:LS(t,s))}if(t!==!0){let n,s;if(t===!1)s=r.changes.invertedDesc,n=We.empty(e.doc.length);else{let o=r.changes.filter(t);n=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}r=je.create(e,n,r.selection&&r.selection.map(s),ce.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let i=e.facet(Qd);for(let n=i.length-1;n>=0;n--){let s=i[n](r);s instanceof je?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof je?r=s[0]:r=Zd(e,jr(s),!1)}return r}function DS(r){let e=r.startState,t=e.facet(Xd),i=r;for(let n=t.length-1;n>=0;n--){let s=t[n](r);s&&Object.keys(s).length&&(i=Jd(i,wa(e,s,r.changes.newLength),!0))}return i==r?r:je.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const VS=[];function jr(r){return r==null?VS:Array.isArray(r)?r:[r]}var Pe=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Pe||(Pe={}));const US=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let xa;try{xa=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function MS(r){if(xa)return xa.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||US.test(t)))return!0}return!1}function PS(r){return e=>{if(!/\S/.test(e))return Pe.Space;if(MS(e))return Pe.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Pe.Word;return Pe.Other}}class ve{constructor(e,t,i,n,s,o){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)qn(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return qn(this,i),xo(this,i)}update(...e){return Zd(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:n}=t;for(let l of e.effects)l.is(al.reconfigure)?(t&&(n=new Map,t.compartments.forEach((a,h)=>n.set(h,a)),t=null),n.set(l.value.compartment,l.value.extension)):l.is(ce.reconfigure)?(t=null,i=l.value):l.is(ce.appendConfig)&&(t=null,i=jr(i).concat(l.value));let s;t?s=e.startState.values.slice():(t=wo.resolve(i,n,this),s=new ve(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,h)=>h.reconfigure(a,this),null).values);let o=e.startState.facet(Aa)?e.newSelection:e.newSelection.asSingle();new ve(t,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:D.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),s=[i.range],o=jr(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(n);for(let p=0;p<l;p++)s[p]=s[p].map(c);let u=n.mapDesc(h,!0);s.push(a.range.map(u)),n=n.compose(c),o=ce.mapEffects(o,c).concat(ce.mapEffects(jr(a.effects),u))}return{changes:n,selection:D.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof We?e:We.of(e,this.doc.length,this.facet(ve.lineSeparator))}toText(e){return Ne.of(e.split(this.facet(ve.lineSeparator)||ya))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(qn(this,t),xo(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof tt&&this.config.address[n.id]!=null&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];n.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ve.create({doc:e.doc,selection:D.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=wo.resolve(e.extensions||[],new Map),i=e.doc instanceof Ne?e.doc:Ne.of((e.doc||"").split(t.staticFacet(ve.lineSeparator)||ya)),n=e.selection?e.selection instanceof D?e.selection:D.single(e.selection.anchor,e.selection.head):D.single(0);return Wd(n,i.length),t.staticFacet(Aa)||(n=n.asSingle()),new ve(t,i,n,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ve.tabSize)}get lineBreak(){return this.facet(ve.lineSeparator)||`
`}get readOnly(){return this.facet(Yd)}phrase(e,...t){for(let i of this.facet(ve.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,n)=>{if(n=="$")return"$";let s=+(n||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let n=[];for(let s of this.facet($d))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&n.push(o[e]);return n}charCategorizer(e){return PS(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=et(t,o,!1);if(s(t.slice(a,o))!=Pe.Word)break;o=a}for(;l<n;){let a=et(t,l);if(s(t.slice(l,a))!=Pe.Word)break;l=a}return o==l?null:D.range(o+i,l+i)}}ve.allowMultipleSelections=Aa;ve.tabSize=H.define({combine:r=>r.length?r[0]:4});ve.lineSeparator=Kd;ve.readOnly=Yd;ve.phrases=H.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(n=>r[n]==e[n])}});ve.languageData=$d;ve.changeFilter=Gd;ve.transactionFilter=Qd;ve.transactionExtender=Xd;al.reconfigure=ce.define();function ui(r,e,t={}){let i={};for(let n of r)for(let s of Object.keys(n)){let o=n[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let n in e)i[n]===void 0&&(i[n]=e[n]);return i}class Tr{eq(e){return this==e}range(e,t=e){return ka.create(e,t,this)}}Tr.prototype.startSide=Tr.prototype.endSide=0;Tr.prototype.point=!1;Tr.prototype.mapMode=ft.TrackDel;let ka=class ep{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ep(e,t,i)}};function Ra(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class qh{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let s=i?this.to:this.from;for(let o=n,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,i,n){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(n(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],n=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,p,g;if(c==u){let T=t.mapPos(c,h.startSide,h.mapMode);if(T==null||(p=g=T,h.startSide!=h.endSide&&(g=t.mapPos(c,h.endSide),g<p)))continue}else if(p=t.mapPos(c,h.startSide),g=t.mapPos(u,h.endSide),p>g||p==g&&h.startSide>0&&h.endSide<=0)continue;(g-p||h.endSide-h.startSide)<0||(o<0&&(o=p),h.point&&(l=Math.max(l,g-p)),i.push(h),n.push(p-o),s.push(g-o))}return{mapped:i.length?new qh(n,s,i,l):null,pos:o}}}class ye{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new ye(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(Ra)),this.isEmpty)return t.length?ye.of(t):this;let l=new tp(this,null,-1).goto(0),a=0,h=[],c=new ji;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||n>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||n>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(ka.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?ye.empty:this.nextLayer.update({add:h,filter:o,filterFrom:n,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)n=Math.max(n,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(n=Math.max(n,c.maxPoint),t.push(c),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new ye(i,t,s||ye.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Xn.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Xn.from(e).goto(t)}static compare(e,t,i,n,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=mf(o,l,i),h=new wn(o,a,s),c=new wn(l,a,s);i.iterGaps((u,p,g)=>gf(h,u,c,p,g,n)),i.empty&&i.length==0&&gf(h,0,c,0,0,n)}static eq(e,t,i=0,n){n==null&&(n=999999999);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=mf(s,o),a=new wn(s,l,0).goto(i),h=new wn(o,l,0).goto(i);for(;;){if(a.to!=h.to||!La(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>n)return!0;a.next(),h.next()}}static spans(e,t,i,n,s=-1){let o=new wn(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),u=o.pointFrom<t?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);n.point(l,h,o.point,c,u,o.pointRank),a=Math.min(o.openEnd(h),c.length)}else h>l&&(n.span(l,h,o.active,a),a=o.openEnd(h));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new ji;for(let n of e instanceof ka?[e]:t?_S(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return ye.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=ye.empty;n=n.nextLayer)t=new ye(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}ye.empty=new ye([],[],null,-1);function _S(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(Ra(e,i)>0)return r.slice().sort(Ra);e=i}return r}ye.empty.nextLayer=ye.empty;class ji{finishChunk(e){this.chunks.push(new qh(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new ji)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return n<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(ye.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=ye.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function mf(r,e,t){let i=new Map;for(let s of r)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let n=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&n.add(s.chunk[o])}return n}class tp{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let n=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(n)||this.layer.chunkEnd(this.chunkIndex)<e||n.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Xn{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&n.push(new tp(o,t,i,s));return n.length==1?n[0]:new Xn(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)_l(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)_l(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_l(this.heap,0)}}}function _l(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let n=r[i];if(i+1<r.length&&n.compare(r[i+1])>=0&&(n=r[i+1],i++),t.compare(n)<0)break;r[i]=t,r[e]=n,e=i}}class wn{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Xn.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){_s(this.active,e),_s(this.activeTo,e),_s(this.activeRank,e),this.minActive=Sf(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Bs(this.active,t,i),Bs(this.activeTo,t,n),Bs(this.activeRank,t,s),e&&Bs(e,t,this.cursor.from),this.minActive=Sf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&_s(i,n)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let n=i.length-1;n>=0&&i[n]<e;n--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function gf(r,e,t,i,n,s){r.goto(e),t.goto(i);let o=i+n,l=i,a=i-e;for(;;){let h=r.to+a-t.to||r.endSide-t.endSide,c=h<0?r.to+a:t.to,u=Math.min(c,o);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&La(r.activeForPoint(r.to),t.activeForPoint(t.to))||s.comparePoint(l,u,r.point,t.point):u>l&&!La(r.active,t.active)&&s.compareRange(l,u,r.active,t.active),c>o)break;l=c,h<=0&&r.next(),h>=0&&t.next()}}function La(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function _s(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function Bs(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function Sf(r,e){let t=-1,i=1e9;for(let n=0;n<e.length;n++)(e[n]-i||r[n].endSide-r[t].endSide)<0&&(t=n,i=e[n]);return t}function fn(r,e,t=r.length){let i=0;for(let n=0;n<t;)r.charCodeAt(n)==9?(i+=e-i%e,n++):(i++,n=et(r,n));return i}function Ca(r,e,t,i){for(let n=0,s=0;;){if(s>=e)return n;if(n==r.length)break;s+=r.charCodeAt(n)==9?t-s%t:1,n=et(r,n)}return i===!0?-1:r.length}const Da="ͼ",Tf=typeof Symbol>"u"?"__"+Da:Symbol.for(Da),Va=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class $i{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),p=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let g in l){let T=l[g];if(/&/.test(g))s(g.split(/,\s*/).map(E=>o.map(y=>E.replace(/&/,y))).reduce((E,y)=>E.concat(y)),T,a);else if(T&&typeof T=="object"){if(!u)throw new RangeError("The value of a property ("+g+") should be a primitive value.");s(n(g),T,c,p)}else T!=null&&c.push(g.replace(/_.*/,"").replace(/[A-Z]/g,E=>"-"+E.toLowerCase())+": "+T+";")}(c.length||p)&&a.push((i&&!u&&!h?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(n(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Ef[Tf]||1;return Ef[Tf]=e+1,Da+e.toString(36)}static mount(e,t,i){let n=e[Va],s=i&&i.nonce;n?s&&n.setNonce(s):n=new BS(e,s),n.mount(Array.isArray(t)?t:[t],e)}}let Of=new Map;class BS{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let s=Of.get(i);if(s)return e[Va]=s;this.sheet=new n.CSSStyleSheet,Of.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Va]=this}mount(e,t){let i=this.sheet,n=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let h=0;h<l.rules.length;h++)i.insertRule(l.rules[h],n++)}else{for(;s<a;)n+=this.modules[s++].rules.length;n+=l.rules.length,s++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=t.head||t;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ki={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},FS=typeof navigator<"u"&&/Mac/.test(navigator.platform),zS=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)Ki[48+Je]=Ki[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)Ki[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)Ki[Je]=String.fromCharCode(Je+32),Yn[Je]=String.fromCharCode(Je);for(var Bl in Ki)Yn.hasOwnProperty(Bl)||(Yn[Bl]=Ki[Bl]);function qS(r){var e=FS&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||zS&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?Yn:Ki)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Jn(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Ua(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function ho(r,e){if(!e.anchorNode)return!1;try{return Ua(r,e.anchorNode)}catch{return!1}}function Zn(r){return r.nodeType==3?Or(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Hn(r,e,t,i){return t?yf(r,e,t,i,-1)||yf(r,e,t,i,1):!1}function Er(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function ko(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function yf(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:fi(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=Er(r)+(n<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?fi(r):0}else return!1}}function fi(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function hl(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function HS(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function ip(r,e){let t=e.width/r.offsetWidth,i=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-r.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function WS(r,e,t,i,n,s,o,l){let a=r.ownerDocument,h=a.defaultView||window;for(let c=r,u=!1;c&&!u;)if(c.nodeType==1){let p,g=c==a.body,T=1,E=1;if(g)p=HS(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(u=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let w=c.getBoundingClientRect();({scaleX:T,scaleY:E}=ip(c,w)),p={left:w.left,right:w.left+c.clientWidth*T,top:w.top,bottom:w.top+c.clientHeight*E}}let y=0,I=0;if(n=="nearest")e.top<p.top?(I=-(p.top-e.top+o),t>0&&e.bottom>p.bottom+I&&(I=e.bottom-p.bottom+I+o)):e.bottom>p.bottom&&(I=e.bottom-p.bottom+o,t<0&&e.top-I<p.top&&(I=-(p.top+I-e.top+o)));else{let w=e.bottom-e.top,A=p.bottom-p.top;I=(n=="center"&&w<=A?e.top+w/2-A/2:n=="start"||n=="center"&&t<0?e.top-o:e.bottom-A+o)-p.top}if(i=="nearest"?e.left<p.left?(y=-(p.left-e.left+s),t>0&&e.right>p.right+y&&(y=e.right-p.right+y+s)):e.right>p.right&&(y=e.right-p.right+s,t<0&&e.left<p.left+y&&(y=-(p.left+y-e.left+s))):y=(i=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:i=="start"==l?e.left-s:e.right-(p.right-p.left)+s)-p.left,y||I)if(g)h.scrollBy(y,I);else{let w=0,A=0;if(I){let L=c.scrollTop;c.scrollTop+=I/E,A=(c.scrollTop-L)*E}if(y){let L=c.scrollLeft;c.scrollLeft+=y/T,w=(c.scrollLeft-L)*T}e={left:e.left-w,top:e.top-A,right:e.right-w,bottom:e.bottom-A},w&&Math.abs(w-y)<1&&(i="nearest"),A&&Math.abs(A-I)<1&&(n="nearest")}if(g)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function jS(r){let e=r.ownerDocument,t,i;for(let n=r.parentNode;n&&!(n==e.body||t&&i);)if(n.nodeType==1)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;return{x:t,y:i}}class $S{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?fi(t):0),i,Math.min(e.focusOffset,i?fi(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let Lr=null;function rp(r){if(r.setActive)return r.setActive();if(Lr)return r.focus(Lr);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Lr==null?{get preventScroll(){return Lr={preventScroll:!0},!0}}:void 0),!Lr){Lr=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],s=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let If;function Or(r,e,t=e){let i=If||(If=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function $r(r,e,t,i){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=i);let s=new KeyboardEvent("keydown",n);s.synthetic=!0,r.dispatchEvent(s);let o=new KeyboardEvent("keyup",n);return o.synthetic=!0,r.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function KS(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function np(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function GS(r,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,fi(t));;)if(i){if(t.nodeType!=1)return!1;let n=t.childNodes[i-1];n.contentEditable=="false"?i--:(t=n,i=fi(t))}else{if(t==r)return!0;i=Er(t),t=t.parentNode}}function sp(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function op(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=fi(t)}else if(t.parentNode&&!ko(t))i=Er(t),t=t.parentNode;else return null}}function lp(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!ko(t))i=Er(t)+1,t=t.parentNode;else return null}}class st{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new st(e.parentNode,Er(e),t)}static after(e,t){return new st(e.parentNode,Er(e)+1,t)}}const Hh=[];class Re{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,n=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=n?n.nextSibling:i.firstChild)){let l=Re.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=n?n.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&s!=o.dom&&(t.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=vf(s);else i.insertBefore(o.dom,s);n=o.dom}for(s=n?n.nextSibling:i.firstChild,s&&t&&t.node==i&&(t.written=!0);s;)s=vf(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=fi(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;n==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?n=-1:n=1),e=s}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Re.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,s=0;;n++){let o=this.children[n];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,s=-1,o=-1,l=-1;for(let a=0,h=i,c=i;a<this.children.length;a++){let u=this.children[a],p=h+u.length;if(h<e&&p>t)return u.domBoundsAround(e,t,h);if(p>=e&&n==-1&&(n=a,s=h),h>t&&u.dom.parentNode==this.dom){o=a,l=c;break}c=p,h=p+u.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Hh){this.markDirty();for(let n=e;n<t;n++){let s=this.children[n];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ap(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Re.prototype.breakAfter=0;function vf(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class ap{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function hp(r,e,t,i,n,s,o,l,a){let{children:h}=r,c=h.length?h[e]:null,u=s.length?s[s.length-1]:null,p=u?u.breakAfter:o;if(!(e==i&&c&&!o&&!p&&s.length<2&&c.merge(t,n,s.length?u:null,t==0,l,a))){if(i<h.length){let g=h[i];g&&(n<g.length||g.breakAfter&&(u!=null&&u.breakAfter))?(e==i&&(g=g.split(n),n=0),!p&&u&&g.merge(0,n,u,!0,0,a)?s[s.length-1]=g:((n||g.children.length&&!g.children[0].length)&&g.merge(0,n,null,!1,0,a),s.push(g))):g!=null&&g.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<i&&s.length;)if(h[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<h.length&&!h[e-1].breakAfter&&h[i].merge(0,0,h[e-1],!1,l,a)&&e--,(e<i||s.length)&&r.replaceChildren(e,i,s)}}function cp(r,e,t,i,n,s){let o=r.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),u=e-t;for(let p of i)u+=p.length;r.length+=u,hp(r,h,c,l,a,i,0,n,s)}let Tt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ma=typeof document<"u"?document:{documentElement:{style:{}}};const Pa=/Edge\/(\d+)/.exec(Tt.userAgent),fp=/MSIE \d/.test(Tt.userAgent),_a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tt.userAgent),cl=!!(fp||_a||Pa),Nf=!cl&&/gecko\/(\d+)/i.test(Tt.userAgent),Fl=!cl&&/Chrome\/(\d+)/.exec(Tt.userAgent),bf="webkitFontSmoothing"in Ma.documentElement.style,up=!cl&&/Apple Computer/.test(Tt.vendor),Af=up&&(/Mobile\/\w+/.test(Tt.userAgent)||Tt.maxTouchPoints>2);var j={mac:Af||/Mac/.test(Tt.platform),windows:/Win/.test(Tt.platform),linux:/Linux|X11/.test(Tt.platform),ie:cl,ie_version:fp?Ma.documentMode||6:_a?+_a[1]:Pa?+Pa[1]:0,gecko:Nf,gecko_version:Nf?+(/Firefox\/(\d+)/.exec(Tt.userAgent)||[0,0])[1]:0,chrome:!!Fl,chrome_version:Fl?+Fl[1]:0,ios:Af,android:/Android\b/.test(Tt.userAgent),webkit:bf,safari:up,webkit_version:bf?+(/\bAppleWebKit\/(\d+)/.exec(Tt.userAgent)||[0,0])[1]:0,tabSize:Ma.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const QS=256;class Kt extends Re{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Kt)||this.length-(t-e)+i.length>QS||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Kt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new st(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return XS(this.dom,e,t)}}class yi extends Re{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(np(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,s,o){return i&&(!(i instanceof yi&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(cp(this,e,t,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),n<0&&i>=e&&(n=s),i=a,s++}let o=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new yi(this.mark,t,o)}domAtPos(e){return dp(this,e)}coordsAt(e,t){return mp(this,e,t)}}function XS(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?j.chrome||j.gecko||(e?(n--,o=1):s<i&&(s++,o=-1)):t<0?n--:s<i&&s++;let l=Or(r,n,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:t>=0)?0:l.length-1];return j.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?hl(a,o<0):a||null}class Ui extends Re{static create(e,t,i){return new Ui(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Ui.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,s,o){return i&&(!(i instanceof Ui)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof Ui&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ne.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):Ne.empty}domAtPos(e){return(this.length?e==0:this.side>0)?st.before(this.dom):st.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),s=null;if(!n.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?n.length-1:0;s=n[l],!(e>0?l==0:l==n.length-1||s.top<s.bottom);l+=o?-1:1);return hl(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Jr extends Re{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Jr&&e.side==this.side}split(){return new Jr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?st.before(this.dom):st.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ne.empty}get isHidden(){return!0}}Kt.prototype.children=Ui.prototype.children=Jr.prototype.children=Hh;function dp(r,e){let t=r.dom,{children:i}=r,n=0;for(let s=0;n<i.length;n++){let o=i[n],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=n;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=n;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new st(t,0)}function pp(r,e,t){let i,{children:n}=r;t>0&&e instanceof yi&&n.length&&(i=n[n.length-1])instanceof yi&&i.mark.eq(e.mark)?pp(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function mp(r,e,t){let i=null,n=-1,s=null,o=-1;function l(h,c){for(let u=0,p=0;u<h.children.length&&p<=c;u++){let g=h.children[u],T=p+g.length;T>=c&&(g.children.length?l(g,c-p):(!s||s.isHidden&&t>0)&&(T>c||p==T&&g.getSide()>0)?(s=g,o=c-p):(p<c||p==T&&g.getSide()<0&&!g.isHidden)&&(i=g,n=c-p)),p=T}}l(r,e);let a=(t<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?n:o),t):YS(r)}function YS(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=Zn(e);return t[t.length-1]||null}function Ba(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const wf=Object.create(null);function Ro(r,e,t){if(r==e)return!0;r||(r=wf),e||(e=wf);let i=Object.keys(r),n=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=n.length-(t&&n.indexOf(t)>-1?1:0))return!1;for(let s of i)if(s!=t&&(n.indexOf(s)==-1||r[s]!==e[s]))return!1;return!0}function Fa(r,e,t){let i=!1;if(e)for(let n in e)t&&n in t||(i=!0,n=="style"?r.style.cssText="":r.removeAttribute(n));if(t)for(let n in t)e&&e[n]==t[n]||(i=!0,n=="style"?r.style.cssText=t[n]:r.setAttribute(n,t[n]));return i}function JS(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let i=r.attributes[t];e[i.name]=i.value}return e}class Yi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ut=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(ut||(ut={}));class J extends Tr{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ms(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Gi(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:s,end:o}=gp(e,t);i=(s?t?-3e8:-1:5e8)-1,n=(o?t?2e8:1:-6e8)+1}return new Gi(e,i,n,t,e.widget||null,!0)}static line(e){return new gs(e)}static set(e,t=!1){return ye.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}J.none=ye.empty;class ms extends J{constructor(e){let{start:t,end:i}=gp(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ms&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Ro(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ms.prototype.point=!1;class gs extends J{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof gs&&this.spec.class==e.spec.class&&Ro(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}gs.prototype.mapMode=ft.TrackBefore;gs.prototype.point=!0;class Gi extends J{constructor(e,t,i,n,s,o){super(t,i,s,e),this.block=n,this.isReplace=o,this.mapMode=n?t<=0?ft.TrackBefore:ft.TrackAfter:ft.TrackDel}get type(){return this.startSide!=this.endSide?ut.WidgetRange:this.startSide<=0?ut.WidgetBefore:ut.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Gi&&ZS(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Gi.prototype.point=!0;function gp(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t??e,end:i??e}}function ZS(r,e){return r==e||!!(r&&e&&r.compare(e))}function za(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class Fe extends Re{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,s,o){if(i){if(!(i instanceof Fe))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),cp(this,e,t,i?i.children.slice():[],s,o),!0}split(e){let t=new Fe;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ro(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){pp(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Ba(t,this.attrs||{})),i&&(this.attrs=Ba({class:i},this.attrs||{}))}domAtPos(e){return dp(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(np(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Fa(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&Re.get(n)instanceof yi;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((i=Re.get(n))===null||i===void 0?void 0:i.isEditable)==!1&&(!j.ios||!this.children.some(s=>s instanceof Kt))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Kt)||/[^ -~]/.test(i.text))return null;let n=Zn(i.dom);if(n.length!=1)return null;e+=n[0].width,t=n[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=mp(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:n}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-n.lineHeight)<2&&n.textHeight<s){let o=(s-n.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof Fe&&this.children.length==0&&e.children.length==0&&Ro(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let s=e.children[i],o=n+s.length;if(o>=t){if(s instanceof Fe)return s;if(o>t)break}n=o+s.breakAfter}return null}}class Ei extends Re{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,s,o){return i&&(!(i instanceof Ei)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?st.before(this.dom):st.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ei(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Hh}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ne.empty}domBoundsAround(){return null}become(e){return e instanceof Ei&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof qa?null:hl(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class qa extends Yi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Wn{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ei&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Fe),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Fs(new Jr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Ei)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Fs(new Kt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Gi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Gi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ei(i.widget||Zr.block,l,i));else{let a=Ui.create(i.widget||Zr.inline,l,l?0:i.startSide),h=this.atCursorPos&&!a.isEditable&&s<=n.length&&(e<t||i.startSide>0),c=!a.isEditable&&(e<t||s>n.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(n),h&&(u.append(Fs(new Jr(1),n),s),s=n.length+Math.max(0,s-n.length)),u.append(Fs(a,n),s),this.atCursorPos=c,this.pendingBuffer=c?e<t||s>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,n,s){let o=new Wn(e,t,i,s);return o.openEnd=ye.spans(n,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Fs(r,e){for(let t of e)r=new yi(t,[r],r.length);return r}class Zr extends Yi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Zr.inline=new Zr("span");Zr.block=new Zr("div");var Ue=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(Ue||(Ue={}));const yr=Ue.LTR,Wh=Ue.RTL;function Sp(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const eT=Sp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tT=Sp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ha=Object.create(null),ei=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Ha[e]=t,Ha[t]=-e}function Tp(r){return r<=247?eT[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?tT[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const iT=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Mi{get dir(){return this.level%2?Wh:yr}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(n!=0?n<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Ep(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let i=r[t],n=e[t];if(i.from!=n.from||i.to!=n.to||i.direction!=n.direction||!Ep(i.inner,n.inner))return!1}return!0}const ke=[];function rT(r,e,t,i,n){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:t,a=s?256:n;for(let h=o,c=a,u=a;h<l;h++){let p=Tp(r.charCodeAt(h));p==512?p=c:p==8&&u==4&&(p=16),ke[h]=p==4?2:p,p&7&&(u=p),c=p}for(let h=o,c=a,u=a;h<l;h++){let p=ke[h];if(p==128)h<l-1&&c==ke[h+1]&&c&24?p=ke[h]=c:ke[h]=256;else if(p==64){let g=h+1;for(;g<l&&ke[g]==64;)g++;let T=h&&c==8||g<t&&ke[g]==8?u==1?1:8:256;for(let E=h;E<g;E++)ke[E]=T;h=g-1}else p==8&&u==1&&(ke[h]=1);c=p,p&7&&(u=p)}}}function nT(r,e,t,i,n){let s=n==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let h=o?i[o-1].to:e,c=o<i.length?i[o].from:t;for(let u=h,p,g,T;u<c;u++)if(g=Ha[p=r.charCodeAt(u)])if(g<0){for(let E=l-3;E>=0;E-=3)if(ei[E+1]==-g){let y=ei[E+2],I=y&2?n:y&4?y&1?s:n:0;I&&(ke[u]=ke[ei[E]]=I),l=E;break}}else{if(ei.length==189)break;ei[l++]=u,ei[l++]=p,ei[l++]=a}else if((T=ke[u])==2||T==1){let E=T==n;a=E?0:1;for(let y=l-3;y>=0;y-=3){let I=ei[y+2];if(I&2)break;if(E)ei[y+2]|=2;else{if(I&4)break;ei[y+2]|=4}}}}}function sT(r,e,t,i){for(let n=0,s=i;n<=t.length;n++){let o=n?t[n-1].to:r,l=n<t.length?t[n].from:e;for(let a=o;a<l;){let h=ke[a];if(h==256){let c=a+1;for(;;)if(c==l){if(n==t.length)break;c=t[n++].to,l=n<t.length?t[n].from:e}else if(ke[c]==256)c++;else break;let u=s==1,p=(c<e?ke[c]:i)==1,g=u==p?u?1:2:i;for(let T=c,E=n,y=E?t[E-1].to:r;T>a;)T==y&&(T=t[--E].from,y=E?t[E-1].to:r),ke[--T]=g;a=c}else s=h,a++}}}function Wa(r,e,t,i,n,s,o){let l=i%2?2:1;if(i%2==n%2)for(let a=e,h=0;a<t;){let c=!0,u=!1;if(h==s.length||a<s[h].from){let E=ke[a];E!=l&&(c=!1,u=E==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,T=a;e:for(;;)if(h<s.length&&T==s[h].from){if(u)break e;let E=s[h];if(!c)for(let y=E.to,I=h+1;;){if(y==t)break e;if(I<s.length&&s[I].from==y)y=s[I++].to;else{if(ke[y]==l)break e;break}}if(h++,p)p.push(E);else{E.from>a&&o.push(new Mi(a,E.from,g));let y=E.direction==yr!=!(g%2);ja(r,y?i+1:i,n,E.inner,E.from,E.to,o),a=E.to}T=E.to}else{if(T==t||(c?ke[T]!=l:ke[T]==l))break;T++}p?Wa(r,a,T,i+1,n,p,o):a<T&&o.push(new Mi(a,T,g)),a=T}else for(let a=t,h=s.length;a>e;){let c=!0,u=!1;if(!h||a>s[h-1].to){let E=ke[a-1];E!=l&&(c=!1,u=E==16)}let p=!c&&l==1?[]:null,g=c?i:i+1,T=a;e:for(;;)if(h&&T==s[h-1].to){if(u)break e;let E=s[--h];if(!c)for(let y=E.from,I=h;;){if(y==e)break e;if(I&&s[I-1].to==y)y=s[--I].from;else{if(ke[y-1]==l)break e;break}}if(p)p.push(E);else{E.to<a&&o.push(new Mi(E.to,a,g));let y=E.direction==yr!=!(g%2);ja(r,y?i+1:i,n,E.inner,E.from,E.to,o),a=E.from}T=E.from}else{if(T==e||(c?ke[T-1]!=l:ke[T-1]==l))break;T--}p?Wa(r,T,a,i+1,n,p,o):T<a&&o.push(new Mi(T,a,g)),a=T}}function ja(r,e,t,i,n,s,o){let l=e%2?2:1;rT(r,n,s,i,l),nT(r,n,s,i,l),sT(n,s,i,l),Wa(r,n,s,e,t,i,o)}function oT(r,e,t){if(!r)return[new Mi(0,0,e==Wh?1:0)];if(e==yr&&!t.length&&!iT.test(r))return Op(r.length);if(t.length)for(;r.length>ke.length;)ke[ke.length]=256;let i=[],n=e==yr?0:1;return ja(r,n,n,t,0,r.length,i),i}function Op(r){return[new Mi(0,r,0)]}let yp="";function lT(r,e,t,i,n){var s;let o=i.head-r.from,l=Mi.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],h=a.side(n,t);if(o==h){let p=l+=n?1:-1;if(p<0||p>=e.length)return null;a=e[l=p],o=a.side(!n,t),h=a.side(n,t)}let c=et(r.text,o,a.forward(n,t));(c<a.from||c>a.to)&&(c=h),yp=r.text.slice(Math.min(o,c),Math.max(o,c));let u=l==(n?e.length-1:0)?null:e[l+(n?1:-1)];return u&&c==h&&u.level+(n?0:1)<a.level?D.cursor(u.side(!n,t)+r.from,u.forward(n,t)?1:-1,u.level):D.cursor(c+r.from,a.forward(n,t)?-1:1,a.level)}function aT(r,e,t){for(let i=e;i<t;i++){let n=Tp(r.charCodeAt(i));if(n==1)return yr;if(n==2||n==4)return Wh}return yr}const Ip=H.define(),vp=H.define(),Np=H.define(),bp=H.define(),$a=H.define(),Ap=H.define(),wp=H.define(),jh=H.define(),$h=H.define(),xp=H.define({combine:r=>r.some(e=>e)}),kp=H.define({combine:r=>r.some(e=>e)}),Rp=H.define();class Kr{constructor(e,t="nearest",i="nearest",n=5,s=5,o=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Kr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Kr(D.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const zs=ce.define({map:(r,e)=>r.map(e)}),Lp=ce.define();function yt(r,e,t){let i=r.facet(bp);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Ci=H.define({combine:r=>r.length?r[0]:!0});let hT=0;const Un=H.define();class qe{constructor(e,t,i,n,s){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=s(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:s,decorations:o}=t||{};return new qe(hT++,e,i,n,l=>{let a=[Un.of(l)];return o&&a.push(es.of(h=>{let c=h.plugin(l);return c?o(c):J.none})),s&&a.push(s(l)),a})}static fromClass(e,t){return qe.define(i=>new e(i),t)}}class zl{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(yt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){yt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){yt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Cp=H.define(),Kh=H.define(),es=H.define(),Dp=H.define(),Gh=H.define(),Vp=H.define();function xf(r,e){let t=r.state.facet(Vp);if(!t.length)return t;let i=t.map(s=>s instanceof Function?s(r):s),n=[];return ye.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let h=s-e.from,c=o-e.from,u=n;for(let p=l.length-1;p>=0;p--,a--){let g=l[p].spec.bidiIsolate,T;if(g==null&&(g=aT(e.text,h,c)),a>0&&u.length&&(T=u[u.length-1]).to==h&&T.direction==g)T.to=c,u=T.inner;else{let E={from:h,to:c,direction:g,inner:[]};u.push(E),u=E.inner}}}}),n}const Up=H.define();function Mp(r){let e=0,t=0,i=0,n=0;for(let s of r.state.facet(Up)){let o=s(r);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(n=Math.max(n,o.bottom)))}return{left:e,right:t,top:i,bottom:n}}const Mn=H.define();class Bt{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new Bt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,s=0,o=0,l=0;;n++){let a=n==e.length?null:e[n],h=o-l,c=a?a.fromB:1e9;for(;s<t.length&&t[s]<c;){let u=t[s],p=t[s+1],g=Math.max(l,u),T=Math.min(c,p);if(g<=T&&new Bt(g+h,T+h,g,T).addToSet(i),p>c)break;s+=2}if(!a)return i;new Bt(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Lo{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=We.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let n=[];this.changes.iterChangedRanges((s,o,l,a)=>n.push(new Bt(s,o,l,a))),this.changedRanges=n}static create(e,t,i){return new Lo(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class kf extends Re{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=J.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Fe],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Bt(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:h,toA:c})=>c<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?n=this.domChanged.newSel.head:!gT(e.changes,this.hasComposition)&&!e.selectionSet&&(n=e.state.selection.main.head));let s=n>-1?fT(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:c}=this.hasComposition;i=new Bt(h,c,e.changes.mapPos(h,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(j.ie||j.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=pT(o,l,e.changes);return i=Bt.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=j.chrome||j.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||n.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ei&&o.widget instanceof qa&&s.push(o.dom);n.updateGaps(s)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=n.length-1;;o--){let l=o>=0?n[o]:null;if(!l)break;let{fromA:a,toA:h,fromB:c,toB:u}=l,p,g,T,E;if(i&&i.range.fromB<u&&i.range.toB>c){let L=Wn.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),C=Wn.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);g=L.breakAtStart,T=L.openStart,E=C.openEnd;let x=this.compositionView(i);C.breakAtStart?x.breakAfter=1:C.content.length&&x.merge(x.length,x.length,C.content[0],!1,C.openStart,0)&&(x.breakAfter=C.content[0].breakAfter,C.content.shift()),L.content.length&&x.merge(0,0,L.content[L.content.length-1],!0,0,L.openEnd)&&L.content.pop(),p=L.content.concat(x).concat(C.content)}else({content:p,breakAtStart:g,openStart:T,openEnd:E}=Wn.build(this.view.state.doc,c,u,this.decorations,this.dynamicDecorationMap));let{i:y,off:I}=s.findPos(h,1),{i:w,off:A}=s.findPos(a,-1);hp(this,w,A,y,I,p,g,T,E)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Lp)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Kt(e.text.nodeValue);t.flags|=8;for(let{deco:n}of e.marks)t=new yi(n,[t],t.length);let i=new Fe;return i.append(t,0),i}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Re.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let s=e.marks.length-1;s>=-1;s--)i=n.childPos(i.off,1),n=n.children[i.i],t(s>=0?e.marks[s].node:e.text,n)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,s=!n&&ho(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),h=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(j.gecko&&l.empty&&!this.hasComposition&&cT(a)){let u=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(u,a.node.childNodes[a.offset]||null)),a=h=new st(u,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!Hn(a.node,a.offset,c.anchorNode,c.anchorOffset)||!Hn(h.node,h.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{j.android&&j.chrome&&this.dom.contains(c.focusNode)&&mT(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let u=Jn(this.view.root);if(u)if(l.empty){if(j.gecko){let p=uT(a.node,a.offset);if(p&&p!=3){let g=(p==1?op:lp)(a.node,a.offset);g&&(a=new st(g.node,g.offset))}}u.collapse(a.node,a.offset),l.bidiLevel!=null&&u.caretBidiLevel!==void 0&&(u.caretBidiLevel=l.bidiLevel)}else if(u.extend){u.collapse(a.node,a.offset);try{u.extend(h.node,h.offset)}catch{}}else{let p=document.createRange();l.anchor>l.head&&([a,h]=[h,a]),p.setEnd(h.node,h.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,h)),this.impreciseAnchor=a.precise?null:new st(c.anchorNode,c.anchorOffset),this.impreciseHead=h.precise?null:new st(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Hn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Jn(e.root),{anchorNode:n,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=Fe.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(n,s)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let n=e.offset;!i&&n<t.childNodes.length;n++){let s=Re.get(t.childNodes[n]);s instanceof Fe&&(i=s.domAtPos(0))}for(let n=e.offset-1;!i&&n>=0;n--){let s=Re.get(t.childNodes[n]);s instanceof Fe&&(i=s.domAtPos(s.length))}return i?new st(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=Re.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof Fe)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,h=a-l.length;if(a<e)break;if(h<=e&&(h<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof Fe&&!(i instanceof Fe&&t>=0)))i=l,n=h;else if(i&&h==e&&a==e&&l instanceof Ei&&Math.abs(t)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=h}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof Fe))return null;for(;n.children.length;){let{i:l,off:a}=n.childPos(i,1);for(;;l++){if(l==n.children.length)return null;if((n=n.children[l]).length)break}i=a}if(!(n instanceof Kt))return null;let s=et(n.text,i);if(s==i)return null;let o=Or(n.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ue.LTR;for(let h=0,c=0;c<this.children.length;c++){let u=this.children[c],p=h+u.length;if(p>n)break;if(h>=i){let g=u.dom.getBoundingClientRect();if(t.push(g.height),o){let T=u.dom.lastChild,E=T?Zn(T):[];if(E.length){let y=E[E.length-1],I=a?y.right-g.left:g.right-y.left;I>l&&(l=I,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=p)}}}h=p+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ue.RTL:Ue.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Fe){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i,n;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Zn(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,n=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ap(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let s=n==t.viewports.length?null:t.viewports[n],o=s?s.from-1:this.length;if(o>i){let l=(t.lineBlockAt(o).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(J.replace({widget:new qa(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return J.set(e)}updateDeco(){let e=1,t=this.view.state.facet(es).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,n=this.view.state.facet(Dp).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(ye.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Rp))try{if(h(this.view,e.range,e))return!0}catch(c){yt(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let s=Mp(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;WS(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Ue.LTR)}}function cT(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function Pp(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let i=op(t.focusNode,t.focusOffset),n=lp(t.focusNode,t.focusOffset),s=i||n;if(n&&i&&n.node!=i.node){let l=Re.get(n.node);if(!l||l instanceof Kt&&l.text!=n.node.nodeValue)s=n;else if(r.docView.lastCompositionAfterCursor){let a=Re.get(i.node);!a||a instanceof Kt&&a.text!=i.node.nodeValue||(s=n)}}if(r.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function fT(r,e,t){let i=Pp(r,t);if(!i)return null;let{node:n,from:s,to:o}=i,l=n.nodeValue;if(/[\n\r]/.test(l)||r.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,h=new Bt(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let u=n.parentNode;;u=u.parentNode){let p=Re.get(u);if(p instanceof yi)c.push({node:u,deco:p.mark});else{if(p instanceof Fe||u.nodeName=="DIV"&&u.parentNode==r.contentDOM)return{range:h,text:n,marks:c,line:u};if(u!=r.contentDOM)c.push({node:u,deco:new ms({inclusive:!0,attributes:JS(u),tagName:u.tagName.toLowerCase()})});else return null}}}function uT(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let dT=class{constructor(){this.changes=[]}compareRange(e,t){za(e,t,this.changes)}comparePoint(e,t){za(e,t,this.changes)}};function pT(r,e,t){let i=new dT;return ye.compare(r,e,t,i),i.changes}function mT(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function gT(r,e){let t=!1;return e&&r.iterChangedRanges((i,n)=>{i<e.to&&n>e.from&&(t=!0)}),t}function ST(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),s=e-n.from;if(n.length==0)return D.cursor(e);s==0?t=1:s==n.length&&(t=-1);let o=s,l=s;t<0?o=et(n.text,s,!1):l=et(n.text,s);let a=i(n.text.slice(o,l));for(;o>0;){let h=et(n.text,o,!1);if(i(n.text.slice(h,o))!=a)break;o=h}for(;l<n.length;){let h=et(n.text,l);if(i(n.text.slice(l,h))!=a)break;l=h}return D.range(o+n.from,l+n.from)}function TT(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function ET(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function ql(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function Rf(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function Lf(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Ka(r,e,t){let i,n,s,o,l=!1,a,h,c,u;for(let T=r.firstChild;T;T=T.nextSibling){let E=Zn(T);for(let y=0;y<E.length;y++){let I=E[y];n&&ql(n,I)&&(I=Rf(Lf(I,n.bottom),n.top));let w=TT(e,I),A=ET(t,I);if(w==0&&A==0)return T.nodeType==3?Cf(T,e,t):Ka(T,e,t);if(!i||o>A||o==A&&s>w){i=T,n=I,s=w,o=A;let L=A?t<I.top?-1:1:w?e<I.left?-1:1:0;l=!L||(L>0?y<E.length-1:y>0)}w==0?t>I.bottom&&(!c||c.bottom<I.bottom)?(a=T,c=I):t<I.top&&(!u||u.top>I.top)&&(h=T,u=I):c&&ql(c,I)?c=Lf(c,I.bottom):u&&ql(u,I)&&(u=Rf(u,I.top))}}if(c&&c.bottom>=t?(i=a,n=c):u&&u.top<=t&&(i=h,n=u),!i)return{node:r,offset:0};let p=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return Cf(i,p,t);if(l&&i.contentEditable!="false")return Ka(i,p,t);let g=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:g}}function Cf(r,e,t){let i=r.nodeValue.length,n=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Or(r,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<s){let p=e>=(c.left+c.right)/2,g=p;if((j.chrome||j.gecko)&&Or(r,l).getBoundingClientRect().left==c.right&&(g=!p),u<=0)return{node:r,offset:l+(g?1:0)};n=l+(g?1:0),s=u}}}return{node:r,offset:n>-1?n:o>0?r.nodeValue.length:0}}function _p(r,e,t,i=-1){var n,s;let o=r.contentDOM.getBoundingClientRect(),l=o.top+r.viewState.paddingTop,a,{docHeight:h}=r.viewState,{x:c,y:u}=e,p=u-l;if(p<0)return 0;if(p>h)return r.state.doc.length;for(let L=r.viewState.heightOracle.textHeight/2,C=!1;a=r.elementAtHeight(p),a.type!=ut.Text;)for(;p=i>0?a.bottom+L:a.top-L,!(p>=0&&p<=h);){if(C)return t?null:0;C=!0,i=-i}u=l+p;let g=a.from;if(g<r.viewport.from)return r.viewport.from==0?0:t?null:Df(r,o,a,c,u);if(g>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:Df(r,o,a,c,u);let T=r.dom.ownerDocument,E=r.root.elementFromPoint?r.root:T,y=E.elementFromPoint(c,u);y&&!r.contentDOM.contains(y)&&(y=null),y||(c=Math.max(o.left+1,Math.min(o.right-1,c)),y=E.elementFromPoint(c,u),y&&!r.contentDOM.contains(y)&&(y=null));let I,w=-1;if(y&&((n=r.docView.nearest(y))===null||n===void 0?void 0:n.isEditable)!=!1){if(T.caretPositionFromPoint){let L=T.caretPositionFromPoint(c,u);L&&({offsetNode:I,offset:w}=L)}else if(T.caretRangeFromPoint){let L=T.caretRangeFromPoint(c,u);L&&({startContainer:I,startOffset:w}=L,(!r.contentDOM.contains(I)||j.safari&&OT(I,w,c)||j.chrome&&yT(I,w,c))&&(I=void 0))}I&&(w=Math.min(fi(I),w))}if(!I||!r.docView.dom.contains(I)){let L=Fe.find(r.docView,g);if(!L)return p>a.top+a.height/2?a.to:a.from;({node:I,offset:w}=Ka(L.dom,c,u))}let A=r.docView.nearest(I);if(!A)return null;if(A.isWidget&&((s=A.dom)===null||s===void 0?void 0:s.nodeType)==1){let L=A.dom.getBoundingClientRect();return e.y<L.top||e.y<=L.bottom&&e.x<=(L.left+L.right)/2?A.posAtStart:A.posAtEnd}else return A.localPosFromDOM(I,w)+A.posAtStart}function Df(r,e,t,i,n){let s=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let l=r.viewState.heightOracle.textHeight,a=Math.floor((n-t.top-(r.defaultLineHeight-l)*.5)/l);s+=a*r.viewState.heightOracle.lineLength}let o=r.state.sliceDoc(t.from,t.to);return t.from+Ca(o,s,r.state.tabSize)}function OT(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Or(r,i-1,i).getBoundingClientRect().left>t}function yT(r,e,t){if(e!=0)return!1;for(let n=r;;){let s=n.parentNode;if(!s||s.nodeType!=1||s.firstChild!=n)return!1;if(s.classList.contains("cm-line"))break;n=s}let i=r.nodeType==1?r.getBoundingClientRect():Or(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function Ga(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==ut.Text))return i}return t}function IT(r,e,t,i){let n=Ga(r,e.head),s=!i||n.type!=ut.Text||!(r.lineWrapping||n.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(s){let o=r.dom.getBoundingClientRect(),l=r.textDirectionAt(n.from),a=r.posAtCoords({x:t==(l==Ue.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return D.cursor(a,t?-1:1)}return D.cursor(t?n.to:n.from,t?-1:1)}function Vf(r,e,t,i){let n=r.state.doc.lineAt(e.head),s=r.bidiSpans(n),o=r.textDirectionAt(n.from);for(let l=e,a=null;;){let h=lT(n,s,o,l,t),c=yp;if(!h){if(n.number==(t?r.state.doc.lines:1))return l;c=`
`,n=r.state.doc.line(n.number+(t?1:-1)),s=r.bidiSpans(n),h=r.visualLineSide(n,!t)}if(a){if(!a(c))return l}else{if(!i)return h;a=i(c)}l=h}}function vT(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return s=>{let o=i(s);return n==Pe.Space&&(n=o),n==o}}function NT(r,e,t,i){let n=e.head,s=t?1:-1;if(n==(t?r.state.doc.length:0))return D.cursor(n,e.assoc);let o=e.goalColumn,l,a=r.contentDOM.getBoundingClientRect(),h=r.coordsAtPos(n,e.assoc||-1),c=r.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let g=r.viewState.lineBlockAt(n);o==null&&(o=Math.min(a.right-a.left,r.defaultCharacterWidth*(n-g.from))),l=(s<0?g.top:g.bottom)+c}let u=a.left+o,p=i??r.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let T=l+(p+g)*s,E=_p(r,{x:u,y:T},!1,s);if(T<a.top||T>a.bottom||(s<0?E<n:E>n)){let y=r.docView.coordsForChar(E),I=!y||T<y.top?-1:1;return D.cursor(E,I,void 0,o)}}}function co(r,e,t){for(;;){let i=0;for(let n of r)n.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||t||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Hl(r,e,t){let i=co(r.state.facet(Gh).map(n=>n(r)),t.from,e.head>t.from?-1:1);return i==t.from?t:D.cursor(i,i<t.from?1:-1)}const Pn="￿";class bT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Pn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let s=this.text.length;this.readNode(n);let o=n.nextSibling;if(o==t)break;let l=Re.get(n),a=Re.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:ko(n))||ko(o)&&(n.nodeName!="BR"||n.cmIgnore)&&this.text.length>s)&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=n.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Re.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(AT(e,i.node,i.offset)?t:0))}}function AT(r,e,t){for(;;){if(!e||t<fi(e))return!1;if(e==r)return!0;t=Er(e)+1,e=e.parentNode}}class Uf{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class wT{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:RT(e),a=new bT(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=LT(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Ua(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Ua(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((j.ios||j.chrome)&&e.state.selection.main.empty&&a!=h&&(c.from>0||c.to<e.state.doc.length)){let u=Math.min(a,h),p=Math.max(a,h),g=c.from-u,T=c.to-p;(g==0||g==1||u==0)&&(T==0||T==-1||p==e.state.doc.length)&&(a=0,h=e.state.doc.length)}this.newSel=D.single(h,a)}}}function Bp(r,e){let t,{newSel:i}=e,n=r.state.selection.main,s=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=n.from,h=null;(s===8||j.android&&e.text.length<l-o)&&(a=n.to,h="end");let c=kT(r.state.doc.sliceString(o,l,Pn),e.text,a-o,h);c&&(j.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Pn+Pn&&c.toB--,t={from:o+c.from,to:o+c.toA,insert:Ne.of(e.text.slice(c.from,c.toB).split(Pn))})}else i&&(!r.hasFocus&&r.state.facet(Ci)||i.main.eq(n))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!n.empty&&i&&i.main.empty?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,n.to)}:t&&t.from>=n.from&&t.to<=n.to&&(t.from!=n.from||t.to!=n.to)&&n.to-n.from-(t.to-t.from)<=4?t={from:n.from,to:n.to,insert:r.state.doc.slice(n.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,n.to))}:(j.mac||j.android)&&t&&t.from==t.to&&t.from==n.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=D.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ne.of([" "])}):j.chrome&&t&&t.from==t.to&&t.from==n.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=D.single(i.main.anchor-1,i.main.head-1)),t={from:n.from,to:n.to,insert:Ne.of([" "])}),t)return Qh(r,t,i,s);if(i&&!i.main.eq(n)){let o=!1,l="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(o=!0),l=r.inputState.lastSelectionOrigin),r.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Qh(r,e,t,i=-1){if(j.ios&&r.inputState.flushIOSKey(e))return!0;let n=r.state.selection.main;if(j.android&&(e.to==n.to&&(e.from==n.from||e.from==n.from-1&&r.state.sliceDoc(e.from,n.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&$r(r.contentDOM,"Enter",13)||(e.from==n.from-1&&e.to==n.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>n.head)&&$r(r.contentDOM,"Backspace",8)||e.from==n.from&&e.to==n.to+1&&e.insert.length==0&&$r(r.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let o,l=()=>o||(o=xT(r,e,t));return r.state.facet(Ap).some(a=>a(r,e.from,e.to,s,l))||r.dispatch(l()),!0}function xT(r,e,t){let i,n=r.state,s=n.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=s.from<e.from?n.sliceDoc(s.from,e.from):"",a=s.to>e.to?n.sliceDoc(e.to,s.to):"";i=n.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+a))}else{let l=n.changes(e),a=t&&t.main.to<=l.newLength?t.main:void 0;if(n.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let h=r.state.sliceDoc(e.from,e.to),c,u=t&&Pp(r,t.main.head);if(u){let T=e.insert.length-(e.to-e.from);c={from:u.from,to:u.to-T}}else c=r.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;i=n.changeByRange(T=>{if(T.from==s.from&&T.to==s.to)return{changes:l,range:a||T.map(l)};let E=T.to-p,y=E-h.length;if(T.to-T.from!=g||r.state.sliceDoc(y,E)!=h||T.to>=c.from&&T.from<=c.to)return{range:T};let I=n.changes({from:y,to:E,insert:e.insert}),w=T.to-s.to;return{changes:I,range:a?D.range(Math.max(0,a.anchor+w),Math.max(0,a.head+w)):T.map(I)}})}else i={changes:l,selection:a&&n.selection.replaceRange(a)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),n.update(i,{userEvent:o,scrollIntoView:!0})}function kT(r,e,t,i){let n=Math.min(r.length,e.length),s=0;for(;s<n&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==n&&r.length==e.length)return null;let o=r.length,l=e.length;for(;o>0&&l>0&&r.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&r.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function RT(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new Uf(t,i)),(n!=t||s!=i)&&e.push(new Uf(n,s))),e}function LT(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?D.single(t+e,i+e):null}class CT{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,j.safari&&e.contentDOM.addEventListener("input",()=>null),j.gecko&&GT(e.contentDOM.ownerDocument)}handleEvent(e){!FT(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let i=this.handlers[e];if(i){for(let n of i.observers)n(this.view,t);for(let n of i.handlers){if(t.defaultPrevented)break;if(n(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=DT(e),i=this.handlers,n=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(n.removeEventListener(s,this.handleEvent),l=null),l||n.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!t[s]&&n.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&zp.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),j.android&&j.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return j.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Fp.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||VT.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,$r(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:j.safari&&!j.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Mf(r,e){return(t,i)=>{try{return e.call(r,i,t)}catch(n){yt(t.state,n)}}}function DT(r){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of r){let n=i.spec;if(n&&n.domEventHandlers)for(let s in n.domEventHandlers){let o=n.domEventHandlers[s];o&&t(s).handlers.push(Mf(i.value,o))}if(n&&n.domEventObservers)for(let s in n.domEventObservers){let o=n.domEventObservers[s];o&&t(s).observers.push(Mf(i.value,o))}}for(let i in Gt)t(i).handlers.push(Gt[i]);for(let i in zt)t(i).observers.push(zt[i]);return e}const Fp=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],VT="dthko",zp=[16,17,18,20,91,92,224,225],qs=6;function Hs(r){return Math.max(0,r)*.7+8}function UT(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class MT{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=jS(e.contentDOM),this.atoms=e.state.facet(Gh).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ve.allowMultipleSelections)&&PT(e,t),this.dragging=BT(e,t)&&Wp(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&UT(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,n=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:n,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Mp(this.view);e.clientX-a.left<=n+qs?t=-Hs(n-e.clientX):e.clientX+a.right>=o-qs&&(t=Hs(e.clientX-o)),e.clientY-a.top<=s+qs?i=-Hs(s-e.clientY):e.clientY+a.bottom>=l-qs&&(i=Hs(e.clientY-l)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],s=null;if(n.empty){let o=co(this.atoms,n.from,0);o!=n.from&&(s=D.cursor(o,-1))}else{let o=co(this.atoms,n.from,-1),l=co(this.atoms,n.to,1);(o!=n.from||l!=n.to)&&(s=D.range(n.from==n.anchor?o:l,n.from==n.head?o:l))}s&&(t||(t=e.ranges.slice()),t[i]=s)}return t?D.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function PT(r,e){let t=r.state.facet(Ip);return t.length?t[0](e):j.mac?e.metaKey:e.ctrlKey}function _T(r,e){let t=r.state.facet(vp);return t.length?t[0](e):j.mac?!e.altKey:!e.ctrlKey}function BT(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=Jn(r.root);if(!i||i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let s=0;s<n.length;s++){let o=n[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function FT(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=Re.get(t))&&i.ignoreEvent(e))return!1;return!0}const Gt=Object.create(null),zt=Object.create(null),qp=j.ie&&j.ie_version<15||j.ios&&j.webkit_version<604;function zT(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),Hp(r,t.value)},50)}function fl(r,e,t){for(let i of r.facet(e))t=i(t,r);return t}function Hp(r,e){e=fl(r.state,jh,e);let{state:t}=r,i,n=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Qa!=null&&t.selection.ranges.every(a=>a.empty)&&Qa==s.toString()){let a=-1;i=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?s.line(n++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:D.cursor(h.from+u.length)}})}else o?i=t.changeByRange(a=>{let h=s.line(n++);return{changes:{from:a.from,to:a.to,insert:h.text},range:D.cursor(a.from+h.length)}}):i=t.replaceSelection(s);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}zt.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};Gt.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);zt.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};zt.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};Gt.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of r.state.facet(Np))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=WT(r,e)),t){let i=!r.hasFocus;r.inputState.startMouseSelection(new MT(r,e,t,i)),i&&r.observer.ignore(()=>{rp(r.contentDOM);let s=r.root.activeElement;s&&!s.contains(r.contentDOM)&&s.blur()});let n=r.inputState.mouseSelection;if(n)return n.start(e),n.dragging===!1}return!1};function Pf(r,e,t,i){if(i==1)return D.cursor(e,t);if(i==2)return ST(r.state,e,t);{let n=Fe.find(r.docView,e),s=r.state.doc.lineAt(n?n.posAtEnd:e),o=n?n.posAtStart:s.from,l=n?n.posAtEnd:s.to;return l<r.state.doc.length&&l==s.to&&l++,D.range(o,l)}}let _f=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function qT(r,e,t,i){let n=Fe.find(r.docView,e);if(!n)return 1;let s=e-n.posAtStart;if(s==0)return 1;if(s==n.length)return-1;let o=n.coordsAt(s,-1);if(o&&_f(t,i,o))return-1;let l=n.coordsAt(s,1);return l&&_f(t,i,l)?1:o&&o.bottom>=i?-1:1}function Bf(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:qT(r,t,e.clientX,e.clientY)}}const HT=j.ie&&j.ie_version<=11;let Ff=null,zf=0,qf=0;function Wp(r){if(!HT)return r.detail;let e=Ff,t=qf;return Ff=r,qf=Date.now(),zf=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(zf+1)%3:1}function WT(r,e){let t=Bf(r,e),i=Wp(e),n=r.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),n=n.map(s.changes))},get(s,o,l){let a=Bf(r,s),h,c=Pf(r,a.pos,a.bias,i);if(t.pos!=a.pos&&!o){let u=Pf(r,t.pos,t.bias,i),p=Math.min(u.from,c.from),g=Math.max(u.to,c.to);c=p<c.from?D.range(p,g):D.range(g,p)}return o?n.replaceRange(n.main.extend(c.from,c.to)):l&&i==1&&n.ranges.length>1&&(h=jT(n,a.pos))?h:l?n.addRange(c):D.create([c])}}}function jT(r,e){for(let t=0;t<r.ranges.length;t++){let{from:i,to:n}=r.ranges[t];if(i<=e&&n>=e)return D.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}Gt.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let n=r.docView.nearest(e.target);if(n&&n.isWidget){let s=n.posAtStart,o=s+n.length;(s>=t.to||o<=t.from)&&(t=D.range(s,o))}}let{inputState:i}=r;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",fl(r.state,$h,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Gt.dragend=r=>(r.inputState.draggedContent=null,!1);function Hf(r,e,t,i){if(t=fl(r.state,jh,t),!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=r.inputState,o=i&&s&&_T(r,e)?{from:s.from,to:s.to}:null,l={from:n,insert:t},a=r.state.changes(o?[o,l]:l);r.focus(),r.dispatch({changes:a,selection:{anchor:a.mapPos(n,-1),head:a.mapPos(n,1)},userEvent:o?"move.drop":"input.drop"}),r.inputState.draggedContent=null}Gt.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),n=0,s=()=>{++n==t.length&&Hf(r,e,i.filter(o=>o!=null).join(r.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Hf(r,e,i,!0),!0}return!1};Gt.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=qp?null:e.clipboardData;return t?(Hp(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(zT(r),!1)};function $T(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function KT(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:s}of r.selection.ranges){let o=r.doc.lineAt(s);o.number>n&&(e.push(o.text),t.push({from:o.from,to:Math.min(r.doc.length,o.to+1)})),n=o.number}i=!0}return{text:fl(r,$h,e.join(r.lineBreak)),ranges:t,linewise:i}}let Qa=null;Gt.copy=Gt.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=KT(r.state);if(!t&&!n)return!1;Qa=n?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=qp?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):($T(r,t),!1)};const jp=vi.define();function $p(r,e){let t=[];for(let i of r.facet(wp)){let n=i(r,e);n&&t.push(n)}return t?r.update({effects:t,annotations:jp.of(!0)}):null}function Kp(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=$p(r.state,e);t?r.dispatch(t):r.update([])}},10)}zt.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),Kp(r)};zt.blur=r=>{r.observer.clearSelectionRange(),Kp(r)};zt.compositionstart=zt.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};zt.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,j.chrome&&j.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};zt.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};Gt.beforeinput=(r,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=r.posAtDOM(l.startContainer,l.startOffset),h=r.posAtDOM(l.endContainer,l.endOffset);return Qh(r,{from:a,to:h,insert:r.state.toText(s)},null),!0}}let n;if(j.chrome&&j.android&&(n=Fp.find(s=>s.inputType==e.inputType))&&(r.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return j.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),j.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>zt.compositionend(r,e),20),!1};const Wf=new Set;function GT(r){Wf.has(r)||(Wf.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const jf=["pre-wrap","normal","pre-line","break-spaces"];let en=!1;function $f(){en=!1}class QT{constructor(e){this.lineWrapping=e,this.doc=Ne.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return jf.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,s,o){let l=jf.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=s,a){this.heightSamples={};for(let h=0;h<o.length;h++){let c=o[h];c<0?h++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class XT{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class si{constructor(e,t,i,n,s){this.from=e,this.length=t,this.top=i,this.height=n,this._content=s}get type(){return typeof this._content=="number"?ut.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Gi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new si(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ve=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(Ve||(Ve={}));const fo=.001;class dt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>fo&&(en=!0),this.height=e)}replace(e,t,i){return dt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let s=this,o=i.doc;for(let l=n.length-1;l>=0;l--){let{fromA:a,toA:h,fromB:c,toB:u}=n[l],p=s.lineAt(a,Ve.ByPosNoHeight,i.setDoc(t),0,0),g=p.to>=h?p:s.lineAt(h,Ve.ByPosNoHeight,i,0,0);for(u+=g.to-h,h=g.to;l>0&&p.from<=n[l-1].toA;)a=n[l-1].fromA,c=n[l-1].fromB,l--,a<p.from&&(p=s.lineAt(a,Ve.ByPosNoHeight,i,0,0));c+=p.from-a,a=p.from;let T=Xh.build(i.setDoc(o),e,c,u);s=Co(s,s.replace(a,h,T))}return s.updateHeight(i,0)}static empty(){return new kt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,s=0;for(;;)if(t==i)if(n>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,n-=l.size}else if(s>n*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(n<s){let l=e[t++];l&&(n+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new YT(dt.of(e.slice(0,t)),o,dt.of(e.slice(i)))}}function Co(r,e){return r==e?r:(r.constructor!=e.constructor&&(en=!0),e)}dt.prototype.size=1;class Gp extends dt{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new si(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,s){return this.blockAt(0,i,n,s)}forEachLine(e,t,i,n,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,n,s))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class kt extends Gp{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new si(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof kt||n instanceof Xe&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Xe?n=new kt(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):dt.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xe extends dt{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,s=n-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:n,perLine:o,perChar:l}}blockAt(e,t,i,n){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let h=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(h),u=l+c.length*a,p=Math.max(i,e-u/2);return new si(c.from,c.length,p,u,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:u}=t.doc.line(s+h);return new si(c,u,i+l*h,l,0)}}lineAt(e,t,i,n,s){if(t==Ve.ByHeight)return this.blockAt(e,i,n,s);if(t==Ve.ByPosNoHeight){let{from:g,to:T}=i.doc.lineAt(e);return new si(g,T-g,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),h=i.doc.lineAt(e),c=l+h.length*a,u=h.number-o,p=n+l*u+a*(h.from-s-u);return new si(h.from,h.length,Math.max(n,Math.min(p,n+this.height-c)),c,0)}forEachLine(e,t,i,n,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:l,perLine:a,perChar:h}=this.heightMetrics(i,s);for(let c=e,u=n;c<=t;){let p=i.doc.lineAt(c);if(c==e){let T=p.number-l;u+=a*T+h*(e-s-T)}let g=a+h*p.length;o(new si(p.from,p.length,u,g,0)),u+=g,c=p.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let s=i[i.length-1];s instanceof Xe?i[i.length-1]=new Xe(s.length+n):i.push(null,new Xe(n-1))}if(e>0){let s=i[0];s instanceof Xe?i[0]=new Xe(e+s.length):i.unshift(new Xe(e-1),null)}return dt.of(i)}decomposeLeft(e,t){t.push(new Xe(e-1),null)}decomposeRight(e,t){t.push(null,new Xe(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let s=t+this.length;if(n&&n.from<=t+this.length&&n.more){let o=[],l=Math.max(t,n.from),a=-1;for(n.from>t&&o.push(new Xe(n.from-t-1).updateHeight(e,t));l<=s&&n.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let u=n.heights[n.index++];a==-1?a=u:Math.abs(u-a)>=fo&&(a=-2);let p=new kt(c,u);p.outdated=!1,o.push(p),l+=c+1}l<=s&&o.push(null,new Xe(s-l).updateHeight(e,l));let h=dt.of(o);return(a<0||Math.abs(h.height-this.height)>=fo||Math.abs(a-this.heightMetrics(e,t).perLine)>=fo)&&(en=!0),Co(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class YT extends dt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,s,n+this.left.length+this.break)}lineAt(e,t,i,n,s){let o=n+this.left.height,l=s+this.left.length+this.break,a=t==Ve.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,i,n,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==Ve.ByPosNoHeight?Ve.ByPosNoHeight:Ve.ByPos;return a?h.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,n,s).join(h)}forEachLine(e,t,i,n,s,o){let l=n+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let h=this.lineAt(a,Ve.ByPos,i,n,s);e<h.from&&this.left.forEachLine(e,h.from-1,i,n,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,i,l,a,o)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Kf(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Kf(s,l)}return dt.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?dt.of(this.break?[e,null,t]:[e,t]):(this.left=Co(this.left,e),this.right=Co(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return n&&n.from<=t+s.length&&n.more?a=s=s.updateHeight(e,t,i,n):s.updateHeight(e,t,i),n&&n.from<=l+o.length&&n.more?a=o=o.updateHeight(e,l,i,n):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Kf(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof Xe&&(i=r[e+1])instanceof Xe&&r.splice(e-1,3,new Xe(t.length+1+i.length))}const JT=5;class Xh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof kt?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new kt(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new Gp(o,n,i)):(o||s||n>=JT)&&this.addLineDeco(n,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new kt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Xe(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof kt)return e;let t=new kt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof kt)&&!this.isCovered?this.nodes.push(new kt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof kt&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let s=new Xh(i,e);return ye.spans(t,i,n,s,0),s.finish(i)}}function ZT(r,e,t){let i=new eE;return ye.compare(r,e,t,i,0),i.changes}class eE{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&za(e,t,this.changes,5)}}function tE(r,e){let t=r.getBoundingClientRect(),i=r.ownerDocument,n=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(n.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(n.innerHeight,t.bottom);for(let h=r.parentNode;h&&h!=i.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let p=c.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),l=Math.max(l,p.top),a=Math.min(h==r.parentNode?n.innerHeight:a,p.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function iE(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Wl{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],s=t[i];if(n.from!=s.from||n.to!=s.to||n.size!=s.size)return!1}return!0}draw(e,t){return J.replace({widget:new rE(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class rE extends Yi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Gf{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Qf,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ue.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Kh).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new QT(t),this.stateDeco=e.facet(es).filter(i=>typeof i!="function"),this.heightMap=dt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle.setDoc(e.doc),[new Bt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=J.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>n>=s&&n<=o)){let{from:s,to:o}=this.lineBlockAt(n);e.push(new Ws(s,o))}}return this.viewports=e.sort((i,n)=>i.from-n.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Qf:new Yh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(_n(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(es).filter(c=>typeof c!="function");let n=e.changedRanges,s=Bt.extendWithRanges(n,ZT(i,this.stateDeco,e?e.changes:We.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$f(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||en)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let h=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(kp)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ue.RTL:Ue.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let h=0,c=0;if(l.width&&l.height){let{scaleX:L,scaleY:C}=ip(t,l);(L>.005&&Math.abs(this.scaleX-L)>.005||C>.005&&Math.abs(this.scaleY-C)>.005)&&(this.scaleX=L,this.scaleY=C,h|=8,o=a=!0)}let u=(parseInt(i.paddingTop)||0)*this.scaleY,p=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=u||this.paddingBottom!=p)&&(this.paddingTop=u,this.paddingBottom=p,h|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=8);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=sp(e.scrollDOM);let T=(this.printing?iE:tE)(t,this.paddingTop),E=T.top-this.pixelViewport.top,y=T.bottom-this.pixelViewport.bottom;this.pixelViewport=T;let I=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(I!=this.inView&&(this.inView=I,I&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let w=l.width;if((this.contentDOMWidth!=w||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,h|=8),a){let L=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(L)&&(o=!0),o||n.lineWrapping&&Math.abs(w-this.contentDOMWidth)>n.charWidth){let{lineHeight:C,charWidth:x,textHeight:k}=e.docView.measureTextSize();o=C>0&&n.refresh(s,C,x,k,w/x,L),o&&(e.docView.minWidth=0,h|=8)}E>0&&y>0?c=Math.max(E,y):E<0&&y<0&&(c=Math.min(E,y)),$f();for(let C of this.viewports){let x=C.from==this.viewport.from?L:e.docView.measureVisibleLineHeights(C);this.heightMap=(o?dt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle,[new Bt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,o,new XT(C.from,x))}en&&(h|=2)}let A=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return A&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),h|=this.updateForViewport()),(h&2||A)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Ws(n.lineAt(o-i*1e3,Ve.ByHeight,s,0,0).from,n.lineAt(l+(1-i)*1e3,Ve.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=n.lineAt(h,Ve.ByPos,s,0,0),p;t.y=="center"?p=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?p=u.top:p=u.bottom-c,a=new Ws(n.lineAt(p-1e3/2,Ve.ByHeight,s,0,0).from,n.lineAt(p+c+1e3/2,Ve.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ws(this.heightMap.lineAt(i,Ve.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Ve.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Ve.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Ve.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||n<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&n>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Wl(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,s=n>>1,o=n<<1;if(this.defaultTextDirection!=Ue.LTR&&!i)return[];let l=[],a=(c,u,p,g)=>{if(u-c<s)return;let T=this.state.selection.main,E=[T.from];T.empty||E.push(T.to);for(let I of E)if(I>c&&I<u){a(c,I-10,p,g),a(I+10,u,p,g);return}let y=sE(e,I=>I.from>=p.from&&I.to<=p.to&&Math.abs(I.from-c)<s&&Math.abs(I.to-u)<s&&!E.some(w=>I.from<w&&I.to>w));if(!y){if(u<p.to&&t&&i&&t.visibleRanges.some(A=>A.from<=u&&A.to>=u)){let A=t.moveToLineBoundary(D.cursor(u),!1,!0).head;A>c&&(u=A)}let I=this.gapSize(p,c,u,g),w=i||I<2e6?I:2e6;y=new Wl(c,u,I,w)}l.push(y)},h=c=>{if(c.length<o||c.type!=ut.Text)return;let u=nE(c.from,c.to,this.stateDeco);if(u.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,g,T;if(i){let E=n/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,I;if(p!=null){let w=$s(u,p),A=((this.visibleBottom-this.visibleTop)/2+E)/c.height;y=w-A,I=w+A}else y=(this.visibleTop-c.top-E)/c.height,I=(this.visibleBottom-c.top+E)/c.height;g=js(u,y),T=js(u,I)}else{let E=u.total*this.heightOracle.charWidth,y=n*this.heightOracle.charWidth,I=0;if(E>2e6)for(let x of e)x.from>=c.from&&x.from<c.to&&x.size!=x.displaySize&&x.from*this.heightOracle.charWidth+I<this.pixelViewport.left&&(I=x.size-x.displaySize);let w=this.pixelViewport.left+I,A=this.pixelViewport.right+I,L,C;if(p!=null){let x=$s(u,p),k=((A-w)/2+y)/E;L=x-k,C=x+k}else L=(w-y)/E,C=(A+y)/E;g=js(u,L),T=js(u,C)}g>c.from&&a(c.from,g,c,u),T<c.to&&a(T,c.to,c,u)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(h):h(c);return l}gapSize(e,t,i,n){let s=$s(n,i)-$s(n,t);return this.heightOracle.lineWrapping?e.height*s:n.total*this.heightOracle.charWidth*s}updateLineGaps(e){Wl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=J.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];ye.spans(e,this.viewport.from,this.viewport.to,{span(n,s){t.push({from:n,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,s)=>n.from!=t[s].from||n.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||_n(this.heightMap.lineAt(e,Ve.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||_n(this.heightMap.lineAt(this.scaler.fromDOM(e),Ve.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return _n(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ws{constructor(e,t){this.from=e,this.to=t}}function nE(r,e,t){let i=[],n=r,s=0;return ye.spans(t,r,e,{span(){},point(o,l){o>n&&(i.push({from:n,to:o}),s+=o-n),n=l}},20),n<e&&(i.push({from:n,to:e}),s+=e-n),{total:s,ranges:i}}function js({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:s,to:o}=e[n],l=o-s;if(i<=l)return s+i;i-=l}}function $s(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function sE(r,e){for(let t of r)if(e(t))return t}const Qf={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class Yh{constructor(e,t,i){let n=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let h=t.lineAt(l,Ve.ByPos,e,0,0).top,c=t.lineAt(a,Ve.ByPos,e,0,0).bottom;return n+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return n+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,n=s.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-n)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,n=s.domBottom}}eq(e){return e instanceof Yh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function _n(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new si(r.from,r.length,t,i-t,Array.isArray(r._content)?r._content.map(n=>_n(n,e)):r._content)}const Ks=H.define({combine:r=>r.join(" ")}),Xa=H.define({combine:r=>r.indexOf(!0)>-1}),Ya=$i.newName(),Qp=$i.newName(),Xp=$i.newName(),Yp={"&light":"."+Qp,"&dark":"."+Xp};function Ja(r,e,t){return new $i(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const oE=Ja("."+Ya,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Yp),lE={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},jl=j.ie&&j.ie_version<=11;class aE{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new $S,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(j.ie&&j.ie_version<=11||j.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(j.chrome&&j.chrome_version<126)&&(this.editContext=new cE(e),e.state.facet(Ci)&&(e.contentDOM.editContext=this.editContext.editContext)),jl&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(Ci)?i.root.activeElement!=this.dom:!ho(this.dom,n))return;let s=n.anchorNode&&i.docView.nearest(n.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(j.ie&&j.ie_version<=11||j.android&&j.chrome)&&!i.state.selection.main.empty&&n.focusNode&&Hn(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Jn(e.root);if(!t)return!1;let i=j.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&hE(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=ho(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&GS(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,lE),jl&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),jl&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let n=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&$r(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(n)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(n=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&ho(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new wT(this.view,e,t,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=Bp(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=Xf(t,e.previousSibling||e.target.previousSibling,-1),n=Xf(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ci)!=e.state.facet(Ci)&&(e.view.contentDOM.editContext=e.state.facet(Ci)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Xf(r,e,t){for(;e;){let i=Re.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function Yf(r,e){let t=e.startContainer,i=e.startOffset,n=e.endContainer,s=e.endOffset,o=r.docView.domAtPos(r.state.selection.main.anchor);return Hn(o.node,o.offset,n,s)&&([t,i,n,s]=[n,s,t,i]),{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:s}}function hE(r,e){if(e.getComposedRanges){let n=e.getComposedRanges(r.root)[0];if(n)return Yf(r,n)}let t=null;function i(n){n.preventDefault(),n.stopImmediatePropagation(),t=n.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",i,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",i,!0),t?Yf(r,t):null}class cE{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:n}=e.state.selection.main,s={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:Ne.of(i.text.split(`
`))};s.from==this.from&&n<this.from?s.from=n:s.to==this.to&&n>this.to&&(s.to=n),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||Qh(e,s,D.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let n=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,n.push(s)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=i=>{let n=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;n.push(J.mark({attributes:{style:a}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:Lp.of(J.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let n=Jn(i.root);n&&n.rangeCount&&this.editContext.updateSelectionBounds(n.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,h)=>{if(i)return;let c=h.length-(o-s);if(n&&o>=n.to)if(n.from==s&&n.to==o&&n.insert.eq(h)){n=this.pendingContextChange=null,t+=c,this.to+=c;return}else n=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=c}t+=c}),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=n)&&this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class q{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(n=>n.forEach(s=>i(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||KS(e.parent)||document,this.viewState=new Gf(e.state||ve.create(e)),e.scrollTo&&e.scrollTo.is(zs)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Un).map(n=>new zl(n));for(let n of this.plugins)n.update(this);this.observer=new aE(this),this.inputState=new CT(this),this.inputState.ensureHandlers(this.plugins),this.docView=new kf(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof je?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,n,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(p=>p.annotation(jp))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=$p(s,o),a||(l=1));let h=this.observer.delayedAndroidKey,c=null;if(h?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(ve.phrases)!=this.state.facet(ve.phrases))return this.setState(s);n=Lo.create(this,s,e),n.flags|=l;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(u&&(u=u.map(p.changes)),p.scrollIntoView){let{main:g}=p.state.selection;u=new Kr(g.empty?g:D.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of p.effects)g.is(zs)&&(u=g.value.clip(this.state))}this.viewState.update(n,u),this.bidiCache=Do.update(this.bidiCache,n.changes),n.empty||(this.updatePlugins(n),this.inputState.update(n)),t=this.docView.update(n),this.state.facet(Mn)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(n.startState.facet(Ks)!=n.state.facet(Ks)&&(this.viewState.mustMeasureContent=!0),(t||i||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!n.empty)for(let p of this.state.facet($a))try{p(n)}catch(g){yt(this.state,g,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Bp(this,c)&&h.force&&$r(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Gf(e),this.plugins=e.facet(Un).map(i=>new zl(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new kf(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Un),i=e.state.facet(Un);if(t!=i){let n=[];for(let s of i){let o=t.indexOf(s);if(o<0)n.push(new zl(s));else{let l=this.plugins[o];l.mustUpdate=e,n.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){yt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(sp(i))s=-1,o=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(n);s=g.from,o=g.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];a&4||([this.measureRequests,h]=[h,this.measureRequests]);let c=h.map(g=>{try{return g.read(this)}catch(T){return yt(this.state,T),Jf}}),u=Lo.create(this,this.state,[]),p=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),p=this.docView.update(u),p&&this.docViewUpdate());for(let g=0;g<h.length;g++)if(c[g]!=Jf)try{let T=h[g];T.write&&T.write(c[g],this)}catch(T){yt(this.state,T)}if(p&&this.docView.updateSelection(!0),!u.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let T=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(T>1||T<-1){n=n+T,i.scrollTop=n/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet($a))l(t)}get themeClasses(){return Ya+" "+(this.state.facet(Xa)?Xp:Qp)+" "+this.state.facet(Ks)}updateAttrs(){let e=Zf(this,Cp,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ci)?"true":"false",class:"cm-content",style:`${j.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Zf(this,Kh,t);let i=this.observer.ignore(()=>{let n=Fa(this.contentDOM,this.contentAttrs,t),s=Fa(this.dom,this.editorAttrs,e);return n||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(q.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(Mn);let e=this.state.facet(q.cspNonce);$i.mount(this.root,this.styleModules.concat(oE).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Hl(this,e,Vf(this,e,t,i))}moveByGroup(e,t){return Hl(this,e,Vf(this,e,t,i=>vT(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),s=i[t?i.length-1:0];return D.cursor(s.side(t,n)+e.from,s.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return IT(this,e,t,i)}moveVertically(e,t,i){return Hl(this,e,NT(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_p(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),s=this.bidiSpans(n),o=s[Mi.find(s,e-n.from,-1,t)];return hl(i,o.dir==Ue.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(xp)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>fE)return Op(e.length);let t=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Ep(s.isolates,i=xf(this,e))))return s.order;i||(i=xf(this,e));let n=oT(e.text,t,i);return this.bidiCache.push(new Do(e.from,e.to,t,i,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||j.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{rp(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return zs.of(new Kr(typeof e=="number"?D.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return zs.of(new Kr(D.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qe.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qe.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=$i.newName(),n=[Ks.of(i),Mn.of(Ja(`.${i}`,e))];return t&&t.dark&&n.push(Xa.of(!0)),n}static baseTheme(e){return br.lowest(Mn.of(Ja("."+Ya,e,Yp)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&Re.get(i)||Re.get(e);return((t=n==null?void 0:n.rootView)===null||t===void 0?void 0:t.view)||null}}q.styleModule=Mn;q.inputHandler=Ap;q.clipboardInputFilter=jh;q.clipboardOutputFilter=$h;q.scrollHandler=Rp;q.focusChangeEffect=wp;q.perLineTextDirection=xp;q.exceptionSink=bp;q.updateListener=$a;q.editable=Ci;q.mouseSelectionStyle=Np;q.dragMovesSelection=vp;q.clickAddsSelectionRange=Ip;q.decorations=es;q.outerDecorations=Dp;q.atomicRanges=Gh;q.bidiIsolatedRanges=Vp;q.scrollMargins=Up;q.darkTheme=Xa;q.cspNonce=H.define({combine:r=>r.length?r[0]:""});q.contentAttributes=Kh;q.editorAttributes=Cp;q.lineWrapping=q.contentAttributes.of({class:"cm-lineWrapping"});q.announce=ce.define();const fE=4096,Jf={};class Do{constructor(e,t,i,n,s,o){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let i=[],n=e.length?e[e.length-1].dir:Ue.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==n&&!t.touchesRange(o.from,o.to)&&i.push(new Do(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Zf(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let s=i[n],o=typeof s=="function"?s(r):s;o&&Ba(o,t)}return t}const uE=j.mac?"mac":j.windows?"win":j.linux?"linux":"key";function dE(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Gs(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const pE=br.default(q.domEventHandlers({keydown(r,e){return Zp(Jp(e.state),r,e,"editor")}})),ul=H.define({enables:pE}),eu=new WeakMap;function Jp(r){let e=r.facet(ul),t=eu.get(e);return t||eu.set(e,t=SE(e.reduce((i,n)=>i.concat(n),[]))),t}function mE(r,e,t){return Zp(Jp(r.state),e,r,t)}let Di=null;const gE=4e3;function SE(r,e=uE){let t=Object.create(null),i=Object.create(null),n=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h,c)=>{var u,p;let g=t[o]||(t[o]=Object.create(null)),T=l.split(/ (?!$)/).map(I=>dE(I,e));for(let I=1;I<T.length;I++){let w=T.slice(0,I).join(" ");n(w,!0),g[w]||(g[w]={preventDefault:!0,stopPropagation:!1,run:[A=>{let L=Di={view:A,prefix:w,scope:o};return setTimeout(()=>{Di==L&&(Di=null)},gE),!0}]})}let E=T.join(" ");n(E,!1);let y=g[E]||(g[E]={preventDefault:!1,stopPropagation:!1,run:((p=(u=g._any)===null||u===void 0?void 0:u.run)===null||p===void 0?void 0:p.slice())||[]});a&&y.run.push(a),h&&(y.preventDefault=!0),c&&(y.stopPropagation=!0)};for(let o of r){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:u}=o;for(let p in c)c[p].run.push(g=>u(g,Za))}let a=o[e]||o.key;if(a)for(let h of l)s(h,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return t}let Za=null;function Zp(r,e,t,i){Za=e;let n=qS(e),s=Ye(n,0),o=Pt(s)==n.length&&n!=" ",l="",a=!1,h=!1,c=!1;Di&&Di.view==t&&Di.scope==i&&(l=Di.prefix+" ",zp.indexOf(e.keyCode)<0&&(h=!0,Di=null));let u=new Set,p=y=>{if(y){for(let I of y.run)if(!u.has(I)&&(u.add(I),I(t)))return y.stopPropagation&&(c=!0),!0;y.preventDefault&&(y.stopPropagation&&(c=!0),h=!0)}return!1},g=r[i],T,E;return g&&(p(g[l+Gs(n,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(j.windows&&e.ctrlKey&&e.altKey)&&(T=Ki[e.keyCode])&&T!=n?(p(g[l+Gs(T,e,!0)])||e.shiftKey&&(E=Yn[e.keyCode])!=n&&E!=T&&p(g[l+Gs(E,e,!1)]))&&(a=!0):o&&e.shiftKey&&p(g[l+Gs(n,e,!0)])&&(a=!0),!a&&p(g._any)&&(a=!0)),h&&(a=!0),a&&c&&e.stopPropagation(),Za=null,a}class Ss{constructor(e,t,i,n,s){this.className=e,this.left=t,this.top=i,this.width=n,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let s=em(e);return[new Ss(t,n.left-s.left,n.top-s.top,null,n.bottom-n.top)]}else return TE(e,t,i)}}function em(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==Ue.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function tu(r,e,t,i){let n=r.coordsAtPos(e,t*2);if(!n)return i;let s=r.dom.getBoundingClientRect(),o=(n.top+n.bottom)/2,l=r.posAtCoords({x:s.left+1,y:o}),a=r.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function TE(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let i=Math.max(t.from,r.viewport.from),n=Math.min(t.to,r.viewport.to),s=r.textDirection==Ue.LTR,o=r.contentDOM,l=o.getBoundingClientRect(),a=em(r),h=o.querySelector(".cm-line"),c=h&&window.getComputedStyle(h),u=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),p=l.right-(c?parseInt(c.paddingRight):0),g=Ga(r,i),T=Ga(r,n),E=g.type==ut.Text?g:null,y=T.type==ut.Text?T:null;if(E&&(r.lineWrapping||g.widgetLineBreaks)&&(E=tu(r,i,1,E)),y&&(r.lineWrapping||T.widgetLineBreaks)&&(y=tu(r,n,-1,y)),E&&y&&E.from==y.from&&E.to==y.to)return w(A(t.from,t.to,E));{let C=E?A(t.from,null,E):L(g,!1),x=y?A(null,t.to,y):L(T,!0),k=[];return(E||g).to<(y||T).from-(E&&y?1:0)||g.widgetLineBreaks>1&&C.bottom+r.defaultLineHeight/2<x.top?k.push(I(u,C.bottom,p,x.top)):C.bottom<x.top&&r.elementAtHeight((C.bottom+x.top)/2).type==ut.Text&&(C.bottom=x.top=(C.bottom+x.top)/2),w(C).concat(k).concat(w(x))}function I(C,x,k,z){return new Ss(e,C-a.left,x-a.top-.01,k-C,z-x+.01)}function w({top:C,bottom:x,horizontal:k}){let z=[];for(let K=0;K<k.length;K+=2)z.push(I(k[K],C,k[K+1],x));return z}function A(C,x,k){let z=1e9,K=-1e9,$=[];function M(W,ne,se,ge,Ie){let ae=r.coordsAtPos(W,W==k.to?-2:2),Z=r.coordsAtPos(se,se==k.from?2:-2);!ae||!Z||(z=Math.min(ae.top,Z.top,z),K=Math.max(ae.bottom,Z.bottom,K),Ie==Ue.LTR?$.push(s&&ne?u:ae.left,s&&ge?p:Z.right):$.push(!s&&ge?u:Z.left,!s&&ne?p:ae.right))}let _=C??k.from,P=x??k.to;for(let W of r.visibleRanges)if(W.to>_&&W.from<P)for(let ne=Math.max(W.from,_),se=Math.min(W.to,P);;){let ge=r.state.doc.lineAt(ne);for(let Ie of r.bidiSpans(ge)){let ae=Ie.from+ge.from,Z=Ie.to+ge.from;if(ae>=se)break;Z>ne&&M(Math.max(ae,ne),C==null&&ae<=_,Math.min(Z,se),x==null&&Z>=P,Ie.dir)}if(ne=ge.to+1,ne>=se)break}return $.length==0&&M(_,C==null,P,x==null,r.textDirection),{top:z,bottom:K,horizontal:$}}function L(C,x){let k=l.top+(x?C.top:C.bottom);return{top:k,bottom:k,horizontal:[]}}}function EE(r,e){return r.constructor==e.constructor&&r.eq(e)}class OE{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(uo)!=e.state.facet(uo)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(uo);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!EE(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let n=t.nextSibling;t.remove(),t=n}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const uo=H.define();function tm(r){return[qe.define(e=>new OE(e,r)),uo.of(r)]}const im=!j.ios,ts=H.define({combine(r){return ui(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function yE(r={}){return[ts.of(r),IE,vE,NE,kp.of(!0)]}function rm(r){return r.startState.facet(ts)!=r.state.facet(ts)}const IE=tm({above:!0,markers(r){let{state:e}=r,t=e.facet(ts),i=[];for(let n of e.selection.ranges){let s=n==e.selection.main;if(n.empty?!s||im:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=n.empty?n:D.cursor(n.head,n.head>n.anchor?-1:1);for(let a of Ss.forRange(r,o,l))i.push(a)}}return i},update(r,e){r.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=rm(r);return t&&iu(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){iu(e.state,r)},class:"cm-cursorLayer"});function iu(r,e){e.style.animationDuration=r.facet(ts).cursorBlinkRate+"ms"}const vE=tm({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Ss.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||rm(r)},class:"cm-selectionLayer"}),eh={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};im&&(eh[".cm-line"].caretColor=eh[".cm-content"].caretColor="transparent !important");const NE=br.highest(q.theme(eh)),nm=ce.define({map(r,e){return r==null?null:e.mapPos(r)}}),Bn=tt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(nm)?i.value:t,r)}}),bE=qe.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Bn);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Bn)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(Bn),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let i=r.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-i.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Bn)!=r&&this.view.dispatch({effects:nm.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function AE(){return[Bn,bE]}function ru(r,e,t,i,n){e.lastIndex=0;for(let s=r.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)n(o+l.index,l)}function wE(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:s}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=s:i.push({from:n,to:s});return i}class xE{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(l,a,h,c)=>n(c,h,h+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,h,c)=>{let u=i(l,a,h);u&&c(h,h+l[0].length,u)};else if(i)this.addMatch=(l,a,h,c)=>c(h,h+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new ji,i=t.add.bind(t);for(let{from:n,to:s}of wE(e,this.maxLength))ru(e.state.doc,this.regexp,n,s,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),n=Math.max(a,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,n);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let p=[],g,T=(E,y,I)=>p.push(I.range(E,y));if(a==h)for(this.regexp.lastIndex=c-a.from;(g=this.regexp.exec(a.text))&&g.index<u-a.from;)this.addMatch(g,e,g.index+a.from,T);else ru(e.state.doc,this.regexp,c,u,(E,y)=>this.addMatch(y,e,E,T));t=t.update({filterFrom:c,filterTo:u,filter:(E,y)=>E<c||y>u,add:p})}}return t}}const th=/x/.unicode!=null?"gu":"g",kE=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,th),RE={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $l=null;function LE(){var r;if($l==null&&typeof document<"u"&&document.body){let e=document.body.style;$l=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return $l||!1}const po=H.define({combine(r){let e=ui(r,{render:null,specialChars:kE,addSpecialChars:null});return(e.replaceTabs=!LE())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,th)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,th)),e}});function CE(r={}){return[po.of(r),DE()]}let nu=null;function DE(){return nu||(nu=qe.fromClass(class{constructor(r){this.view=r,this.decorations=J.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(po)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new xE({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,s=Ye(e[0],0);if(s==9){let o=n.lineAt(i),l=t.state.tabSize,a=fn(o.text,l,i-o.from);return J.replace({widget:new PE((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=J.replace({widget:new ME(r,s)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(po);r.startState.facet(po)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const VE="•";function UE(r){return r>=32?VE:r==10?"␤":String.fromCharCode(9216+r)}class ME extends Yi{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=UE(this.code),i=e.state.phrase("Control character")+" "+(RE[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class PE extends Yi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function _E(){return FE}const BE=J.line({class:"cm-activeLine"}),FE=qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){let n=r.lineBlockAt(i.head);n.from>e&&(t.push(BE.range(n.from)),e=n.from)}return J.set(t)}},{decorations:r=>r.decorations}),ih=2e3;function zE(r,e,t){let i=Math.min(e.line,t.line),n=Math.max(e.line,t.line),s=[];if(e.off>ih||t.off>ih||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=n;a++){let h=r.doc.line(a);h.length<=l&&s.push(D.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=n;a++){let h=r.doc.line(a),c=Ca(h.text,o,r.tabSize,!0);if(c<0)s.push(D.cursor(h.to));else{let u=Ca(h.text,l,r.tabSize);s.push(D.range(h.from+c,h.from+u))}}}return s}function qE(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function su(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),n=t-i.from,s=n>ih?-1:n==i.length?qE(r,e.clientX):fn(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:s,off:n}}function HE(r,e){let t=su(r,e),i=r.state.selection;return t?{update(n){if(n.docChanged){let s=n.changes.mapPos(n.startState.doc.line(t.line).from),o=n.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(n.changes)}},get(n,s,o){let l=su(r,n);if(!l)return i;let a=zE(r.state,t,l);return a.length?o?D.create(a.concat(i.ranges)):D.create(a):i}}:null}function WE(r){let e=t=>t.altKey&&t.button==0;return q.mouseSelectionStyle.of((t,i)=>e(i)?HE(t,i):null)}const jE={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},$E={style:"cursor: crosshair"};function KE(r={}){let[e,t]=jE[r.key||"Alt"],i=qe.fromClass(class{constructor(n){this.view=n,this.isDown=!1}set(n){this.isDown!=n&&(this.isDown=n,this.view.update([]))}},{eventObservers:{keydown(n){this.set(n.keyCode==e||t(n))},keyup(n){(n.keyCode==e||!t(n))&&this.set(!1)},mousemove(n){this.set(t(n))}}});return[i,q.contentAttributes.of(n=>{var s;return!((s=n.plugin(i))===null||s===void 0)&&s.isDown?$E:null})]}const xn="-10000px";class sm{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,t){var i;let n=e.state.facet(this.facet),s=n.filter(a=>a);if(n===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=t?[]:null;for(let a=0;a<s.length;a++){let h=s[a],c=-1;if(h){for(let u=0;u<this.tooltips.length;u++){let p=this.tooltips[u];p&&p.create==h.create&&(c=u)}if(c<0)o[a]=this.createTooltipView(h,a?o[a-1]:null),l&&(l[a]=!!h.above);else{let u=o[a]=this.tooltipViews[c];l&&(l[a]=t[c]),u.update&&u.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return t&&(l.forEach((a,h)=>t[h]=a),t.length=l.length),this.input=n,this.tooltips=s,this.tooltipViews=o,!0}}function GE(r){let{win:e}=r;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Kl=H.define({combine:r=>{var e,t,i;return{position:j.ios?"absolute":((e=r.find(n=>n.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(n=>n.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(n=>n.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||GE}}}),ou=new WeakMap,Jh=qe.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(Kl);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new sm(r,Zh,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(Kl);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let n of this.manager.tooltipViews)n.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let n of this.manager.tooltipViews)this.container.appendChild(n.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",t.dom.appendChild(n)}return t.dom.style.position=this.position,t.dom.style.top=xn,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(r=i.destroy)===null||r===void 0||r.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect(),e=1,t=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(j.gecko)i=n.offsetParent!=this.container.ownerDocument.body;else if(n.style.top==xn&&n.style.left=="0px"){let s=n.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((n,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(Kl).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:t,space:i,scaleX:n,scaleY:s}=r,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],h=this.manager.tooltipViews[l],{dom:c}=h,u=r.pos[l],p=r.size[l];if(!u||u.bottom<=Math.max(t.top,i.top)||u.top>=Math.min(t.bottom,i.bottom)||u.right<Math.max(t.left,i.left)-.1||u.left>Math.min(t.right,i.right)+.1){c.style.top=xn;continue}let g=a.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,T=g?7:0,E=p.right-p.left,y=(e=ou.get(h))!==null&&e!==void 0?e:p.bottom-p.top,I=h.offset||XE,w=this.view.textDirection==Ue.LTR,A=p.width>i.right-i.left?w?i.left:i.right-p.width:w?Math.max(i.left,Math.min(u.left-(g?14:0)+I.x,i.right-E)):Math.min(Math.max(i.left,u.left-E+(g?14:0)-I.x),i.right-E),L=this.above[l];!a.strictSide&&(L?u.top-(p.bottom-p.top)-I.y<i.top:u.bottom+(p.bottom-p.top)+I.y>i.bottom)&&L==i.bottom-u.bottom>u.top-i.top&&(L=this.above[l]=!L);let C=(L?u.top-i.top:i.bottom-u.bottom)-T;if(C<y&&h.resize!==!1){if(C<this.view.defaultLineHeight){c.style.top=xn;continue}ou.set(h,y),c.style.height=(y=C)/s+"px"}else c.style.height&&(c.style.height="");let x=L?u.top-y-T-I.y:u.bottom+T+I.y,k=A+E;if(h.overlap!==!0)for(let z of o)z.left<k&&z.right>A&&z.top<x+y&&z.bottom>x&&(x=L?z.top-y-2-T:z.bottom+T+2);if(this.position=="absolute"?(c.style.top=(x-r.parent.top)/s+"px",c.style.left=(A-r.parent.left)/n+"px"):(c.style.top=x/s+"px",c.style.left=A/n+"px"),g){let z=u.left+(w?I.x:-I.x)-(A+14-7);g.style.left=z/n+"px"}h.overlap!==!0&&o.push({left:A,top:x,right:k,bottom:x+y}),c.classList.toggle("cm-tooltip-above",L),c.classList.toggle("cm-tooltip-below",!L),h.positioned&&h.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=xn}},{eventObservers:{scroll(){this.maybeMeasure()}}}),QE=q.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),XE={x:0,y:0},Zh=H.define({enables:[Jh,QE]}),Vo=H.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class dl{static create(e){return new dl(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new sm(e,Vo,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(n!==void 0){if(t===void 0)t=n;else if(t!==n)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const YE=Zh.compute([Vo],r=>{let e=r.facet(Vo);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:dl.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class JE{constructor(e,t,i,n,s){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,s=1;if(i instanceof Ui)n=i.posAtStart;else{if(n=e.posAtCoords(t),n==null)return;let l=e.coordsAtPos(n);if(!l||t.y<l.top||t.y>l.bottom||t.x<l.left-e.defaultCharacterWidth||t.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),h=a&&a.dir==Ue.RTL?-1:1;s=t.x<l.left?-h:h}let o=this.source(e,n,s);if(o!=null&&o.then){let l=this.pending={pos:n};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>yt(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Jh),t=e?e.manager.tooltips.findIndex(i=>i.create==dl.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:s}=this;if(n.length&&s&&!ZE(s.dom,e)||this.pending){let{pos:o}=n[0]||this.pending,l=(i=(t=n[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!eO(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Qs=4;function ZE(r,e){let{left:t,right:i,top:n,bottom:s}=r.getBoundingClientRect(),o;if(o=r.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();n=Math.min(l.top,n),s=Math.max(l.bottom,s)}return e.clientX>=t-Qs&&e.clientX<=i+Qs&&e.clientY>=n-Qs&&e.clientY<=s+Qs}function eO(r,e,t,i,n,s){let o=r.scrollDOM.getBoundingClientRect(),l=r.documentTop+r.documentPadding.top+r.contentHeight;if(o.left>i||o.right<i||o.top>n||Math.min(o.bottom,l)<n)return!1;let a=r.posAtCoords({x:i,y:n},!1);return a>=e&&a<=t}function tO(r,e={}){let t=ce.define(),i=tt.define({create(){return[]},update(n,s){if(n.length&&(e.hideOnChange&&(s.docChanged||s.selection)?n=[]:e.hideOn&&(n=n.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of n){let a=s.changes.mapPos(l.pos,-1,ft.TrackDel);if(a!=null){let h=Object.assign(Object.create(null),l);h.pos=a,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}n=o}for(let o of s.effects)o.is(t)&&(n=o.value),o.is(iO)&&(n=[]);return n},provide:n=>Vo.from(n)});return{active:i,extension:[i,qe.define(n=>new JE(n,r,i,t,e.hoverTime||300)),YE]}}function om(r,e){let t=r.plugin(Jh);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const iO=ce.define(),lu=H.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function is(r,e){let t=r.plugin(lm),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const lm=qe.fromClass(class{constructor(r){this.input=r.state.facet(rs),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(lu);this.top=new Xs(r,!0,e.topContainer),this.bottom=new Xs(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(lu);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Xs(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Xs(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(rs);if(t!=this.input){let i=t.filter(a=>a),n=[],s=[],o=[],l=[];for(let a of i){let h=this.specs.indexOf(a),c;h<0?(c=a(r.view),l.push(c)):(c=this.panels[h],c.update&&c.update(r)),n.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=n,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>q.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Xs{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=au(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=au(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function au(r){let e=r.nextSibling;return r.remove(),e}const rs=H.define({enables:lm});class Ii extends Tr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ii.prototype.elementClass="";Ii.prototype.toDOM=void 0;Ii.prototype.mapMode=ft.TrackBefore;Ii.prototype.startSide=Ii.prototype.endSide=-1;Ii.prototype.point=!0;const mo=H.define(),rO=H.define(),nO={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ye.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},jn=H.define();function sO(r){return[am(),jn.of(Object.assign(Object.assign({},nO),r))]}const hu=H.define({combine:r=>r.some(e=>e)});function am(r){return[oO]}const oO=qe.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(jn).map(e=>new fu(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(hu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(hu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=ye.iter(this.view.state.facet(mo),this.view.viewport.from),i=[],n=this.gutters.map(s=>new lO(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==ut.Text&&o){rh(t,i,l.from);for(let a of n)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of n)a.widget(this.view,l)}else if(s.type==ut.Text){rh(t,i,s.from);for(let o of n)o.line(this.view,s,i)}else if(s.widget)for(let o of n)o.widget(this.view,s);for(let s of n)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(jn),t=r.state.facet(jn),i=r.docChanged||r.heightChanged||r.viewportChanged||!ye.eq(r.startState.facet(mo),r.state.facet(mo),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let n of this.gutters)n.update(r)&&(i=!0);else{i=!0;let n=[];for(let s of t){let o=e.indexOf(s);o<0?n.push(new fu(this.view,s)):(this.gutters[o].update(r),n.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),n.indexOf(s)<0&&s.destroy();for(let s of n)this.dom.appendChild(s.dom);this.gutters=n}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>q.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Ue.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function cu(r){return Array.isArray(r)?r:[r]}function rh(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class lO{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ye.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==n.elements.length){let l=new hm(e,o,s,i);n.elements.push(l),n.dom.appendChild(l.dom)}else n.elements[this.i].update(e,o,s,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];rh(this.cursor,n,t.from),i.length&&(n=n.concat(i));let s=this.gutter.config.lineMarker(e,t,n);s&&n.unshift(s);let o=this.gutter;n.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let s of e.state.facet(rO)){let o=s(e,t.widget,t);o&&(n||(n=[])).push(o)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class fu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,n=>{let s=n.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=n.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[i](e,l,n)&&n.preventDefault()});this.markers=cu(t.markers(e)),t.initialSpacer&&(this.spacer=new hm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=cu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}let i=e.view.viewport;return!ye.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class hm{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),aO(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(n);let u=n.nextSibling;n.remove(),n=u}}if(!a)break;a.toDOM&&(h?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),h&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function aO(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const hO=H.define(),cO=H.define(),Pr=H.define({combine(r){return ui(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let n in t){let s=i[n],o=t[n];i[n]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return i}})}});class Gl extends Ii{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Ql(r,e){return r.state.facet(Pr).formatNumber(e,r.state)}const fO=jn.compute([Pr],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(hO)},lineMarker(e,t,i){return i.some(n=>n.toDOM)?null:new Gl(Ql(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let n of e.state.facet(cO)){let s=n(e,t,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Pr)!=e.state.facet(Pr),initialSpacer(e){return new Gl(Ql(e,uu(e.state.doc.lines)))},updateSpacer(e,t){let i=Ql(t.view,uu(t.view.state.doc.lines));return i==e.number?e:new Gl(i)},domEventHandlers:r.facet(Pr).domEventHandlers}));function uO(r={}){return[Pr.of(r),am(),fO]}function uu(r){let e=9;for(;e<r;)e=e*10+9;return e}const dO=new class extends Ii{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pO=mo.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.head).from;n>t&&(t=n,e.push(dO.range(n)))}return ye.of(e)});function mO(){return pO}const cm=1024;let gO=0;class Xl{constructor(e,t){this.from=e,this.to=t}}class de{constructor(e={}){this.id=gO++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=vt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}de.closedBy=new de({deserialize:r=>r.split(" ")});de.openedBy=new de({deserialize:r=>r.split(" ")});de.group=new de({deserialize:r=>r.split(" ")});de.isolate=new de({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});de.contextHash=new de({perNode:!0});de.lookAhead=new de({perNode:!0});de.mounted=new de({perNode:!0});class Uo{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[de.mounted.id]}}const SO=Object.create(null);class vt{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):SO,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),n=new vt(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(n)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return n}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(de.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return i=>{for(let n=i.prop(de.group),s=-1;s<(n?n.length:0);s++){let o=t[s<0?i.name:n[s]];if(o)return o}}}}vt.none=new vt("",Object.create(null),0,8);class ec{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let s of e){let o=s(i);o&&(n||(n=Object.assign({},i.props)),n[o[0].id]=o[1])}t.push(n?new vt(i.name,n,i.id,i.flags):i)}return new ec(t)}}const Ys=new WeakMap,du=new WeakMap;var Ge;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Ge||(Ge={}));class ze{constructor(e,t,i,n,s){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=Uo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let n=i.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new sh(this.topNode,e)}cursorAt(e,t=0,i=0){let n=Ys.get(this)||this.topNode,s=new sh(n);return s.moveTo(e,t),Ys.set(this,s._tree),s}get topNode(){return new Ft(this,0,0,null)}resolve(e,t=0){let i=ns(Ys.get(this)||this.topNode,e,t,!1);return Ys.set(this,i),i}resolveInner(e,t=0){let i=ns(du.get(this)||this.topNode,e,t,!0);return du.set(this,i),i}resolveStack(e,t=0){return OO(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:s=this.length}=e,o=e.mode||0,l=(o&Ge.IncludeAnonymous)>0;for(let a=this.cursor(o|Ge.IncludeAnonymous);;){let h=!1;if(a.from<=s&&a.to>=n&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;h=!0}for(;h&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:rc(vt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,n)=>new ze(this.type,t,i,n,this.propValues),e.makeTree||((t,i,n)=>new ze(vt.none,t,i,n)))}static build(e){return yO(e)}}ze.empty=new ze(vt.none,[],[],0);class tc{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tc(this.buffer,this.index)}}class Qi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return vt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],s=n.name;if(/\W/.test(s)&&!n.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,n,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(fm(s,n,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let n=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=n[l++],s[a++]=n[l++]-i;let h=s[a++]=n[l++]-i;s[a++]=n[l++]-e,o=Math.max(o,h)}return new Qi(s,o,this.set)}}function fm(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function ns(r,e,t,i){for(var n;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let o=!i&&r instanceof Ft&&r.index<0?null:r.parent;if(!o)return r;r=o}let s=i?0:Ge.IgnoreOverlays;if(i)for(let o=r,l=o.parent;l;o=l,l=o.parent)o instanceof Ft&&o.index<0&&((n=l.enter(e,t,s))===null||n===void 0?void 0:n.from)!=o.from&&(r=l);for(;;){let o=r.enter(e,t,s);if(!o)return r;r=o}}class um{cursor(e=0){return new sh(this,e)}getChild(e,t=null,i=null){let n=pu(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return pu(this,e,t,i)}resolve(e,t=0){return ns(this,e,t,!1)}resolveInner(e,t=0){return ns(this,e,t,!0)}matchContext(e){return nh(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}get node(){return this}get next(){return this.parent}}class Ft extends um{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let c=l[e],u=a[e]+o.from;if(fm(n,i,u,u+c.length)){if(c instanceof Qi){if(s&Ge.ExcludeBuffers)continue;let p=c.findChild(0,c.buffer.length,t,i-u,n);if(p>-1)return new Pi(new TO(o,c,e,u),null,p)}else if(s&Ge.IncludeAnonymous||!c.type.isAnonymous||ic(c)){let p;if(!(s&Ge.IgnoreMounts)&&(p=Uo.get(c))&&!p.overlay)return new Ft(p.tree,u,e,o);let g=new Ft(c,u,e,o);return s&Ge.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?c.children.length-1:0,t,i,n)}}}if(s&Ge.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&Ge.IgnoreOverlays)&&(n=Uo.get(this._tree))&&n.overlay){let s=e-this.from;for(let{from:o,to:l}of n.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Ft(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function pu(r,e,t,i){let n=r.cursor(),s=[];if(!n.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=n.type.is(t),!n.nextSibling())return s}for(;;){if(i!=null&&n.type.is(i))return s;if(n.type.is(e)&&s.push(n.node),!n.nextSibling())return i==null?s:[]}}function nh(r,e,t=e.length-1){for(let i=r;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class TO{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class Pi extends um{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new Pi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ge.ExcludeBuffers)return null;let{buffer:n}=this.context,s=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Pi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Pi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Pi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,s=i.buffer[this.index+3];if(s>n){let o=i.buffer[this.index+1];e.push(i.slice(n,s,o)),t.push(0)}return new ze(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function dm(r){if(!r.length)return null;let e=0,t=r[0];for(let s=1;s<r.length;s++){let o=r[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let i=t instanceof Ft&&t.index<0?null:t.parent,n=r.slice();return i?n[e]=i:n.splice(e,1),new EO(n,t)}class EO{constructor(e,t){this.heads=e,this.node=t}get next(){return dm(this.heads)}}function OO(r,e,t){let i=r.resolveInner(e,t),n=null;for(let s=i instanceof Ft?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(n||(n=[i])).push(o.resolve(e,t)),s=o}else{let o=Uo.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Ft(o.tree,o.overlay[0].from+s.from,-1,s);(n||(n=[i])).push(ns(l,e,t,!1))}}return n?dm(n):i}class sh{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ft)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return e?e instanceof Ft?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,s=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&Ge.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ge.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ge.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let n=i<0?0:this.stack[i]+4;if(this.index!=n)return this.yieldBuf(t.findChild(n,this.index,-1,0,4))}else{let n=t.buffer[this.index+3];if(n<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(n)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(n.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Ge.IncludeAnonymous||l instanceof Qi||!l.type.isAnonymous||ic(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==n){if(n==this.index)return o;t=o,i=s+1;break e}n=this.stack[--s]}for(let n=i;n<this.stack.length;n++)t=new Pi(this.buffer,t,this.stack[n]);return this.bufferNode=new Pi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return nh(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,s=this.stack.length-1;n>=0;s--){if(s<0)return nh(this._tree,e,n);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}}function ic(r){return r.children.some(e=>e instanceof Qi||!e.type.isAnonymous||ic(e))}function yO(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:n=cm,reused:s=[],minRepeatType:o=i.types.length}=r,l=Array.isArray(t)?new tc(t,t.length):t,a=i.types,h=0,c=0;function u(C,x,k,z,K,$){let{id:M,start:_,end:P,size:W}=l,ne=c,se=h;for(;W<0;)if(l.next(),W==-1){let ie=s[M];k.push(ie),z.push(_-C);return}else if(W==-3){h=M;return}else if(W==-4){c=M;return}else throw new RangeError(`Unrecognized record size: ${W}`);let ge=a[M],Ie,ae,Z=_-C;if(P-_<=n&&(ae=y(l.pos-x,K))){let ie=new Uint16Array(ae.size-ae.skip),pe=l.pos-ae.size,Se=ie.length;for(;l.pos>pe;)Se=I(ae.start,ie,Se);Ie=new Qi(ie,P-ae.start,i),Z=ae.start-C}else{let ie=l.pos-W;l.next();let pe=[],Se=[],G=M>=o?M:-1,ee=0,Te=P;for(;l.pos>ie;)G>=0&&l.id==G&&l.size>=0?(l.end<=Te-n&&(T(pe,Se,_,ee,l.end,Te,G,ne,se),ee=pe.length,Te=l.end),l.next()):$>2500?p(_,ie,pe,Se):u(_,ie,pe,Se,G,$+1);if(G>=0&&ee>0&&ee<pe.length&&T(pe,Se,_,ee,_,Te,G,ne,se),pe.reverse(),Se.reverse(),G>-1&&ee>0){let Ee=g(ge,se);Ie=rc(ge,pe,Se,0,pe.length,0,P-_,Ee,Ee)}else Ie=E(ge,pe,Se,P-_,ne-P,se)}k.push(Ie),z.push(Z)}function p(C,x,k,z){let K=[],$=0,M=-1;for(;l.pos>x;){let{id:_,start:P,end:W,size:ne}=l;if(ne>4)l.next();else{if(M>-1&&P<M)break;M<0&&(M=W-n),K.push(_,P,W),$++,l.next()}}if($){let _=new Uint16Array($*4),P=K[K.length-2];for(let W=K.length-3,ne=0;W>=0;W-=3)_[ne++]=K[W],_[ne++]=K[W+1]-P,_[ne++]=K[W+2]-P,_[ne++]=ne;k.push(new Qi(_,K[2]-P,i)),z.push(P-C)}}function g(C,x){return(k,z,K)=>{let $=0,M=k.length-1,_,P;if(M>=0&&(_=k[M])instanceof ze){if(!M&&_.type==C&&_.length==K)return _;(P=_.prop(de.lookAhead))&&($=z[M]+_.length+P)}return E(C,k,z,K,$,x)}}function T(C,x,k,z,K,$,M,_,P){let W=[],ne=[];for(;C.length>z;)W.push(C.pop()),ne.push(x.pop()+k-K);C.push(E(i.types[M],W,ne,$-K,_-$,P)),x.push(K-k)}function E(C,x,k,z,K,$,M){if($){let _=[de.contextHash,$];M=M?[_].concat(M):[_]}if(K>25){let _=[de.lookAhead,K];M=M?[_].concat(M):[_]}return new ze(C,x,k,z,M)}function y(C,x){let k=l.fork(),z=0,K=0,$=0,M=k.end-n,_={size:0,start:0,skip:0};e:for(let P=k.pos-C;k.pos>P;){let W=k.size;if(k.id==x&&W>=0){_.size=z,_.start=K,_.skip=$,$+=4,z+=4,k.next();continue}let ne=k.pos-W;if(W<0||ne<P||k.start<M)break;let se=k.id>=o?4:0,ge=k.start;for(k.next();k.pos>ne;){if(k.size<0)if(k.size==-3)se+=4;else break e;else k.id>=o&&(se+=4);k.next()}K=ge,z+=W,$+=se}return(x<0||z==C)&&(_.size=z,_.start=K,_.skip=$),_.size>4?_:void 0}function I(C,x,k){let{id:z,start:K,end:$,size:M}=l;if(l.next(),M>=0&&z<o){let _=k;if(M>4){let P=l.pos-(M-4);for(;l.pos>P;)k=I(C,x,k)}x[--k]=_,x[--k]=$-C,x[--k]=K-C,x[--k]=z}else M==-3?h=z:M==-4&&(c=z);return k}let w=[],A=[];for(;l.pos>0;)u(r.start||0,r.bufferStart||0,w,A,-1,0);let L=(e=r.length)!==null&&e!==void 0?e:w.length?A[0]+w[0].length:0;return new ze(a[r.topID],w.reverse(),A.reverse(),L)}const mu=new WeakMap;function go(r,e){if(!r.isAnonymous||e instanceof Qi||e.type!=r)return 1;let t=mu.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof ze)){t=1;break}t+=go(r,i)}mu.set(e,t)}return t}function rc(r,e,t,i,n,s,o,l,a){let h=0;for(let T=i;T<n;T++)h+=go(r,e[T]);let c=Math.ceil(h*1.5/8),u=[],p=[];function g(T,E,y,I,w){for(let A=y;A<I;){let L=A,C=E[A],x=go(r,T[A]);for(A++;A<I;A++){let k=go(r,T[A]);if(x+k>=c)break;x+=k}if(A==L+1){if(x>c){let k=T[L];g(k.children,k.positions,0,k.children.length,E[L]+w);continue}u.push(T[L])}else{let k=E[A-1]+T[A-1].length-C;u.push(rc(r,T,E,L,A,C,k,null,a))}p.push(C+w-s)}}return g(e,t,i,n,0),(l||a)(u,p,o)}class Sr{constructor(e,t,i,n,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let n=[new Sr(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&n.push(s);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=i)for(;o&&o.from<u;){let p=o;if(a>=p.from||u<=p.to||h){let g=Math.max(p.from,a)-h,T=Math.min(p.to,u)-h;p=g>=T?null:new Sr(g,T,p.tree,p.offset+h,l>0,!!c)}if(p&&n.push(p),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return n}}class pm{startParse(e,t,i){return typeof e=="string"&&(e=new IO(e)),i=i?i.length?i.map(n=>new Xl(n.from,n.to)):[new Xl(0,0)]:[new Xl(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let s=n.advance();if(s)return s}}}class IO{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new de({perNode:!0});let vO=0;class Mt{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=vO++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof Mt&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let n=new Mt(i,[],null,[]);if(n.set.push(n),t)for(let s of t.set)n.set.push(s);return n}static defineModifier(e){let t=new Mo(e);return i=>i.modified.indexOf(t)>-1?i:Mo.get(i.base||i,i.modified.concat(t).sort((n,s)=>n.id-s.id))}}let NO=0;class Mo{constructor(e){this.name=e,this.instances=[],this.id=NO++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&bO(t,l.modified));if(i)return i;let n=[],s=new Mt(e.name,n,e,t);for(let l of t)l.instances.push(s);let o=AO(t);for(let l of e.set)if(!l.modified.length)for(let a of o)n.push(Mo.get(l,a));return s}}function bO(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function AO(r){let e=[[]];for(let t=0;t<r.length;t++)for(let i=0,n=e.length;i<n;i++)e.push(e[i].concat(r[t]));return e.sort((t,i)=>i.length-t.length)}function mm(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let n of t.split(" "))if(n){let s=[],o=2,l=n;for(let u=0;;){if(l=="..."&&u>0&&u+3==n.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!p)throw new RangeError("Invalid path: "+n);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),u+=p[0].length,u==n.length)break;let g=n[u++];if(u==n.length&&g=="!"){o=0;break}if(g!="/")throw new RangeError("Invalid path: "+n);l=n.slice(u)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+n);let c=new Po(i,o,a>0?s.slice(0,a):null);e[h]=c.sort(e[h])}}return gm.add(e)}const gm=new de;class Po{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Po.empty=new Po([],2,null);function Sm(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:n=null}=e||{};return{style:s=>{let o=n;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:i}}function wO(r,e){let t=null;for(let i of r){let n=i.style(e);n&&(t=t?t+" "+n:n)}return t}function xO(r,e,t,i=0,n=r.length){let s=new kO(i,Array.isArray(e)?e:[e],t);s.highlightRange(r.cursor(),i,n,"",s.highlighters),s.flush(n)}class kO{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(g=>!g.scope||g.scope(o)));let h=n,c=RO(e)||Po.empty,u=wO(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(n+=(n?" ":"")+u)),this.startSpan(Math.max(t,l),h),c.opaque)return;let p=e.tree&&e.tree.prop(de.mounted);if(p&&p.overlay){let g=e.node.enter(p.overlay[0].from+l,1),T=this.highlighters.filter(y=>!y.scope||y.scope(p.tree.type)),E=e.firstChild();for(let y=0,I=l;;y++){let w=y<p.overlay.length?p.overlay[y]:null,A=w?w.from+l:a,L=Math.max(t,I),C=Math.min(i,A);if(L<C&&E)for(;e.from<C&&(this.highlightRange(e,L,C,n,s),this.startSpan(Math.min(C,e.to),h),!(e.to>=A||!e.nextSibling())););if(!w||A>i)break;I=w.to+l,I>t&&(this.highlightRange(g.cursor(),Math.max(t,w.from+l),Math.min(i,I),"",T),this.startSpan(Math.min(i,I),h))}E&&e.parent()}else if(e.firstChild()){p&&(n="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,s),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function RO(r){let e=r.type.prop(gm);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const B=Mt.define,Js=B(),Ri=B(),gu=B(Ri),Su=B(Ri),Li=B(),Zs=B(Li),Yl=B(Li),ri=B(),lr=B(ri),ti=B(),ii=B(),oh=B(),kn=B(oh),eo=B(),U={comment:Js,lineComment:B(Js),blockComment:B(Js),docComment:B(Js),name:Ri,variableName:B(Ri),typeName:gu,tagName:B(gu),propertyName:Su,attributeName:B(Su),className:B(Ri),labelName:B(Ri),namespace:B(Ri),macroName:B(Ri),literal:Li,string:Zs,docString:B(Zs),character:B(Zs),attributeValue:B(Zs),number:Yl,integer:B(Yl),float:B(Yl),bool:B(Li),regexp:B(Li),escape:B(Li),color:B(Li),url:B(Li),keyword:ti,self:B(ti),null:B(ti),atom:B(ti),unit:B(ti),modifier:B(ti),operatorKeyword:B(ti),controlKeyword:B(ti),definitionKeyword:B(ti),moduleKeyword:B(ti),operator:ii,derefOperator:B(ii),arithmeticOperator:B(ii),logicOperator:B(ii),bitwiseOperator:B(ii),compareOperator:B(ii),updateOperator:B(ii),definitionOperator:B(ii),typeOperator:B(ii),controlOperator:B(ii),punctuation:oh,separator:B(oh),bracket:kn,angleBracket:B(kn),squareBracket:B(kn),paren:B(kn),brace:B(kn),content:ri,heading:lr,heading1:B(lr),heading2:B(lr),heading3:B(lr),heading4:B(lr),heading5:B(lr),heading6:B(lr),contentSeparator:B(ri),list:B(ri),quote:B(ri),emphasis:B(ri),strong:B(ri),link:B(ri),monospace:B(ri),strikethrough:B(ri),inserted:B(),deleted:B(),changed:B(),invalid:B(),meta:eo,documentMeta:B(eo),annotation:B(eo),processingInstruction:B(eo),definition:Mt.defineModifier("definition"),constant:Mt.defineModifier("constant"),function:Mt.defineModifier("function"),standard:Mt.defineModifier("standard"),local:Mt.defineModifier("local"),special:Mt.defineModifier("special")};for(let r in U){let e=U[r];e instanceof Mt&&(e.name=r)}Sm([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);var Jl;const _r=new de;function LO(r){return H.define({combine:r?e=>e.concat(r):void 0})}const CO=new de;class $t{constructor(e,t,i=[],n=""){this.data=e,this.name=n,ve.prototype.hasOwnProperty("tree")||Object.defineProperty(ve.prototype,"tree",{get(){return Qe(this)}}),this.parser=t,this.extension=[Xi.of(this),ve.languageData.of((s,o,l)=>{let a=Tu(s,o,l),h=a.type.prop(_r);if(!h)return[];let c=s.facet(h),u=a.type.prop(CO);if(u){let p=a.resolve(o-a.from,l);for(let g of u)if(g.test(p,s)){let T=s.facet(g.facet);return g.type=="replace"?T:T.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return Tu(e,t,i).type.prop(_r)==this.data}findRegions(e){let t=e.facet(Xi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(s,o)=>{if(s.prop(_r)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(de.mounted);if(l){if(l.tree.prop(_r)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(n(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof ze&&n(h,s.positions[a]+o)}};return n(Qe(e),0),i}get allowsNesting(){return!0}}$t.setState=ce.define();function Tu(r,e,t){let i=r.facet(Xi),n=Qe(r).topNode;if(!i||i.allowsNesting)for(let s=n;s;s=s.enter(e,t,Ge.ExcludeBuffers))s.type.isTop&&(n=s);return n}class _o extends $t{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=LO(e.languageData);return new _o(t,e.parser.configure({props:[_r.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new _o(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Qe(r){let e=r.field($t.state,!1);return e?e.tree:ze.empty}class DO{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Rn=null;class Bo{constructor(e,t,i=[],n,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Bo(e,t,[],ze.empty,0,i,[],null)}startParse(){return this.parser.startParse(new DO(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ze.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let n=Date.now()+e;e=()=>Date.now()>n}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n)if(this.fragments=this.withoutTempSkipped(Sr.addTree(n,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=n,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Sr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Rn;Rn=this;try{return e()}finally{Rn=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Eu(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,p)=>a.push({fromA:h,toA:c,fromB:u,toB:p})),i=Sr.applyChanges(i,a),n=ze.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new Bo(this.parser,t,i,n,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:n,to:s}=this.skipped[i];n<e.to&&s>e.from&&(this.fragments=Eu(this.fragments,n,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pm{createParse(t,i,n){let s=n[0].from,o=n[n.length-1].to;return{parsedPos:s,advance(){let a=Rn;if(a){for(let h of n)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new ze(vt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Rn}}function Eu(r,e,t){return Sr.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class tn{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new tn(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Bo.create(e.facet(Xi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new tn(i)}}$t.state=tt.define({create:tn.init,update(r,e){for(let t of e.effects)if(t.is($t.setState))return t.value;return e.startState.facet(Xi)!=e.state.facet(Xi)?tn.init(e.state):r.apply(e)}});let Tm=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Tm=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Zl=typeof navigator<"u"&&(!((Jl=navigator.scheduling)===null||Jl===void 0)&&Jl.isInputPending)?()=>navigator.scheduling.isInputPending():null,VO=qe.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field($t.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field($t.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Tm(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,s=i.field($t.state);if(s.tree==s.context.tree&&s.context.isDone(n+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Zl?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<n&&i.doc.length>n+1e3,a=s.context.work(()=>Zl&&Zl()||Date.now()>o,n+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:$t.setState.of(new tn(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>yt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xi=H.define({combine(r){return r.length?r[0]:null},enables:r=>[$t.state,VO,q.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class UO{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const MO=H.define(),nc=H.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function Fo(r){let e=r.facet(nc);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function ss(r,e){let t="",i=r.tabSize,n=r.facet(nc)[0];if(n=="	"){for(;e>=i;)t+="	",e-=i;n=" "}for(let s=0;s<e;s++)t+=n;return t}function sc(r,e){r instanceof ve&&(r=new pl(r));for(let i of r.state.facet(MO)){let n=i(r,e);if(n!==void 0)return n}let t=Qe(r.state);return t.length>=e?PO(r,t,e):null}class pl{constructor(e,t={}){this.state=e,this.options=t,this.unit=Fo(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:s}=this.options;return n!=null&&n>=i.from&&n<=i.to?s&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.countColumn(i,e-n),o=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return fn(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(n);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Em=new de;function PO(r,e,t){let i=e.resolveStack(t),n=i.node.enterUnfinishedNodesBefore(t);if(n!=i.node){let s=[];for(let o=n;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Om(i,r,t)}function Om(r,e,t){for(let i=r;i;i=i.next){let n=BO(i.node);if(n)return n(oc.create(e,t,i))}return 0}function _O(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function BO(r){let e=r.type.prop(Em);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(de.closedBy))){let n=r.lastChild,s=n&&i.indexOf(n.name)>-1;return o=>HO(o,!0,1,void 0,s&&!_O(o)?n.from:void 0)}return r.parent==null?FO:null}function FO(){return 0}class oc extends pl{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new oc(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(zO(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Om(this.context.next,this.base,this.pos)}}function zO(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function qO(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let n=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),o=n==null||n<=s.from?s.to:Math.min(s.to,n);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let h=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+h}}l=a.to}}function HO(r,e,t,i,n){let s=r.textAfter,o=s.match(/^\s*/)[0].length,l=n==r.pos+o,a=qO(r);return a?l?r.column(a.from):r.column(a.to):r.baseIndent+(l?0:r.unit*t)}function WO({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const jO=200;function $O(){return ve.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,n=t.lineAt(i);if(i>n.from+jO)return r;let s=t.sliceString(n.from,i);if(!e.some(h=>h.test(s)))return r;let{state:o}=r,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let u=sc(o,c.from);if(u==null)continue;let p=/^\s*/.exec(c.text)[0],g=ss(o,u);p!=g&&a.push({from:c.from,to:c.from+p.length,insert:g})}return a.length?[r,{changes:a,sequential:!0}]:r})}const KO=H.define(),ym=new de;function GO(r,e,t){let i=Qe(r);if(i.length<t)return null;let n=i.resolveStack(t,1),s=null;for(let o=n;o;o=o.next){let l=o.node;if(l.to<=t||l.from>t)continue;if(s&&l.from<e)break;let a=l.type.prop(ym);if(a&&(l.to<i.length-50||i.length==r.doc.length||!QO(l))){let h=a(l,r);h&&h.from<=t&&h.from>=e&&h.to>t&&(s=h)}}return s}function QO(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function zo(r,e,t){for(let i of r.facet(KO)){let n=i(r,e,t);if(n)return n}return GO(r,e,t)}function Im(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const ml=ce.define({map:Im}),Ts=ce.define({map:Im});function vm(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const Ir=tt.define({create(){return J.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(ml)&&!XO(r,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(Am),n=i?J.replace({widget:new r2(i(e.state,t.value))}):Ou;r=r.update({add:[n.range(t.value.from,t.value.to)]})}else t.is(Ts)&&(r=r.update({filter:(i,n)=>t.value.from!=i||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(n,s)=>{n<i&&s>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(n,s)=>s<=i||n>=i}))}return r},provide:r=>q.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(i,n)=>{t.push(i,n)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let i=r[t++],n=r[t++];if(typeof i!="number"||typeof n!="number")throw new RangeError("Invalid JSON for fold state");e.push(Ou.range(i,n))}return J.set(e,!0)}});function qo(r,e,t){var i;let n=null;return(i=r.field(Ir,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!n||n.from>s)&&(n={from:s,to:o})}),n}function XO(r,e,t){let i=!1;return r.between(e,e,(n,s)=>{n==e&&s==t&&(i=!0)}),i}function Nm(r,e){return r.field(Ir,!1)?e:e.concat(ce.appendConfig.of(wm()))}const YO=r=>{for(let e of vm(r)){let t=zo(r.state,e.from,e.to);if(t)return r.dispatch({effects:Nm(r.state,[ml.of(t),bm(r,t)])}),!0}return!1},JO=r=>{if(!r.state.field(Ir,!1))return!1;let e=[];for(let t of vm(r)){let i=qo(r.state,t.from,t.to);i&&e.push(Ts.of(i),bm(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function bm(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,n=r.state.doc.lineAt(e.to).number;return q.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${n}.`)}const ZO=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let n=r.lineBlockAt(i),s=zo(e,n.from,n.to);s&&t.push(ml.of(s)),i=(s?r.lineBlockAt(s.to):n).to+1}return t.length&&r.dispatch({effects:Nm(r.state,t)}),!!t.length},e2=r=>{let e=r.state.field(Ir,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,n)=>{t.push(Ts.of({from:i,to:n}))}),r.dispatch({effects:t}),!0},t2=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:YO},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:JO},{key:"Ctrl-Alt-[",run:ZO},{key:"Ctrl-Alt-]",run:e2}],i2={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Am=H.define({combine(r){return ui(r,i2)}});function wm(r){return[Ir,o2]}function xm(r,e){let{state:t}=r,i=t.facet(Am),n=o=>{let l=r.lineBlockAt(r.posAtDOM(o.target)),a=qo(r.state,l.from,l.to);a&&r.dispatch({effects:Ts.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(r,n,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=n,s}const Ou=J.replace({widget:new class extends Yi{toDOM(r){return xm(r,null)}}});class r2 extends Yi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return xm(e,this.value)}}const n2={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class ea extends Ii{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function s2(r={}){let e=Object.assign(Object.assign({},n2),r),t=new ea(e,!0),i=new ea(e,!1),n=qe.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Xi)!=o.state.facet(Xi)||o.startState.field(Ir,!1)!=o.state.field(Ir,!1)||Qe(o.startState)!=Qe(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new ji;for(let a of o.viewportLineBlocks){let h=qo(o.state,a.from,a.to)?i:zo(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[n,sO({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(n))===null||l===void 0?void 0:l.markers)||ye.empty},initialSpacer(){return new ea(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=qo(o.state,l.from,l.to);if(h)return o.dispatch({effects:Ts.of(h)}),!0;let c=zo(o.state,l.from,l.to);return c?(o.dispatch({effects:ml.of(c)}),!0):!1}})}),wm()]}const o2=q.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Es{constructor(e,t){this.specs=e;let i;function n(l){let a=$i.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?n(t.all):void 0,o=t.scope;this.scope=o instanceof $t?l=>l.prop(_r)==o.data:o?l=>l==o:void 0,this.style=Sm(e.map(l=>({tag:l.tag,class:l.class||n(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new $i(i):null,this.themeType=t.themeType}static define(e,t){return new Es(e,t||{})}}const lh=H.define(),km=H.define({combine(r){return r.length?[r[0]]:null}});function ta(r){let e=r.facet(lh);return e.length?e:r.facet(km)}function Rm(r,e){let t=[a2],i;return r instanceof Es&&(r.module&&t.push(q.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?t.push(km.of(r)):i?t.push(lh.computeN([q.darkTheme],n=>n.facet(q.darkTheme)==(i=="dark")?[r]:[])):t.push(lh.of(r)),t}class l2{constructor(e){this.markCache=Object.create(null),this.tree=Qe(e.state),this.decorations=this.buildDeco(e,ta(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Qe(e.state),i=ta(e.state),n=i!=ta(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!n&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return J.none;let i=new ji;for(let{from:n,to:s}of e.visibleRanges)xO(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=J.mark({class:a})))},n,s);return i.finish()}}const a2=br.high(qe.fromClass(l2,{decorations:r=>r.decorations})),h2=Es.define([{tag:U.meta,color:"#404740"},{tag:U.link,textDecoration:"underline"},{tag:U.heading,textDecoration:"underline",fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strong,fontWeight:"bold"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.keyword,color:"#708"},{tag:[U.atom,U.bool,U.url,U.contentSeparator,U.labelName],color:"#219"},{tag:[U.literal,U.inserted],color:"#164"},{tag:[U.string,U.deleted],color:"#a11"},{tag:[U.regexp,U.escape,U.special(U.string)],color:"#e40"},{tag:U.definition(U.variableName),color:"#00f"},{tag:U.local(U.variableName),color:"#30a"},{tag:[U.typeName,U.namespace],color:"#085"},{tag:U.className,color:"#167"},{tag:[U.special(U.variableName),U.macroName],color:"#256"},{tag:U.definition(U.propertyName),color:"#00c"},{tag:U.comment,color:"#940"},{tag:U.invalid,color:"#f00"}]),c2=q.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Lm=1e4,Cm="()[]{}",Dm=H.define({combine(r){return ui(r,{afterCursor:!0,brackets:Cm,maxScanDistance:Lm,renderMatch:d2})}}),f2=J.mark({class:"cm-matchingBracket"}),u2=J.mark({class:"cm-nonmatchingBracket"});function d2(r){let e=[],t=r.matched?f2:u2;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const p2=tt.define({create(){return J.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(Dm);for(let n of e.state.selection.ranges){if(!n.empty)continue;let s=oi(e.state,n.head,-1,i)||n.head>0&&oi(e.state,n.head-1,1,i)||i.afterCursor&&(oi(e.state,n.head,1,i)||n.head<e.state.doc.length&&oi(e.state,n.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return J.set(t,!0)},provide:r=>q.decorations.from(r)}),m2=[p2,c2];function g2(r={}){return[Dm.of(r),m2]}const S2=new de;function ah(r,e,t){let i=r.prop(e<0?de.openedBy:de.closedBy);if(i)return i;if(r.name.length==1){let n=t.indexOf(r.name);if(n>-1&&n%2==(e<0?1:0))return[t[n+e]]}return null}function hh(r){let e=r.type.prop(S2);return e?e(r.node):r}function oi(r,e,t,i={}){let n=i.maxScanDistance||Lm,s=i.brackets||Cm,o=Qe(r),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=ah(a.type,t,s);if(h&&a.from<a.to){let c=hh(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return T2(r,e,t,a,c,h,s)}}return E2(r,e,t,o,l.type,n,s)}function T2(r,e,t,i,n,s,o){let l=i.parent,a={from:n.from,to:n.to},h=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=hh(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(ah(c.type,t,o))h++;else if(ah(c.type,-t,o)){if(h==0){let u=hh(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function E2(r,e,t,i,n,s,o){let l=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),u=0;for(let p=0;!c.next().done&&p<=s;){let g=c.value;t<0&&(p+=g.length);let T=e+p*t;for(let E=t>0?0:g.length-1,y=t>0?g.length:-1;E!=y;E+=t){let I=o.indexOf(g[E]);if(!(I<0||i.resolveInner(T+E,1).type!=n))if(I%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:T+E,to:T+E+1},matched:I>>1==a>>1};u--}}t>0&&(p+=g.length)}return c.done?{start:h,matched:!1}:null}const O2=Object.create(null),yu=[vt.none],Iu=[],vu=Object.create(null),y2=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])y2[r]=I2(O2,e);function ia(r,e){Iu.indexOf(r)>-1||(Iu.push(r),console.warn(e))}function I2(r,e){let t=[];for(let l of e.split(" ")){let a=[];for(let h of l.split(".")){let c=r[h]||U[h];c?typeof c=="function"?a.length?a=a.map(c):ia(h,`Modifier ${h} used at start of tag`):a.length?ia(h,`Tag ${h} used as modifier`):a=Array.isArray(c)?c:[c]:ia(h,`Unknown highlighting tag ${h}`)}for(let h of a)t.push(h)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),n=i+" "+t.map(l=>l.id),s=vu[n];if(s)return s.id;let o=vu[n]=vt.define({id:yu.length,name:i,props:[mm({[i]:t})]});return yu.push(o),o.id}Ue.RTL,Ue.LTR;const v2=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),i=ac(r.state,t.from);return i.line?N2(r):i.block?A2(r):!1};function lc(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=r(e,t);return n?(i(t.update(n)),!0):!1}}const N2=lc(k2,0),b2=lc(Vm,0),A2=lc((r,e)=>Vm(r,e,x2(e)),0);function ac(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Ln=50;function w2(r,{open:e,close:t},i,n){let s=r.sliceDoc(i-Ln,i),o=r.sliceDoc(n,n+Ln),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:n+a,margin:a&&1}};let c,u;n-i<=2*Ln?c=u=r.sliceDoc(i,n):(c=r.sliceDoc(i,i+Ln),u=r.sliceDoc(n-Ln,n));let p=/^\s*/.exec(c)[0].length,g=/\s*$/.exec(u)[0].length,T=u.length-g-t.length;return c.slice(p,p+e.length)==e&&u.slice(T,T+t.length)==t?{open:{pos:i+p+e.length,margin:/\s/.test(c.charAt(p+e.length))?1:0},close:{pos:n-g-t.length,margin:/\s/.test(u.charAt(T-1))?1:0}}:null}function x2(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),n=t.to<=i.to?i:r.doc.lineAt(t.to);n.from>i.from&&n.from==t.to&&(n=t.to==i.to+1?i:r.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=n.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:n.to})}return e}function Vm(r,e,t=e.selection.ranges){let i=t.map(s=>ac(e,s.from).block);if(!i.every(s=>s))return null;let n=t.map((s,o)=>w2(e,i[o],s.from,s.to));if(r!=2&&!n.every(s=>s))return{changes:e.changes(t.map((s,o)=>n[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(r!=1&&n.some(s=>s)){let s=[];for(let o=0,l;o<n.length;o++)if(l=n[o]){let a=i[o],{open:h,close:c}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function k2(r,e,t=e.selection.ranges){let i=[],n=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9,h=ac(e,s).line;if(h){for(let c=s;c<=o;){let u=e.doc.lineAt(c);if(u.from>n&&(s==o||o>u.from)){n=u.from;let p=/^\s*/.exec(u.text)[0].length,g=p==u.length,T=u.text.slice(p,p+h.length)==h?p:-1;p<u.text.length&&p<a&&(a=p),i.push({line:u,comment:T,token:h,indent:p,empty:g,single:!1})}c=u.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(r!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of i)(u||!c)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(r!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}const ch=vi.define(),R2=vi.define(),L2=H.define(),Um=H.define({combine(r){return ui(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}}),Mm=tt.define({create(){return li.empty},update(r,e){let t=e.state.facet(Um),i=e.annotation(ch);if(i){let a=It.fromTransaction(e,i.selection),h=i.side,c=h==0?r.undone:r.done;return a?c=Ho(c,c.length,t.minDepth,a):c=Bm(c,e.startState.selection),new li(h==0?i.rest:c,h==0?c:i.rest)}let n=e.annotation(R2);if((n=="full"||n=="before")&&(r=r.isolate()),e.annotation(je.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=It.fromTransaction(e),o=e.annotation(je.time),l=e.annotation(je.userEvent);return s?r=r.addChanges(s,o,l,t,e):e.selection&&(r=r.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(n=="full"||n=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new li(r.done.map(It.fromJSON),r.undone.map(It.fromJSON))}});function C2(r={}){return[Mm,Um.of(r),q.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Pm:e.inputType=="historyRedo"?fh:null;return i?(e.preventDefault(),i(t)):!1}})]}function gl(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let n=t.field(Mm,!1);if(!n)return!1;let s=n.pop(r,t,e);return s?(i(s),!0):!1}}const Pm=gl(0,!1),fh=gl(1,!1),D2=gl(0,!0),V2=gl(1,!0);class It{constructor(e,t,i,n,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=s}setSelAfter(e){return new It(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(n=>n.toJSON())}}static fromJSON(e){return new It(e.changes&&We.fromJSON(e.changes),[],e.mapped&&hi.fromJSON(e.mapped),e.startSelection&&D.fromJSON(e.startSelection),e.selectionsAfter.map(D.fromJSON))}static fromTransaction(e,t){let i=_t;for(let n of e.startState.facet(L2)){let s=n(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new It(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,_t)}static selection(e){return new It(void 0,_t,void 0,void 0,e)}}function Ho(r,e,t,i){let n=e+1>t+20?e-t-1:0,s=r.slice(n,e);return s.push(i),s}function U2(r,e){let t=[],i=!1;return r.iterChangedRanges((n,s)=>t.push(n,s)),e.iterChangedRanges((n,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(i=!0)}}),i}function M2(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function _m(r,e){return r.length?e.length?r.concat(e):r:e}const _t=[],P2=200;function Bm(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-P2));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),Ho(r,r.length-1,1e9,t.setSelAfter(i)))}else return[It.selection([e])]}function _2(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function ra(r,e){if(!r.length)return r;let t=r.length,i=_t;for(;t;){let n=B2(r[t-1],e,i);if(n.changes&&!n.changes.empty||n.effects.length){let s=r.slice(0,t);return s[t-1]=n,s}else e=n.mapped,t--,i=n.selectionsAfter}return i.length?[It.selection(i)]:_t}function B2(r,e,t){let i=_m(r.selectionsAfter.length?r.selectionsAfter.map(l=>l.map(e)):_t,t);if(!r.changes)return It.selection(i);let n=r.changes.map(e),s=e.mapDesc(r.changes,!0),o=r.mapped?r.mapped.composeDesc(s):s;return new It(n,ce.mapEffects(r.effects,e),o,r.startSelection.map(s),i)}const F2=/^(input\.type|delete)($|\.)/;class li{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new li(this.done,this.undone):this}addChanges(e,t,i,n,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||F2.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(s,U2(l.changes,e.changes))||i=="input.type.compose")?o=Ho(o,o.length-1,n.minDepth,new It(e.changes.compose(l.changes),_m(ce.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,_t)):o=Ho(o,o.length,n.minDepth,e),new li(o,_t,t,i)}addSelection(e,t,i,n){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:_t;return s.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&M2(s[s.length-1],e)?this:new li(Bm(this.done,e),this.undone,t,i)}addMapping(e){return new li(ra(this.done,e),ra(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=e==0?this.done:this.undone;if(n.length==0)return null;let s=n[n.length-1],o=s.selectionsAfter[0]||t.selection;if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:ch.of({side:e,rest:_2(n),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=n.length==1?_t:n.slice(0,n.length-1);return s.mapped&&(l=ra(l,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:ch.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}li.empty=new li(_t,_t);const z2=[{key:"Mod-z",run:Pm,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fh,preventDefault:!0},{key:"Mod-u",run:D2,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:V2,preventDefault:!0}];function un(r,e){return D.create(r.ranges.map(e),r.mainIndex)}function di(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Yt({state:r,dispatch:e},t){let i=un(r.selection,t);return i.eq(r.selection,!0)?!1:(e(di(r,i)),!0)}function Sl(r,e){return D.cursor(e?r.to:r.from)}function Fm(r,e){return Yt(r,t=>t.empty?r.moveByChar(t,e):Sl(t,e))}function ot(r){return r.textDirectionAt(r.state.selection.main.head)==Ue.LTR}const zm=r=>Fm(r,!ot(r)),qm=r=>Fm(r,ot(r));function Hm(r,e){return Yt(r,t=>t.empty?r.moveByGroup(t,e):Sl(t,e))}const q2=r=>Hm(r,!ot(r)),H2=r=>Hm(r,ot(r));function W2(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function Tl(r,e,t){let i=Qe(r).resolveInner(e.head),n=t?de.closedBy:de.openedBy;for(let a=e.head;;){let h=t?i.childAfter(a):i.childBefore(a);if(!h)break;W2(r,h,n)?i=h:a=t?h.to:h.from}let s=i.type.prop(n),o,l;return s&&(o=t?oi(r,i.from,1):oi(r,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,D.cursor(l,t?-1:1)}const j2=r=>Yt(r,e=>Tl(r.state,e,!ot(r))),$2=r=>Yt(r,e=>Tl(r.state,e,ot(r)));function Wm(r,e){return Yt(r,t=>{if(!t.empty)return Sl(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const jm=r=>Wm(r,!1),$m=r=>Wm(r,!0);function Km(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,i=0,n;if(e){for(let s of r.state.facet(q.scrollMargins)){let o=s(r);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}n=r.scrollDOM.clientHeight-t-i}else n=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(r.defaultLineHeight,n-5)}}function Gm(r,e){let t=Km(r),{state:i}=r,n=un(i.selection,o=>o.empty?r.moveVertically(o,e,t.height):Sl(o,e));if(n.eq(i.selection))return!1;let s;if(t.selfScroll){let o=r.coordsAtPos(i.selection.main.head),l=r.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,h=l.bottom-t.marginBottom;o&&o.top>a&&o.bottom<h&&(s=q.scrollIntoView(n.main.head,{y:"start",yMargin:o.top-a}))}return r.dispatch(di(i,n),{effects:s}),!0}const Nu=r=>Gm(r,!1),uh=r=>Gm(r,!0);function Ji(r,e,t){let i=r.lineBlockAt(e.head),n=r.moveToLineBoundary(e,t);if(n.head==e.head&&n.head!=(t?i.to:i.from)&&(n=r.moveToLineBoundary(e,t,!1)),!t&&n.head==i.from&&i.length){let s=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(n=D.cursor(i.from+s))}return n}const K2=r=>Yt(r,e=>Ji(r,e,!0)),G2=r=>Yt(r,e=>Ji(r,e,!1)),Q2=r=>Yt(r,e=>Ji(r,e,!ot(r))),X2=r=>Yt(r,e=>Ji(r,e,ot(r))),Y2=r=>Yt(r,e=>D.cursor(r.lineBlockAt(e.head).from,1)),J2=r=>Yt(r,e=>D.cursor(r.lineBlockAt(e.head).to,-1));function Z2(r,e,t){let i=!1,n=un(r.selection,s=>{let o=oi(r,s.head,-1)||oi(r,s.head,1)||s.head>0&&oi(r,s.head-1,1)||s.head<r.doc.length&&oi(r,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return D.cursor(l)});return i?(e(di(r,n)),!0):!1}const ey=({state:r,dispatch:e})=>Z2(r,e);function qt(r,e){let t=un(r.state.selection,i=>{let n=e(i);return D.range(i.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(di(r.state,t)),!0)}function Qm(r,e){return qt(r,t=>r.moveByChar(t,e))}const Xm=r=>Qm(r,!ot(r)),Ym=r=>Qm(r,ot(r));function Jm(r,e){return qt(r,t=>r.moveByGroup(t,e))}const ty=r=>Jm(r,!ot(r)),iy=r=>Jm(r,ot(r)),ry=r=>qt(r,e=>Tl(r.state,e,!ot(r))),ny=r=>qt(r,e=>Tl(r.state,e,ot(r)));function Zm(r,e){return qt(r,t=>r.moveVertically(t,e))}const e0=r=>Zm(r,!1),t0=r=>Zm(r,!0);function i0(r,e){return qt(r,t=>r.moveVertically(t,e,Km(r).height))}const bu=r=>i0(r,!1),Au=r=>i0(r,!0),sy=r=>qt(r,e=>Ji(r,e,!0)),oy=r=>qt(r,e=>Ji(r,e,!1)),ly=r=>qt(r,e=>Ji(r,e,!ot(r))),ay=r=>qt(r,e=>Ji(r,e,ot(r))),hy=r=>qt(r,e=>D.cursor(r.lineBlockAt(e.head).from)),cy=r=>qt(r,e=>D.cursor(r.lineBlockAt(e.head).to)),wu=({state:r,dispatch:e})=>(e(di(r,{anchor:0})),!0),xu=({state:r,dispatch:e})=>(e(di(r,{anchor:r.doc.length})),!0),ku=({state:r,dispatch:e})=>(e(di(r,{anchor:r.selection.main.anchor,head:0})),!0),Ru=({state:r,dispatch:e})=>(e(di(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),fy=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),uy=({state:r,dispatch:e})=>{let t=El(r).map(({from:i,to:n})=>D.range(i,Math.min(n+1,r.doc.length)));return e(r.update({selection:D.create(t),userEvent:"select"})),!0},dy=({state:r,dispatch:e})=>{let t=un(r.selection,i=>{let n=Qe(r),s=n.resolveStack(i.from,1);if(i.empty){let o=n.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return D.range(l.to,l.from)}return i});return t.eq(r.selection)?!1:(e(di(r,t)),!0)},py=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=D.create([t.main]):t.main.empty||(i=D.create([D.cursor(t.main.head)])),i?(e(di(r,i)),!0):!1};function Os(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:i}=r,n=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(t="delete.backward",a=to(r,a,!1)):a>o&&(t="delete.forward",a=to(r,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=to(r,o,!1),l=to(r,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:D.cursor(o,o<s.head?-1:1)}});return n.changes.empty?!1:(r.dispatch(i.update(n,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?q.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function to(r,e,t){if(r instanceof q)for(let i of r.state.facet(q.atomicRanges).map(n=>n(r)))i.between(e,e,(n,s)=>{n<e&&s>e&&(e=t?s:n)});return e}const r0=(r,e,t)=>Os(r,i=>{let n=i.from,{state:s}=r,o=s.doc.lineAt(n),l,a;if(t&&!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let h=fn(l,s.tabSize),c=h%Fo(s)||Fo(s);for(let u=0;u<c&&l[l.length-1-u]==" ";u++)n--;a=n}else a=et(o.text,n-o.from,e,e)+o.from,a==n&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,n-o.from))&&(a=et(o.text,a-o.from,!1,!1)+o.from);return a}),dh=r=>r0(r,!1,!0),n0=r=>r0(r,!0,!1),s0=(r,e)=>Os(r,t=>{let i=t.head,{state:n}=r,s=n.doc.lineAt(i),o=n.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t.head&&s.number!=(e?n.doc.lines:1)&&(i+=e?1:-1);break}let a=et(s.text,i-s.from,e)+s.from,h=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||i!=t.head)&&(l=c),i=a}return i}),o0=r=>s0(r,!1),my=r=>s0(r,!0),gy=r=>Os(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),Sy=r=>Os(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Ty=r=>Os(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),Ey=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Ne.of(["",""])},range:D.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Oy=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let n=i.from,s=r.doc.lineAt(n),o=n==s.from?n-1:et(s.text,n-s.from,!1)+s.from,l=n==s.to?n+1:et(s.text,n-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:r.doc.slice(n,l).append(r.doc.slice(o,n))},range:D.cursor(l)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function El(r){let e=[],t=-1;for(let i of r.selection.ranges){let n=r.doc.lineAt(i.from),s=r.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=r.doc.lineAt(i.to-1)),t>=n.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:n.from,to:s.to,ranges:[i]});t=s.number+1}return e}function l0(r,e,t){if(r.readOnly)return!1;let i=[],n=[];for(let s of El(r)){if(t?s.to==r.doc.length:s.from==0)continue;let o=r.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+r.lineBreak});for(let a of s.ranges)n.push(D.range(Math.min(r.doc.length,a.anchor+l),Math.min(r.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:r.lineBreak+o.text});for(let a of s.ranges)n.push(D.range(a.anchor-l,a.head-l))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:D.create(n,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const yy=({state:r,dispatch:e})=>l0(r,e,!1),Iy=({state:r,dispatch:e})=>l0(r,e,!0);function a0(r,e,t){if(r.readOnly)return!1;let i=[];for(let n of El(r))t?i.push({from:n.from,insert:r.doc.slice(n.from,n.to)+r.lineBreak}):i.push({from:n.to,insert:r.lineBreak+r.doc.slice(n.from,n.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const vy=({state:r,dispatch:e})=>a0(r,e,!1),Ny=({state:r,dispatch:e})=>a0(r,e,!0),by=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(El(e).map(({from:n,to:s})=>(n>0?n--:s<e.doc.length&&s++,{from:n,to:s}))),i=un(e.selection,n=>{let s;if(r.lineWrapping){let o=r.lineBlockAt(n.head),l=r.coordsAtPos(n.head,n.assoc||1);l&&(s=o.bottom+r.documentTop-l.bottom+r.defaultLineHeight/2)}return r.moveVertically(n,!0,s)}).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ay(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Qe(r).resolveInner(e),i=t.childBefore(e),n=t.childAfter(e),s;return i&&n&&i.to<=e&&n.from>=e&&(s=i.type.prop(de.closedBy))&&s.indexOf(n.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(n.from).from&&!/\S/.test(r.sliceDoc(i.to,n.from))?{from:i.to,to:n.from}:null}const Lu=h0(!1),wy=h0(!0);function h0(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(n=>{let{from:s,to:o}=n,l=e.doc.lineAt(s),a=!r&&s==o&&Ay(e,s);r&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new pl(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=sc(h,s);for(c==null&&(c=fn(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",ss(e,c)];return a&&u.push(ss(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:Ne.of(u)},range:D.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function hc(r,e){let t=-1;return r.changeByRange(i=>{let n=[];for(let o=i.from;o<=i.to;){let l=r.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,n,i),t=l.number),o=l.to+1}let s=r.changes(n);return{changes:n,range:D.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const xy=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new pl(r,{overrideIndentation:s=>{let o=t[s];return o??-1}}),n=hc(r,(s,o,l)=>{let a=sc(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],c=ss(r,a);(h!=c||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:c}))});return n.changes.empty||e(r.update(n,{userEvent:"indent"})),!0},c0=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(hc(r,(t,i)=>{i.push({from:t.from,insert:r.facet(nc)})}),{userEvent:"input.indent"})),!0),f0=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(hc(r,(t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let s=fn(n,r.tabSize),o=0,l=ss(r,Math.max(0,s-Fo(r)));for(;o<n.length&&o<l.length&&n.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+n.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),ky=r=>(r.setTabFocusMode(),!0),Ry=[{key:"Ctrl-b",run:zm,shift:Xm,preventDefault:!0},{key:"Ctrl-f",run:qm,shift:Ym},{key:"Ctrl-p",run:jm,shift:e0},{key:"Ctrl-n",run:$m,shift:t0},{key:"Ctrl-a",run:Y2,shift:hy},{key:"Ctrl-e",run:J2,shift:cy},{key:"Ctrl-d",run:n0},{key:"Ctrl-h",run:dh},{key:"Ctrl-k",run:gy},{key:"Ctrl-Alt-h",run:o0},{key:"Ctrl-o",run:Ey},{key:"Ctrl-t",run:Oy},{key:"Ctrl-v",run:uh}],Ly=[{key:"ArrowLeft",run:zm,shift:Xm,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:q2,shift:ty,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Q2,shift:ly,preventDefault:!0},{key:"ArrowRight",run:qm,shift:Ym,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:H2,shift:iy,preventDefault:!0},{mac:"Cmd-ArrowRight",run:X2,shift:ay,preventDefault:!0},{key:"ArrowUp",run:jm,shift:e0,preventDefault:!0},{mac:"Cmd-ArrowUp",run:wu,shift:ku},{mac:"Ctrl-ArrowUp",run:Nu,shift:bu},{key:"ArrowDown",run:$m,shift:t0,preventDefault:!0},{mac:"Cmd-ArrowDown",run:xu,shift:Ru},{mac:"Ctrl-ArrowDown",run:uh,shift:Au},{key:"PageUp",run:Nu,shift:bu},{key:"PageDown",run:uh,shift:Au},{key:"Home",run:G2,shift:oy,preventDefault:!0},{key:"Mod-Home",run:wu,shift:ku},{key:"End",run:K2,shift:sy,preventDefault:!0},{key:"Mod-End",run:xu,shift:Ru},{key:"Enter",run:Lu,shift:Lu},{key:"Mod-a",run:fy},{key:"Backspace",run:dh,shift:dh},{key:"Delete",run:n0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:o0},{key:"Mod-Delete",mac:"Alt-Delete",run:my},{mac:"Mod-Backspace",run:Sy},{mac:"Mod-Delete",run:Ty}].concat(Ry.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),Cy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:j2,shift:ry},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:$2,shift:ny},{key:"Alt-ArrowUp",run:yy},{key:"Shift-Alt-ArrowUp",run:vy},{key:"Alt-ArrowDown",run:Iy},{key:"Shift-Alt-ArrowDown",run:Ny},{key:"Escape",run:py},{key:"Mod-Enter",run:wy},{key:"Alt-l",mac:"Ctrl-l",run:uy},{key:"Mod-i",run:dy,preventDefault:!0},{key:"Mod-[",run:f0},{key:"Mod-]",run:c0},{key:"Mod-Alt-\\",run:xy},{key:"Shift-Mod-k",run:by},{key:"Shift-Mod-\\",run:ey},{key:"Mod-/",run:v2},{key:"Alt-A",run:b2},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ky}].concat(Ly),Dy={key:"Tab",run:c0,shift:f0};function Ce(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=t[i];typeof n=="string"?r.setAttribute(i,n):n!=null&&(r[i]=n)}e++}for(;e<arguments.length;e++)u0(r,arguments[e]);return r}function u0(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)u0(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Cu=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class rn{constructor(e,t,i=0,n=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=s?l=>s(Cu(l)):Cu,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ye(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Bh(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Pt(e);let n=this.normalize(t);for(let s=0,o=i;;s++){let l=n.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==n.length-1){if(a)return this.value=a,this;break}o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t,i){let n=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?n={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}typeof Symbol<"u"&&(rn.prototype[Symbol.iterator]=function(){return this});const d0={from:-1,to:-1,match:/.*/.exec("")},cc="gm"+(/x/.unicode==null?"":"u");class p0{constructor(e,t,i,n=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=d0,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new m0(e,t,i,n,s);this.re=new RegExp(t,cc+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(n);this.curLineStart=o.from,this.matchPos=Wo(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=Wo(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const na=new WeakMap;class Gr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=na.get(e);if(!n||n.from>=i||n.to<=t){let l=new Gr(t,e.sliceString(t,i));return na.set(e,l),l}if(n.from==t&&n.to==i)return n;let{text:s,from:o}=n;return o>t&&(s=e.sliceString(t,o)+s,o=t),n.to<i&&(s+=e.sliceString(n.to,i)),na.set(e,new Gr(o,s)),new Gr(t,s.slice(t-o,i-o))}}class m0{constructor(e,t,i,n,s){this.text=e,this.to=s,this.done=!1,this.value=d0,this.matchPos=Wo(e,n),this.re=new RegExp(t,cc+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Gr.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,n=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this.matchPos=Wo(this.text,n+(i==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Gr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(p0.prototype[Symbol.iterator]=m0.prototype[Symbol.iterator]=function(){return this});function Vy(r){try{return new RegExp(r,cc),!0}catch{return!1}}function Wo(r,e){if(e>=r.length)return e;let t=r.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function ph(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=Ce("input",{class:"cm-textfield",name:"line",value:e}),i=Ce("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),r.dispatch({effects:jo.of(!1)}),r.focus()):s.keyCode==13&&(s.preventDefault(),n())},onsubmit:s=>{s.preventDefault(),n()}},Ce("label",r.state.phrase("Go to line"),": ",t)," ",Ce("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function n(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:o}=r,l=o.doc.lineAt(o.selection.main.head),[,a,h,c,u]=s,p=c?+c.slice(1):0,g=h?+h:l.number;if(h&&u){let y=g/100;a&&(y=y*(a=="-"?-1:1)+l.number/o.doc.lines),g=Math.round(o.doc.lines*y)}else h&&a&&(g=g*(a=="-"?-1:1)+l.number);let T=o.doc.line(Math.max(1,Math.min(o.doc.lines,g))),E=D.cursor(T.from+Math.max(0,Math.min(p,T.length)));r.dispatch({effects:[jo.of(!1),q.scrollIntoView(E.from,{y:"center"})],selection:E}),r.focus()}return{dom:i}}const jo=ce.define(),Du=tt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(jo)&&(r=t.value);return r},provide:r=>rs.from(r,e=>e?ph:null)}),Uy=r=>{let e=is(r,ph);if(!e){let t=[jo.of(!0)];r.state.field(Du,!1)==null&&t.push(ce.appendConfig.of([Du,My])),r.dispatch({effects:t}),e=is(r,ph)}return e&&e.dom.querySelector("input").select(),!0},My=q.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Py={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},_y=H.define({combine(r){return ui(r,Py,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function By(r){return[Wy,Hy]}const Fy=J.mark({class:"cm-selectionMatch"}),zy=J.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Vu(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=Pe.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Pe.Word)}function qy(r,e,t,i){return r(e.sliceDoc(t,t+1))==Pe.Word&&r(e.sliceDoc(i-1,i))==Pe.Word}const Hy=qe.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(_y),{state:t}=r,i=t.selection;if(i.ranges.length>1)return J.none;let n=i.main,s,o=null;if(n.empty){if(!e.highlightWordAroundCursor)return J.none;let a=t.wordAt(n.head);if(!a)return J.none;o=t.charCategorizer(n.head),s=t.sliceDoc(a.from,a.to)}else{let a=n.to-n.from;if(a<e.minSelectionLength||a>200)return J.none;if(e.wholeWords){if(s=t.sliceDoc(n.from,n.to),o=t.charCategorizer(n.head),!(Vu(o,t,n.from,n.to)&&qy(o,t,n.from,n.to)))return J.none}else if(s=t.sliceDoc(n.from,n.to),!s)return J.none}let l=[];for(let a of r.visibleRanges){let h=new rn(t.doc,s,a.from,a.to);for(;!h.next().done;){let{from:c,to:u}=h.value;if((!o||Vu(o,t,c,u))&&(n.empty&&c<=n.from&&u>=n.to?l.push(zy.range(c,u)):(c>=n.to||u<=n.from)&&l.push(Fy.range(c,u)),l.length>e.maxMatches))return J.none}}return J.set(l)}},{decorations:r=>r.decorations}),Wy=q.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),jy=({state:r,dispatch:e})=>{let{selection:t}=r,i=D.create(t.ranges.map(n=>r.wordAt(n.head)||D.cursor(n.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function $y(r,e){let{main:t,ranges:i}=r.selection,n=r.wordAt(t.head),s=n&&n.from==t.from&&n.to==t.to;for(let o=!1,l=new rn(r.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new rn(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=r.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const Ky=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(s=>s.from===s.to))return jy({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(s=>r.sliceDoc(s.from,s.to)!=i))return!1;let n=$y(r,i);return n?(e(r.update({selection:r.selection.addRange(D.range(n.from,n.to),!1),effects:q.scrollIntoView(n.to)})),!0):!1},dn=H.define({combine(r){return ui(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new sI(e),scrollToMatch:e=>q.scrollIntoView(e)})}});class g0{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Vy(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Yy(this):new Qy(this)}getCursor(e,t=0,i){let n=e.doc?e:ve.create({doc:e});return i==null&&(i=n.doc.length),this.regexp?Ur(this,n,t,i):Vr(this,n,t,i)}}class S0{constructor(e){this.spec=e}}function Vr(r,e,t,i){return new rn(e.doc,r.unquoted,t,i,r.caseSensitive?void 0:n=>n.toLowerCase(),r.wholeWord?Gy(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Gy(r,e){return(t,i,n,s)=>((s>t||s+n.length<i)&&(s=Math.max(0,t-2),n=r.sliceString(s,Math.min(r.length,i+2))),(e($o(n,t-s))!=Pe.Word||e(Ko(n,t-s))!=Pe.Word)&&(e(Ko(n,i-s))!=Pe.Word||e($o(n,i-s))!=Pe.Word))}class Qy extends S0{constructor(e){super(e)}nextMatch(e,t,i){let n=Vr(this.spec,e,i,e.doc.length).nextOverlapping();return n.done&&(n=Vr(this.spec,e,0,t).nextOverlapping()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let s=Math.max(t,n-1e4-this.spec.unquoted.length),o=Vr(this.spec,e,s,n),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;n-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Vr(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Vr(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}function Ur(r,e,t,i){return new p0(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?Xy(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function $o(r,e){return r.slice(et(r,e,!1),e)}function Ko(r,e){return r.slice(e,et(r,e))}function Xy(r){return(e,t,i)=>!i[0].length||(r($o(i.input,i.index))!=Pe.Word||r(Ko(i.input,i.index))!=Pe.Word)&&(r(Ko(i.input,i.index+i[0].length))!=Pe.Word||r($o(i.input,i.index+i[0].length))!=Pe.Word)}class Yy extends S0{nextMatch(e,t,i){let n=Ur(this.spec,e,i,e.doc.length).next();return n.done&&(n=Ur(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let s=Math.max(t,i-n*1e4),o=Ur(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=Ur(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let s=Ur(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)n(s.value.from,s.value.to)}}const os=ce.define(),fc=ce.define(),Fi=tt.define({create(r){return new sa(mh(r).create(),null)},update(r,e){for(let t of e.effects)t.is(os)?r=new sa(t.value.create(),r.panel):t.is(fc)&&(r=new sa(r.query,t.value?uc:null));return r},provide:r=>rs.from(r,e=>e.panel)});class sa{constructor(e,t){this.query=e,this.panel=t}}const Jy=J.mark({class:"cm-searchMatch"}),Zy=J.mark({class:"cm-searchMatch cm-searchMatch-selected"}),eI=qe.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Fi))}update(r){let e=r.state.field(Fi);(e!=r.startState.field(Fi)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return J.none;let{view:t}=this,i=new ji;for(let n=0,s=t.visibleRanges,o=s.length;n<o;n++){let{from:l,to:a}=s[n];for(;n<o-1&&a>s[n+1].from-2*250;)a=s[++n].to;r.highlight(t.state,l,a,(h,c)=>{let u=t.state.selection.ranges.some(p=>p.from==h&&p.to==c);i.add(h,c,u?Zy:Jy)})}return i.finish()}},{decorations:r=>r.decorations});function ys(r){return e=>{let t=e.state.field(Fi,!1);return t&&t.query.spec.valid?r(e,t):O0(e)}}const Go=ys((r,{query:e})=>{let{to:t}=r.state.selection.main,i=e.nextMatch(r.state,t,t);if(!i)return!1;let n=D.single(i.from,i.to),s=r.state.facet(dn);return r.dispatch({selection:n,effects:[dc(r,i),s.scrollToMatch(n.main,r)],userEvent:"select.search"}),E0(r),!0}),Qo=ys((r,{query:e})=>{let{state:t}=r,{from:i}=t.selection.main,n=e.prevMatch(t,i,i);if(!n)return!1;let s=D.single(n.from,n.to),o=r.state.facet(dn);return r.dispatch({selection:s,effects:[dc(r,n),o.scrollToMatch(s.main,r)],userEvent:"select.search"}),E0(r),!0}),tI=ys((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:D.create(t.map(i=>D.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),iI=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:n}=t.main,s=[],o=0;for(let l=new rn(r.doc,r.sliceDoc(i,n));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(D.range(l.value.from,l.value.to))}return e(r.update({selection:D.create(s,o),userEvent:"select.search.matches"})),!0},Uu=ys((r,{query:e})=>{let{state:t}=r,{from:i,to:n}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=[],l,a,h=[];if(s.from==i&&s.to==n&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t,s.from,s.to),h.push(q.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let c=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=D.single(s.from-c,s.to-c),h.push(dc(r,s)),h.push(t.facet(dn).scrollToMatch(l.main,r))}return r.dispatch({changes:o,selection:l,effects:h,userEvent:"input.replace"}),!0}),rI=ys((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(n=>{let{from:s,to:o}=n;return{from:s,to:o,insert:e.getReplacement(n)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:q.announce.of(i),userEvent:"input.replace.all"}),!0});function uc(r){return r.state.facet(dn).createPanel(r)}function mh(r,e){var t,i,n,s,o;let l=r.selection.main,a=l.empty||l.to>l.from+100?"":r.sliceDoc(l.from,l.to);if(e&&!a)return e;let h=r.facet(dn);return new g0({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:h.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(n=e==null?void 0:e.literal)!==null&&n!==void 0?n:h.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function T0(r){let e=is(r,uc);return e&&e.dom.querySelector("[main-field]")}function E0(r){let e=T0(r);e&&e==r.root.activeElement&&e.select()}const O0=r=>{let e=r.state.field(Fi,!1);if(e&&e.panel){let t=T0(r);if(t&&t!=r.root.activeElement){let i=mh(r.state,e.query.spec);i.valid&&r.dispatch({effects:os.of(i)}),t.focus(),t.select()}}else r.dispatch({effects:[fc.of(!0),e?os.of(mh(r.state,e.query.spec)):ce.appendConfig.of(lI)]});return!0},y0=r=>{let e=r.state.field(Fi,!1);if(!e||!e.panel)return!1;let t=is(r,uc);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:fc.of(!1)}),!0},nI=[{key:"Mod-f",run:O0,scope:"editor search-panel"},{key:"F3",run:Go,shift:Qo,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Go,shift:Qo,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:y0,scope:"editor search-panel"},{key:"Mod-Shift-l",run:iI},{key:"Mod-Alt-g",run:Uy},{key:"Mod-d",run:Ky,preventDefault:!0}];class sI{constructor(e){this.view=e;let t=this.query=e.state.field(Fi).query.spec;this.commit=this.commit.bind(this),this.searchField=Ce("input",{value:t.search,placeholder:At(e,"Find"),"aria-label":At(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ce("input",{value:t.replace,placeholder:At(e,"Replace"),"aria-label":At(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ce("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ce("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ce("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(n,s,o){return Ce("button",{class:"cm-button",name:n,onclick:s,type:"button"},o)}this.dom=Ce("div",{onkeydown:n=>this.keydown(n),class:"cm-search"},[this.searchField,i("next",()=>Go(e),[At(e,"next")]),i("prev",()=>Qo(e),[At(e,"previous")]),i("select",()=>tI(e),[At(e,"all")]),Ce("label",null,[this.caseField,At(e,"match case")]),Ce("label",null,[this.reField,At(e,"regexp")]),Ce("label",null,[this.wordField,At(e,"by word")]),...e.state.readOnly?[]:[Ce("br"),this.replaceField,i("replace",()=>Uu(e),[At(e,"replace")]),i("replaceAll",()=>rI(e),[At(e,"replace all")])],Ce("button",{name:"close",onclick:()=>y0(e),"aria-label":At(e,"close"),type:"button"},["×"])])}commit(){let e=new g0({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:os.of(e)}))}keydown(e){mE(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Qo:Go)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Uu(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(os)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(dn).top}}function At(r,e){return r.state.phrase(e)}const io=30,ro=/[\s\.,:;?!]/;function dc(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),n=r.state.doc.lineAt(t).to,s=Math.max(i.from,e-io),o=Math.min(n,t+io),l=r.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<io;a++)if(!ro.test(l[a+1])&&ro.test(l[a])){l=l.slice(a);break}}if(o!=n){for(let a=l.length-1;a>l.length-io;a--)if(!ro.test(l[a-1])&&ro.test(l[a])){l=l.slice(0,a);break}}return q.announce.of(`${r.state.phrase("current match")}. ${l} ${r.state.phrase("on line")} ${i.number}.`)}const oI=q.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),lI=[Fi,br.low(eI),oI];class I0{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Qe(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),s=n.search(N0(e,!1));return s<0?null:{from:i+s,to:this.pos,text:n.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function Mu(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function aI(r){let e=Object.create(null),t=Object.create(null);for(let{label:n}of r){e[n[0]]=!0;for(let s=1;s<n.length;s++)t[n[s]]=!0}let i=Mu(e)+Mu(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function v0(r){let e=r.map(n=>typeof n=="string"?{label:n}:n),[t,i]=e.every(n=>/^\w+$/.test(n.label))?[/\w*$/,/\w+$/]:aI(e);return n=>{let s=n.matchBefore(i);return s||n.explicit?{from:s?s.from:n.pos,options:e,validFor:t}:null}}function hI(r,e){return t=>{for(let i=Qe(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(r.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class Pu{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function zi(r){return r.selection.main.from}function N0(r,e){var t;let{source:i}=r,n=e&&i[0]!="^",s=i[i.length-1]!="$";return!n&&!s?r:new RegExp(`${n?"^":""}(?:${i})${s?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const b0=vi.define();function cI(r,e,t,i){let{main:n}=r.selection,s=t-n.from,o=i-n.from;return Object.assign(Object.assign({},r.changeByRange(l=>{if(l!=n&&t!=i&&r.sliceDoc(l.from+s,l.from+o)!=r.sliceDoc(t,i))return{range:l};let a=r.toText(e);return{changes:{from:l.from+s,to:i==n.from?l.to:l.from+o,insert:a},range:D.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const _u=new WeakMap;function fI(r){if(!Array.isArray(r))return r;let e=_u.get(r);return e||_u.set(r,e=v0(r)),e}const Xo=ce.define(),ls=ce.define();class uI{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Ye(e,t),n=Pt(i);this.chars.push(i);let s=e.slice(t,t+n),o=s.toUpperCase();this.folded.push(Ye(o==s?s.toLowerCase():o,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:s,byWord:o}=this;if(t.length==1){let w=Ye(e,0),A=Pt(w),L=A==e.length?0:-100;if(w!=t[0])if(w==i[0])L+=-200;else return null;return this.ret(L,[0,A])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,h=0;if(l<0){for(let w=0,A=Math.min(e.length,200);w<A&&h<a;){let L=Ye(e,w);(L==t[h]||L==i[h])&&(n[h++]=w),w+=Pt(L)}if(h<a)return null}let c=0,u=0,p=!1,g=0,T=-1,E=-1,y=/[a-z]/.test(e),I=!0;for(let w=0,A=Math.min(e.length,200),L=0;w<A&&u<a;){let C=Ye(e,w);l<0&&(c<a&&C==t[c]&&(s[c++]=w),g<a&&(C==t[g]||C==i[g]?(g==0&&(T=w),E=w+1,g++):g=0));let x,k=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(x=Bh(C))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!w||k==1&&y||L==0&&k!=0)&&(t[u]==C||i[u]==C&&(p=!0)?o[u++]=w:o.length&&(I=!1)),L=k,w+=Pt(C)}return u==a&&o[0]==0&&I?this.result(-100+(p?-200:0),o,e):g==a&&T==0?this.ret(-200-e.length+(E==e.length?0:-100),[0,E]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):g==a?this.ret(-900-e.length,[T,E]):u==a?this.result(-100+(p?-200:0)+-700+(I?0:-1100),o,e):t.length==2?null:this.result((n[0]?-700:0)+-200+-1100,n,e)}result(e,t,i){let n=[],s=0;for(let o of t){let l=o+(this.astral?Pt(Ye(i,o)):1);s&&n[s-1]==o?n[s-1]=l:(n[s++]=o,n[s++]=l)}return this.ret(e-i.length,n)}}class dI{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ze=H.define({combine(r){return ui(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:pI,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Bu(e(i),t(i)),optionClass:(e,t)=>i=>Bu(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Bu(r,e){return r?e?r+" "+e:r:e}function pI(r,e,t,i,n,s){let o=r.textDirection==Ue.RTL,l=o,a=!1,h="top",c,u,p=e.left-n.left,g=n.right-e.right,T=i.right-i.left,E=i.bottom-i.top;if(l&&p<Math.min(T,g)?l=!1:!l&&g<Math.min(T,p)&&(l=!0),T<=(l?p:g))c=Math.max(n.top,Math.min(t.top,n.bottom-E))-e.top,u=Math.min(400,l?p:g);else{a=!0,u=Math.min(400,(o?e.right:n.right-e.left)-30);let w=n.bottom-e.bottom;w>=E||w>e.top?c=t.bottom-e.top:(h="bottom",c=e.bottom-t.top)}let y=(e.bottom-e.top)/s.offsetHeight,I=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${c/y}px; max-width: ${u/I}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function mI(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(n=>"cm-completionIcon-"+n)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,n,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let h=0;h<s.length;){let c=s[h++],u=s[h++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(l.slice(c,u))),p.className="cm-completionMatchedText",a=u}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function oa(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let n=Math.floor(e/t);return{from:n*t,to:(n+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class gI{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:s,selected:o}=n.open,l=e.state.facet(Ze);this.optionContent=mI(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=oa(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:h}=e.state.field(t).open;for(let c=a.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<h.length){this.applyCompletion(e,h[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Ze).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:ls.of(null)})}),this.showOptions(s,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:s,selected:o,disabled:l}=i.open;(!n.open||n.open.options!=s)&&(this.range=oa(s.length,o,e.state.facet(Ze).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((t=n.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=oa(t.options.length,t.selected,this.view.state.facet(Ze).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let s=typeof n=="string"?document.createTextNode(n):n(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>yt(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:n,destroy:s}=e;i.appendChild(n),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)i.nodeName!="LI"||!i.id?n--:n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&TI(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return n.top>Math.min(s.bottom,t.bottom)-10||n.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Ze).positionInfo(this.view,t,n,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:h}=l;if(h){let p=typeof h=="string"?h:h.name;if(p!=s&&(o>i.from||i.from==0))if(s=p,typeof h!="string"&&h.header)n.appendChild(h.header(h));else{let g=n.appendChild(document.createElement("completion-section"));g.textContent=p}}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(l);u&&(c.className=u);for(let p of this.optionContent){let g=p(l,this.view.state,this.view,a);g&&c.appendChild(g)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function SI(r,e){return t=>new gI(t,r,e)}function TI(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect(),n=t.height/r.offsetHeight;i.top<t.top?r.scrollTop-=(t.top-i.top)/n:i.bottom>t.bottom&&(r.scrollTop+=(i.bottom-t.bottom)/n)}function Fu(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function EI(r,e){let t=[],i=null,n=h=>{t.push(h);let{section:c}=h.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(p=>p.name==u)||i.push(typeof c=="string"?{name:u}:c)}},s=e.facet(Ze);for(let h of r)if(h.hasResult()){let c=h.result.getMatch;if(h.result.filter===!1)for(let u of h.result.options)n(new Pu(u,h.source,c?c(u):[],1e9-t.length));else{let u=e.sliceDoc(h.from,h.to),p,g=s.filterStrict?new dI(u):new uI(u);for(let T of h.result.options)if(p=g.match(T.label)){let E=T.displayLabel?c?c(T,p.matched):[]:p.matched;n(new Pu(T,h.source,E,p.score+(T.boost||0)))}}}if(i){let h=Object.create(null),c=0,u=(p,g)=>{var T,E;return((T=p.rank)!==null&&T!==void 0?T:1e9)-((E=g.rank)!==null&&E!==void 0?E:1e9)||(p.name<g.name?-1:1)};for(let p of i.sort(u))c-=1e5,h[p.name]=c;for(let p of t){let{section:g}=p.completion;g&&(p.score+=h[typeof g=="string"?g:g.name])}}let o=[],l=null,a=s.compareCompletions;for(let h of t.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=h.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?o.push(h):Fu(h.completion)>Fu(l)&&(o[o.length-1]=h),l=h.completion}return o}class Br{constructor(e,t,i,n,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Br(this.options,zu(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,s){let o=EI(e,t);if(!o.length)return n&&e.some(a=>a.state==1)?new Br(n.options,n.attrs,n.tooltip,n.timestamp,n.selected,!0):null;let l=t.facet(Ze).selectOnOpen?0:-1;if(n&&n.selected!=l&&n.selected!=-1){let a=n.options[n.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==a){l=h;break}}return new Br(o,zu(i,l),{pos:e.reduce((a,h)=>h.hasResult()?Math.min(a,h.from):a,1e8),create:bI,above:s.aboveCursor},n?n.timestamp:Date.now(),l,!1)}map(e){return new Br(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Yo{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Yo(vI,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ze),s=(i.override||t.languageDataAt("autocomplete",zi(t)).map(fI)).map(l=>(this.active.find(h=>h.source==l)||new Rt(l,this.active.some(h=>h.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!OI(s,this.active)?o=Br.build(s,t,this.id,o,i):o&&o.disabled&&!s.some(l=>l.state==1)&&(o=null),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Rt(l.source,0):l));for(let l of e.effects)l.is(x0)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Yo(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?yI:II}}function OI(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let n=t==r.length,s=i==e.length;if(n||s)return n==s;if(r[t++].result!=e[i++].result)return!1}}const yI={"aria-autocomplete":"list"},II={};function zu(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const vI=[];function A0(r,e){if(r.isUserEvent("input.complete")){let i=r.annotation(b0);if(i&&e.activateOnCompletion(i))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class Rt{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=A0(e,t),n=this;(i&8||i&16&&this.touches(e))&&(n=new Rt(n.source,0)),i&4&&n.state==0&&(n=new Rt(this.source,1)),n=n.updateFor(e,i);for(let s of e.effects)if(s.is(Xo))n=new Rt(n.source,1,s.value?zi(e.state):-1);else if(s.is(ls))n=new Rt(n.source,0);else if(s.is(w0))for(let o of s.value)o.source==n.source&&(n=o);return n}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Rt(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(zi(e.state))}}class Qr extends Rt{constructor(e,t,i,n,s){super(e,2,t),this.result=i,this.from=n,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=zi(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||!n||t&2&&zi(e.startState)==this.from)return new Rt(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return NI(n.validFor,e.state,s,o)?new Qr(this.source,a,n,s,o):n.update&&(n=n.update(n,s,o,new I0(e.state,l,a>=0)))?new Qr(this.source,a,n,n.from,(i=n.to)!==null&&i!==void 0?i:zi(e.state)):new Rt(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Qr(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Rt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function NI(r,e,t,i){if(!r)return!1;let n=e.sliceDoc(t,i);return typeof r=="function"?r(n,t,i,e):N0(r,!0).test(n)}const w0=ce.define({map(r,e){return r.map(t=>t.map(e))}}),x0=ce.define(),Et=tt.define({create(){return Yo.start()},update(r,e){return r.update(e)},provide:r=>[Zh.from(r,e=>e.tooltip),q.contentAttributes.from(r,e=>e.attrs)]});function pc(r,e){const t=e.completion.apply||e.completion.label;let i=r.state.field(Et).active.find(n=>n.source==e.source);return i instanceof Qr?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},cI(r.state,t,i.from,i.to)),{annotations:b0.of(e.completion)})):t(r,e.completion,i.from,i.to),!0):!1}const bI=SI(Et,pc);function no(r,e="option"){return t=>{let i=t.state.field(Et,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ze).interactionDelay)return!1;let n=1,s;e=="page"&&(s=om(t,i.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+n*(r?1:-1):r?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:x0.of(l)}),!0}}const AI=r=>{let e=r.state.field(Et,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(Ze).interactionDelay?!1:pc(r,e.open.options[e.open.selected])},qu=r=>r.state.field(Et,!1)?(r.dispatch({effects:Xo.of(!0)}),!0):!1,wI=r=>{let e=r.state.field(Et,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:ls.of(null)}),!0)};class xI{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const kI=50,RI=1e3,LI=qe.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(Et).active)e.state==1&&this.startQuery(e)}update(r){let e=r.state.field(Et),t=r.state.facet(Ze);if(!r.selectionSet&&!r.docChanged&&r.startState.field(Et)==e)return;let i=r.transactions.some(s=>{let o=A0(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&r.docChanged||o.updates.length+r.transactions.length>kI&&Date.now()-o.time>RI){for(let l of o.context.abortListeners)try{l()}catch(a){yt(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(s=>s.effects.some(o=>o.is(Xo)))&&(this.pendingStart=!0);let n=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.state==1&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),n):-1,this.composing!=0)for(let s of r.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(Et);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=zi(e),i=new I0(e,t,r.explicitPos==t,this.view),n=new xI(r,i);this.running.push(n),Promise.resolve(r.source(i)).then(s=>{n.context.aborted||(n.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:ls.of(null)}),yt(this.view.state,s)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ze).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ze);for(let i=0;i<this.running.length;i++){let n=this.running[i];if(n.done===void 0)continue;if(this.running.splice(i--,1),n.done){let o=new Qr(n.active.source,n.active.explicitPos,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:zi(n.updates.length?n.updates[0].startState:this.view.state));for(let l of n.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Et).active.find(o=>o.source==n.active.source);if(s&&s.state==1)if(n.done==null){let o=new Rt(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:w0.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(Et,!1);if(e&&e.tooltip&&this.view.state.facet(Ze).closeOnBlur){let t=e.open&&om(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ls.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Xo.of(!1)}),20),this.composing=0}}}),CI=typeof navigator=="object"&&/Win/.test(navigator.platform),DI=br.highest(q.domEventHandlers({keydown(r,e){let t=e.state.field(Et,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(CI&&r.altKey)||r.metaKey)return!1;let i=t.open.options[t.open.selected],n=t.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||n.result.commitCharacters;return s&&s.indexOf(r.key)>-1&&pc(e,i),!1}})),VI=q.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),as={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},dr=ce.define({map(r,e){let t=e.mapPos(r,-1,ft.TrackAfter);return t??void 0}}),mc=new class extends Tr{};mc.startSide=1;mc.endSide=-1;const k0=tt.define({create(){return ye.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(dr)&&(r=r.update({add:[mc.range(t.value,t.value+1)]}));return r}});function UI(){return[PI,k0]}const la="()[]{}<>";function R0(r){for(let e=0;e<la.length;e+=2)if(la.charCodeAt(e)==r)return la.charAt(e+1);return Bh(r<128?r:r+1)}function L0(r,e){return r.languageDataAt("closeBrackets",e)[0]||as}const MI=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),PI=q.inputHandler.of((r,e,t,i)=>{if((MI?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let n=r.state.selection.main;if(i.length>2||i.length==2&&Pt(Ye(i,0))==1||e!=n.from||t!=n.to)return!1;let s=FI(r.state,i);return s?(r.dispatch(s),!0):!1}),_I=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=L0(r,r.selection.main.head).brackets||as.brackets,n=null,s=r.changeByRange(o=>{if(o.empty){let l=zI(r.doc,o.head);for(let a of i)if(a==l&&Ol(r.doc,o.head)==R0(Ye(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:D.cursor(o.head-a.length)}}return{range:n=o}});return n||e(r.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!n},BI=[{key:"Backspace",run:_I}];function FI(r,e){let t=L0(r,r.selection.main.head),i=t.brackets||as.brackets;for(let n of i){let s=R0(Ye(n,0));if(e==n)return s==n?WI(r,n,i.indexOf(n+n+n)>-1,t):qI(r,n,s,t.before||as.before);if(e==s&&C0(r,r.selection.main.from))return HI(r,n,s)}return null}function C0(r,e){let t=!1;return r.field(k0).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function Ol(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Pt(Ye(t,0)))}function zI(r,e){let t=r.sliceString(e-2,e);return Pt(Ye(t,0))==t.length?t:t.slice(1)}function qI(r,e,t,i){let n=null,s=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:dr.of(o.to+e.length),range:D.range(o.anchor+e.length,o.head+e.length)};let l=Ol(r.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:dr.of(o.head+e.length),range:D.cursor(o.head+e.length)}:{range:n=o}});return n?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function HI(r,e,t){let i=null,n=r.changeByRange(s=>s.empty&&Ol(r.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:D.cursor(s.head+t.length)}:i={range:s});return i?null:r.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function WI(r,e,t,i){let n=i.stringPrefixes||as.stringPrefixes,s=null,o=r.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:dr.of(l.to+e.length),range:D.range(l.anchor+e.length,l.head+e.length)};let a=l.head,h=Ol(r.doc,a),c;if(h==e){if(Hu(r,a))return{changes:{insert:e+e,from:a},effects:dr.of(a+e.length),range:D.cursor(a+e.length)};if(C0(r,a)){let p=t&&r.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+p.length,insert:p},range:D.cursor(a+p.length)}}}else{if(t&&r.sliceDoc(a-2*e.length,a)==e+e&&(c=Wu(r,a-2*e.length,n))>-1&&Hu(r,c))return{changes:{insert:e+e+e+e,from:a},effects:dr.of(a+e.length),range:D.cursor(a+e.length)};if(r.charCategorizer(a)(h)!=Pe.Word&&Wu(r,a,n)>-1&&!jI(r,a,e,n))return{changes:{insert:e+e,from:a},effects:dr.of(a+e.length),range:D.cursor(a+e.length)}}return{range:s=l}});return s?null:r.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Hu(r,e){let t=Qe(r).resolveInner(e+1);return t.parent&&t.from==e}function jI(r,e,t,i){let n=Qe(r).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=r.sliceDoc(n.from,Math.min(n.to,n.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=n.firstChild;for(;c&&c.from==n.from&&c.to-c.from>t.length+a;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=n.to==e&&n.parent;if(!h)break;n=h}return!1}function Wu(r,e,t){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=Pe.Word)return e;for(let n of t){let s=e-n.length;if(r.sliceDoc(s,e)==n&&i(r.sliceDoc(s-1,s))!=Pe.Word)return s}return-1}function D0(r={}){return[DI,Et,Ze.of(r),LI,$I,VI]}const V0=[{key:"Ctrl-Space",run:qu},{mac:"Alt-`",run:qu},{key:"Escape",run:wI},{key:"ArrowDown",run:no(!0)},{key:"ArrowUp",run:no(!1)},{key:"PageDown",run:no(!0,"page")},{key:"PageUp",run:no(!1,"page")},{key:"Enter",run:AI}],$I=br.highest(ul.computeN([Ze],r=>r.facet(Ze).defaultKeymap?[V0]:[]));class KI{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class fr{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,s=i.facet(hs).markerFilter;s&&(n=s(n,i));let o=J.set(n.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?J.widget({widget:new iv(l),diagnostic:l}).range(l.from):J.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new fr(o,t,nn(o))}}function nn(r,e=null,t=0){let i=null;return r.between(t,1e9,(n,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new KI(n,s,o.diagnostic),!1}),i}function GI(r,e){let t=e.pos,i=e.end||t,n=r.state.facet(hs).hideOn(r,t,i);if(n!=null)return n;let s=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(o=>o.is(U0))||r.changes.touchesRange(s.from,Math.max(s.to,i)))}function QI(r,e){return r.field(Lt,!1)?e:e.concat(ce.appendConfig.of(sv))}const U0=ce.define(),gc=ce.define(),M0=ce.define(),Lt=tt.define({create(){return new fr(J.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),i=null,n=r.panel;if(r.selected){let s=e.changes.mapPos(r.selected.from,1);i=nn(t,r.selected.diagnostic,s)||nn(t,null,s)}!t.size&&n&&e.state.facet(hs).autoPanel&&(n=null),r=new fr(t,n,i)}for(let t of e.effects)if(t.is(U0)){let i=e.state.facet(hs).autoPanel?t.value.length?cs.open:null:r.panel;r=fr.init(t.value,i,e.state)}else t.is(gc)?r=new fr(r.diagnostics,t.value?cs.open:null,r.selected):t.is(M0)&&(r=new fr(r.diagnostics,r.panel,t.value));return r},provide:r=>[rs.from(r,e=>e.panel),q.decorations.from(r,e=>e.diagnostics)]}),XI=J.mark({class:"cm-lintRange cm-lintRange-active"});function YI(r,e,t){let{diagnostics:i}=r.state.field(Lt),n=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:c})=>{e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0))&&(n.push(c.diagnostic),s=Math.min(a,s),o=Math.max(h,o))});let l=r.state.facet(hs).tooltipFilter;return l&&(n=l(n,r.state)),n.length?{pos:s,end:o,above:r.state.doc.lineAt(s).to<o,create(){return{dom:JI(r,n)}}}:null}function JI(r,e){return Ce("ul",{class:"cm-tooltip-lint"},e.map(t=>_0(r,t,!1)))}const ZI=r=>{let e=r.state.field(Lt,!1);(!e||!e.panel)&&r.dispatch({effects:QI(r.state,[gc.of(!0)])});let t=is(r,cs.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},ju=r=>{let e=r.state.field(Lt,!1);return!e||!e.panel?!1:(r.dispatch({effects:gc.of(!1)}),!0)},ev=r=>{let e=r.state.field(Lt,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},tv=[{key:"Mod-Shift-m",run:ZI,preventDefault:!0},{key:"F8",run:ev}],hs=H.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},ui(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))}});function P0(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let n=t[i];if(/[a-zA-Z]/.test(n)&&!e.some(s=>s.toLowerCase()==n.toLowerCase())){e.push(n);continue e}}e.push("")}return e}function _0(r,e,t){var i;let n=t?P0(e.actions):[];return Ce("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ce("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=p=>{if(p.preventDefault(),l)return;l=!0;let g=nn(r.state.field(Lt).diagnostics,e);g&&s.apply(r,g.from,g.to)},{name:h}=s,c=n[o]?h.indexOf(n[o]):-1,u=c<0?h:[h.slice(0,c),Ce("u",h.slice(c,c+1)),h.slice(c+1)];return Ce("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${h}${c<0?"":` (access key "${n[o]})"`}.`},u)}),e.source&&Ce("div",{class:"cm-diagnosticSource"},e.source))}class iv extends Yi{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ce("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class $u{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=_0(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class cs{constructor(e){this.view=e,this.items=[];let t=n=>{if(n.keyCode==27)ju(this.view),this.view.focus();else if(n.keyCode==38||n.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(n.keyCode==40||n.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(n.keyCode==36)this.moveSelection(0);else if(n.keyCode==35)this.moveSelection(this.items.length-1);else if(n.keyCode==13)this.view.focus();else if(n.keyCode>=65&&n.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=P0(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==n.keyCode){let a=nn(this.view.state.field(Lt).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;n.preventDefault()},i=n=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(n.target)&&this.moveSelection(s)};this.list=Ce("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ce("div",{class:"cm-panel-lint"},this.list,Ce("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ju(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Lt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Lt),i=0,n=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,c;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){h=u;break}h<0?(c=new $u(this.view,a.diagnostic),this.items.splice(i,0,c),n=!0):(c=this.items[h],h>i&&(this.items.splice(i,h-i),n=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();this.items.length==0&&(this.items.push(new $u(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let a=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/a:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Lt),i=nn(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:M0.of(i)})}static open(e){return new cs(e)}}function rv(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function so(r){return rv(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const nv=q.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:so("#d11")},".cm-lintRange-warning":{backgroundImage:so("orange")},".cm-lintRange-info":{backgroundImage:so("#999")},".cm-lintRange-hint":{backgroundImage:so("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),sv=[Lt,q.decorations.compute([Lt],r=>{let{selected:e,panel:t}=r.field(Lt);return!e||!t||e.from==e.to?J.none:J.set([XI.range(e.from,e.to)])}),tO(YI,{hideOn:GI}),nv],ov=[uO(),mO(),CE(),C2(),s2(),yE(),AE(),ve.allowMultipleSelections.of(!0),$O(),Rm(h2,{fallback:!0}),g2(),UI(),D0(),WE(),KE(),_E(),By(),ul.of([...BI,...Cy,...nI,...z2,...t2,...V0,...tv])];var Ku={};class Jo{constructor(e,t,i,n,s,o,l,a,h,c=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=h,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Jo(e,[],t,i,i,0,[],0,n?new Gu(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(n);if(l&&(this.score+=l),i==0){this.pushState(s.getGoto(this.state,n,!0),this.reducePos),n<s.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(n,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),h=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-h;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[n])===null||t===void 0)&&t.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,p=this.bufferBase+this.buffer.length-u;if(n<s.minRepeatTerm||e&131072){let g=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,h,g,p+4,!0)}if(e&262144)this.state=this.stack[a];else{let g=this.stack[a-3];this.state=s.getGoto(g,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,h)}storeNode(e,t,i,n=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,n);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,n>4&&(n-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=n}}shift(e,t,i,n){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4);else{let s=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(s,1)||(this.reducePos=n)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,n,4)}}apply(e,t,i,n){e&65536?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Jo(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new lv(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if(!(i&65536))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&n.push(t[s],o);if(this.stack.length<120)for(let s=0;n.length<8&&s<t.length;s+=2){let o=t[s+1];n.some((l,a)=>a&1&&l==o)||n.push(t[s],o)}t=n}let i=[];for(let n=0;n<t.length&&i.length<4;n+=2){let s=t[n+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[n],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=t&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],n,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,s)=>{if(!t.includes(n))return t.push(n),e.allActions(n,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,h=this.stack.length-l*3;if(h>=0&&e.getGoto(this.stack[h],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Gu(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Gu{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class lv{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class Zo{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Zo(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Zo(this.stack,this.pos,this.index)}}function oo(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,n=0;i<r.length;){let s=0;for(;;){let o=r.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[n++]=s:t=new e(s)}return t}class So{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Qu=new So;class av{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Qu,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!n)return null;let o=this.ranges[--n];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(n==this.ranges.length-1)return null;let o=this.ranges[++n];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,n;if(t>=0&&t<this.chunk.length)i=this.pos+e,n=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),n=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),n}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Qu,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Xr{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;cv(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Xr.prototype.contextual=Xr.prototype.fallback=Xr.prototype.extend=!1;Xr.prototype.fallback=Xr.prototype.extend=!1;class hv{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function cv(r,e,t,i,n,s){let o=0,l=1<<i,{dialect:a}=t.p.parser;e:for(;l&r[o];){let h=r[o+1];for(let g=o+3;g<h;g+=2)if((r[g+1]&l)>0){let T=r[g];if(a.allows(T)&&(e.token.value==-1||e.token.value==T||fv(T,e.token.value,n,s))){e.acceptToken(T);break}}let c=e.next,u=0,p=r[o+2];if(e.next<0&&p>u&&r[h+p*3-3]==65535){o=r[h+p*3-1];continue e}for(;u<p;){let g=u+p>>1,T=h+g+(g<<1),E=r[T],y=r[T+1]||65536;if(c<E)p=g;else if(c>=y)u=g+1;else{o=r[T+2],e.advance();continue e}}break}}function Xu(r,e,t){for(let i=e,n;(n=r[i])!=65535;i++)if(n==t)return i-e;return-1}function fv(r,e,t,i){let n=Xu(t,i,e);return n<0||Xu(t,i,r)<n}const wt=typeof process<"u"&&Ku&&/\bparse\b/.test(Ku.LOG);let aa=null;function Yu(r,e,t){let i=r.cursor(Ge.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class uv{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Yu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Yu(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(s instanceof ze){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(de.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class dv{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new So)}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:s}=n,o=n.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let h=0;h<s.length;h++){if(!(1<<h&o))continue;let c=s[h],u=this.tokens[h];if(!(i&&!c.fallback)&&((c.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,c,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let p=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!c.extend&&(i=u,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new So,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new So,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let s=0;s<n;s+=3)if(this.actions[s]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let h=o.stateSlot(s,a?2:1);;h+=3){if(l[h]==65535)if(l[h+1]==1)h=Si(l,h+2);else{n==0&&l[h+1]==2&&(n=this.putAction(Si(l,h+2),t,i,n));break}l[h]==t&&(n=this.putAction(Si(l,h+1),t,i,n))}return n}}class pv{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new av(t,n),this.tokens=new dv(e,this.stream),this.topTerm=e.top[1];let{from:s}=n[0];this.stacks=[Jo.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new uv(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],n,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{n||(n=[],s=[]),n.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=n&&gv(n);if(o)return wt&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw wt&&n&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&n){let o=this.stoppedAt!=null&&n[0].pos>this.stoppedAt?n[0]:this.runRecovery(n,s,i);if(o)return wt&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let h=i[a];if(l.sameState(h)||l.buffer.length>500&&h.buffer.length>500)if((l.score-h.score||l.buffer.length-h.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:s}=this,o=wt?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,c=h?e.curContext.hash:0;for(let u=this.fragments.nodeAt(n);u;){let p=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(p>-1&&u.length&&(!h||(u.prop(de.contextHash)||0)==c))return e.useNode(u,p),wt&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof ze)||u.children.length==0||u.positions[0]>0)break;let g=u.children[0];if(g instanceof ze&&u.positions[0]==0)u=g;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),wt&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let h=0;h<a.length;){let c=a[h++],u=a[h++],p=a[h++],g=h==a.length||!i,T=g?e:e.split(),E=this.tokens.mainToken;if(T.apply(c,u,E?E.start:T.pos,p),wt&&console.log(o+this.stackID(T)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(u)} @ ${n}${T==e?"":", split"})`),g)return!0;T.pos>n?t.push(T):i.push(T)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Ju(e,t),!0}}runRecovery(e,t,i){let n=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[(o<<1)+1],c=wt?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),wt&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),p=c;for(let g=0;u.forceReduce()&&g<10&&(wt&&console.log(p+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));g++)wt&&(p=this.stackID(u)+" -> ");for(let g of l.recoverByInsert(a))wt&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,i);this.stream.end>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),wt&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),Ju(l,i)):(!n||n.score<l.score)&&(n=l)}return n}stackToTree(e){return e.close(),ze.build({buffer:Zo.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(aa||(aa=new WeakMap)).get(e);return t||aa.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Ju(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class mv{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class el extends pm{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),n=[];for(let l=0;l<t.length;l++)n.push([]);function s(l,a,h){n[l].push([a,a.deserialize(String(h))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=de[a]);for(let h=1;h<l.length;){let c=l[h++];if(c>=0)s(c,a,l[h++]);else{let u=l[h+-c];for(let p=-c;p>0;p--)s(l[h++],a,u);h++}}}this.nodeSet=new ec(t.map((l,a)=>vt.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:n[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=cm;let o=oo(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Zu),this.states=oo(e.states,Uint32Array),this.data=oo(e.stateData),this.goto=oo(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Xr(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new pv(this,e,t,i);for(let s of this.wrappers)n=s(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let s=n[t+1];;){let o=n[s++],l=o&1,a=n[s++];if(l&&i)return a;for(let h=s+(o>>1);s<h;s++)if(n[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let s=this.stateSlot(e,n?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=Si(i,s+2)];else{if(i[s+1]==2)return Si(i,s+2);break}if(o==t||o==0)return Si(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let s=this.stateSlot(e,1);n==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Si(this.data,s+2);else break;n=t(Si(this.data,s+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Si(this.data,i+2);else break;if(!(this.data[i+2]&1)){let n=this.data[i+1];t.some((s,o)=>o&1&&s==n)||t.push(this.data[i],n)}}return t}configure(e){let t=Object.assign(Object.create(el.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let n=e.tokenizers.find(s=>s.from==i);return n?n.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,n)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[n]=Zu(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let n=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(n||(n=new Uint8Array(this.maxTerm+1)))[l]=1;return new mv(e,i,n)}static deserialize(e){return new el(e)}}function Si(r,e){return r[e]|r[e+1]<<16}function gv(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Zu(r){if(r.external){let e=r.extend?1:0;return(t,i)=>r.external(t,i)<<1|e}return r.get}const Sv=36,ed=1,Tv=2,Cr=3,ha=4,Ev=5,Ov=6,yv=7,Iv=8,vv=9,Nv=10,bv=11,Av=12,wv=13,xv=14,kv=15,Rv=16,Lv=17,td=18,Cv=19,B0=20,F0=21,id=22,Dv=23,Vv=24;function gh(r){return r>=65&&r<=90||r>=97&&r<=122||r>=48&&r<=57}function Uv(r){return r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70}function hr(r,e,t){for(let i=!1;;){if(r.next<0)return;if(r.next==e&&!i){r.advance();return}i=t&&!i&&r.next==92,r.advance()}}function Mv(r,e){e:for(;;){if(r.next<0)return;if(r.next==36){r.advance();for(let t=0;t<e.length;t++){if(r.next!=e.charCodeAt(t))continue e;r.advance()}if(r.next==36){r.advance();return}}else r.advance()}}function Pv(r,e){let t="[{<(".indexOf(String.fromCharCode(e)),i=t<0?e:"]}>)".charCodeAt(t);for(;;){if(r.next<0)return;if(r.next==i&&r.peek(1)==39){r.advance(2);return}r.advance()}}function Sh(r,e){for(;!(r.next!=95&&!gh(r.next));)e!=null&&(e+=String.fromCharCode(r.next)),r.advance();return e}function _v(r){if(r.next==39||r.next==34||r.next==96){let e=r.next;r.advance(),hr(r,e,!1)}else Sh(r)}function rd(r,e){for(;r.next==48||r.next==49;)r.advance();e&&r.next==e&&r.advance()}function nd(r,e){for(;;){if(r.next==46){if(e)break;e=!0}else if(r.next<48||r.next>57)break;r.advance()}if(r.next==69||r.next==101)for(r.advance(),(r.next==43||r.next==45)&&r.advance();r.next>=48&&r.next<=57;)r.advance()}function sd(r){for(;!(r.next<0||r.next==10);)r.advance()}function ar(r,e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)==r)return!0;return!1}const ca=` 	\r
`;function z0(r,e,t){let i=Object.create(null);i.true=i.false=Ev,i.null=i.unknown=Ov;for(let n of r.split(" "))n&&(i[n]=B0);for(let n of e.split(" "))n&&(i[n]=F0);for(let n of(t||"").split(" "))n&&(i[n]=Vv);return i}const Bv="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",Fv="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",Th={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:z0(Fv,Bv)};function zv(r,e,t,i){let n={};for(let s in Th)n[s]=(r.hasOwnProperty(s)?r:Th)[s];return e&&(n.words=z0(e,t||"",i)),n}function q0(r){return new hv(e=>{var t;let{next:i}=e;if(e.advance(),ar(i,ca)){for(;ar(e.next,ca);)e.advance();e.acceptToken(Sv)}else if(i==36&&r.doubleDollarQuotedStrings){let n=Sh(e,"");e.next==36&&(e.advance(),Mv(e,n),e.acceptToken(Cr))}else if(i==39||i==34&&r.doubleQuotedStrings)hr(e,i,r.backslashEscapes),e.acceptToken(Cr);else if(i==35&&r.hashComments||i==47&&e.next==47&&r.slashComments)sd(e),e.acceptToken(ed);else if(i==45&&e.next==45&&(!r.spaceAfterDashes||e.peek(1)==32))sd(e),e.acceptToken(ed);else if(i==47&&e.next==42){e.advance();for(let n=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(n--,e.advance(),!n)break}else s==47&&e.next==42&&(n++,e.advance())}e.acceptToken(Tv)}else if((i==101||i==69)&&e.next==39)e.advance(),hr(e,39,!0),e.acceptToken(Cr);else if((i==110||i==78)&&e.next==39&&r.charSetCasts)e.advance(),hr(e,39,r.backslashEscapes),e.acceptToken(Cr);else if(i==95&&r.charSetCasts)for(let n=0;;n++){if(e.next==39&&n>1){e.advance(),hr(e,39,r.backslashEscapes),e.acceptToken(Cr);break}if(!gh(e.next))break;e.advance()}else if(r.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!ar(e.peek(1),ca)){let n=e.peek(1);e.advance(2),Pv(e,n),e.acceptToken(Cr)}else if(i==40)e.acceptToken(yv);else if(i==41)e.acceptToken(Iv);else if(i==123)e.acceptToken(vv);else if(i==125)e.acceptToken(Nv);else if(i==91)e.acceptToken(bv);else if(i==93)e.acceptToken(Av);else if(i==59)e.acceptToken(wv);else if(r.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),rd(e),e.acceptToken(id);else if((i==98||i==66)&&(e.next==39||e.next==34)){const n=e.next;e.advance(),r.treatBitsAsBytes?(hr(e,n,r.backslashEscapes),e.acceptToken(Dv)):(rd(e,n),e.acceptToken(id))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let n=e.next==39;for(e.advance();Uv(e.next);)e.advance();n&&e.next==39&&e.advance(),e.acceptToken(ha)}else if(i==46&&e.next>=48&&e.next<=57)nd(e,!0),e.acceptToken(ha);else if(i==46)e.acceptToken(xv);else if(i>=48&&i<=57)nd(e,!1),e.acceptToken(ha);else if(ar(i,r.operatorChars)){for(;ar(e.next,r.operatorChars);)e.advance();e.acceptToken(kv)}else if(ar(i,r.specialVar))e.next==i&&e.advance(),_v(e),e.acceptToken(Lv);else if(ar(i,r.identifierQuotes))hr(e,i,!1),e.acceptToken(Cv);else if(i==58||i==44)e.acceptToken(Rv);else if(gh(i)){let n=Sh(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-n.length-1)==46?td:(t=r.words[n.toLowerCase()])!==null&&t!==void 0?t:td)}})}const H0=q0(Th),qv=el.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,H0],topRules:{Script:[0,25]},tokenPrec:0});function Eh(r){let e=r.cursor().moveTo(r.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function fs(r,e){let t=r.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(t);return i?i[2]:t}function tl(r){return r&&(r.name=="Identifier"||r.name=="QuotedIdentifier")}function Hv(r,e){if(e.name=="CompositeIdentifier"){let t=[];for(let i=e.firstChild;i;i=i.nextSibling)tl(i)&&t.push(fs(r,i));return t}return[fs(r,e)]}function od(r,e){for(let t=[];;){if(!e||e.name!=".")return t;let i=Eh(e);if(!tl(i))return t;t.unshift(fs(r,i)),e=Eh(i)}}function Wv(r,e){let t=Qe(r).resolveInner(e,-1),i=$v(r.doc,t);return t.name=="Identifier"||t.name=="QuotedIdentifier"||t.name=="Keyword"?{from:t.from,quoted:t.name=="QuotedIdentifier"?r.doc.sliceString(t.from,t.from+1):null,parents:od(r.doc,Eh(t)),aliases:i}:t.name=="."?{from:e,quoted:null,parents:od(r.doc,t),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const jv=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function $v(r,e){let t;for(let n=e;!t;n=n.parent){if(!n)return null;n.name=="Statement"&&(t=n)}let i=null;for(let n=t.firstChild,s=!1,o=null;n;n=n.nextSibling){let l=n.name=="Keyword"?r.sliceString(n.from,n.to).toLowerCase():null,a=null;if(!s)s=l=="from";else if(l=="as"&&o&&tl(n.nextSibling))a=fs(r,n.nextSibling);else{if(l&&jv.has(l))break;o&&tl(n)&&(a=fs(r,n))}a&&(i||(i=Object.create(null)),i[a]=Hv(r,o)),o=/Identifier$/.test(n.name)?n:null}return i}function Kv(r,e){return r?e.map(t=>Object.assign(Object.assign({},t),{label:t.label[0]==r?t.label:r+t.label+r,apply:void 0})):e}const Gv=/^\w*$/,Qv=/^[`'"]?\w*[`'"]?$/;function ld(r){return r.self&&typeof r.self.label=="string"}class Sc{constructor(e,t){this.idQuote=e,this.idCaseInsensitive=t,this.list=[],this.children=void 0}child(e){let t=this.children||(this.children=Object.create(null)),i=t[e];return i||(e&&!this.list.some(n=>n.label==e)&&this.list.push(ad(e,"type",this.idQuote,this.idCaseInsensitive)),t[e]=new Sc(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let t=this.list.findIndex(i=>i.label==e.label);t>-1?this.list[t]=e:this.list.push(e)}addCompletions(e){for(let t of e)this.addCompletion(typeof t=="string"?ad(t,"property",this.idQuote,this.idCaseInsensitive):t)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):ld(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let t of Object.keys(e)){let i=e[t],n=null,s=t.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),o=this;ld(i)&&(n=i.self,i=i.children);for(let l=0;l<s.length;l++)n&&l==s.length-1&&o.addCompletion(n),o=o.child(s[l].replace(/\\\./g,"."));o.addNamespace(i)}}}function ad(r,e,t,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(r)?{label:r,type:e}:{label:r,type:e,apply:t+r+t}}function Xv(r,e,t,i,n,s){var o;let l=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',a=new Sc(l,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),h=n?a.child(n):null;return a.addNamespace(r),e&&(h||a).addCompletions(e),t&&a.addCompletions(t),h&&a.addCompletions(h.list),i&&a.addCompletions((h||a).child(i).list),c=>{let{parents:u,from:p,quoted:g,empty:T,aliases:E}=Wv(c.state,c.pos);if(T&&!c.explicit)return null;E&&u.length==1&&(u=E[u[0]]||u);let y=a;for(let A of u){for(;!y.children||!y.children[A];)if(y==a&&h)y=h;else if(y==h&&i)y=y.child(i);else return null;let L=y.maybeChild(A);if(!L)return null;y=L}let I=g&&c.state.sliceDoc(c.pos,c.pos+1)==g,w=y.list;return y==a&&E&&(w=w.concat(Object.keys(E).map(A=>({label:A,type:"constant"})))),{from:p,to:I?c.pos+1:void 0,options:Kv(g,w),validFor:g?Qv:Gv}}}function Yv(r){return r==F0?"type":r==B0?"keyword":"variable"}function Jv(r,e,t){let i=Object.keys(r).map(n=>t(e?n.toUpperCase():n,Yv(r[n])));return hI(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],v0(i))}let Zv=qv.configure({props:[Em.add({Statement:WO()}),ym.add({Statement(r,e){return{from:Math.min(r.from+100,e.doc.lineAt(r.from).to),to:r.to}},BlockComment(r){return{from:r.from+2,to:r.to-2}}}),mm({Keyword:U.keyword,Type:U.typeName,Builtin:U.standard(U.name),Bits:U.number,Bytes:U.string,Bool:U.bool,Null:U.null,Number:U.number,String:U.string,Identifier:U.name,QuotedIdentifier:U.special(U.string),SpecialVar:U.special(U.name),LineComment:U.lineComment,BlockComment:U.blockComment,Operator:U.operator,"Semi Punctuation":U.punctuation,"( )":U.paren,"{ }":U.brace,"[ ]":U.squareBracket})]});class Tc{constructor(e,t,i){this.dialect=e,this.language=t,this.spec=i}get extension(){return this.language.extension}static define(e){let t=zv(e,e.keywords,e.types,e.builtin),i=_o.define({name:"sql",parser:Zv.configure({tokenizers:[{from:H0,to:q0(t)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Tc(t,i,e)}}function eN(r,e){return{label:r,type:e,boost:-1}}function tN(r,e=!1,t){return Jv(r.dialect.words,e,t||eN)}function iN(r){return r.schema?Xv(r.schema,r.tables,r.schemas,r.defaultTable,r.defaultSchema,r.dialect||Ec):()=>null}function rN(r){return r.schema?(r.dialect||Ec).language.data.of({autocomplete:iN(r)}):[]}function nN(r={}){let e=r.dialect||Ec;return new UO(e.language,[rN(r),e.language.data.of({autocomplete:tN(e,r.upperCaseKeywords,r.keywordCompletion)})])}const Ec=Tc.define({}),To="#d2d8d9",hd="#1e1e1e",sN="#2a2f3a",oN="#e4c07a",cd="#2a2f3a",lN="#2BA6FF",aN="#f08d49",hN="#f08d49",Oh="#666666",cN="#d2d8d9",fN="#d2d8d9",uN=Es.define([{tag:U.keyword,color:lN},{tag:U.string,color:aN},{tag:U.number,color:hN},{tag:U.comment,color:Oh,fontStyle:"italic"},{tag:U.operator,color:cN},{tag:U.punctuation,color:fN},{tag:U.variableName,color:To},{tag:U.propertyName,color:To},{tag:U.function(U.variableName),color:To}]),dN=[q.theme({"&":{color:To,backgroundColor:hd,fontSize:"13px",height:"100%"},".cm-content":{fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',padding:"10px 0"},".cm-line":{padding:"0 10px"},".cm-activeLine":{backgroundColor:cd},".cm-selectionBackground":{backgroundColor:sN},".cm-cursor":{borderLeftColor:oN},".cm-gutters":{backgroundColor:hd,color:Oh,border:"none",borderRight:`1px solid ${Oh}`,minWidth:"40px"},".cm-activeLineGutter":{backgroundColor:cd},".cm-scroller":{overflow:"auto",fontFamily:"inherit"},".cm-matchingBracket":{backgroundColor:"#3a3f4b",outline:"none"},".cm-nonmatchingBracket":{color:"#f08d49"}},{dark:!0}),Rm(uN)];var pN=Ae('<div class="editor-container svelte-e2fvt0"><div class="toolbar svelte-e2fvt0"><button class="run-btn svelte-e2fvt0"><i class="fas fa-play svelte-e2fvt0"></i> Run</button> <div class="shortcut-hint svelte-e2fvt0">Execute the query by pressing [Run]</div></div> <div class="editor svelte-e2fvt0"></div></div>');function mN(r,e){hn(e,!0);let t,i;const s=["SELECT","FROM","WHERE","GROUP BY","ORDER BY","HAVING","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","OUTER JOIN","AND","OR","NOT","NULL","IS NULL","IS NOT NULL","ASC","DESC","DISTINCT","BETWEEN","IN","LIKE","COUNT","SUM","AVG","MIN","MAX","UNION","UNION ALL","INTERSECT","EXCEPT","LIMIT","OFFSET","TOP"].map(c=>({label:c,type:"keyword"}));Ph(()=>{i=new q({doc:e.query,extensions:[ov,nN(),dN,ul.of([Dy]),D0({override:[c=>{let u=c.matchBefore(/\w*/);return u?{from:u.from,options:s.filter(p=>p.label.toLowerCase().startsWith((u==null?void 0:u.text.toLowerCase())||""))}:null}]}),q.updateListener.of(c=>{if(c.docChanged){const u=c.state.doc.toString();u!==e.query&&e.onQueryChange(u)}})],parent:t}),i.dom.addEventListener("keydown",c=>{(c.ctrlKey||c.metaKey)&&c.key==="Enter"&&(c.preventDefault(),e.onRun())})}),H1(()=>{i&&i.destroy()}),vo(()=>{i&&i.state.doc.toString()!==e.query&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:e.query}})});var o=pN(),l=oe(o),a=oe(l),h=xe(l,2);z1(h,c=>t=c,()=>t),He("click",a,function(...c){var u;(u=e.onRun)==null||u.apply(this,c)}),me(r,o),cn()}var gN=Ae('<div class="error-message svelte-tu01r1"><div class="error-header svelte-tu01r1"><span class="error-icon">⚠️</span> <span>SQL Error<!></span></div> <pre class="error-details svelte-tu01r1"> </pre></div>'),SN=Ae('<div class="modification-message svelte-tu01r1"><i class="fas fa-check-circle success-icon svelte-tu01r1"></i> Query executed successfully</div>'),TN=Ae('<th class="svelte-tu01r1"><div class="th-content svelte-tu01r1"><span class="th-text svelte-tu01r1"> </span> <div class="resize-handle svelte-tu01r1"></div></div></th>'),EN=Ae('<td class="svelte-tu01r1"> </td>'),ON=Ae('<tr class="svelte-tu01r1"></tr>'),yN=Ae('<div class="table-wrapper svelte-tu01r1"><table class="svelte-tu01r1"><thead class="svelte-tu01r1"><tr class="svelte-tu01r1"></tr></thead><tbody></tbody></table></div>'),IN=Ae('<div class="results-container svelte-tu01r1"><!></div>');function vN(r,e){hn(e,!1);let t=St(e,"results",24,()=>[]),i=St(e,"columns",24,()=>[]),n=St(e,"queryExecuted",8,!1),s=St(e,"error",8,null),o=St(e,"errorLine",8,null);St(e,"affectedRows",8,void 0);let l=St(e,"isModificationQuery",8,!1),a=$e({}),h=!1,c=$e(null),u,p,g=$e(!1);const T=100,E=800,y=120,I=32,w=8,A={number:.7,date:1.2,string:1.5};function L(_){return typeof _=="number"?"number":_ instanceof Date?"date":"string"}function C(_){if(!t().length)return!1;const P=t()[0][_];return P?_.toLowerCase().includes("date")||_.toLowerCase().includes("time")||typeof P=="string"&&/^\d{4}-\d{2}-\d{2}/.test(P):!1}function x(){if(!i().length||!t().length||b(g))return;const _=document.querySelector(".table-wrapper");if(!_)return;const P=Math.max(800,_.clientWidth-I),W=i().filter(C),ne=W.length*y,se=P-ne,ge=i().filter(Z=>!C(Z)),Ie=ge.reduce((Z,ie)=>{const pe=t().map(Ee=>Ee[ie]),Se=pe.map(Ee=>((Ee==null?void 0:Ee.toString())||"").length),G=Math.max(ie.length,...Se),ee=Se.reduce((Ee,it)=>Ee+it,0)/Se.length,Te=L(pe[0]);return Z[ie]={maxLength:G,avgLength:ee,type:Te,weight:A[Te]},Z},{}),ae=Object.values(Ie).reduce((Z,ie)=>Z+ie.avgLength*ie.weight,0);W.forEach(Z=>{_i(a,b(a)[Z]=y)}),ge.forEach(Z=>{if(b(a)[Z])return;const ie=Ie[Z],pe=ie.avgLength*ie.weight/ae;let Se=Math.floor(se*pe);ie.type==="number"?Se=Math.min(Se,ie.maxLength*w+I):ie.maxLength>ie.avgLength*2&&(Se=Math.max(Se,ie.avgLength*w*1.5)),_i(a,b(a)[Z]=Math.max(T,Math.min(E,Se)))}),re(a,{...b(a)}),re(g,!0)}function k(_,P){h=!0,re(c,P),u=_.pageX,p=b(a)[P]||T,window.addEventListener("mousemove",z),window.addEventListener("mouseup",K),document.body.style.cursor="col-resize",document.body.style.userSelect="none"}function z(_){if(!h||!b(c))return;const P=_.pageX-u,W=Math.max(T,Math.min(E,p+P));_i(a,b(a)[b(c)]=W),re(a,{...b(a)})}function K(){h=!1,re(c,null),window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",K),document.body.style.cursor="",document.body.style.userSelect=""}d1(()=>(Cn(n()),Cn(s()),Cn(l()),Cn(t())),()=>{n()&&!s()&&!l()&&t().length>0&&(re(g,!1),setTimeout(x,0))}),p1(),ll();var $=IN(),M=oe($);ct(M,n,_=>{var P=Gn(),W=pr(P);ct(W,s,ne=>{var se=gN(),ge=oe(se),Ie=xe(oe(ge),2),ae=xe(oe(Ie));ct(ae,o,pe=>{var Se=k1();Ke(()=>Ot(Se,`on line ${o()??""}`)),me(pe,Se)});var Z=xe(ge,2),ie=oe(Z);Ke(()=>Ot(ie,s())),me(ne,se)},ne=>{var se=Gn(),ge=pr(se);ct(ge,l,Ie=>{var ae=SN();me(Ie,ae)},Ie=>{var ae=yN(),Z=oe(ae),ie=oe(Z),pe=oe(ie);gr(pe,5,i,mr,(G,ee)=>{var Te=TN(),Ee=oe(Te),it=oe(Ee),lt=oe(it),Jt=xe(it,2);Ke(()=>{Hr(Te,"style",`width: ${(b(a)[b(ee)]||T)??""}px`),Ot(lt,b(ee)),jt(Jt,"resizing",b(c)===b(ee))}),He("mousedown",Jt,Vn(pn=>k(pn,b(ee)))),me(G,Te)});var Se=xe(ie);gr(Se,5,t,mr,(G,ee)=>{var Te=ON();gr(Te,5,i,mr,(Ee,it)=>{var lt=EN(),Jt=oe(lt);Ke(()=>{Hr(lt,"style",`width: ${(b(a)[b(it)]||T)??""}px`),Ot(Jt,b(ee)[b(it)])}),me(Ee,lt)}),me(G,Te)}),me(Ie,ae)},!0),me(ne,se)}),me(_,P)}),Ke(()=>jt($,"visible",n())),me(r,$),cn()}var NN=Ae('<div class="progress svelte-txm7b2"> </div>'),bN=Ae('<div class="loader svelte-txm7b2"><div class="spinner svelte-txm7b2"></div> <div class="text svelte-txm7b2"> </div> <!></div>');function AN(r,e){let t=St(e,"message",8,"Loading..."),i=St(e,"progress",8,null);var n=bN(),s=xe(oe(n),2),o=oe(s),l=xe(s,2);ct(l,i,a=>{var h=NN(),c=oe(h);Ke(()=>Ot(c,i())),me(a,h)}),Ke(()=>Ot(o,t())),me(r,n)}var wN=Ae('<div class="loading-container svelte-5n605g"><!></div>'),xN=Ae('<div class="error-container svelte-5n605g"><h2 class="svelte-5n605g">Failed to initialize database</h2> <p> </p></div>'),kN=Ae('<div class="tab-content svelte-5n605g"><div class="editor-section svelte-5n605g"><!></div> <div class="resize-handle svelte-5n605g"></div> <div class="results-section svelte-5n605g"><!></div> <div class="status-bar svelte-5n605g"><span>Ready</span> <span class="status-message svelte-5n605g"> </span></div></div>'),RN=Ae('<div class="empty-state svelte-5n605g"><button class="new-query-btn svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> New Query</button></div>'),LN=Ae('<div class="app svelte-5n605g"><!> <div class="main svelte-5n605g"><div class="tabs svelte-5n605g"><div class="tabs-container svelte-5n605g"><!> <button class="add-tab svelte-5n605g"><i class="fas fa-plus svelte-5n605g"></i> <span class="tooltip svelte-5n605g">New Query</span></button></div></div> <!></div></div>');function CN(r,e){hn(e,!1);let t=1,i=$e(-1),n=$e([]),s=$e(!1),o=$e("60%"),l=$e(!0),a=$e(null),h=$e(null);Ph(async()=>{try{const k=setInterval(()=>{const z=tS();if(z.sqlJsLoaded&&re(h,"Initializing database..."),z.error){re(a,z.error),re(l,!1);return}},100);await Md(),clearInterval(k),re(l,!1)}catch(x){re(a,x.message),re(l,!1)}});function c(x=""){re(n,[...b(n),{id:(t+=1)-1,query:x,results:[],columns:[],queryExecuted:!1,error:null,isModificationQuery:!1}]),re(i,b(n).length-1)}function u(x){re(n,b(n).filter((k,z)=>z!==x)),b(i)>=b(n).length&&re(i,Math.max(-1,b(n).length-1))}function p(x){re(i,x)}function g(x){b(i)>=0&&(_i(n,b(n)[b(i)].query=x),re(n,[...b(n)]))}function T(){if(b(i)>=0){const{results:x,columns:k,error:z,isModificationQuery:K,affectedRows:$}=oS(b(n)[b(i)].query);_i(n,b(n)[b(i)]={...b(n)[b(i)],results:x,columns:k,queryExecuted:!0,error:z,affectedRows:$,isModificationQuery:K}),re(n,[...b(n)])}}function E(x){const k=`SELECT * FROM ${x.detail.tableName}`;c(k),T()}function y(x){return x.queryExecuted?x.error?"Error in SQL statement":x.isModificationQuery?`${x.affectedRows} row${x.affectedRows===1?"":"s"} affected`:`Showing [${x.results.length}] rows`:"Write your SQL query and click Run"}function I(x){re(s,!0),x.clientY,window.addEventListener("mousemove",w),window.addEventListener("mouseup",A),document.body.style.cursor="row-resize",document.body.style.userSelect="none"}function w(x){if(!b(s))return;const k=document.querySelector(".tab-content");if(!k)return;const z=k.getBoundingClientRect(),K=(x.clientY-z.top)/z.height*100;re(o,Math.max(20,Math.min(80,K))+"%")}function A(){re(s,!1),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",A),document.body.style.cursor="",document.body.style.userSelect=""}ll();var L=Gn(),C=pr(L);ct(C,()=>b(l),x=>{var k=wN(),z=oe(k);AN(z,{message:"Loading application...",get progress(){return b(h)}}),me(x,k)},x=>{var k=Gn(),z=pr(k);ct(z,()=>b(a),K=>{var $=xN(),M=xe(oe($),2),_=oe(M);Ke(()=>Ot(_,b(a))),me(K,$)},K=>{var $=LN(),M=oe($);OS(M,{$$events:{showTableData:E}});var _=xe(M,2),P=oe(_),W=oe(P),ne=oe(W);gr(ne,1,()=>b(n),mr,(Ie,ae,Z)=>{var ie=xh(()=>Z===b(i));IS(Ie,{get query(){return b(ae).query},index:Z,get active(){return b(ie)},onClose:()=>u(Z),onClick:()=>p(Z)})});var se=xe(ne,2),ge=xe(P,2);ct(ge,()=>b(i)>=0,Ie=>{var ae=kN(),Z=oe(ae),ie=oe(Z);mN(ie,{get query(){return b(n)[b(i)].query},onQueryChange:g,onRun:T,get queryExecuted(){return b(n)[b(i)].queryExecuted}});var pe=xe(Z,2),Se=xe(pe,2),G=oe(Se);vN(G,{get results(){return b(n)[b(i)].results},get columns(){return b(n)[b(i)].columns},get queryExecuted(){return b(n)[b(i)].queryExecuted},get error(){return b(n)[b(i)].error},get affectedRows(){return b(n)[b(i)].affectedRows},get isModificationQuery(){return b(n)[b(i)].isModificationQuery}});var ee=xe(Se,2),Te=xe(oe(ee),2),Ee=oe(Te);Ke(()=>Ot(Ee,y(b(n)[b(i)]))),Ke(()=>{Hr(Z,"style",`height: ${b(o)??""}`),jt(pe,"resizing",b(s))}),He("mousedown",pe,I),me(Ie,ae)},Ie=>{var ae=RN(),Z=oe(ae);He("click",Z,()=>c()),me(Ie,ae)}),He("click",se,()=>c()),me(K,$)},!0),me(x,k)}),me(r,L),cn()}const fd=document.querySelector(".initial-loader");fd&&fd.remove();C1(CN,{target:document.getElementById("app")});
